{"remainingRequest":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mobiotics/Projects/hancom/FormcontrolLatest/src/FormDesigner/components/organisms/FDContainer/index.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/src/FormDesigner/components/organisms/FDContainer/index.vue","mtime":1612283560000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQppbXBvcnQgeyBDb21wb25lbnQsIEVtaXQsIFByb3AsIFZ1ZSwgUmVmLCBXYXRjaCB9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InDQppbXBvcnQgeyBTdGF0ZSwgQWN0aW9uIH0gZnJvbSAndnVleC1jbGFzcycNCmltcG9ydCBSZXNpemVDb250cm9sIGZyb20gJ0AvRm9ybURlc2lnbmVyL2NvbXBvbmVudHMvb3JnYW5pc21zL0ZEUmVzaXplQ29udHJvbC9pbmRleC52dWUnDQppbXBvcnQgQ29udGV4dE1lbnUgZnJvbSAnQC9Gb3JtRGVzaWduZXIvY29tcG9uZW50cy9hdG9tcy9GRENvbnRleHRNZW51L2luZGV4LnZ1ZScNCmltcG9ydCB7IGNvbnRyb2xDb250ZXh0TWVudSB9IGZyb20gJ0AvRm9ybURlc2lnbmVyL21vZGVscy9jb250cm9sQ29udGV4dE1lbnVEYXRhJw0KaW1wb3J0IHsgdXNlcmZvcm1Db250ZXh0TWVudSB9IGZyb20gJy4uLy4uLy4uL21vZGVscy91c2VyZm9ybUNvbnRleHRNZW51RGF0YScNCmltcG9ydCBHcm91cENvbnRyb2wgZnJvbSAnQC9Gb3JtRGVzaWduZXIvY29tcG9uZW50cy9vcmdhbmlzbXMvRkRHcm91cENvbnRyb2wvaW5kZXgudnVlJw0KaW1wb3J0IHsNCiAgSXNldENoaWxkQ29udHJvbHMsDQogIElhZGRDaGlsZENvbnRyb2xzLA0KICBJc2VsZWN0Q29udHJvbCwNCiAgSXVwZGF0ZUNvbnRyb2wsDQogIEl1cGRhdGVHcm91cCwNCiAgSXVwZGF0ZUNvbnRyb2xFeHRyYURhdGENCn0gZnJvbSAnQC9zdG9yZU1vZHVsZXMvZmQvYWN0aW9ucycNCmltcG9ydCB7IEV2ZW50QnVzIH0gZnJvbSAnLi4vLi4vLi4vZXZlbnQtYnVzJw0KaW1wb3J0IEZEQ29tbW9uTWV0aG9kIGZyb20gJ0AvYXBpL2Fic3RyYWN0L0Zvcm1EZXNpZ25lci9GRENvbW1vbk1ldGhvZCcNCmltcG9ydCBEcmFnU2VsZWN0b3IgZnJvbSAnQC9Gb3JtRGVzaWduZXIvY29tcG9uZW50cy9vcmdhbmlzbXMvRkREcmFnU2VsZWN0b3IvRHJhZ1NlbGVjdG9yLnZ1ZScNCkBDb21wb25lbnQoew0KICBuYW1lOiAnQ29udGFpbmVyJywNCiAgY29tcG9uZW50czogew0KICAgIENvbnRleHRNZW51LA0KICAgIEdyb3VwQ29udHJvbCwNCiAgICBSZXNpemVDb250cm9sLA0KICAgIERyYWdTZWxlY3Rvcg0KICB9DQp9KQ0KZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29udGFpbmVyIGV4dGVuZHMgRkRDb21tb25NZXRob2Qgew0KICAkZWwhOiBIVE1MRGl2RWxlbWVudDsNCiAgY3VycmVudFNlbGVjdGVkR3JvdXA6IHN0cmluZyA9ICcnOw0KICBAUHJvcCgpIGdldFNjcm9sbEJhclg6IHN0cmluZw0KICBAUHJvcCgpIGdldFNjcm9sbEJhclk6IHN0cmluZw0KICBpc0NvbnRyb2xQYXN0ZWQ6IGJvb2xlYW4gPSBmYWxzZQ0KDQogIEBQcm9wKHsgcmVxdWlyZWQ6IHRydWUsIHR5cGU6IFN0cmluZyB9KSBwdWJsaWMgY29udHJvbElkITogc3RyaW5nOw0KICBAUHJvcCh7IHJlcXVpcmVkOiB0cnVlLCB0eXBlOiBTdHJpbmcgfSkgdXNlckZvcm1JZCE6IHN0cmluZzsNCiAgQFByb3AoeyByZXF1aXJlZDogdHJ1ZSwgdHlwZTogU3RyaW5nIH0pIGNvbnRhaW5lcklkITogc3RyaW5nOw0KICBAUHJvcCgpIG1vdXNlQ3Vyc29yRGF0YTogc3RyaW5nOw0KICBAUHJvcCgpIGdldFNhbXBsZURvdFBhdHRlcm46IHsgYmFja2dyb3VuZEltYWdlOiBzdHJpbmc7IGJhY2tncm91bmRTaXplOiBzdHJpbmc7IGJhY2tncm91bmRQb3NpdGlvbjogc3RyaW5nIH0NCiAgQFN0YXRlKChzdGF0ZTogcm9vdFN0YXRlKSA9PiBzdGF0ZS5mZC50b29sQm94U2VsZWN0KSB0b29sQm94U2VsZWN0ITogZmRTdGF0ZVsndG9vbEJveFNlbGVjdCddOw0KICBAU3RhdGUoKHN0YXRlKSA9PiBzdGF0ZS5mZC5zZWxlY3RlZENvbnRyb2xzKQ0KICBzZWxlY3RlZENvbnRyb2xzITogZmRTdGF0ZVsnc2VsZWN0ZWRDb250cm9scyddOw0KICBAU3RhdGUoKHN0YXRlKSA9PiBzdGF0ZS5mZC51c2VyZm9ybURhdGEpIHVzZXJmb3JtRGF0YSE6IHVzZXJmb3JtRGF0YTsNCiAgQFN0YXRlKChzdGF0ZSkgPT4gc3RhdGUuZmQuZ3JvdXBlZENvbnRyb2xzKQ0KICBncm91cGVkQ29udHJvbHMhOiBmZFN0YXRlWydncm91cGVkQ29udHJvbHMnXTsNCg0KICBAQWN0aW9uKCdmZC91cGRhdGVHcm91cCcpIHVwZGF0ZUdyb3VwITogKHBheWxvYWQ6IEl1cGRhdGVHcm91cCkgPT4gdm9pZDsNCiAgQEFjdGlvbignZmQvdXBkYXRlQ29udHJvbEV4dHJhRGF0YScpIHVwZGF0ZUNvbnRyb2xFeHRyYURhdGEhOiAocGF5bG9hZDogSXVwZGF0ZUNvbnRyb2xFeHRyYURhdGEpID0+IHZvaWQ7DQogIEBBY3Rpb24oJ2ZkL3VwZGF0ZUNvbnRyb2wnKSB1cGRhdGVDb250cm9sITogKHBheWxvYWQ6IEl1cGRhdGVDb250cm9sKSA9PiB2b2lkOw0KICBAQWN0aW9uKCdmZC9zZXRDaGlsZENvbnRyb2xzJykgc2V0Q2hpbGRDb250cm9scyE6ICgNCiAgICBwYXlsb2FkOiBJc2V0Q2hpbGRDb250cm9scw0KICApID0+IHZvaWQ7DQogIEBBY3Rpb24oJ2ZkL2FkZENoaWxkQ29udHJvbHMnKSBhZGRDaGlsZENvbnRyb2xzITogKA0KICAgIHBheWxvYWQ6IElhZGRDaGlsZENvbnRyb2xzDQogICkgPT4gdm9pZDsNCiAgQEFjdGlvbignZmQvc2VsZWN0Q29udHJvbCcpIHNlbGVjdENvbnRyb2whOiAocGF5bG9hZDogSXNlbGVjdENvbnRyb2wpID0+IHZvaWQ7DQoNCiAgQFByb3AoKSBpc0VkaXRNb2RlOiBib29sZWFuOw0KICBAUHJvcCgpIHdpZHRoOiBudW1iZXINCiAgQFByb3AoKSBoZWlnaHQ6IG51bWJlcg0KDQogIEBSZWYoJ2dyb3VwUmVmJykgcmVhZG9ubHkgZ3JvdXBSZWYhOiBHcm91cENvbnRyb2w7DQogIEBSZWYoJ3JlZkNvbnRleHRNZW51JykgcmVhZG9ubHkgcmVmQ29udGV4dE1lbnUhOiBDb250ZXh0TWVudTsNCiAgQFJlZignZHJhZ1NlbGVjdG9yJykgcmVhZG9ubHkgZHJhZ1NlbGVjdG9yOiBkcmFnc2VsZWN0b3I7DQogIEBSZWYoJ2NvbnRleHRtZW51JykgcmVhZG9ubHkgY29udGV4dG1lbnU6IEhUTUxEaXZFbGVtZW50Ow0KICBAUmVmKCdwYXJlbnREaXZSZWYnKSBwYXJlbnREaXZSZWY6IEhUTUxEaXZFbGVtZW50DQoNCiAgQFByb3AoKSBjcmVhdGVCYWNrZ3JvdW5kU3RyaW5nOiBzdHJpbmcNCiAgQFByb3AoKSBnZXRTaXplTW9kZTogc3RyaW5nDQogIEBQcm9wKCkgZ2V0UmVwZWF0RGF0YTogc3RyaW5nDQogIEBQcm9wKCkgZ2V0UG9zaXRpb246IHN0cmluZw0KDQogIGNvbnRyb2xDb250ZXh0TWVudTogQXJyYXk8SWNvbnRleHRNZW51PiA9IGNvbnRyb2xDb250ZXh0TWVudTsNCiAgdXNlcmZvcm1Db250ZXh0TWVudTogQXJyYXk8SWNvbnRleHRNZW51PiA9IHVzZXJmb3JtQ29udGV4dE1lbnU7DQogIGhhbmRsZXI6IHN0cmluZyA9ICcnOw0KICBncm91cGhhbmRsZXI6IHN0cmluZyA9ICcnOw0KICBtYWluU2VsZWN0RGF0YTogY29udHJvbERhdGENCiAgY29udGFpbmVyUG9zaXRpb246IElNb3VzZVBvc2l0aW9uID0geyBjbGllbnRYOiAwLCBjbGllbnRZOiAwLCBtb3ZlbWVudFg6IDAsIG1vdmVtZW50WTogMCB9DQogIHNlbGVjdGVkR3JvdXA6IHN0cmluZ1tdID0gW10NCiAgZ3JvdXBTdHlsZUFycmF5OiBBcnJheTxJR3JvdXBTdHlsZT4gPSBbXTsNCiAgdXBkYXRlZERyYWdIZWlnaHQ6IG51bWJlciA9IDA7DQogIHVwZGF0ZWREcmFnV2lkdGg6IG51bWJlciA9IDA7DQogIGlzQ29udHJvbE1vdmU6IGJvb2xlYW4gPSBmYWxzZQ0KDQogIHVwZGF0ZUNoaWxkSGVpZ2h0V2lkdGggKCkgew0KICAgIGlmICh0aGlzLnBhcmVudERpdlJlZikgew0KICAgICAgY29uc3QgY29udHJvbFByb3AgPSB0aGlzLnByb3BDb250cm9sRGF0YS5wcm9wZXJ0aWVzDQogICAgICBjb25zdCB0eXBlID0gdGhpcy5wcm9wQ29udHJvbERhdGEudHlwZQ0KICAgICAgY29uc3QgcGggPSB0eXBlICYmIHR5cGUgPT09ICdQYWdlJyA/IHRoaXMuaGVpZ2h0ISA6IGNvbnRyb2xQcm9wLkhlaWdodCENCiAgICAgIGNvbnN0IHB3ID0gdHlwZSAmJiB0eXBlID09PSAnUGFnZScgPyB0aGlzLndpZHRoISA6IGNvbnRyb2xQcm9wLldpZHRoIQ0KICAgICAgaWYgKHRoaXMuaXNDb250cm9sUGFzdGVkKSB7DQogICAgICAgIHRoaXMudXBkYXRlZERyYWdIZWlnaHQgPSBNYXRoLmFicyh0aGlzLnBhcmVudERpdlJlZi5zY3JvbGxIZWlnaHQgLSBwaCEpDQogICAgICAgIHRoaXMudXBkYXRlZERyYWdXaWR0aCA9IE1hdGguYWJzKHRoaXMucGFyZW50RGl2UmVmLnNjcm9sbFdpZHRoIC0gcHchKQ0KICAgICAgICB0aGlzLmlzQ29udHJvbFBhc3RlZCA9IGZhbHNlDQogICAgICB9DQogICAgICBpZiAodGhpcy5pc0NvbnRyb2xNb3ZlID09PSBmYWxzZSAmJiB0aGlzLmlzQ29udHJvbFBhc3RlZCA9PT0gZmFsc2UpIHsNCiAgICAgICAgdGhpcy51cGRhdGVDb250cm9sKHsNCiAgICAgICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsDQogICAgICAgICAgY29udHJvbElkOiB0aGlzLmNvbnRyb2xJZCwNCiAgICAgICAgICBwcm9wZXJ0eU5hbWU6ICdTY3JvbGxMZWZ0JywNCiAgICAgICAgICB2YWx1ZTogdGhpcy5wYXJlbnREaXZSZWYuc2Nyb2xsTGVmdA0KICAgICAgICB9KQ0KICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2woew0KICAgICAgICAgIHVzZXJGb3JtSWQ6IHRoaXMudXNlckZvcm1JZCwNCiAgICAgICAgICBjb250cm9sSWQ6IHRoaXMuY29udHJvbElkLA0KICAgICAgICAgIHByb3BlcnR5TmFtZTogJ1Njcm9sbFRvcCcsDQogICAgICAgICAgdmFsdWU6IHRoaXMucGFyZW50RGl2UmVmLnNjcm9sbFRvcA0KICAgICAgICB9KQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgY29uc3QgY29udHJvbFByb3AgPSB0aGlzLnByb3BDb250cm9sRGF0YS5wcm9wZXJ0aWVzDQogICAgICAgIHRoaXMuJGVsLnNjcm9sbFRvcCA9IGNvbnRyb2xQcm9wLlNjcm9sbFRvcCENCiAgICAgICAgdGhpcy4kZWwuc2Nyb2xsTGVmdCA9IGNvbnRyb2xQcm9wLlNjcm9sbExlZnQhDQogICAgICAgIHRoaXMudXBkYXRlSXNDb250cm9sTW92ZShmYWxzZSkNCiAgICAgIH0NCiAgICB9DQogIH0NCiAgLyoqDQogICAqIEBkZXNjcmlwdGlvbiBUbyBnZXQgdGhlIHNlbGVjdGVkIGNvbnRhaW5lciAgZnJvbSBjb250cm9scyBhcmUgZHJhZ2dlZA0KICAgKiBAZnVuY3Rpb24gc2VsZWN0ZWRDb250YWluZXINCiAgICovDQogIGdldCBzZWxlY3RlZENvbnRhaW5lciAoKSB7DQogICAgcmV0dXJuIFsuLi50aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5jb250YWluZXJdWzBdDQogIH0NCg0KICAvKioNCiAgICogQGRlc2NyaXB0aW9uIFRvIGdldCB0aGUgc2VsZWN0ZWQgY29udHJvbHMgdG8gYmUgZHJvcHBlZA0KICAgKiBAZnVuY3Rpb24gc2VsZWN0ZWRTZWxlY3QNCiAgICovDQogIGdldCBzZWxlY3RlZFNlbGVjdCAoKSB7DQogICAgaWYgKHRoaXMuZ3JvdXBoYW5kbGVyID09PSAnZ3JvdXBkcmFnJykgew0KICAgICAgY29uc3Qgc2VsZWN0ZWRTZWxlY3QgPSBbXQ0KICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCB0aGlzLnNlbGVjdGVkR3JvdXAubGVuZ3RoOyBrKyspIHsNCiAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRHcm91cFtrXS5zdGFydHNXaXRoKCdncm91cCcpKSB7DQogICAgICAgICAgZm9yIChjb25zdCBpIGluIHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF0pIHsNCiAgICAgICAgICAgIGlmICghaS5zdGFydHNXaXRoKCdJRF9VU0VSRk9STScpKSB7DQogICAgICAgICAgICAgIGNvbnN0IHVzZXJkYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXQ0KICAgICAgICAgICAgICBpZiAodXNlcmRhdGFbaV0ucHJvcGVydGllcy5Hcm91cElEID09PSB0aGlzLnNlbGVjdGVkR3JvdXBba10pIHsNCiAgICAgICAgICAgICAgICBzZWxlY3RlZFNlbGVjdC5wdXNoKGkpDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgc2VsZWN0ZWRTZWxlY3QucHVzaCh0aGlzLnNlbGVjdGVkR3JvdXBba10pDQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHJldHVybiBzZWxlY3RlZFNlbGVjdA0KICAgIH0gZWxzZSB7DQogICAgICByZXR1cm4gdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uc2VsZWN0ZWQNCiAgICB9DQogIH0NCg0KICAvKioNCiAgICogQGRlc2NyaXB0aW9uIFRvIGdldCB0aGUgY29udHJvbHMgdG8gYmUgcmVtb3ZlZCBmcm9tIHRoZSAgc2VsZWN0ZWQgY29udGFpbmVyDQogICAqIEBmdW5jdGlvbiBmcm9tQ29udGFpbmVyQ29udHJvbHMNCiAgICovDQogIGdldCBmcm9tQ29udGFpbmVyQ29udHJvbHMgKCkgew0KICAgIGNvbnN0IGZyb21Db250YWluZXJDb250cm9scyA9IFsuLi50aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW3RoaXMuc2VsZWN0ZWRDb250YWluZXJdLmNvbnRyb2xzXQ0KICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zZWxlY3RlZFNlbGVjdC5sZW5ndGg7IGkrKykgew0KICAgICAgbGV0IHRyYWdldElkOiB1bmRlZmluZWQgfCBzdHJpbmcgPSB0aGlzLnNlbGVjdGVkU2VsZWN0W2ldDQogICAgICBsZXQgdGFyZ2V0SW5kZXggPSBmcm9tQ29udGFpbmVyQ29udHJvbHMuZmluZEluZGV4KChpZCkgPT4gaWQgPT09IHRyYWdldElkKQ0KICAgICAgaWYgKHRhcmdldEluZGV4ICE9PSAtMSkgew0KICAgICAgICBmcm9tQ29udGFpbmVyQ29udHJvbHMuc3BsaWNlKHRhcmdldEluZGV4LCAxKQ0KICAgICAgfQ0KICAgIH0NCiAgICByZXR1cm4gZnJvbUNvbnRhaW5lckNvbnRyb2xzDQogIH0NCg0KICAvKioNCiAgICogQGRlc2NyaXB0aW9uIFRvIHJlbW92ZSBjaGlsQ29udHJvbHMgb2Ygc2VsZWN0ZWQgQ29udGFpbmVyDQogICAqIEBmdW5jdGlvbiByZW1vdmVDaGlsZENvbnRyb2wNCiAgICogQHBhcmFtIHNlbGVjdGVkU2VsZWN0ICAtIGNvbnRyb2wgYXJyYXkgdG8gYmUgZGVsZXRlZA0KICAgKi8NCiAgcmVtb3ZlQ2hpbGRDb250cm9sIChpZDogc3RyaW5nLCBjb250cm9sczogc3RyaW5nW10pIHsNCiAgICBjb25zdCB1c2VyRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF0NCiAgICBjb25zdCBiZWZvcmVDb250cm9scyA9IHVzZXJEYXRhW2lkXS5jb250cm9scw0KICAgIGNvbnN0IGRlbGV0ZUNvbnRyb2xzID0gYmVmb3JlQ29udHJvbHMuZmlsdGVyKHggPT4gIWNvbnRyb2xzLmluY2x1ZGVzKHgpKQ0KICAgIGZvciAoY29uc3Qga2V5IG9mIGRlbGV0ZUNvbnRyb2xzKSB7DQogICAgICB0aGlzLmRlbGV0ZVpJbmRleChrZXkpDQogICAgICB0aGlzLmRlbGV0ZVRhYkluZGV4KGtleSkNCiAgICB9DQoNCiAgICB0aGlzLnNldENoaWxkQ29udHJvbHMoew0KICAgICAgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLA0KICAgICAgY29udGFpbmVySWQ6IGlkLA0KICAgICAgdGFyZ2V0Q29udHJvbHM6IGNvbnRyb2xzDQogICAgfSkNCiAgfQ0KDQogIC8qKg0KICAgKiBAZGVzY3JpcHRpb24gVG8gYWRkIGNoaWxDb250cm9scyBvZiBzZWxlY3RlZCBDb250YWluZXINCiAgICogQGZ1bmN0aW9uIGFkZENoaWxkQ29udHJvbA0KICAgKiBAcGFyYW0gc2VsZWN0ZWRTZWxlY3QgIC0gY29udHJvbCBhcnJheSB0byBiZSBhZGRlZA0KICAgKi8NCiAgYWRkQ2hpbGRDb250cm9sIChzZWxlY3RlZFNlbGVjdDogc3RyaW5nW10pIHsNCiAgICBjb25zdCB1c2VyRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF0NCiAgICBmb3IgKGNvbnN0IGNvbnRyb2wgb2Ygc2VsZWN0ZWRTZWxlY3QpIHsNCiAgICAgIGlmICghdXNlckRhdGFbdGhpcy5jb250YWluZXJJZF0uY29udHJvbHMuaW5jbHVkZXMoY29udHJvbCkpIHsNCiAgICAgICAgdGhpcy5hZGRDaGlsZENvbnRyb2xzKHsNCiAgICAgICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsDQogICAgICAgICAgY29udGFpbmVySWQ6IHRoaXMuY29udGFpbmVySWQsDQogICAgICAgICAgdGFyZ2V0Q29udHJvbHM6IHNlbGVjdGVkU2VsZWN0DQogICAgICAgIH0pDQogICAgICB9DQogICAgfQ0KDQogICAgZm9yIChjb25zdCBpZCBvZiBzZWxlY3RlZFNlbGVjdCkgew0KICAgICAgdGhpcy51cGRhdGVUYWJJbmRleFZhbHVlKGlkKQ0KICAgICAgdGhpcy51cGRhdGVaSW5kZXhWYWx1ZShpZCkNCiAgICB9DQogIH0NCg0KICAvKioNCiAgICogQGRlc2NyaXB0aW9uIFRvIHVwZGF0ZSBQcm9wZXJ0aWVzIG9mIENvbnRyb2wNCiAgICogQGZ1bmN0aW9uIHVwZGF0ZUNvbnRyb2xQcm9wDQogICAqIEBwYXJhbSBpZCAgLSBzZWxjdGVkIGNvbnRyb2xJZA0KICAgKiBAcGFyYW0gcHJvcE5hbWUgIC0gIHNlbGVjdGVkIGNvbnRyb2wgcHJvcGVydHkgTmFtZQ0KICAgKiBAcGFyYW0gcHJvcE5hbWUgIC0gIHNlbGVjdGVkIGNvbnRyb2wgcHJvcGVydHkgVmFsdWUNCiAgICovDQogIHVwZGF0ZUNvbnRyb2xQcm9wIChpZDogc3RyaW5nLCBwcm9wTmFtZToga2V5b2YgY29udHJvbFByb3BlcnRpZXMsIHByb3BWYWx1ZTogbnVtYmVyfCBzdHJpbmcpIHsNCiAgICB0aGlzLnVwZGF0ZUNvbnRyb2woew0KICAgICAgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLA0KICAgICAgY29udHJvbElkOiBpZCwNCiAgICAgIHByb3BlcnR5TmFtZTogcHJvcE5hbWUsDQogICAgICB2YWx1ZTogcHJvcFZhbHVlDQogICAgfSkNCiAgfQ0KDQogIC8qKg0KICAgKiBAZGVzY3JpcHRpb24gVG8gdXBkYXRlIHRoZSBzZWxlY3RlZENvbnRyb2xzIGluIG1haW4gZGF0YQ0KICAgKiBAZnVuY3Rpb24gdXBkYXRlZFNlbGVjdA0KICAgKiBAcGFyYW0gdXBkYXRlZFNlbGVjdCAgLSBzZWxjdGVkIENvbnRhaW5lcklkDQogICAqIEBwYXJhbSBzZWxBcnJ5ICAtIHNlbGN0ZWQgY29udHJvbExpc3QNCiAgICovDQogIHVwZGF0ZWRTZWxlY3QgKGNvbmF0aW5lcjogc3RyaW5nW10sIHNlbEFycnk6IHN0cmluZ1tdKSB7DQogICAgdGhpcy5zZWxlY3RDb250cm9sKHsNCiAgICAgIHVzZXJGb3JtSWQ6IHRoaXMudXNlckZvcm1JZCwNCiAgICAgIHNlbGVjdDogew0KICAgICAgICBjb250YWluZXI6IGNvbmF0aW5lciwNCiAgICAgICAgc2VsZWN0ZWQ6IHNlbEFycnkNCiAgICAgIH0NCiAgICB9KQ0KICB9DQoNCiAgLyoqDQogICAqIEBkZXNjcmlwdGlvbiBJZiBjb250cm9sIGluc2lkZSB0aGUgZ3JvdXAgaXMgc2VsZWN0ZWQgZHJvcHBlZCBpbnRvIG90aGVyIGNvbnRhaW5lcg0KICAgKiBAZnVuY3Rpb24gdXBkYXRlR3JvdXBDb250cm9sDQogICAqIEBwYXJhbSBtYWluU2VsZWN0R3JvdXAgIC0gc2VsZWN0ZWQgZ3JvdXANCiAgICovDQogIHVwZGF0ZUdyb3VwQ29udHJvbCAobWFpblNlbGVjdEdyb3VwOiBzdHJpbmcpIHsNCiAgICBjb25zdCBwcmVzZW5ldENvbnRyb2w6IHN0cmluZ1tdID0gW10NCiAgICBpZiAobWFpblNlbGVjdEdyb3VwICYmIG1haW5TZWxlY3RHcm91cCAhPT0gJycpIHsNCiAgICAgIGZvciAobGV0IGNvbnRyb2wgaW4gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXSkgew0KICAgICAgICBjb25zdCBjb250cm9sR3JvdXBJZCA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY29udHJvbF0ucHJvcGVydGllcy5Hcm91cElEIQ0KICAgICAgICBpZiAoY29udHJvbEdyb3VwSWQgJiYgY29udHJvbEdyb3VwSWQgPT09IG1haW5TZWxlY3RHcm91cCkgew0KICAgICAgICAgIHByZXNlbmV0Q29udHJvbC5wdXNoKGNvbnRyb2wpDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogICAgaWYgKHByZXNlbmV0Q29udHJvbC5sZW5ndGggPT09IDEpIHsNCiAgICAgIGNvbnN0IGdyb3VwQXJyYXk6IHN0cmluZ1tdID0gWy4uLnRoaXMuZ3JvdXBlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0hLmdyb3VwQXJyYXkhXQ0KICAgICAgY29uc3QgaW5kZXggPSBncm91cEFycmF5LmZpbmRJbmRleCgodmFsKSA9PiB2YWwgPT09IG1haW5TZWxlY3RHcm91cCkNCiAgICAgIGdyb3VwQXJyYXkuc3BsaWNlKGluZGV4LCAxKQ0KICAgICAgdGhpcy51cGRhdGVHcm91cCh7DQogICAgICAgIHVzZXJGb3JtSWQ6IHRoaXMudXNlckZvcm1JZCwNCiAgICAgICAgZ3JvdXBBcnJheTogZ3JvdXBBcnJheQ0KICAgICAgfSkNCiAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3AocHJlc2VuZXRDb250cm9sWzBdLCAnR3JvdXBJRCcsICcnKQ0KICAgIH0NCiAgfQ0KICAvKioNCiAgICogQGRlc2NyaXB0aW9uIHRvIGRyYWcgYW5kIGRyb3AgdGhlIGNvbnRyb2wgYW5kIGdyb3VwIGludG8gcmVzcGVjdGl2ZSBjb250YWluZXINCiAgICogQGZ1bmN0aW9uIG9uTW91c2VVcA0KICAgKiBAcGFyYW0gZXZlbnQgIC0gaXQgaXMgb2YgdHlwZSBNb3VzZUV2ZW50DQogICAqIEBldmVudCBtb3VzZXVwDQogICAqLw0KICBvbk1vdXNlVXAgKGV2ZW50OiBNb3VzZUV2ZW50KSB7DQogICAgaWYgKGRvY3VtZW50Lm9ubW91c2Vtb3ZlICYmIGRvY3VtZW50Lm9ubW91c2V1cCAmJiAodGhpcy5oYW5kbGVyID09PSAnZHJhZycgfHwgdGhpcy5oYW5kbGVyID09PSAnZnJhbWVEcmFnJyB8fCB0aGlzLmdyb3VwaGFuZGxlciA9PT0gJ2dyb3VwZHJhZycpKSB7DQogICAgICBjb25zdCB1c2VyRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF0NCiAgICAgIGNvbnN0IGNvbnRhaW5lclR5cGUgPSB1c2VyRGF0YVt0aGlzLmNvbnRhaW5lcklkXS50eXBlID09PSAnUGFnZScgJiYgdXNlckRhdGFbdGhpcy5nZXRDb250YWluZXJMaXN0KHRoaXMuY29udGFpbmVySWQpWzBdXS5wcm9wZXJ0aWVzLlZhbHVlID09PSAtMQ0KICAgICAgaWYgKCFjb250YWluZXJUeXBlKSB7DQogICAgICAgIGxldCBtb3ZlVmFsdWVYOiBudW1iZXIgPSAwDQogICAgICAgIGxldCBtb3ZlVmFsdWVZOiBudW1iZXIgPSAwDQogICAgICAgIGxldCBtYWluU2VsZWN0OiBzdHJpbmcgPSAnJw0KICAgICAgICBsZXQgcGFyZW50Q29uYXRpbmVyID0gJycNCiAgICAgICAgbGV0IGNvdW50ID0gMA0KICAgICAgICBsZXQgdGVtcEV2ZW50ID0ge30NCiAgICAgICAgdGhpcy5zZWxlY3RlZEdyb3VwID0gdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uc2VsZWN0ZWQNCiAgICAgICAgaWYgKHRoaXMuZ3JvdXBoYW5kbGVyID09PSAnZ3JvdXBkcmFnJykgew0KICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KA0KICAgICAgICAgICAgJ2dldEdyb3VwTW92ZVZhbHVlJywNCiAgICAgICAgICAgIChvZmZzZXRYOiBudW1iZXIsIG9mZnNldFk6IG51bWJlciwgaWQ6IHN0cmluZywgdGVtcEV2ZW50T2JqOiBNb3VzZUV2ZW50KSA9PiB7DQogICAgICAgICAgICAgIG1vdmVWYWx1ZVggPSBvZmZzZXRYDQogICAgICAgICAgICAgIG1vdmVWYWx1ZVkgPSBvZmZzZXRZDQogICAgICAgICAgICAgIHRlbXBFdmVudCA9IE9iamVjdC5rZXlzKHRlbXBFdmVudE9iaikubGVuZ3RoID09PSAwID8gdGVtcEV2ZW50IDogdGVtcEV2ZW50T2JqDQogICAgICAgICAgICB9DQogICAgICAgICAgKQ0KICAgICAgICAgIG1haW5TZWxlY3QgPSB0aGlzLmdldFNlbGVjdGVkQ29udHJvbHNEYXRhcyFbMF0NCiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmhhbmRsZXIgPT09ICdkcmFnJykgew0KICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KA0KICAgICAgICAgICAgJ2dldE1vdmVWYWx1ZScsDQogICAgICAgICAgICAob2Zmc2V0WDogbnVtYmVyLCBvZmZzZXRZOiBudW1iZXIsIGlkOiBzdHJpbmcpID0+IHsNCiAgICAgICAgICAgICAgbW92ZVZhbHVlWCA9IG9mZnNldFgNCiAgICAgICAgICAgICAgbW92ZVZhbHVlWSA9IG9mZnNldFkNCiAgICAgICAgICAgICAgbWFpblNlbGVjdCA9IGlkDQogICAgICAgICAgICB9DQogICAgICAgICAgKQ0KICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaGFuZGxlciA9PT0gJ2ZyYW1lRHJhZycpIHsNCiAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgNCiAgICAgICAgICAgICdnZXRNb3ZlVmFsdWUnLA0KICAgICAgICAgICAgKG9mZnNldFg6IG51bWJlciwgb2Zmc2V0WTogbnVtYmVyLCBpZDogc3RyaW5nLCBwYXJlbnRDb250cm9sOiBzdHJpbmcpID0+IHsNCiAgICAgICAgICAgICAgbW92ZVZhbHVlWCA9IG9mZnNldFgNCiAgICAgICAgICAgICAgbW92ZVZhbHVlWSA9IG9mZnNldFkNCiAgICAgICAgICAgICAgbWFpblNlbGVjdCA9IGlkDQogICAgICAgICAgICAgIHBhcmVudENvbmF0aW5lciA9IHBhcmVudENvbnRyb2wNCiAgICAgICAgICAgIH0NCiAgICAgICAgICApDQogICAgICAgIH0NCiAgICAgICAgaWYgKG1haW5TZWxlY3QgJiYgIXRoaXMuZ2V0U2VsZWN0ZWRDb250cm9sc0RhdGFzIS5pbmNsdWRlcyh0aGlzLmNvbnRhaW5lcklkKSkgew0KICAgICAgICAgIGNvdW50ID0gY291bnQgKyAxDQogICAgICAgICAgbGV0IGZyYW1lQ29uZGl0aW9uOiBib29sZWFuID0gZmFsc2UNCiAgICAgICAgICBpZiAodGhpcy5oYW5kbGVyID09PSAnZnJhbWVEcmFnJykgew0KICAgICAgICAgICAgY29uc3QgaXNDaGlsZCA9IHRoaXMuZ2V0Q2hpbGRDb250cm9sKG1haW5TZWxlY3QpLmluY2x1ZGVzKHRoaXMuY29udGFpbmVySWQpIHx8IHRoaXMuY29udGFpbmVySWQgPT09IG1haW5TZWxlY3QNCiAgICAgICAgICAgIGZyYW1lQ29uZGl0aW9uID0gKGlzQ2hpbGQgPT09IGZhbHNlICYmIHBhcmVudENvbmF0aW5lciA9PT0gdGhpcy5jb250YWluZXJJZCkgfHwNCiAgICAgICAgICAoaXNDaGlsZCA9PT0gZmFsc2UgJiYgdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uc2VsZWN0ZWQuaW5jbHVkZXMobWFpblNlbGVjdCkpIHx8DQogICAgICAgICAgKGlzQ2hpbGQgPT09IGZhbHNlICYmIGNvdW50ID09PSAxKQ0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoKHRoaXMuaGFuZGxlciA9PT0gJ2ZyYW1lRHJhZycgJiYgZnJhbWVDb25kaXRpb24pIHx8IHRoaXMuaGFuZGxlciA9PT0gJ2RyYWcnIHx8IHRoaXMuZ3JvdXBoYW5kbGVyID09PSAnZ3JvdXBkcmFnJykgew0KICAgICAgICAgICAgY29uc3QgY3VycmVudENvbnRyb2xzRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF0NCiAgICAgICAgICAgIGNvbnN0IG1haW5TZWxlY3REYXRhID0gY3VycmVudENvbnRyb2xzRGF0YVttYWluU2VsZWN0XQ0KICAgICAgICAgICAgY29uc3QgbWFpblNlbGVjdFggPSBtYWluU2VsZWN0RGF0YS5wcm9wZXJ0aWVzLkxlZnQNCiAgICAgICAgICAgIGNvbnN0IG1haW5TZWxlY3RZID0gbWFpblNlbGVjdERhdGEucHJvcGVydGllcy5Ub3ANCiAgICAgICAgICAgIGNvbnN0IGNvbnRhaW5lclggPSBldmVudC5jbGllbnRYIC0gdGhpcy4kZWwuZ2V0Q2xpZW50UmVjdHMoKVswXS54DQogICAgICAgICAgICBjb25zdCBjb250YWluZXJZID0gZXZlbnQuY2xpZW50WSAtIHRoaXMuJGVsLmdldENsaWVudFJlY3RzKClbMF0ueQ0KICAgICAgICAgICAgY29uc3QgbWFpblNlbGVjdEdyb3VwOiBzdHJpbmcgPSBtYWluU2VsZWN0RGF0YS5wcm9wZXJ0aWVzLkdyb3VwSUQhDQogICAgICAgICAgICBjb25zdCBzZWxlY3RlZFNlbGVjdCA9IHRoaXMuaGFuZGxlciA9PT0gJ2ZyYW1lRHJhZycgPyAodGhpcy5zZWxlY3RlZFNlbGVjdC5pbmNsdWRlcyhtYWluU2VsZWN0KSA/IHRoaXMuc2VsZWN0ZWRTZWxlY3QgOiBbbWFpblNlbGVjdF0pIDogdGhpcy5zZWxlY3RlZFNlbGVjdA0KICAgICAgICAgICAgaWYgKHR5cGVvZiBtYWluU2VsZWN0WCA9PT0gJ251bWJlcicgJiYgdHlwZW9mIG1haW5TZWxlY3RZID09PSAnbnVtYmVyJykgew0KICAgICAgICAgICAgICBpZiAoKHRoaXMuaGFuZGxlciA9PT0gJ2ZyYW1lRHJhZycgfHwgdGhpcy5oYW5kbGVyID09PSAnZHJhZycpKSB7DQogICAgICAgICAgICAgICAgc2VsZWN0ZWRTZWxlY3QuZm9yRWFjaCgoaWQpID0+IHsNCiAgICAgICAgICAgICAgICAgIGNvbnN0IHRhcmdldERhdGEgPSBjdXJyZW50Q29udHJvbHNEYXRhW2lkXS5wcm9wZXJ0aWVzDQogICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRMZWZ0ID0gdGFyZ2V0RGF0YS5MZWZ0DQogICAgICAgICAgICAgICAgICBjb25zdCB0YXJnZXRUb3AgPSB0YXJnZXREYXRhLlRvcA0KICAgICAgICAgICAgICAgICAgY29uc3QgY29udGFpbmVyUHJvcCA9IHVzZXJEYXRhW3RoaXMuY29udGFpbmVySWRdLnByb3BlcnRpZXMNCiAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgdGFyZ2V0VG9wID09PSAnbnVtYmVyJyAmJiB0eXBlb2YgdGFyZ2V0TGVmdCA9PT0gJ251bWJlcicpIHsNCiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGVmdFZhbHVlID0gY29udGFpbmVyUHJvcC5TY3JvbGxMZWZ0ISA+IDAgPyAoY29udGFpbmVyWCArIHRhcmdldExlZnQgLSBtYWluU2VsZWN0WCAtIG1vdmVWYWx1ZVgpICsgY29udGFpbmVyUHJvcC5TY3JvbGxMZWZ0ISA6IGNvbnRhaW5lclggKyB0YXJnZXRMZWZ0IC0gbWFpblNlbGVjdFggLSBtb3ZlVmFsdWVYDQogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRvcFZhbHVlID0gY29udGFpbmVyUHJvcC5TY3JvbGxUb3AhID4gMCA/IChjb250YWluZXJZICsgdGFyZ2V0VG9wIC0gbWFpblNlbGVjdFkgLSBtb3ZlVmFsdWVZKSArIGNvbnRhaW5lclByb3AuU2Nyb2xsVG9wISA6IGNvbnRhaW5lclkgKyB0YXJnZXRUb3AgLSBtYWluU2VsZWN0WSAtIG1vdmVWYWx1ZVkNCiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcChpZCwgJ0xlZnQnLCBsZWZ0VmFsdWUpDQogICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3AoaWQsICdUb3AnLCB0b3BWYWx1ZSkNCiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaGFuZGxlciA9PT0gJ2RyYWcnKSB7DQogICAgICAgICAgICAgICAgICAgICAgaWYgKG1haW5TZWxlY3RHcm91cCAhPT0gJycgJiYgdGhpcy5zZWxlY3RlZENvbnRhaW5lciAhPT0gdGhpcy5jb250YWluZXJJZCkgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcChpZCwgJ0dyb3VwSUQnLCAnJykNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlR3JvdXBDb250cm9sKG1haW5TZWxlY3RHcm91cCkNCiAgICAgICAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZ3JvdXBoYW5kbGVyID09PSAnZ3JvdXBkcmFnJyAmJiB0aGlzLnNlbGVjdGVkQ29udGFpbmVyID09PSB0aGlzLmNvbnRhaW5lcklkKSB7DQogICAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2dldENsaWVudFZhbHVlJywgJ3NhbWUnKQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpZiAodGhpcy5oYW5kbGVyID09PSAnZnJhbWVEcmFnJyAmJiB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW3RoaXMuY29udGFpbmVySWRdLmNvbnRyb2xzLmluY2x1ZGVzKG1haW5TZWxlY3QpKSB7DQogICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpDQogICAgICAgICAgICAgIGRvY3VtZW50Lm9ubW91c2V1cChldmVudCkNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkQ29udGFpbmVyICE9PSB0aGlzLmNvbnRhaW5lcklkKSB7DQogICAgICAgICAgICAgICAgY29uc3QgbWFpblNlbENvbnRhaW5lciA9IHRoaXMuZ2V0Q29udGFpbmVyTGlzdChtYWluU2VsZWN0KVswXQ0KICAgICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5zZWxlY3RlZC5pbmNsdWRlcyhtYWluU2VsZWN0KSB8fCB0aGlzLmdyb3VwaGFuZGxlciA9PT0gJ2dyb3VwZHJhZycpIHsNCiAgICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQ2hpbGRDb250cm9sKHRoaXMuc2VsZWN0ZWRDb250YWluZXIsIHRoaXMuZnJvbUNvbnRhaW5lckNvbnRyb2xzKQ0KICAgICAgICAgICAgICAgICAgdGhpcy5hZGRDaGlsZENvbnRyb2woc2VsZWN0ZWRTZWxlY3QpDQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xzID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVttYWluU2VsQ29udGFpbmVyXS5jb250cm9scw0KICAgICAgICAgICAgICAgICAgY29uc3QgcmVtb3ZlQ29udHJvbCA9IGNvbnRyb2xzLmZpbHRlcihlID0+IGUgIT09IG1haW5TZWxlY3QpDQogICAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUNoaWxkQ29udHJvbChtYWluU2VsQ29udGFpbmVyLCByZW1vdmVDb250cm9sKQ0KICAgICAgICAgICAgICAgICAgdGhpcy5hZGRDaGlsZENvbnRyb2woW21haW5TZWxlY3RdKQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBpZiAodGhpcy5ncm91cGhhbmRsZXIgPT09ICdncm91cGRyYWcnKSB7DQogICAgICAgICAgICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IHRoaXMuc2VsZWN0ZWRHcm91cC5sZW5ndGg7IGsrKykgew0KICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZEdyb3VwW2tdLnN0YXJ0c1dpdGgoJ2dyb3VwJykpIHsNCiAgICAgICAgICAgICAgICAgICAgICB0aGlzLmNyZWF0ZUdyb3VwKHRoaXMuc2VsZWN0ZWRHcm91cFtrXSkNCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgIGlmICh0aGlzLmdyb3VwaGFuZGxlciA9PT0gJ2dyb3VwZHJhZycpIHsNCiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmdyb3VwaGFuZGxlciA9PT0gJ2dyb3VwZHJhZycgJiYgdGhpcy5zZWxlY3RlZENvbnRhaW5lciAhPT0gdGhpcy5jb250YWluZXJJZCkgew0KICAgICAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnZ2V0Q2xpZW50VmFsdWUnLCAnZGlmZmVyZW50JywgY29udGFpbmVyWCwgY29udGFpbmVyWSwgZXZlbnQsIHRoaXMuY29udGFpbmVySWQsIHRlbXBFdmVudCkNCiAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgIGNvbnN0IHNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uc2VsZWN0ZWQNCiAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlZFNlbGVjdCh0aGlzLmdldENvbnRhaW5lckxpc3Qoc2VsZWN0ZWRbMF0pLCBzZWxlY3RlZCkNCiAgICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVkU2VsZWN0KHRoaXMuZ2V0Q29udGFpbmVyTGlzdCh0aGlzLnNlbGVjdGVkU2VsZWN0WzBdKSwgdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uc2VsZWN0ZWQpDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpDQogICAgICAgICAgICAgIGRvY3VtZW50Lm9ubW91c2V1cChldmVudCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpDQogICAgICAgIGRvY3VtZW50Lm9ubW91c2V1cChldmVudCkNCiAgICAgIH0NCiAgICB9DQogIH0NCg0KICAvKioNCiAgICogQGRlc2NyaXB0aW9uIHN0eWxlIG9iamVjdCB0byBkeW5hbWljYWxseSBjaGFuZ2luZyB0aGUgc3R5bGVzIG9mICB0aGUgY29udGV4dE1lbnUgY29tcG9uZW50IGJhc2VkIG9uIHByb3BDb250cm9sRGF0YQ0KICAgKiBAZnVuY3Rpb24gc3R5bGVPYmplY3QNCiAgICoNCiAgICovDQogIGdldCBmaWx0ZXJTZWxlY3RlZCAoKSB7DQogICAgY29uc3QgcmVzdWx0ID0NCiAgICAgIHRoaXMuY3VycmVudFNlbGVjdGVkR3JvdXAgPT09ICcnDQogICAgICAgID8gdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uc2VsZWN0ZWQuZmlsdGVyKChJZCkgPT4gew0KICAgICAgICAgIGlmICh0eXBlb2YgSWQgPT09ICdzdHJpbmcnKSB7DQogICAgICAgICAgICByZXR1cm4gSWQuc3RhcnRzV2l0aCgnZ3JvdXAnKQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgICAgOiBbdGhpcy5jdXJyZW50U2VsZWN0ZWRHcm91cF0NCiAgICByZXR1cm4gcmVzdWx0DQogIH0NCiAgY3JlYXRlR3JvdXAgKGdyb3VwSWQ6IHN0cmluZykgew0KICAgIHRoaXMuZ3JvdXBSZWYuZ3JvdXBTdHlsZShncm91cElkKQ0KICB9DQogIG11bGRyYWdDb250cm9sICh2YWw6IElEcmFnUmVzaXplR3JvdXApIHsNCiAgICB0aGlzLmdyb3VwUmVmLmhhbmRsZU1vdXNlRG93bih2YWwuZXZlbnQsIHZhbC5oYW5kbGVyKQ0KICB9DQogIGRyYWdDb250cm9sIChldmVudDogTW91c2VFdmVudCkgew0KICAgIHRoaXMuZ3JvdXBSZWYuaGFuZGxlTW91c2VEb3duKGV2ZW50LCAnZHJhZycpDQogIH0NCiAgLyoqDQogICAqIEBkZXNjcmlwdGlvbiBzdHlsZSBvYmplY3QgdG8gZHluYW1pY2FsbHkgY2hhbmdpbmcgdGhlIHN0eWxlcyBvZiAgdGhlIGRhcmctc2VsY3RvciBjb21wb25lbnQgYmFzZWQgb24gcHJvcENvbnRyb2xEYXRhDQogICAqIEBmdW5jdGlvbiBkcmFnU2VsZWN0b3JTdHlsZQ0KICAgKg0KICAgKi8NCiAgZ2V0IGRyYWdTZWxlY3RvclN0eWxlICgpIHsNCiAgICBjb25zdCBjb250cm9sUHJvcCA9IHRoaXMucHJvcENvbnRyb2xEYXRhLnByb3BlcnRpZXMNCiAgICBjb25zdCB0eXBlID0gdGhpcy5wcm9wQ29udHJvbERhdGEudHlwZQ0KICAgIGNvbnN0IHBoID0gdHlwZSAmJiB0eXBlID09PSAnUGFnZScgPyB0aGlzLmhlaWdodCEgOiB0aGlzLnByb3BDb250cm9sRGF0YS5wcm9wZXJ0aWVzLkhlaWdodCENCiAgICBjb25zdCBwdyA9IHR5cGUgJiYgdHlwZSA9PT0gJ1BhZ2UnID8gdGhpcy53aWR0aCEgOiB0aGlzLnByb3BDb250cm9sRGF0YS5wcm9wZXJ0aWVzLldpZHRoIQ0KICAgIHJldHVybiB7DQogICAgICBoZWlnaHQ6IHBoICsgdGhpcy51cGRhdGVkRHJhZ0hlaWdodCArICdweCcsDQogICAgICB3aWR0aDogcHcgKyB0aGlzLnVwZGF0ZWREcmFnV2lkdGggKyAncHgnLA0KICAgICAgY3Vyc29yOiB0eXBlICYmIHR5cGUgPT09ICdQYWdlJyA/ICdkZWZhdWx0ICFpbXBvcnRhbnQnDQogICAgICAgIDogdGhpcy5wcm9wQ29udHJvbERhdGEucHJvcGVydGllcy5Nb3VzZVBvaW50ZXIgIT09IDAgfHwNCiAgICAgICAgdGhpcy5wcm9wQ29udHJvbERhdGEucHJvcGVydGllcy5Nb3VzZUljb24gIT09ICcnDQogICAgICAgICAgPyBgJHt0aGlzLm1vdXNlQ3Vyc29yRGF0YX0gIWltcG9ydGFudGANCiAgICAgICAgICA6IHRoaXMudG9vbEJveFNlbGVjdCAhPT0gJ1NlbGVjdCcgPyAnY3Jvc3NoYWlyICFpbXBvcnRhbnQnIDogJ2RlZmF1bHQgIWltcG9ydGFudCcNCiAgICB9DQogIH0NCiAgZ2V0IHBpY3R1cmVDaGlsZERpdiAoKSB7DQogICAgY29uc3QgY29udHJvbFByb3AgPSB0aGlzLnByb3BDb250cm9sRGF0YS5wcm9wZXJ0aWVzDQogICAgbGV0IGJhY2tncm91bmRTdHlsZSA9IHt9DQogICAgaWYgKGNvbnRyb2xQcm9wLlBpY3R1cmUgIT09ICcnICYmIGNvbnRyb2xQcm9wLlNjcm9sbEJhcnMhID4gMCkgew0KICAgICAgYmFja2dyb3VuZFN0eWxlID0ge30NCiAgICB9IGVsc2Ugew0KICAgICAgYmFja2dyb3VuZFN0eWxlID0gew0KICAgICAgICBiYWNrZ3JvdW5kSW1hZ2U6IHRoaXMuZ2V0U2FtcGxlRG90UGF0dGVybi5iYWNrZ3JvdW5kSW1hZ2UsDQogICAgICAgIGJhY2tncm91bmRTaXplOiB0aGlzLmdldFNhbXBsZURvdFBhdHRlcm4uYmFja2dyb3VuZFNpemUsDQogICAgICAgIGJhY2tncm91bmRSZXBlYXQ6ICdyZXBlYXQnLA0KICAgICAgICBiYWNrZ3JvdW5kUG9zaXRpb246IHRoaXMuZ2V0U2FtcGxlRG90UGF0dGVybi5iYWNrZ3JvdW5kUG9zaXRpb24NCiAgICAgIH0NCiAgICB9DQogICAgcmV0dXJuIHsNCiAgICAgIC4uLmJhY2tncm91bmRTdHlsZSwNCiAgICAgIHdpZHRoOiAnMTAwJScsDQogICAgICBoZWlnaHQ6ICcxMDAlJw0KICAgIH0NCiAgfQ0KICBnZXQgY2hpbGREaXYgKCkgew0KICAgIGNvbnN0IGNvbnRyb2xQcm9wID0gdGhpcy5wcm9wQ29udHJvbERhdGEucHJvcGVydGllcw0KICAgIGNvbnN0IHR5cGUgPSB0aGlzLnByb3BDb250cm9sRGF0YS50eXBlDQogICAgY29uc3QgcGggPSB0eXBlICYmIHR5cGUgPT09ICdQYWdlJyA/IHRoaXMuaGVpZ2h0ISA6IHRoaXMucHJvcENvbnRyb2xEYXRhLnByb3BlcnRpZXMuSGVpZ2h0IQ0KICAgIGNvbnN0IHB3ID0gdHlwZSAmJiB0eXBlID09PSAnUGFnZScgPyB0aGlzLndpZHRoISA6IHRoaXMucHJvcENvbnRyb2xEYXRhLnByb3BlcnRpZXMuV2lkdGghDQogICAgcmV0dXJuIHsNCiAgICAgIGhlaWdodDogKGNvbnRyb2xQcm9wLlNjcm9sbEhlaWdodCA9PT0gMCB8fCBjb250cm9sUHJvcC5TY3JvbGxIZWlnaHQhIDwgcGgpID8gcGggKyB0aGlzLnVwZGF0ZWREcmFnSGVpZ2h0ICsgJ3B4JyA6IGNvbnRyb2xQcm9wLlNjcm9sbEhlaWdodCEgKyAncHgnLA0KICAgICAgd2lkdGg6IChjb250cm9sUHJvcC5TY3JvbGxXaWR0aCA9PT0gMCB8fCBjb250cm9sUHJvcC5TY3JvbGxXaWR0aCEgPCBwdykgPyBwdyArIHRoaXMudXBkYXRlZERyYWdXaWR0aCArICdweCcgOiBjb250cm9sUHJvcC5TY3JvbGxXaWR0aCEgKyAncHgnLA0KICAgICAgYmFja2dyb3VuZEltYWdlOiBjb250cm9sUHJvcC5QaWN0dXJlID09PSAnJw0KICAgICAgICA/IHRoaXMuZ2V0U2FtcGxlRG90UGF0dGVybi5iYWNrZ3JvdW5kSW1hZ2UNCiAgICAgICAgOiB0aGlzLmNyZWF0ZUJhY2tncm91bmRTdHJpbmcsDQogICAgICBiYWNrZ3JvdW5kU2l6ZTogY29udHJvbFByb3AuUGljdHVyZSA9PT0gJycNCiAgICAgICAgPyB0aGlzLmdldFNhbXBsZURvdFBhdHRlcm4uYmFja2dyb3VuZFNpemUNCiAgICAgICAgOiB0aGlzLmdldFNpemVNb2RlLA0KICAgICAgYmFja2dyb3VuZENvbG9yOiBjb250cm9sUHJvcC5QaWN0dXJlICE9PSAnJyA/ICcnIDogY29udHJvbFByb3AuQmFja0NvbG9yLA0KICAgICAgYmFja2dyb3VuZFJlcGVhdDogdGhpcy5nZXRSZXBlYXREYXRhLA0KICAgICAgYmFja2dyb3VuZFBvc2l0aW9uOiBjb250cm9sUHJvcC5QaWN0dXJlICE9PSAnJw0KICAgICAgICA/IHRoaXMuZ2V0UG9zaXRpb24NCiAgICAgICAgOiB0aGlzLmdldFNhbXBsZURvdFBhdHRlcm4uYmFja2dyb3VuZFBvc2l0aW9uLA0KICAgICAgb3BhY3RpdHk6IGNvbnRyb2xQcm9wLlBpY3R1cmUgPT09ICcnID8gJzAnIDogJzEnDQogICAgfQ0KICB9DQogIC8qKg0KICAgKiBAZGVzY3JpcHRpb24gcHJvcENvbnRyb2xEYXRhIGlzIGFic3RyYWN0IGNsYXNzIHByb3ZpZGluZyBpbXBsZW1lbnRhdGlvbiBpbiBGRENvbnRhaW5lciBieSBwYXNzaW5nDQogICAqIHVzZXJGb3JtSWQgYW5kIGNvbnRyb2xJZCB3aGljaCBpcyB0YWtlbiBhcyBwcm9wcyBmcm9tIHBhcmVudCBDb21wb25lbnQNCiAgICogQGZ1bmN0aW9uIHByb3BDb250cm9sRGF0YQ0KICAgKg0KICAgKi8NCiAgZ2V0IHByb3BDb250cm9sRGF0YSAoKTogY29udHJvbERhdGEgew0KICAgIHJldHVybiB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW3RoaXMuY29udHJvbElkXQ0KICB9DQoNCiAgLyoqDQogICAqIEBkZXNjcmlwdGlvbiBUbyBkaXNwbGF5IGNvbnRleHRtZW51IG9mIGNvbnRyb2wNCiAgICogQGZ1bmN0aW9uIG9wZW5Db250ZXh0TWVudQ0KICAgKiBAcGFyYW0gZSBpdCBpcyB0eXBlIG9mIG1vdXNlRXZlbnQNCiAgICogQHBhcmFtIHBhcmVudElEIGlzIHRoZSBVc2VyRm9ybUlkIGluIHdoaWNoIHRoZSBjb250cm9sIHJlc2lkZXMNCiAgICogQHBhcmFtIGNvbnRyb2xJZCBpcyB0aGUgc2VsZWN0ZWQgY29udHJvbCBvZiB3aGljaCBjb250ZXh0IGhhcyB0byBiZSBkaXNwbGF5ZWQNCiAgICovDQogIG9wZW5Db250ZXh0TWVudSAoZTogTW91c2VFdmVudCwgcGFyZW50SUQ6IHN0cmluZywgY29udHJvbElEOiBzdHJpbmcsIHR5cGU6IHN0cmluZywgbW9kZTogYm9vbGVhbikgew0KICAgIEV2ZW50QnVzLiRlbWl0KCdjb250ZXh0TWVudURpc3BsYXknLCBldmVudCwgcGFyZW50SUQsIGNvbnRyb2xJRCwgdHlwZSwgbW9kZSkNCiAgfQ0KICBjcmVhdGVkICgpIHsNCiAgICBFdmVudEJ1cy4kb24oJ2hhbmRsZU5hbWUnLCAoaGFuZGxlcjogc3RyaW5nKSA9PiB7DQogICAgICB0aGlzLmhhbmRsZXIgPSBoYW5kbGVyDQogICAgfSkNCiAgICBFdmVudEJ1cy4kb24oJ2dyb3VwRHJhZycsIChoYW5kbGVyOiBzdHJpbmcpID0+IHsNCiAgICAgIHRoaXMuZ3JvdXBoYW5kbGVyID0gaGFuZGxlcg0KICAgIH0pDQogICAgRXZlbnRCdXMuJG9uKCdjcmVhdGVHcm91cCcsIChncm91cElkOiBzdHJpbmcpID0+IHsNCiAgICAgIHRoaXMuY3JlYXRlR3JvdXAoZ3JvdXBJZCkNCiAgICB9KQ0KICAgIEV2ZW50QnVzLiRvbigndXBkYXRlSXNDb250cm9sTW92ZScsICh2YWw6IGJvb2xlYW4pID0+IHsNCiAgICAgIHRoaXMudXBkYXRlSXNDb250cm9sTW92ZSh2YWwpDQogICAgfSkNCiAgICBFdmVudEJ1cy4kb24oJ2FmdGVyUGFzdGUnLCAoKSA9PiB7DQogICAgICBpZiAodGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uY29udGFpbmVyWzBdID09PSB0aGlzLmNvbnRhaW5lcklkKSB7DQogICAgICAgIHRoaXMuaXNDb250cm9sUGFzdGVkID0gdHJ1ZQ0KICAgICAgfQ0KICAgIH0pDQogIH0NCiAgZGVzdHJveWVkICgpIHsNCiAgICAvLyBFdmVudEJ1cy4kb2ZmKCdoYW5kbGVOYW1lJykNCiAgICAvLyBFdmVudEJ1cy4kb2ZmKCdncm91cERyYWcnKQ0KICAgIEV2ZW50QnVzLiRvZmYoJ2FmdGVyUGFzdGUnKQ0KICB9DQogIEBXYXRjaCgnc2VsZWN0ZWRDb250cm9scycsIHsgZGVlcDogdHJ1ZSB9KQ0KICB1cGRhdGVHcm91cFN0eWxlICgpIHsNCiAgICBpZiAodGhpcy5zZWxlY3RlZENvbnRhaW5lciA9PT0gdGhpcy5jb250YWluZXJJZCkgew0KICAgICAgRXZlbnRCdXMuJGVtaXQoJ2dyb3VwQXJyYXknLCB0aGlzLmdyb3VwUmVmLmRpdlN0eWxlQXJyYXkpDQogICAgICB0aGlzLmdyb3VwU3R5bGVBcnJheSA9IFsuLi50aGlzLmdyb3VwUmVmLmRpdlN0eWxlQXJyYXldDQogICAgfQ0KICB9DQogIGdldCBjaGVja0lzRWRpdE1vZGUgKCkgew0KICAgIGNvbnN0IHNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uc2VsZWN0ZWQNCiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5jb250YWluZXJbMF0NCiAgICBpZiAoKHNlbGVjdGVkLmxlbmd0aCA9PT0gMSAmJiAodGhpcy5wcm9wQ29udHJvbERhdGEudHlwZSA9PT0gJ0ZyYW1lJyB8fCB0aGlzLnByb3BDb250cm9sRGF0YS50eXBlID09PSAnUGFnZScgfHwgdGhpcy5wcm9wQ29udHJvbERhdGEudHlwZSA9PT0gJ1VzZXJmb3JtJykpIHx8IChzZWxlY3RlZC5sZW5ndGggPiAxICYmIGNvbnRhaW5lciA9PT0gdGhpcy5wcm9wQ29udHJvbERhdGEucHJvcGVydGllcy5JRCkpIHsNCiAgICAgIHJldHVybiB0cnVlDQogICAgfSBlbHNlIHsNCiAgICAgIHJldHVybiBmYWxzZQ0KICAgIH0NCiAgfQ0KICBnZXQgcGFyZW50RGl2ICgpIHsNCiAgICByZXR1cm4gew0KICAgICAgd2lkdGg6ICcxMDAlJywNCiAgICAgIGhlaWdodDogJzEwMCUnLA0KICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsDQogICAgICBvdmVyZmxvd1g6IHRoaXMuZ2V0U2Nyb2xsQmFyWCwNCiAgICAgIG92ZXJmbG93WTogdGhpcy5nZXRTY3JvbGxCYXJZDQogICAgfQ0KICB9DQogIEBXYXRjaCgncHJvcENvbnRyb2xEYXRhLnByb3BlcnRpZXMuU2Nyb2xsTGVmdCcpDQogIHVwZGF0ZVNjcm9sbExlZnQgKCkgew0KICAgIHRoaXMucGFyZW50RGl2UmVmLnNjcm9sbExlZnQgPSB0aGlzLnByb3BDb250cm9sRGF0YS5wcm9wZXJ0aWVzLlNjcm9sbExlZnQhDQogIH0NCg0KICBAV2F0Y2goJ3Byb3BDb250cm9sRGF0YS5wcm9wZXJ0aWVzLlNjcm9sbFRvcCcpDQogIHVwZGF0ZVNjcm9sbFRvcCAoKSB7DQogICAgdGhpcy5wYXJlbnREaXZSZWYuc2Nyb2xsVG9wID0gdGhpcy5wcm9wQ29udHJvbERhdGEucHJvcGVydGllcy5TY3JvbGxUb3AhDQogIH0NCiAgQEVtaXQoJ2RlQWN0aXZlQ29udHJvbCcpDQogIGRlQWN0aXZlQ29udHJvbCAoZXZlbnQ6IE1vdXNlRXZlbnQpIHsNCiAgICByZXR1cm4gZXZlbnQNCiAgfQ0KICBARW1pdCgnZHJhZ1NlbGVjdG9yQ29udHJvbCcpDQogIGRyYWdTZWxlY3RvckNvbnRyb2wgKGV2ZW50OiBNb3VzZUV2ZW50KSB7DQogICAgcmV0dXJuIGV2ZW50DQogIH0NCiAgQEVtaXQoJ2FkZENvbnRyb2xPYmonKQ0KICBhZGRDb250cm9sT2JqIChldmVudDogTW91c2VFdmVudCkgew0KICAgIHJldHVybiBldmVudA0KICB9DQogIHVwZGF0ZUlzQ29udHJvbE1vdmUgKHZhbDogYm9vbGVhbikgew0KICAgIHRoaXMuaXNDb250cm9sTW92ZSA9IHZhbA0KICB9DQogIEBXYXRjaCgncHJvcENvbnRyb2xEYXRhLnByb3BlcnRpZXMuU2Nyb2xsV2lkdGgnKQ0KICB1cGRhdGVDaGlsZFdpZHRoICgpIHsNCiAgICBpZiAodGhpcy5wcm9wQ29udHJvbERhdGEucHJvcGVydGllcy5TY3JvbGxXaWR0aCEgPCB0aGlzLnByb3BDb250cm9sRGF0YS5wcm9wZXJ0aWVzLlNjcm9sbExlZnQhKSB7DQogICAgICB0aGlzLnVwZGF0ZUNvbnRyb2woew0KICAgICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsDQogICAgICAgIGNvbnRyb2xJZDogdGhpcy5jb250cm9sSWQsDQogICAgICAgIHByb3BlcnR5TmFtZTogJ1Njcm9sbExlZnQnLA0KICAgICAgICB2YWx1ZTogMA0KICAgICAgfSkNCiAgICB9DQogIH0NCiAgQFdhdGNoKCdwcm9wQ29udHJvbERhdGEucHJvcGVydGllcy5TY3JvbGxIZWlnaHQnKQ0KICB1cGRhdGVDaGlsZEhlaWdodCAoKSB7DQogICAgaWYgKHRoaXMucHJvcENvbnRyb2xEYXRhLnByb3BlcnRpZXMuU2Nyb2xsSGVpZ2h0ISA8IHRoaXMucHJvcENvbnRyb2xEYXRhLnByb3BlcnRpZXMuU2Nyb2xsVG9wISkgew0KICAgICAgdGhpcy51cGRhdGVDb250cm9sKHsNCiAgICAgICAgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLA0KICAgICAgICBjb250cm9sSWQ6IHRoaXMuY29udHJvbElkLA0KICAgICAgICBwcm9wZXJ0eU5hbWU6ICdTY3JvbGxUb3AnLA0KICAgICAgICB2YWx1ZTogMA0KICAgICAgfSkNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/FormDesigner/components/organisms/FDContainer","sourcesContent":["<template>\r\n  <div @mouseup=\"onMouseUp\" :style=\"parentDiv\" @scroll=\"updateChildHeightWidth\" ref=\"parentDivRef\" >\r\n    <drag-selector\r\n      ref=\"dragSelector\"\r\n      :style=\"dragSelectorStyle\"\r\n      :isEditMode=\"checkIsEditMode\"\r\n      @deActiveControl=\"event => deActiveControl(event)\"\r\n      @dragSelectorControl=\"event => dragSelectorControl(event)\"\r\n      @addControlObj=\"event => addControlObj(event)\"\r\n    >\r\n    <div :style=\"childDiv\">\r\n    <div :style=\"pictureChildDiv\">\r\n      <GroupControl\r\n        :containerId=\"containerId\"\r\n        :userFormId=\"userFormId\"\r\n        ref=\"groupRef\"\r\n        class=\"group\"\r\n        :controlRef=\"$refs\"\r\n        :currentSelectedGroup=\"filterSelected\"\r\n        @openMenu=\"(e, parentID, controlID, type) => openContextMenu(e, parentID, controlID, type)\"\r\n      />\r\n      <div\r\n        v-for=\"control in propControlData.controls\"\r\n        :key=\"control\"\r\n        class=\"resize\"\r\n      >\r\n        <ResizeControl\r\n          ref=\"resizeControl\"\r\n          :name=\"control\"\r\n          :controlId=\"control\"\r\n          :containerId=\"controlId\"\r\n          :userFormId=\"userFormId\"\r\n          :currentSelectedGroup.sync=\"currentSelectedGroup\"\r\n          @createGroup=\"createGroup\"\r\n          @dragControl=\"dragControl\"\r\n          @muldragControl=\"muldragControl\"\r\n        >\r\n        </ResizeControl>\r\n      </div>\r\n    </div>\r\n    </div>\r\n    </drag-selector>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Emit, Prop, Vue, Ref, Watch } from 'vue-property-decorator'\r\nimport { State, Action } from 'vuex-class'\r\nimport ResizeControl from '@/FormDesigner/components/organisms/FDResizeControl/index.vue'\r\nimport ContextMenu from '@/FormDesigner/components/atoms/FDContextMenu/index.vue'\r\nimport { controlContextMenu } from '@/FormDesigner/models/controlContextMenuData'\r\nimport { userformContextMenu } from '../../../models/userformContextMenuData'\r\nimport GroupControl from '@/FormDesigner/components/organisms/FDGroupControl/index.vue'\r\nimport {\r\n  IsetChildControls,\r\n  IaddChildControls,\r\n  IselectControl,\r\n  IupdateControl,\r\n  IupdateGroup,\r\n  IupdateControlExtraData\r\n} from '@/storeModules/fd/actions'\r\nimport { EventBus } from '../../../event-bus'\r\nimport FDCommonMethod from '@/api/abstract/FormDesigner/FDCommonMethod'\r\nimport DragSelector from '@/FormDesigner/components/organisms/FDDragSelector/DragSelector.vue'\r\n@Component({\r\n  name: 'Container',\r\n  components: {\r\n    ContextMenu,\r\n    GroupControl,\r\n    ResizeControl,\r\n    DragSelector\r\n  }\r\n})\r\nexport default class Container extends FDCommonMethod {\r\n  $el!: HTMLDivElement;\r\n  currentSelectedGroup: string = '';\r\n  @Prop() getScrollBarX: string\r\n  @Prop() getScrollBarY: string\r\n  isControlPasted: boolean = false\r\n\r\n  @Prop({ required: true, type: String }) public controlId!: string;\r\n  @Prop({ required: true, type: String }) userFormId!: string;\r\n  @Prop({ required: true, type: String }) containerId!: string;\r\n  @Prop() mouseCursorData: string;\r\n  @Prop() getSampleDotPattern: { backgroundImage: string; backgroundSize: string; backgroundPosition: string }\r\n  @State((state: rootState) => state.fd.toolBoxSelect) toolBoxSelect!: fdState['toolBoxSelect'];\r\n  @State((state) => state.fd.selectedControls)\r\n  selectedControls!: fdState['selectedControls'];\r\n  @State((state) => state.fd.userformData) userformData!: userformData;\r\n  @State((state) => state.fd.groupedControls)\r\n  groupedControls!: fdState['groupedControls'];\r\n\r\n  @Action('fd/updateGroup') updateGroup!: (payload: IupdateGroup) => void;\r\n  @Action('fd/updateControlExtraData') updateControlExtraData!: (payload: IupdateControlExtraData) => void;\r\n  @Action('fd/updateControl') updateControl!: (payload: IupdateControl) => void;\r\n  @Action('fd/setChildControls') setChildControls!: (\r\n    payload: IsetChildControls\r\n  ) => void;\r\n  @Action('fd/addChildControls') addChildControls!: (\r\n    payload: IaddChildControls\r\n  ) => void;\r\n  @Action('fd/selectControl') selectControl!: (payload: IselectControl) => void;\r\n\r\n  @Prop() isEditMode: boolean;\r\n  @Prop() width: number\r\n  @Prop() height: number\r\n\r\n  @Ref('groupRef') readonly groupRef!: GroupControl;\r\n  @Ref('refContextMenu') readonly refContextMenu!: ContextMenu;\r\n  @Ref('dragSelector') readonly dragSelector: dragselector;\r\n  @Ref('contextmenu') readonly contextmenu: HTMLDivElement;\r\n  @Ref('parentDivRef') parentDivRef: HTMLDivElement\r\n\r\n  @Prop() createBackgroundString: string\r\n  @Prop() getSizeMode: string\r\n  @Prop() getRepeatData: string\r\n  @Prop() getPosition: string\r\n\r\n  controlContextMenu: Array<IcontextMenu> = controlContextMenu;\r\n  userformContextMenu: Array<IcontextMenu> = userformContextMenu;\r\n  handler: string = '';\r\n  grouphandler: string = '';\r\n  mainSelectData: controlData\r\n  containerPosition: IMousePosition = { clientX: 0, clientY: 0, movementX: 0, movementY: 0 }\r\n  selectedGroup: string[] = []\r\n  groupStyleArray: Array<IGroupStyle> = [];\r\n  updatedDragHeight: number = 0;\r\n  updatedDragWidth: number = 0;\r\n  isControlMove: boolean = false\r\n\r\n  updateChildHeightWidth () {\r\n    if (this.parentDivRef) {\r\n      const controlProp = this.propControlData.properties\r\n      const type = this.propControlData.type\r\n      const ph = type && type === 'Page' ? this.height! : controlProp.Height!\r\n      const pw = type && type === 'Page' ? this.width! : controlProp.Width!\r\n      if (this.isControlPasted) {\r\n        this.updatedDragHeight = Math.abs(this.parentDivRef.scrollHeight - ph!)\r\n        this.updatedDragWidth = Math.abs(this.parentDivRef.scrollWidth - pw!)\r\n        this.isControlPasted = false\r\n      }\r\n      if (this.isControlMove === false && this.isControlPasted === false) {\r\n        this.updateControl({\r\n          userFormId: this.userFormId,\r\n          controlId: this.controlId,\r\n          propertyName: 'ScrollLeft',\r\n          value: this.parentDivRef.scrollLeft\r\n        })\r\n        this.updateControl({\r\n          userFormId: this.userFormId,\r\n          controlId: this.controlId,\r\n          propertyName: 'ScrollTop',\r\n          value: this.parentDivRef.scrollTop\r\n        })\r\n      } else {\r\n        const controlProp = this.propControlData.properties\r\n        this.$el.scrollTop = controlProp.ScrollTop!\r\n        this.$el.scrollLeft = controlProp.ScrollLeft!\r\n        this.updateIsControlMove(false)\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * @description To get the selected container  from controls are dragged\r\n   * @function selectedContainer\r\n   */\r\n  get selectedContainer () {\r\n    return [...this.selectedControls[this.userFormId].container][0]\r\n  }\r\n\r\n  /**\r\n   * @description To get the selected controls to be dropped\r\n   * @function selectedSelect\r\n   */\r\n  get selectedSelect () {\r\n    if (this.grouphandler === 'groupdrag') {\r\n      const selectedSelect = []\r\n      for (let k = 0; k < this.selectedGroup.length; k++) {\r\n        if (this.selectedGroup[k].startsWith('group')) {\r\n          for (const i in this.userformData[this.userFormId]) {\r\n            if (!i.startsWith('ID_USERFORM')) {\r\n              const userdata = this.userformData[this.userFormId]\r\n              if (userdata[i].properties.GroupID === this.selectedGroup[k]) {\r\n                selectedSelect.push(i)\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          selectedSelect.push(this.selectedGroup[k])\r\n        }\r\n      }\r\n      return selectedSelect\r\n    } else {\r\n      return this.selectedControls[this.userFormId].selected\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @description To get the controls to be removed from the  selected container\r\n   * @function fromContainerControls\r\n   */\r\n  get fromContainerControls () {\r\n    const fromContainerControls = [...this.userformData[this.userFormId][this.selectedContainer].controls]\r\n    for (let i = 0; i < this.selectedSelect.length; i++) {\r\n      let tragetId: undefined | string = this.selectedSelect[i]\r\n      let targetIndex = fromContainerControls.findIndex((id) => id === tragetId)\r\n      if (targetIndex !== -1) {\r\n        fromContainerControls.splice(targetIndex, 1)\r\n      }\r\n    }\r\n    return fromContainerControls\r\n  }\r\n\r\n  /**\r\n   * @description To remove chilControls of selected Container\r\n   * @function removeChildControl\r\n   * @param selectedSelect  - control array to be deleted\r\n   */\r\n  removeChildControl (id: string, controls: string[]) {\r\n    const userData = this.userformData[this.userFormId]\r\n    const beforeControls = userData[id].controls\r\n    const deleteControls = beforeControls.filter(x => !controls.includes(x))\r\n    for (const key of deleteControls) {\r\n      this.deleteZIndex(key)\r\n      this.deleteTabIndex(key)\r\n    }\r\n\r\n    this.setChildControls({\r\n      userFormId: this.userFormId,\r\n      containerId: id,\r\n      targetControls: controls\r\n    })\r\n  }\r\n\r\n  /**\r\n   * @description To add chilControls of selected Container\r\n   * @function addChildControl\r\n   * @param selectedSelect  - control array to be added\r\n   */\r\n  addChildControl (selectedSelect: string[]) {\r\n    const userData = this.userformData[this.userFormId]\r\n    for (const control of selectedSelect) {\r\n      if (!userData[this.containerId].controls.includes(control)) {\r\n        this.addChildControls({\r\n          userFormId: this.userFormId,\r\n          containerId: this.containerId,\r\n          targetControls: selectedSelect\r\n        })\r\n      }\r\n    }\r\n\r\n    for (const id of selectedSelect) {\r\n      this.updateTabIndexValue(id)\r\n      this.updateZIndexValue(id)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @description To update Properties of Control\r\n   * @function updateControlProp\r\n   * @param id  - selcted controlId\r\n   * @param propName  -  selected control property Name\r\n   * @param propName  -  selected control property Value\r\n   */\r\n  updateControlProp (id: string, propName: keyof controlProperties, propValue: number| string) {\r\n    this.updateControl({\r\n      userFormId: this.userFormId,\r\n      controlId: id,\r\n      propertyName: propName,\r\n      value: propValue\r\n    })\r\n  }\r\n\r\n  /**\r\n   * @description To update the selectedControls in main data\r\n   * @function updatedSelect\r\n   * @param updatedSelect  - selcted ContainerId\r\n   * @param selArry  - selcted controlList\r\n   */\r\n  updatedSelect (conatiner: string[], selArry: string[]) {\r\n    this.selectControl({\r\n      userFormId: this.userFormId,\r\n      select: {\r\n        container: conatiner,\r\n        selected: selArry\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * @description If control inside the group is selected dropped into other container\r\n   * @function updateGroupControl\r\n   * @param mainSelectGroup  - selected group\r\n   */\r\n  updateGroupControl (mainSelectGroup: string) {\r\n    const presenetControl: string[] = []\r\n    if (mainSelectGroup && mainSelectGroup !== '') {\r\n      for (let control in this.userformData[this.userFormId]) {\r\n        const controlGroupId = this.userformData[this.userFormId][control].properties.GroupID!\r\n        if (controlGroupId && controlGroupId === mainSelectGroup) {\r\n          presenetControl.push(control)\r\n        }\r\n      }\r\n    }\r\n    if (presenetControl.length === 1) {\r\n      const groupArray: string[] = [...this.groupedControls[this.userFormId]!.groupArray!]\r\n      const index = groupArray.findIndex((val) => val === mainSelectGroup)\r\n      groupArray.splice(index, 1)\r\n      this.updateGroup({\r\n        userFormId: this.userFormId,\r\n        groupArray: groupArray\r\n      })\r\n      this.updateControlProp(presenetControl[0], 'GroupID', '')\r\n    }\r\n  }\r\n  /**\r\n   * @description to drag and drop the control and group into respective container\r\n   * @function onMouseUp\r\n   * @param event  - it is of type MouseEvent\r\n   * @event mouseup\r\n   */\r\n  onMouseUp (event: MouseEvent) {\r\n    if (document.onmousemove && document.onmouseup && (this.handler === 'drag' || this.handler === 'frameDrag' || this.grouphandler === 'groupdrag')) {\r\n      const userData = this.userformData[this.userFormId]\r\n      const containerType = userData[this.containerId].type === 'Page' && userData[this.getContainerList(this.containerId)[0]].properties.Value === -1\r\n      if (!containerType) {\r\n        let moveValueX: number = 0\r\n        let moveValueY: number = 0\r\n        let mainSelect: string = ''\r\n        let parentConatiner = ''\r\n        let count = 0\r\n        let tempEvent = {}\r\n        this.selectedGroup = this.selectedControls[this.userFormId].selected\r\n        if (this.grouphandler === 'groupdrag') {\r\n          EventBus.$emit(\r\n            'getGroupMoveValue',\r\n            (offsetX: number, offsetY: number, id: string, tempEventObj: MouseEvent) => {\r\n              moveValueX = offsetX\r\n              moveValueY = offsetY\r\n              tempEvent = Object.keys(tempEventObj).length === 0 ? tempEvent : tempEventObj\r\n            }\r\n          )\r\n          mainSelect = this.getSelectedControlsDatas![0]\r\n        } else if (this.handler === 'drag') {\r\n          EventBus.$emit(\r\n            'getMoveValue',\r\n            (offsetX: number, offsetY: number, id: string) => {\r\n              moveValueX = offsetX\r\n              moveValueY = offsetY\r\n              mainSelect = id\r\n            }\r\n          )\r\n        } else if (this.handler === 'frameDrag') {\r\n          EventBus.$emit(\r\n            'getMoveValue',\r\n            (offsetX: number, offsetY: number, id: string, parentControl: string) => {\r\n              moveValueX = offsetX\r\n              moveValueY = offsetY\r\n              mainSelect = id\r\n              parentConatiner = parentControl\r\n            }\r\n          )\r\n        }\r\n        if (mainSelect && !this.getSelectedControlsDatas!.includes(this.containerId)) {\r\n          count = count + 1\r\n          let frameCondition: boolean = false\r\n          if (this.handler === 'frameDrag') {\r\n            const isChild = this.getChildControl(mainSelect).includes(this.containerId) || this.containerId === mainSelect\r\n            frameCondition = (isChild === false && parentConatiner === this.containerId) ||\r\n          (isChild === false && this.selectedControls[this.userFormId].selected.includes(mainSelect)) ||\r\n          (isChild === false && count === 1)\r\n          }\r\n          if ((this.handler === 'frameDrag' && frameCondition) || this.handler === 'drag' || this.grouphandler === 'groupdrag') {\r\n            const currentControlsData = this.userformData[this.userFormId]\r\n            const mainSelectData = currentControlsData[mainSelect]\r\n            const mainSelectX = mainSelectData.properties.Left\r\n            const mainSelectY = mainSelectData.properties.Top\r\n            const containerX = event.clientX - this.$el.getClientRects()[0].x\r\n            const containerY = event.clientY - this.$el.getClientRects()[0].y\r\n            const mainSelectGroup: string = mainSelectData.properties.GroupID!\r\n            const selectedSelect = this.handler === 'frameDrag' ? (this.selectedSelect.includes(mainSelect) ? this.selectedSelect : [mainSelect]) : this.selectedSelect\r\n            if (typeof mainSelectX === 'number' && typeof mainSelectY === 'number') {\r\n              if ((this.handler === 'frameDrag' || this.handler === 'drag')) {\r\n                selectedSelect.forEach((id) => {\r\n                  const targetData = currentControlsData[id].properties\r\n                  const targetLeft = targetData.Left\r\n                  const targetTop = targetData.Top\r\n                  const containerProp = userData[this.containerId].properties\r\n                  if (typeof targetTop === 'number' && typeof targetLeft === 'number') {\r\n                    const leftValue = containerProp.ScrollLeft! > 0 ? (containerX + targetLeft - mainSelectX - moveValueX) + containerProp.ScrollLeft! : containerX + targetLeft - mainSelectX - moveValueX\r\n                    const topValue = containerProp.ScrollTop! > 0 ? (containerY + targetTop - mainSelectY - moveValueY) + containerProp.ScrollTop! : containerY + targetTop - mainSelectY - moveValueY\r\n                    this.updateControlProp(id, 'Left', leftValue)\r\n                    this.updateControlProp(id, 'Top', topValue)\r\n                    if (this.handler === 'drag') {\r\n                      if (mainSelectGroup !== '' && this.selectedContainer !== this.containerId) {\r\n                        this.updateControlProp(id, 'GroupID', '')\r\n                        this.updateGroupControl(mainSelectGroup)\r\n                      }\r\n                    }\r\n                  }\r\n                })\r\n              } else if (this.grouphandler === 'groupdrag' && this.selectedContainer === this.containerId) {\r\n                EventBus.$emit('getClientValue', 'same')\r\n              }\r\n            }\r\n            if (this.handler === 'frameDrag' && this.userformData[this.userFormId][this.containerId].controls.includes(mainSelect)) {\r\n              event.stopPropagation()\r\n              document.onmouseup(event)\r\n            } else {\r\n              if (this.selectedContainer !== this.containerId) {\r\n                const mainSelContainer = this.getContainerList(mainSelect)[0]\r\n                if (this.selectedControls[this.userFormId].selected.includes(mainSelect) || this.grouphandler === 'groupdrag') {\r\n                  this.removeChildControl(this.selectedContainer, this.fromContainerControls)\r\n                  this.addChildControl(selectedSelect)\r\n                } else {\r\n                  const controls = this.userformData[this.userFormId][mainSelContainer].controls\r\n                  const removeControl = controls.filter(e => e !== mainSelect)\r\n                  this.removeChildControl(mainSelContainer, removeControl)\r\n                  this.addChildControl([mainSelect])\r\n                }\r\n                if (this.grouphandler === 'groupdrag') {\r\n                  for (let k = 0; k < this.selectedGroup.length; k++) {\r\n                    if (this.selectedGroup[k].startsWith('group')) {\r\n                      this.createGroup(this.selectedGroup[k])\r\n                    }\r\n                  }\r\n                }\r\n\r\n                if (this.grouphandler === 'groupdrag') {\r\n                  if (this.grouphandler === 'groupdrag' && this.selectedContainer !== this.containerId) {\r\n                    EventBus.$emit('getClientValue', 'different', containerX, containerY, event, this.containerId, tempEvent)\r\n                  }\r\n                  const selected = this.selectedControls[this.userFormId].selected\r\n                  this.updatedSelect(this.getContainerList(selected[0]), selected)\r\n                } else {\r\n                  this.updatedSelect(this.getContainerList(this.selectedSelect[0]), this.selectedControls[this.userFormId].selected)\r\n                }\r\n              }\r\n              event.stopPropagation()\r\n              document.onmouseup(event)\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        event.stopPropagation()\r\n        document.onmouseup(event)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @description style object to dynamically changing the styles of  the contextMenu component based on propControlData\r\n   * @function styleObject\r\n   *\r\n   */\r\n  get filterSelected () {\r\n    const result =\r\n      this.currentSelectedGroup === ''\r\n        ? this.selectedControls[this.userFormId].selected.filter((Id) => {\r\n          if (typeof Id === 'string') {\r\n            return Id.startsWith('group')\r\n          }\r\n        })\r\n        : [this.currentSelectedGroup]\r\n    return result\r\n  }\r\n  createGroup (groupId: string) {\r\n    this.groupRef.groupStyle(groupId)\r\n  }\r\n  muldragControl (val: IDragResizeGroup) {\r\n    this.groupRef.handleMouseDown(val.event, val.handler)\r\n  }\r\n  dragControl (event: MouseEvent) {\r\n    this.groupRef.handleMouseDown(event, 'drag')\r\n  }\r\n  /**\r\n   * @description style object to dynamically changing the styles of  the darg-selctor component based on propControlData\r\n   * @function dragSelectorStyle\r\n   *\r\n   */\r\n  get dragSelectorStyle () {\r\n    const controlProp = this.propControlData.properties\r\n    const type = this.propControlData.type\r\n    const ph = type && type === 'Page' ? this.height! : this.propControlData.properties.Height!\r\n    const pw = type && type === 'Page' ? this.width! : this.propControlData.properties.Width!\r\n    return {\r\n      height: ph + this.updatedDragHeight + 'px',\r\n      width: pw + this.updatedDragWidth + 'px',\r\n      cursor: type && type === 'Page' ? 'default !important'\r\n        : this.propControlData.properties.MousePointer !== 0 ||\r\n        this.propControlData.properties.MouseIcon !== ''\r\n          ? `${this.mouseCursorData} !important`\r\n          : this.toolBoxSelect !== 'Select' ? 'crosshair !important' : 'default !important'\r\n    }\r\n  }\r\n  get pictureChildDiv () {\r\n    const controlProp = this.propControlData.properties\r\n    let backgroundStyle = {}\r\n    if (controlProp.Picture !== '' && controlProp.ScrollBars! > 0) {\r\n      backgroundStyle = {}\r\n    } else {\r\n      backgroundStyle = {\r\n        backgroundImage: this.getSampleDotPattern.backgroundImage,\r\n        backgroundSize: this.getSampleDotPattern.backgroundSize,\r\n        backgroundRepeat: 'repeat',\r\n        backgroundPosition: this.getSampleDotPattern.backgroundPosition\r\n      }\r\n    }\r\n    return {\r\n      ...backgroundStyle,\r\n      width: '100%',\r\n      height: '100%'\r\n    }\r\n  }\r\n  get childDiv () {\r\n    const controlProp = this.propControlData.properties\r\n    const type = this.propControlData.type\r\n    const ph = type && type === 'Page' ? this.height! : this.propControlData.properties.Height!\r\n    const pw = type && type === 'Page' ? this.width! : this.propControlData.properties.Width!\r\n    return {\r\n      height: (controlProp.ScrollHeight === 0 || controlProp.ScrollHeight! < ph) ? ph + this.updatedDragHeight + 'px' : controlProp.ScrollHeight! + 'px',\r\n      width: (controlProp.ScrollWidth === 0 || controlProp.ScrollWidth! < pw) ? pw + this.updatedDragWidth + 'px' : controlProp.ScrollWidth! + 'px',\r\n      backgroundImage: controlProp.Picture === ''\r\n        ? this.getSampleDotPattern.backgroundImage\r\n        : this.createBackgroundString,\r\n      backgroundSize: controlProp.Picture === ''\r\n        ? this.getSampleDotPattern.backgroundSize\r\n        : this.getSizeMode,\r\n      backgroundColor: controlProp.Picture !== '' ? '' : controlProp.BackColor,\r\n      backgroundRepeat: this.getRepeatData,\r\n      backgroundPosition: controlProp.Picture !== ''\r\n        ? this.getPosition\r\n        : this.getSampleDotPattern.backgroundPosition,\r\n      opactity: controlProp.Picture === '' ? '0' : '1'\r\n    }\r\n  }\r\n  /**\r\n   * @description propControlData is abstract class providing implementation in FDContainer by passing\r\n   * userFormId and controlId which is taken as props from parent Component\r\n   * @function propControlData\r\n   *\r\n   */\r\n  get propControlData (): controlData {\r\n    return this.userformData[this.userFormId][this.controlId]\r\n  }\r\n\r\n  /**\r\n   * @description To display contextmenu of control\r\n   * @function openContextMenu\r\n   * @param e it is type of mouseEvent\r\n   * @param parentID is the UserFormId in which the control resides\r\n   * @param controlId is the selected control of which context has to be displayed\r\n   */\r\n  openContextMenu (e: MouseEvent, parentID: string, controlID: string, type: string, mode: boolean) {\r\n    EventBus.$emit('contextMenuDisplay', event, parentID, controlID, type, mode)\r\n  }\r\n  created () {\r\n    EventBus.$on('handleName', (handler: string) => {\r\n      this.handler = handler\r\n    })\r\n    EventBus.$on('groupDrag', (handler: string) => {\r\n      this.grouphandler = handler\r\n    })\r\n    EventBus.$on('createGroup', (groupId: string) => {\r\n      this.createGroup(groupId)\r\n    })\r\n    EventBus.$on('updateIsControlMove', (val: boolean) => {\r\n      this.updateIsControlMove(val)\r\n    })\r\n    EventBus.$on('afterPaste', () => {\r\n      if (this.selectedControls[this.userFormId].container[0] === this.containerId) {\r\n        this.isControlPasted = true\r\n      }\r\n    })\r\n  }\r\n  destroyed () {\r\n    // EventBus.$off('handleName')\r\n    // EventBus.$off('groupDrag')\r\n    EventBus.$off('afterPaste')\r\n  }\r\n  @Watch('selectedControls', { deep: true })\r\n  updateGroupStyle () {\r\n    if (this.selectedContainer === this.containerId) {\r\n      EventBus.$emit('groupArray', this.groupRef.divStyleArray)\r\n      this.groupStyleArray = [...this.groupRef.divStyleArray]\r\n    }\r\n  }\r\n  get checkIsEditMode () {\r\n    const selected = this.selectedControls[this.userFormId].selected\r\n    const container = this.selectedControls[this.userFormId].container[0]\r\n    if ((selected.length === 1 && (this.propControlData.type === 'Frame' || this.propControlData.type === 'Page' || this.propControlData.type === 'Userform')) || (selected.length > 1 && container === this.propControlData.properties.ID)) {\r\n      return true\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n  get parentDiv () {\r\n    return {\r\n      width: '100%',\r\n      height: '100%',\r\n      position: 'absolute',\r\n      overflowX: this.getScrollBarX,\r\n      overflowY: this.getScrollBarY\r\n    }\r\n  }\r\n  @Watch('propControlData.properties.ScrollLeft')\r\n  updateScrollLeft () {\r\n    this.parentDivRef.scrollLeft = this.propControlData.properties.ScrollLeft!\r\n  }\r\n\r\n  @Watch('propControlData.properties.ScrollTop')\r\n  updateScrollTop () {\r\n    this.parentDivRef.scrollTop = this.propControlData.properties.ScrollTop!\r\n  }\r\n  @Emit('deActiveControl')\r\n  deActiveControl (event: MouseEvent) {\r\n    return event\r\n  }\r\n  @Emit('dragSelectorControl')\r\n  dragSelectorControl (event: MouseEvent) {\r\n    return event\r\n  }\r\n  @Emit('addControlObj')\r\n  addControlObj (event: MouseEvent) {\r\n    return event\r\n  }\r\n  updateIsControlMove (val: boolean) {\r\n    this.isControlMove = val\r\n  }\r\n  @Watch('propControlData.properties.ScrollWidth')\r\n  updateChildWidth () {\r\n    if (this.propControlData.properties.ScrollWidth! < this.propControlData.properties.ScrollLeft!) {\r\n      this.updateControl({\r\n        userFormId: this.userFormId,\r\n        controlId: this.controlId,\r\n        propertyName: 'ScrollLeft',\r\n        value: 0\r\n      })\r\n    }\r\n  }\r\n  @Watch('propControlData.properties.ScrollHeight')\r\n  updateChildHeight () {\r\n    if (this.propControlData.properties.ScrollHeight! < this.propControlData.properties.ScrollTop!) {\r\n      this.updateControl({\r\n        userFormId: this.userFormId,\r\n        controlId: this.controlId,\r\n        propertyName: 'ScrollTop',\r\n        value: 0\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n:focus {\r\n  outline: none;\r\n}\r\n.dragSelector {\r\n  visibility: hidden;\r\n}\r\n.dragSelector > .resize {\r\n  visibility: visible;\r\n}\r\n.dragSelector > .group {\r\n  visibility: visible;\r\n}\r\n</style>\r\n"]}]}