{"remainingRequest":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mobiotics/Projects/hancom/FormcontrolLatest/src/FormDesigner/components/organisms/FDTable/index.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/src/FormDesigner/components/organisms/FDTable/index.vue","mtime":1612267118000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KaW1wb3J0IHsgQ29tcG9uZW50LCBQcm9wLCBWdWUsIEVtaXQgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJw0KaW1wb3J0IHsgU3RhdGUsIEFjdGlvbiB9IGZyb20gJ3Z1ZXgtY2xhc3MnDQppbXBvcnQgRkRUYWJsZUl0ZW1zIGZyb20gJy4uLy4uL21vbGVjdWxlcy9GRFRhYmxlSXRlbXMvaW5kZXgudnVlJw0KaW1wb3J0IHsgSXNlbGVjdENvbnRyb2wsIElzZXRDaGlsZENvbnRyb2xzLCBJdXBkYXRlQ29udHJvbCwgSXVwZGF0ZUNvbnRyb2xFeHRyYURhdGEsIEl1cGRhdGVkU2VsZWN0ZWRDb250cm9sIH0gZnJvbSAnQC9zdG9yZU1vZHVsZXMvZmQvYWN0aW9ucycNCmltcG9ydCB7IEV2ZW50QnVzIH0gZnJvbSAnQC9Gb3JtRGVzaWduZXIvZXZlbnQtYnVzJw0KaW1wb3J0IHsgY2hlY2tQcm9wZXJ0eVZhbHVlIH0gZnJvbSAnQC9zdG9yZU1vZHVsZXMvZmQvY2hlY2tWYWxpZGF0aW9uJw0KDQppbnRlcmZhY2UgSVByb3BDb250cm9sIHsNCiAgcHJvcGVydHlOYW1lOiBrZXlvZiBjb250cm9sUHJvcGVydGllcw0KICB2YWx1ZSA6IGFueQ0KfQ0KDQpAQ29tcG9uZW50KHsNCiAgbmFtZTogJ0ZEVGFibGUnLA0KICBjb21wb25lbnRzOiB7DQogICAgRkRUYWJsZUl0ZW1zDQogIH0NCn0pDQpleHBvcnQgZGVmYXVsdCBjbGFzcyBGRFRhYmxlIGV4dGVuZHMgVnVlIHsNCiAgQFByb3AoeyB0eXBlOiBPYmplY3QsIHJlcXVpcmVkOiB0cnVlIH0pIHRhYmxlRGF0YSE6IHRhYmxlRGF0YXM7DQogIEBTdGF0ZSgoc3RhdGUpID0+IHN0YXRlLmZkLnVzZXJmb3JtRGF0YSkgdXNlcmZvcm1EYXRhITogdXNlcmZvcm1EYXRhOw0KICBAUHJvcCh7IHJlcXVpcmVkOiB0cnVlLCB0eXBlOiBTdHJpbmcgfSkgcHVibGljIHJlYWRvbmx5IHVzZXJGb3JtSWQhIDogc3RyaW5nDQogIEBQcm9wKHsgcmVxdWlyZWQ6IHRydWUgfSkgcHVibGljIHJlYWRvbmx5IGdldFNlbGVjdGVkQ29udHJvbHNEYXRhczogYW55DQogIEBQcm9wKCkgcmVzdWx0QXJyYXk6IGJvb2xlYW5bXQ0KICBAQWN0aW9uKCdmZC91cGRhdGVDb250cm9sJykgdXBkYXRlQ29udHJvbCE6IChwYXlsb2FkOiBJdXBkYXRlQ29udHJvbCkgPT4gdm9pZDsNCiAgQEFjdGlvbignZmQvdXBkYXRlQ29udHJvbEV4dHJhRGF0YScpIHVwZGF0ZUNvbnRyb2xFeHRyYURhdGEhOiAoDQogICAgcGF5bG9hZDogSXVwZGF0ZUNvbnRyb2xFeHRyYURhdGENCiAgKSA9PiB2b2lkOw0KICBAQWN0aW9uKCdmZC9zZXRDaGlsZENvbnRyb2xzJykgc2V0Q2hpbGRDb250cm9scyE6ICgNCiAgICBwYXlsb2FkOiBJc2V0Q2hpbGRDb250cm9scw0KICApID0+IHZvaWQ7DQogIEBTdGF0ZSgoc3RhdGUpID0+IHN0YXRlLmZkLnNlbGVjdGVkQ29udHJvbHMpIHNlbGVjdGVkQ29udHJvbHMhOiBmZFN0YXRlWydzZWxlY3RlZENvbnRyb2xzJ107DQoNCiAgZW1pdFVwZGF0ZVByb3BlcnR5ICgNCiAgICBwcm9wZXJ0eU5hbWU6IGtleW9mIGNvbnRyb2xQcm9wZXJ0aWVzLA0KICAgIHZhbHVlOiBhbnkNCiAgKSB7DQogICAgdGhpcy51cGRhdGVQcm9wZXJ0eSh7IHByb3BlcnR5TmFtZTogcHJvcGVydHlOYW1lLCB2YWx1ZTogdmFsdWUgfSkNCiAgfQ0KDQogIGVtaXRVcGRhdGVFeHRyYVByb3BlcnR5ICgNCiAgICBwcm9wZXJ0eU5hbWU6IGtleW9mIGNvbnRyb2xQcm9wZXJ0aWVzLA0KICAgIHZhbHVlOiBhbnkNCiAgKSB7DQogICAgdGhpcy51cGRhdGVQcm9wZXJ0eSh7IHByb3BlcnR5TmFtZTogcHJvcGVydHlOYW1lLCB2YWx1ZTogdmFsdWUgfSkNCiAgfQ0KICB1cGRhdGVQYWdlSW5kZXggKHByb3BWYWx1ZTogbnVtYmVyKSB7DQogICAgY29uc3QgdXNlckRhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdDQogICAgY29uc3Qgc2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5zZWxlY3RlZFswXQ0KICAgIGNvbnN0IHN3YXBUYWJJbmRleCA9IHVzZXJEYXRhW3NlbGVjdGVkXS5wcm9wZXJ0aWVzLkluZGV4IQ0KICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLmNvbnRhaW5lclswXQ0KDQogICAgaWYgKHByb3BWYWx1ZSA8IHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHMubGVuZ3RoKSB7DQogICAgICBjb25zdCBpbmRleCA9IHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHMuZmluZEluZGV4KHZhbCA9PiB1c2VyRGF0YVt2YWxdLnByb3BlcnRpZXMuSW5kZXggPT09IHByb3BWYWx1ZSkNCiAgICAgIHRoaXMudXBkYXRlUHJvcFZhbHVlKHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHNbaW5kZXhdLCAnSW5kZXgnLCBzd2FwVGFiSW5kZXgpDQogICAgICB0aGlzLnVwZGF0ZVByb3BWYWx1ZShzZWxlY3RlZCwgJ0luZGV4JywgcHJvcFZhbHVlKQ0KICAgICAgY29uc3QgY29udHJvbHMgPSB1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzDQogICAgICBjb250cm9scy5zb3J0KChhLCBiKSA9PiB7DQogICAgICAgIHJldHVybiB1c2VyRGF0YVthXS5wcm9wZXJ0aWVzLkluZGV4ISAtIHVzZXJEYXRhW2JdLnByb3BlcnRpZXMuSW5kZXghDQogICAgICB9KQ0KICAgICAgdGhpcy5zZXRDaGlsZENvbnRyb2xzKHsNCiAgICAgICAgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLA0KICAgICAgICBjb250YWluZXJJZDogY29udGFpbmVyLA0KICAgICAgICB0YXJnZXRDb250cm9sczogY29udHJvbHMNCiAgICAgIH0pDQogICAgICByZXR1cm4gdHJ1ZQ0KICAgIH0gZWxzZSB7DQogICAgICByZXR1cm4gZmFsc2UNCiAgICB9DQogIH0NCiAgZ2V0TG93ZXN0SW5kZXggKHRlbXBDb250cm9sczogc3RyaW5nW10sIGNvbnRyb2xMZW5ndGg6IG51bWJlciwgcHJvcGVydHlUeXBlOiBib29sZWFuKSB7DQogICAgbGV0IGxhc3RDb250cm9sSWQgPSBjb250cm9sTGVuZ3RoDQogICAgY29uc3QgdXNlckRhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdDQogICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZW1wQ29udHJvbHMubGVuZ3RoOyBpKyspIHsNCiAgICAgIGNvbnN0IHByb3BldHlOYW1lID0gcHJvcGVydHlUeXBlID8gdXNlckRhdGFbdGVtcENvbnRyb2xzW2ldXS5leHRyYURhdGFzIS56SW5kZXghIDogdXNlckRhdGFbdGVtcENvbnRyb2xzW2ldXS5leHRyYURhdGFzIS5UYWJJbmRleCENCiAgICAgIGlmIChwcm9wZXR5TmFtZSAhPT0gLTEpIHsNCiAgICAgICAgY29uc3QgSWROdW0gPSBwcm9wZXR5TmFtZQ0KICAgICAgICBpZiAoIWlzTmFOKElkTnVtKSAmJiBsYXN0Q29udHJvbElkID4gSWROdW0pIHsNCiAgICAgICAgICBsYXN0Q29udHJvbElkID0gSWROdW0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgICByZXR1cm4gbGFzdENvbnRyb2xJZA0KICB9DQogIHN3YXBUYWJJbmRleCAodGVtcFpJbmRleDogbnVtYmVyKSB7DQogICAgY29uc3QgdXNlckRhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdDQogICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uY29udGFpbmVyWzBdDQogICAgY29uc3Qgc2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5zZWxlY3RlZFswXQ0KICAgIGNvbnN0IHN3YXBUYWJJbmRleCA9IHVzZXJEYXRhW3NlbGVjdGVkXS5wcm9wZXJ0aWVzIS5UYWJJbmRleCENCiAgICBpZiAodGVtcFpJbmRleCA8PSB1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzLmxlbmd0aCAtIDEgJiYgdGVtcFpJbmRleCA+IC0xKSB7DQogICAgICBjb25zdCBpbmRleCA9IHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHMuZmluZEluZGV4KA0KICAgICAgICAodmFsKSA9PiB1c2VyRGF0YVt2YWxdLnByb3BlcnRpZXMhLlRhYkluZGV4ID09PSB0ZW1wWkluZGV4DQogICAgICApDQogICAgICB0aGlzLnVwZGF0ZVByb3BWYWx1ZSh1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzW2luZGV4XSwgJ1RhYkluZGV4Jywgc3dhcFRhYkluZGV4KQ0KICAgICAgdGhpcy51cGRhdGVQcm9wVmFsdWUoc2VsZWN0ZWQsICdUYWJJbmRleCcsIHRlbXBaSW5kZXgpDQogICAgfQ0KICB9DQogIHVwZGF0ZVRhYkluZGV4VmFsdWUgKHZhbDogbnVtYmVyKSB7DQogICAgY29uc3QgdXNlckRhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdDQogICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uY29udGFpbmVyWzBdDQogICAgY29uc3Qgc2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5zZWxlY3RlZFswXQ0KICAgIGNvbnN0IGNvbnRhaW5lckNvbnRyb2xzID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtjb250YWluZXJdLmNvbnRyb2xzDQogICAgY29uc3QgY29udHJvbFR5cGUgPSB1c2VyRGF0YVtzZWxlY3RlZF0udHlwZQ0KICAgIGlmIChjb250cm9sVHlwZSAhPT0gJ0ZESW1hZ2UnKSB7DQogICAgICBjb25zdCB0ZW1wQ29udHJvbHMgPSBbXQ0KICAgICAgZm9yIChjb25zdCBpbmRleCBpbiBjb250YWluZXJDb250cm9scykgew0KICAgICAgICBjb25zdCBjbnRybERhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2NvbnRhaW5lckNvbnRyb2xzW2luZGV4XV0NCiAgICAgICAgaWYgKGNudHJsRGF0YS50eXBlID09PSAnRkRJbWFnZScpIHsNCiAgICAgICAgICB0ZW1wQ29udHJvbHMucHVzaChjb250YWluZXJDb250cm9sc1tpbmRleF0pDQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGNvbnN0IGxhc3RDb250cm9sSWQgPSB0ZW1wQ29udHJvbHMubGVuZ3RoID4gMCA/IHRoaXMuZ2V0TG93ZXN0SW5kZXgodGVtcENvbnRyb2xzLCB1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzLmxlbmd0aCAtIDEsIGZhbHNlKQ0KICAgICAgICA6IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY29udGFpbmVyXS5jb250cm9scy5sZW5ndGggLSAxDQogICAgICBpZiAodmFsIDw9IGxhc3RDb250cm9sSWQpIHsNCiAgICAgICAgdGhpcy5zd2FwVGFiSW5kZXgodmFsKQ0KICAgICAgICByZXR1cm4gdHJ1ZQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICB9DQogICAgfQ0KICB9DQoNCiAgdXBkYXRlRXh0cmFQcm9wZXJ0eSAoYXJnOiBJdXBkYXRlQ29udHJvbEV4dHJhRGF0YSkgew0KICAgIGNvbnN0IHNlbGVjdGVkID0gdGhpcy5nZXRTZWxlY3RlZENvbnRyb2xzRGF0YXMhDQogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWxlY3RlZC5sZW5ndGg7IGkrKykgew0KICAgICAgdGhpcy51cGRhdGVDb250cm9sRXh0cmFEYXRhKHsNCiAgICAgICAgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLA0KICAgICAgICBjb250cm9sSWQ6IHNlbGVjdGVkW2ldLA0KICAgICAgICBwcm9wZXJ0eU5hbWU6IGFyZy5wcm9wZXJ0eU5hbWUsDQogICAgICAgIHZhbHVlOiBhcmcudmFsdWUNCiAgICAgIH0pDQogICAgfQ0KICB9DQogIHVwZGF0ZVByb3BlcnR5IChhcmc6IElQcm9wQ29udHJvbCkgew0KICAgIGNvbnN0IHNlbGVjdGVkID0gdGhpcy5nZXRTZWxlY3RlZENvbnRyb2xzRGF0YXMhDQogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWxlY3RlZC5sZW5ndGg7IGkrKykgew0KICAgICAgaWYgKGFyZy5wcm9wZXJ0eU5hbWUgPT09ICdUYWJJbmRleCcpIHsNCiAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlVGFiSW5kZXhWYWx1ZShwYXJzZUludChhcmcudmFsdWUpKQ0KICAgICAgfSBlbHNlIGlmIChhcmcucHJvcGVydHlOYW1lID09PSAnSW5kZXgnKSB7DQogICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZVBhZ2VJbmRleChwYXJzZUludChhcmcudmFsdWUpKQ0KICAgICAgfSBlbHNlIGlmIChhcmcucHJvcGVydHlOYW1lID09PSAnTmFtZScpIHsNCiAgICAgICAgcmV0dXJuIHRoaXMudXBkYXRlTmFtZShzZWxlY3RlZFtpXSwgYXJnLnZhbHVlKQ0KICAgICAgfSBlbHNlIGlmIChhcmcucHJvcGVydHlOYW1lID09PSAnVmFsdWUnICYmICh0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW3NlbGVjdGVkW2ldXS50eXBlID09PSAnU3BpbkJ1dHRvbicgfHwgdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtzZWxlY3RlZFtpXV0udHlwZSA9PT0gJ1Njcm9sbEJhcicpKSB7DQogICAgICAgIHJldHVybiB0aGlzLnVwZGF0ZVNwaW5CdXR0b25TY3JvbGxCYXJWYWx1ZVByb3Aoc2VsZWN0ZWRbaV0sIGFyZy52YWx1ZSkNCiAgICAgIH0gZWxzZSBpZiAoYXJnLnByb3BlcnR5TmFtZSA9PT0gJ1ZhbHVlJyAmJiAodGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtzZWxlY3RlZFtpXV0udHlwZSA9PT0gJ09wdGlvbkJ1dHRvbicpICYmDQogICAgICAodGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtzZWxlY3RlZFtpXV0ucHJvcGVydGllcy5Hcm91cE5hbWUgIT09ICcnKSAmJiBhcmcudmFsdWUgPT09ICdUcnVlJykgew0KICAgICAgICBjb25zdCBncm91cE5hbWUgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW3NlbGVjdGVkW2ldXS5wcm9wZXJ0aWVzLkdyb3VwTmFtZSENCiAgICAgICAgdGhpcy51cGRhdGVWYWx1ZUZvckNvbW1vbkdyb3VwTmFtZShzZWxlY3RlZFtpXSwgYXJnLnZhbHVlLCBncm91cE5hbWUpDQogICAgICB9IGVsc2UgaWYgKGFyZy5wcm9wZXJ0eU5hbWUgPT09ICdNaW4nIHx8IGFyZy5wcm9wZXJ0eU5hbWUgPT09ICdNYXgnKSB7DQogICAgICAgIHRoaXMudXBkYXRlUHJvcFZhbHVlKHNlbGVjdGVkW2ldLCBhcmcucHJvcGVydHlOYW1lLCBhcmcudmFsdWUpDQogICAgICAgIHRoaXMudmFsaWRhdGVWYWx1ZVByb3BlcnR5KHNlbGVjdGVkW2ldLCBhcmcudmFsdWUpDQogICAgICB9IGVsc2UgaWYgKGFyZy5wcm9wZXJ0eU5hbWUgPT09ICdDYW5jZWwnIHx8IGFyZy5wcm9wZXJ0eU5hbWUgPT09ICdEZWZhdWx0Jykgew0KICAgICAgICB0aGlzLnZhbGlkYXRlQ2FuY2VsRGVmYXVsdFByb3Aoc2VsZWN0ZWRbaV0sIGFyZy5wcm9wZXJ0eU5hbWUsIGFyZy52YWx1ZSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMudXBkYXRlUHJvcFZhbHVlKHNlbGVjdGVkW2ldLCBhcmcucHJvcGVydHlOYW1lLCBhcmcudmFsdWUpDQogICAgICB9DQogICAgfQ0KICB9DQoNCiAgdXBkYXRlVmFsdWVQcm9wZXJ0eSAoYXJnOiBJUHJvcENvbnRyb2wpIHsNCiAgICBjb25zdCBzZWxlY3RlZCA9IHRoaXMuZ2V0U2VsZWN0ZWRDb250cm9sc0RhdGFzIQ0KICAgIGxldCBpc1ZhbGlkOiBib29sZWFuID0gdHJ1ZQ0KICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VsZWN0ZWQubGVuZ3RoOyBpKyspIHsNCiAgICAgIGNvbnN0IHR5cGUgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW3NlbGVjdGVkW2ldXS50eXBlDQogICAgICBpZiAodHlwZSA9PT0gJ0xpc3RCb3gnKSB7DQogICAgICAgIGlzVmFsaWQgPSB0aGlzLnZhbGlkYXRlVGV4dFZhbHVlUHJvcGVydHkoYXJnLnZhbHVlLCBhcmcucHJvcGVydHlOYW1lLCBzZWxlY3RlZFtpXSkNCiAgICAgIH0NCiAgICB9DQogICAgaWYgKGlzVmFsaWQpIHsNCiAgICAgIHRoaXMuZW1pdFVwZGF0ZVByb3BlcnR5KGFyZy5wcm9wZXJ0eU5hbWUsIGFyZy52YWx1ZSkNCiAgICB9DQogICAgcmV0dXJuIGlzVmFsaWQNCiAgfQ0KICB1cGRhdGVQcm9wVmFsdWUgKGlkOiBzdHJpbmcsIHByb3BOYW1lOiBrZXlvZiBjb250cm9sUHJvcGVydGllcywgcHJvcFZhbHVlOiBhbnkpIHsNCiAgICB0aGlzLnVwZGF0ZUNvbnRyb2woew0KICAgICAgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLA0KICAgICAgY29udHJvbElkOiBpZCwNCiAgICAgIHByb3BlcnR5TmFtZTogcHJvcE5hbWUsDQogICAgICB2YWx1ZTogcHJvcFZhbHVlDQogICAgfSkNCiAgfQ0KICB1cGRhdGVWYWx1ZUZvckNvbW1vbkdyb3VwTmFtZSAoaWQ6IHN0cmluZywgdmFsdWU6IHN0cmluZywgZ3JvdXBOYW1lOiBzdHJpbmcpIHsNCiAgICBjb25zdCB1c2VyRGF0YSA9IE9iamVjdC5rZXlzKHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF0pDQogICAgdGhpcy51cGRhdGVQcm9wVmFsdWUoaWQsICdWYWx1ZScsICdUcnVlJykNCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHVzZXJEYXRhLmxlbmd0aDsgaSsrKSB7DQogICAgICBjb25zdCBjb250cm9sRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bdXNlckRhdGFbaV1dDQogICAgICBpZiAoY29udHJvbERhdGEudHlwZSA9PT0gJ09wdGlvbkJ1dHRvbicgJiYgY29udHJvbERhdGEucHJvcGVydGllcy5Hcm91cE5hbWUgPT09IGdyb3VwTmFtZSAmJiBjb250cm9sRGF0YS5wcm9wZXJ0aWVzLklEICE9PSBpZCkgew0KICAgICAgICB0aGlzLnVwZGF0ZVByb3BWYWx1ZShjb250cm9sRGF0YS5wcm9wZXJ0aWVzLklELCAnVmFsdWUnLCAnRmFsc2UnKQ0KICAgICAgfQ0KICAgIH0NCiAgfQ0KICB2YWxpZGF0ZVZhbHVlUHJvcGVydHkgKGlkOiBzdHJpbmcsIHZhbHVlOiBudW1iZXIpIHsNCiAgICBsZXQgYWN0dWFsVmFsdWUgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2lkXS5wcm9wZXJ0aWVzLlZhbHVlISBhcyBudW1iZXINCiAgICBpZiAoIXRoaXMuY2hlY2tWYWx1ZVJhbmdlTWluTWF4KGlkLCBhY3R1YWxWYWx1ZSkpIHsNCiAgICAgIHRoaXMudXBkYXRlUHJvcFZhbHVlKGlkLCAnVmFsdWUnLCB2YWx1ZSkNCiAgICB9DQogIH0NCiAgdXBkYXRlU3BpbkJ1dHRvblNjcm9sbEJhclZhbHVlUHJvcCAoaWQ6IHN0cmluZywgdmFsdWU6IG51bWJlcikgew0KICAgIGlmICh0aGlzLmNoZWNrVmFsdWVSYW5nZU1pbk1heChpZCwgdmFsdWUpKSB7DQogICAgICB0aGlzLnVwZGF0ZVByb3BWYWx1ZShpZCwgJ1ZhbHVlJywgdmFsdWUpDQogICAgICByZXR1cm4gdHJ1ZQ0KICAgIH0NCiAgICByZXR1cm4gZmFsc2UNCiAgfQ0KICB2YWxpZGF0ZUNhbmNlbERlZmF1bHRQcm9wIChpZDogc3RyaW5nLCBwcm9wTmFtZToga2V5b2YgY29udHJvbFByb3BlcnRpZXMsIHZhbHVlOiBib29sZWFuKSB7DQogICAgY29uc3QgdXNlckZvcm1Db250cm9scyA9IE9iamVjdC5rZXlzKHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF0pDQogICAgZm9yIChsZXQgY29udHJvbElkIG9mIHVzZXJGb3JtQ29udHJvbHMpIHsNCiAgICAgIGlmICh0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2NvbnRyb2xJZF0udHlwZSA9PT0gJ0NvbW1hbmRCdXR0b24nKSB7DQogICAgICAgIGlmIChjb250cm9sSWQgPT09IGlkKSB7DQogICAgICAgICAgdGhpcy51cGRhdGVQcm9wVmFsdWUoaWQsIHByb3BOYW1lLCB2YWx1ZSkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB0aGlzLnVwZGF0ZVByb3BWYWx1ZShjb250cm9sSWQsIHByb3BOYW1lLCBmYWxzZSkNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfQ0KICBjaGVja1ZhbHVlUmFuZ2VNaW5NYXggKGlkOiBzdHJpbmcsIHZhbHVlOiBudW1iZXIpIHsNCiAgICBsZXQgbWF4VmFsdWUgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2lkXS5wcm9wZXJ0aWVzLk1heCENCiAgICBsZXQgbWluVmFsdWUgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2lkXS5wcm9wZXJ0aWVzLk1pbiENCiAgICBsZXQgbWluID0gTWF0aC5taW4obWluVmFsdWUsIG1heFZhbHVlKQ0KICAgIGxldCBtYXggPSBNYXRoLm1heChtaW5WYWx1ZSwgbWF4VmFsdWUpDQogICAgaWYgKHZhbHVlID49IG1pbiAmJiB2YWx1ZSA8PSBtYXgpIHsNCiAgICAgIHJldHVybiB0cnVlDQogICAgfSBlbHNlIHsNCiAgICAgIHJldHVybiBmYWxzZQ0KICAgIH0NCiAgfQ0KICB1cGRhdGVOYW1lIChpZDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSB7DQogICAgbGV0IHVzZXJEYXRhDQogICAgbGV0IGlzVW5pcXVlDQogICAgaWYgKHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1baWRdLnR5cGUgPT09ICdVc2VyZm9ybScpIHsNCiAgICAgIHVzZXJEYXRhID0gT2JqZWN0LmtleXModGhpcy51c2VyZm9ybURhdGEpDQogICAgICBpc1VuaXF1ZSA9IHVzZXJEYXRhLmZpbmRJbmRleCh2YWwgPT4gdGhpcy51c2VyZm9ybURhdGFbdmFsXVt2YWxdLnByb3BlcnRpZXMuTmFtZSA9PT0gdmFsdWUgJiYgdmFsICE9PSBpZCkNCiAgICB9IGVsc2Ugew0KICAgICAgdXNlckRhdGEgPSBPYmplY3Qua2V5cyh0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdKQ0KICAgICAgaXNVbmlxdWUgPSB1c2VyRGF0YS5maW5kSW5kZXgodmFsID0+IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bdmFsXS5wcm9wZXJ0aWVzLk5hbWUgPT09IHZhbHVlICYmIHZhbCAhPT0gaWQpDQogICAgfQ0KICAgIGlmIChpc1VuaXF1ZSA9PT0gLTEgJiYgdmFsdWUgIT09ICcnKSB7DQogICAgICB0aGlzLnVwZGF0ZVByb3BWYWx1ZShpZCwgJ05hbWUnLCB2YWx1ZSkNCiAgICAgIHJldHVybiB0cnVlDQogICAgfSBlbHNlIHsNCiAgICAgIHJldHVybiBmYWxzZQ0KICAgIH0NCiAgfQ0KICB2YWxpZGF0ZVZhbHVlUHJvcGVydHlDaGJveE9wYnRuVGdsYnRuIChwcm9wZXJ0eU5hbWUgOiBrZXlvZiBjb250cm9sUHJvcGVydGllcywgcHJvcGVydHlWYWx1ZSA6IHN0cmluZykgOiBzdHJpbmcgew0KICAgIGxldCByZXN1bHRWYWx1ZSA9ICcnDQogICAgaWYgKCFpc05hTihwYXJzZUludChwcm9wZXJ0eVZhbHVlKSkpIHsNCiAgICAgIGlmIChwYXJzZUludChwcm9wZXJ0eVZhbHVlKSA9PT0gMCkgew0KICAgICAgICB0aGlzLmVtaXRVcGRhdGVQcm9wZXJ0eShwcm9wZXJ0eU5hbWUsICdGYWxzZScpDQogICAgICAgIHJlc3VsdFZhbHVlID0gJ0ZhbHNlJw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkocHJvcGVydHlOYW1lLCAnVHJ1ZScpDQogICAgICAgIHJlc3VsdFZhbHVlID0gJ1RydWUnDQogICAgICB9DQogICAgfSBlbHNlIGlmIChwcm9wZXJ0eVZhbHVlLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJykgew0KICAgICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkocHJvcGVydHlOYW1lLCAnVHJ1ZScpDQogICAgICByZXN1bHRWYWx1ZSA9ICdUcnVlJw0KICAgIH0gZWxzZSBpZiAocHJvcGVydHlWYWx1ZS50b0xvd2VyQ2FzZSgpID09PSAnZmFsc2UnKSB7DQogICAgICB0aGlzLmVtaXRVcGRhdGVQcm9wZXJ0eShwcm9wZXJ0eU5hbWUsICdGYWxzZScpDQogICAgICByZXN1bHRWYWx1ZSA9ICdGYWxzZScNCiAgICB9IGVsc2Ugew0KICAgICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkocHJvcGVydHlOYW1lLCAnJykNCiAgICAgIHJlc3VsdFZhbHVlID0gJycNCiAgICB9DQogICAgcmV0dXJuIHJlc3VsdFZhbHVlDQogIH0NCiAgdmFsaWRhdGVDb250cm9sU291cmNlUHJvcGVydHkgKHByb3BlcnR5VmFsdWUgOiBzdHJpbmcpIHsNCiAgICAvLyBzaG91bGQgdmFsaWRhdGUgdGhlIHByb3BlcnR5VmFsdWUNCiAgICByZXR1cm4gdHJ1ZQ0KICB9DQogIHZhbGlkYXRlUm93U291cmNlUHJvcGVydHkgKHByb3BlcnR5VmFsdWUgOiBzdHJpbmcpIHsNCiAgICAvLyBzaG91bGQgdmFsaWRhdGUgdGhlIHByb3BlcnR5VmFsdWUNCiAgICByZXR1cm4gdHJ1ZQ0KICB9DQogIHZhbGlkYXRlVGV4dFZhbHVlUHJvcGVydHkgKHByb3BlcnR5VmFsdWUgOiBzdHJpbmcsIHByb3BlcnR5TmFtZTogc3RyaW5nLCBjb250cm9sSWQ6IHN0cmluZykgew0KICAgIGNvbnN0IGNvbnRyb2xEYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtjb250cm9sSWRdDQogICAgY29uc3Qgcm93U291cmNlRGF0YSA9IGNvbnRyb2xEYXRhLmV4dHJhRGF0YXMhLlJvd1NvdXJjZURhdGEhDQogICAgY29uc3QgYm91bmRDb2x1bW4gPSBwcm9wZXJ0eU5hbWUgPT09ICdWYWx1ZScgPyBjb250cm9sRGF0YS5wcm9wZXJ0aWVzLkJvdW5kQ29sdW1uISA6IDENCiAgICBpZiAoYm91bmRDb2x1bW4gPD0gMCB8fCBib3VuZENvbHVtbiA+IHJvd1NvdXJjZURhdGFbMF0ubGVuZ3RoKSB7DQogICAgICByZXR1cm4gZmFsc2UNCiAgICB9DQogICAgZm9yIChsZXQgaSA9IDA7IGkgPCByb3dTb3VyY2VEYXRhLmxlbmd0aDsgaSsrKSB7DQogICAgICBpZiAocHJvcGVydHlWYWx1ZSA9PT0gcm93U291cmNlRGF0YVtpXVtib3VuZENvbHVtbiAtIDFdKSB7DQogICAgICAgIHJldHVybiB0cnVlDQogICAgICB9DQogICAgfQ0KICAgIHJldHVybiBmYWxzZQ0KICB9DQogIHZhbGlkYXRlQ29sdW1uV2lkdGhzIChwcm9wZXJ0eU5hbWUgOiBrZXlvZiBjb250cm9sUHJvcGVydGllcywgcHJvcGVydHlWYWx1ZSA6IHN0cmluZykgOnN0cmluZyB7DQogICAgaWYgKHByb3BlcnR5VmFsdWUgPT09ICcnKSB7DQogICAgICByZXR1cm4gJycNCiAgICB9DQogICAgY29uc3QgaW5pdGlhbENvbFdpZHRocyA9IHByb3BlcnR5VmFsdWUuc3BsaXQoJzsnKQ0KICAgIGxldCB2YWxpZFByb3BlcnR5VmFsdWU6IGJvb2xlYW4gPSBmYWxzZQ0KICAgIGluaXRpYWxDb2xXaWR0aHMuZm9yRWFjaChlbGVtZW50ID0+IHsNCiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBlbGVtZW50Lmxlbmd0aDsgaW5kZXgrKykgew0KICAgICAgICBpZiAoZWxlbWVudC5pbmNsdWRlcygnaW4nKSkgew0KICAgICAgICAgIGlmICgoZWxlbWVudC5jaGFyQ29kZUF0KGluZGV4KSA+IDQ3ICYmIGVsZW1lbnQuY2hhckNvZGVBdChpbmRleCkgPCA1OCkgfHwgKGVsZW1lbnQuY2hhckNvZGVBdChpbmRleCkgPT09IDczIHx8IGVsZW1lbnQuY2hhckNvZGVBdChpbmRleCkgPT09IDEwNSB8fCBlbGVtZW50LmNoYXJDb2RlQXQoaW5kZXgpID09PSAzMikgfHwgKGVsZW1lbnQuY2hhckNvZGVBdChpbmRleCkgPT09IDc4IHx8IGVsZW1lbnQuY2hhckNvZGVBdChpbmRleCkgPT09IDExMCB8fCBlbGVtZW50LmNoYXJDb2RlQXQoaW5kZXgpID09PSAzMikpIHsNCiAgICAgICAgICAgIHZhbGlkUHJvcGVydHlWYWx1ZSA9IHRydWUNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdmFsaWRQcm9wZXJ0eVZhbHVlID0gZmFsc2UNCiAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQuaW5jbHVkZXMoJ2NtJykpIHsNCiAgICAgICAgICBpZiAoKGVsZW1lbnQuY2hhckNvZGVBdChpbmRleCkgPiA0NyAmJiBlbGVtZW50LmNoYXJDb2RlQXQoaW5kZXgpIDwgNTgpIHx8IChlbGVtZW50LmNoYXJDb2RlQXQoaW5kZXgpID09PSA2NyB8fCBlbGVtZW50LmNoYXJDb2RlQXQoaW5kZXgpID09PSA5OSB8fCBlbGVtZW50LmNoYXJDb2RlQXQoaW5kZXgpID09PSAzMikgfHwgKGVsZW1lbnQuY2hhckNvZGVBdChpbmRleCkgPT09IDc3IHx8IGVsZW1lbnQuY2hhckNvZGVBdChpbmRleCkgPT09IDEwOSB8fCBlbGVtZW50LmNoYXJDb2RlQXQoaW5kZXgpID09PSAzMikpIHsNCiAgICAgICAgICAgIHZhbGlkUHJvcGVydHlWYWx1ZSA9IHRydWUNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdmFsaWRQcm9wZXJ0eVZhbHVlID0gZmFsc2UNCiAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2UgaWYgKGVsZW1lbnQuaW5jbHVkZXMoJ3B0JykpIHsNCiAgICAgICAgICBpZiAoKGVsZW1lbnQuY2hhckNvZGVBdChpbmRleCkgPiA0NyAmJiBlbGVtZW50LmNoYXJDb2RlQXQoaW5kZXgpIDwgNTgpIHx8IChlbGVtZW50LmNoYXJDb2RlQXQoaW5kZXgpID09PSA4MCB8fCBlbGVtZW50LmNoYXJDb2RlQXQoaW5kZXgpID09PSAxMTIgfHwgZWxlbWVudC5jaGFyQ29kZUF0KGluZGV4KSA9PT0gMzIpIHx8IChlbGVtZW50LmNoYXJDb2RlQXQoaW5kZXgpID09PSA4NCB8fCBlbGVtZW50LmNoYXJDb2RlQXQoaW5kZXgpID09PSAxMTYgfHwgZWxlbWVudC5jaGFyQ29kZUF0KGluZGV4KSA9PT0gMzIpKSB7DQogICAgICAgICAgICB2YWxpZFByb3BlcnR5VmFsdWUgPSB0cnVlDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHZhbGlkUHJvcGVydHlWYWx1ZSA9IGZhbHNlDQogICAgICAgICAgICBicmVhaw0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBpZiAoKGVsZW1lbnQuY2hhckNvZGVBdChpbmRleCkgPiA0NyAmJiBlbGVtZW50LmNoYXJDb2RlQXQoaW5kZXgpIDwgNTgpKSB7DQogICAgICAgICAgICB2YWxpZFByb3BlcnR5VmFsdWUgPSB0cnVlDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHZhbGlkUHJvcGVydHlWYWx1ZSA9IGZhbHNlDQogICAgICAgICAgICBicmVhaw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0pDQogICAgaWYgKHZhbGlkUHJvcGVydHlWYWx1ZSkgew0KICAgICAgbGV0IGEgPSAocHJvcGVydHlWYWx1ZS5zcGxpdCgnOycpKQ0KICAgICAgbGV0IHBvaW50VmFsdWU6YW55ID0gW10NCiAgICAgIGxldCBuZXdDb2x1bW5XaWR0aHNWYWx1ZSA9ICcnDQogICAgICBhLmZvckVhY2goZWxlbWVudCA9PiB7DQogICAgICAgIGlmICghaXNOYU4ocGFyc2VJbnQoZWxlbWVudCkpKSB7DQogICAgICAgICAgaWYgKGVsZW1lbnQuaW5jbHVkZXMoJ2luJykpIHsNCiAgICAgICAgICAgIHBvaW50VmFsdWUucHVzaChwYXJzZUludChlbGVtZW50KSAqIDcyKQ0KICAgICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudC5pbmNsdWRlcygnY20nKSkgew0KICAgICAgICAgICAgcG9pbnRWYWx1ZS5wdXNoKHBhcnNlSW50KGVsZW1lbnQpICogMjguMzUpDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHBvaW50VmFsdWUucHVzaChwYXJzZUludChlbGVtZW50KSkNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgcG9pbnRWYWx1ZS5sZW5ndGg7IGluZGV4KyspIHsNCiAgICAgICAgaWYgKGluZGV4ID09PSBwb2ludFZhbHVlLmxlbmd0aCAtIDEpIHsNCiAgICAgICAgICBuZXdDb2x1bW5XaWR0aHNWYWx1ZSA9IG5ld0NvbHVtbldpZHRoc1ZhbHVlICsgKHBvaW50VmFsdWVbaW5kZXhdKSArICdwdCcNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBuZXdDb2x1bW5XaWR0aHNWYWx1ZSA9IG5ld0NvbHVtbldpZHRoc1ZhbHVlICsgKHBvaW50VmFsdWVbaW5kZXhdKSArICdwdDsnDQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHJldHVybiBuZXdDb2x1bW5XaWR0aHNWYWx1ZQ0KICAgIH0gZWxzZSB7DQogICAgICByZXR1cm4gJ0ludmFsaWQnDQogICAgfQ0KICB9DQogIHZhbGlkYXRlTGlzdFdpZHRoIChwcm9wZXJ0eU5hbWUgOiBrZXlvZiBjb250cm9sUHJvcGVydGllcywgcHJvcGVydHlWYWx1ZSA6IHN0cmluZykgOnN0cmluZyB7DQogICAgaWYgKHByb3BlcnR5VmFsdWUgPT09ICcnKSB7DQogICAgICByZXR1cm4gJ0ludmFsaWQnDQogICAgfQ0KICAgIGlmIChwcm9wZXJ0eVZhbHVlWzBdID09PSAnLScpIHsNCiAgICAgIHJldHVybiAnTmVnYXRpdmUnDQogICAgfQ0KICAgIGNvbnN0IGluaXRpYWxMaXN0V2lkdGggPSBwcm9wZXJ0eVZhbHVlDQogICAgbGV0IHZhbGlkUHJvcGVydHlWYWx1ZTogYm9vbGVhbiA9IGZhbHNlDQogICAgY29uc3QgZWxlbWVudCA9IGluaXRpYWxMaXN0V2lkdGgNCiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgaW5pdGlhbExpc3RXaWR0aC5sZW5ndGg7IGluZGV4KyspIHsNCiAgICAgIGlmIChlbGVtZW50LmluY2x1ZGVzKCdpbicpICYmIChlbGVtZW50LmVuZHNXaXRoKCdpbicpKSkgew0KICAgICAgICBpZiAoKGVsZW1lbnQuY2hhckNvZGVBdChpbmRleCkgPiA0NyAmJiBlbGVtZW50LmNoYXJDb2RlQXQoaW5kZXgpIDwgNTgpIHx8IChlbGVtZW50LmNoYXJDb2RlQXQoaW5kZXgpID09PSA3MyB8fCBlbGVtZW50LmNoYXJDb2RlQXQoaW5kZXgpID09PSAxMDUgfHwgZWxlbWVudC5jaGFyQ29kZUF0KGluZGV4KSA9PT0gMzIpIHx8IChlbGVtZW50LmNoYXJDb2RlQXQoaW5kZXgpID09PSA3OCB8fCBlbGVtZW50LmNoYXJDb2RlQXQoaW5kZXgpID09PSAxMTAgfHwgZWxlbWVudC5jaGFyQ29kZUF0KGluZGV4KSA9PT0gMzIpKSB7DQogICAgICAgICAgdmFsaWRQcm9wZXJ0eVZhbHVlID0gdHJ1ZQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHZhbGlkUHJvcGVydHlWYWx1ZSA9IGZhbHNlDQogICAgICAgICAgYnJlYWsNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIGlmIChlbGVtZW50LmluY2x1ZGVzKCdjbScpICYmIChlbGVtZW50LmVuZHNXaXRoKCdjbScpKSkgew0KICAgICAgICBpZiAoKGVsZW1lbnQuY2hhckNvZGVBdChpbmRleCkgPiA0NyAmJiBlbGVtZW50LmNoYXJDb2RlQXQoaW5kZXgpIDwgNTgpIHx8IChlbGVtZW50LmNoYXJDb2RlQXQoaW5kZXgpID09PSA2NyB8fCBlbGVtZW50LmNoYXJDb2RlQXQoaW5kZXgpID09PSA5OSB8fCBlbGVtZW50LmNoYXJDb2RlQXQoaW5kZXgpID09PSAzMikgfHwgKGVsZW1lbnQuY2hhckNvZGVBdChpbmRleCkgPT09IDc3IHx8IGVsZW1lbnQuY2hhckNvZGVBdChpbmRleCkgPT09IDEwOSB8fCBlbGVtZW50LmNoYXJDb2RlQXQoaW5kZXgpID09PSAzMikpIHsNCiAgICAgICAgICB2YWxpZFByb3BlcnR5VmFsdWUgPSB0cnVlDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdmFsaWRQcm9wZXJ0eVZhbHVlID0gZmFsc2UNCiAgICAgICAgICBicmVhaw0KICAgICAgICB9DQogICAgICB9IGVsc2UgaWYgKGVsZW1lbnQuaW5jbHVkZXMoJ3B0JykgJiYgKGVsZW1lbnQuZW5kc1dpdGgoJ3B0JykpKSB7DQogICAgICAgIGlmICgoZWxlbWVudC5jaGFyQ29kZUF0KGluZGV4KSA+IDQ3ICYmIGVsZW1lbnQuY2hhckNvZGVBdChpbmRleCkgPCA1OCkgfHwgKGVsZW1lbnQuY2hhckNvZGVBdChpbmRleCkgPT09IDgwIHx8IGVsZW1lbnQuY2hhckNvZGVBdChpbmRleCkgPT09IDExMiB8fCBlbGVtZW50LmNoYXJDb2RlQXQoaW5kZXgpID09PSAzMikgfHwgKGVsZW1lbnQuY2hhckNvZGVBdChpbmRleCkgPT09IDg0IHx8IGVsZW1lbnQuY2hhckNvZGVBdChpbmRleCkgPT09IDExNiB8fCBlbGVtZW50LmNoYXJDb2RlQXQoaW5kZXgpID09PSAzMikpIHsNCiAgICAgICAgICB2YWxpZFByb3BlcnR5VmFsdWUgPSB0cnVlDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgdmFsaWRQcm9wZXJ0eVZhbHVlID0gZmFsc2UNCiAgICAgICAgICBicmVhaw0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICBpZiAoKGVsZW1lbnQuY2hhckNvZGVBdChpbmRleCkgPiA0NyAmJiBlbGVtZW50LmNoYXJDb2RlQXQoaW5kZXgpIDwgNTgpKSB7DQogICAgICAgICAgdmFsaWRQcm9wZXJ0eVZhbHVlID0gdHJ1ZQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHZhbGlkUHJvcGVydHlWYWx1ZSA9IGZhbHNlDQogICAgICAgICAgYnJlYWsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgICBpZiAodmFsaWRQcm9wZXJ0eVZhbHVlKSB7DQogICAgICBsZXQgYSA9IHByb3BlcnR5VmFsdWUNCiAgICAgIGxldCBwb2ludFZhbHVlOmFueSA9IFtdDQogICAgICBsZXQgbmV3Q29sdW1uV2lkdGhzVmFsdWUgPSAnJw0KICAgICAgY29uc3QgZWxlbWVudCA9IGENCiAgICAgIGlmICghaXNOYU4ocGFyc2VJbnQoZWxlbWVudCkpKSB7DQogICAgICAgIGlmIChlbGVtZW50LmluY2x1ZGVzKCdpbicpKSB7DQogICAgICAgICAgcG9pbnRWYWx1ZS5wdXNoKHBhcnNlSW50KGVsZW1lbnQpICogNzIpDQogICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudC5pbmNsdWRlcygnY20nKSkgew0KICAgICAgICAgIHBvaW50VmFsdWUucHVzaChwYXJzZUludChlbGVtZW50KSAqIDI4LjM1KQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHBvaW50VmFsdWUucHVzaChwYXJzZUludChlbGVtZW50KSkNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgbmV3Q29sdW1uV2lkdGhzVmFsdWUgPSBwb2ludFZhbHVlICsgJ3B0Jw0KICAgICAgcmV0dXJuIG5ld0NvbHVtbldpZHRoc1ZhbHVlDQogICAgfSBlbHNlIHsNCiAgICAgIHJldHVybiAnSW52YWxpZCcNCiAgICB9DQogIH0NCiAgdXBkYXRlQXBwZWFyYW5jZSAoZTogRXZlbnQpIHsNCiAgICBjb25zdCBwcm9wZXJ0eU5hbWU6IGtleW9mIGNvbnRyb2xQcm9wZXJ0aWVzID0gKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLm5hbWUgYXMga2V5b2YgY29udHJvbFByb3BlcnRpZXMNCiAgICBjb25zdCBpbnB1dFR5cGUgPSB0aGlzLnRhYmxlRGF0YVtwcm9wZXJ0eU5hbWVdIS50eXBlDQogICAgbGV0IHByb3BlcnR5VmFsdWUgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUNCiAgICBpZiAoaW5wdXRUeXBlID09PSAnZmlsZScpIHsNCiAgICAgIGlmIChwcm9wZXJ0eU5hbWUgPT09ICdNb3VzZUljb24nIHx8IHByb3BlcnR5TmFtZSA9PT0gJ1BpY3R1cmUnKSB7DQogICAgICAgIHRoaXMuaGFuZGxlQ29udmVydGlvbkltYWdlVG9CYXNlNjQoZSkNCiAgICAgIH0NCiAgICB9IGVsc2UgaWYgKGlucHV0VHlwZSA9PT0gJ1N0cmluZycpIHsNCiAgICAgIGlmIChwcm9wZXJ0eU5hbWUgPT09ICdBY2NlbGVyYXRvcicgfHwgcHJvcGVydHlOYW1lID09PSAnUGFzc3dvcmRDaGFyJykgew0KICAgICAgICB0aGlzLmVtaXRVcGRhdGVQcm9wZXJ0eSgNCiAgICAgICAgICBwcm9wZXJ0eU5hbWUsDQogICAgICAgICAgcHJvcGVydHlWYWx1ZSAhPT0gJycgPyBwcm9wZXJ0eVZhbHVlWzBdIDogcHJvcGVydHlWYWx1ZQ0KICAgICAgICApOw0KICAgICAgICAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSBwcm9wZXJ0eVZhbHVlICYmIHByb3BlcnR5VmFsdWVbMF0NCiAgICAgIH0gZWxzZSBpZiAocHJvcGVydHlOYW1lID09PSAnTmFtZScpIHsNCiAgICAgICAgaWYgKGNoZWNrUHJvcGVydHlWYWx1ZShwcm9wZXJ0eU5hbWUsIHByb3BlcnR5VmFsdWUpKSB7DQogICAgICAgICAgY29uc3QgaXNTdWNjZXNzID0gdGhpcy51cGRhdGVQcm9wZXJ0eSh7IHByb3BlcnR5TmFtZTogcHJvcGVydHlOYW1lLCB2YWx1ZTogcHJvcGVydHlWYWx1ZSB9KQ0KICAgICAgICAgIGlmICghaXNTdWNjZXNzKSB7DQogICAgICAgICAgICAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSB0aGlzLnRhYmxlRGF0YSFbcHJvcGVydHlOYW1lXSEudmFsdWUhIGFzIHN0cmluZw0KICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3Nob3dFcnJvclBvcHVwJywgdHJ1ZSwgJ2ludmFsaWQnLCAnQ291bGQgbm90IHNldCB0aGUgTmFtZSBwcm9wZXJ0eS4gQW1iaWd1b3VzIG5hbWUuJykNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcNCiAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnc2hvd0Vycm9yUG9wdXAnLCB0cnVlLCAnaW52YWxpZCcsIGBOb3QgYSBsZWdhbCBvYmplY3QgbmFtZTogJyR7cHJvcGVydHlWYWx1ZX0nYCkNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0eU5hbWUgPT09ICdWYWx1ZScpIHsNCiAgICAgICAgaWYgKHRoaXMuZ2V0U2VsZWN0ZWRDb250cm9sc0RhdGFzLmxlbmd0aCA9PT0gMSkgew0KICAgICAgICAgIGNvbnN0IGNvbnRyb2xUeXBlID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVt0aGlzLmdldFNlbGVjdGVkQ29udHJvbHNEYXRhc1swXV0udHlwZQ0KICAgICAgICAgIGlmIChjb250cm9sVHlwZSA9PT0gJ0NoZWNrQm94JyB8fCBjb250cm9sVHlwZSA9PT0gJ09wdGlvbkJ1dHRvbicgfHwgY29udHJvbFR5cGUgPT09ICdUb2dnbGVCdXR0b24nKSB7DQogICAgICAgICAgICBjb25zdCByZXN1bHRWYWx1ZSA9IHRoaXMudmFsaWRhdGVWYWx1ZVByb3BlcnR5Q2hib3hPcGJ0blRnbGJ0bihwcm9wZXJ0eU5hbWUsIHByb3BlcnR5VmFsdWUpOw0KICAgICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gcmVzdWx0VmFsdWUNCiAgICAgICAgICB9IGVsc2UgaWYgKGNvbnRyb2xUeXBlID09PSAnTGlzdEJveCcpIHsNCiAgICAgICAgICAgIGNvbnN0IGlzVGV4dFZhbGlkID0gdGhpcy52YWxpZGF0ZVRleHRWYWx1ZVByb3BlcnR5KHByb3BlcnR5VmFsdWUsIHByb3BlcnR5TmFtZSwgdGhpcy5nZXRTZWxlY3RlZENvbnRyb2xzRGF0YXNbMF0pDQogICAgICAgICAgICBpZiAoaXNUZXh0VmFsaWQpIHsNCiAgICAgICAgICAgICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkocHJvcGVydHlOYW1lLCBwcm9wZXJ0eVZhbHVlKQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3Nob3dFcnJvclBvcHVwJywgdHJ1ZSwgJ2ludmFsaWQnLCBgQ291bGQgbm90IHNldCB0aGUgJHtwcm9wZXJ0eU5hbWV9IHByb3BlcnR5LiBJbnZhbGlkIHByb3BlcnR5IFZhbHVlYCk7DQogICAgICAgICAgICAgIChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSA9IHRoaXMudGFibGVEYXRhIVtwcm9wZXJ0eU5hbWVdIS52YWx1ZSEgYXMgc3RyaW5nDQogICAgICAgICAgICB9DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMuZW1pdFVwZGF0ZVByb3BlcnR5KHByb3BlcnR5TmFtZSwgcHJvcGVydHlWYWx1ZSkNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgaWYgKHRoaXMucmVzdWx0QXJyYXlbMF0gPT09IHRydWUpIHsNCiAgICAgICAgICAgIGNvbnN0IHJlc3VsdFZhbHVlID0gdGhpcy52YWxpZGF0ZVZhbHVlUHJvcGVydHlDaGJveE9wYnRuVGdsYnRuKHByb3BlcnR5TmFtZSwgcHJvcGVydHlWYWx1ZSk7DQogICAgICAgICAgICAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSByZXN1bHRWYWx1ZQ0KICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5yZXN1bHRBcnJheVsxXSA9PT0gdHJ1ZSkgew0KICAgICAgICAgICAgY29uc3QgaXNWYWx1ZVZhbGlkID0gdGhpcy51cGRhdGVWYWx1ZVByb3BlcnR5KHsgcHJvcGVydHlOYW1lOiBwcm9wZXJ0eU5hbWUsIHZhbHVlOiBwcm9wZXJ0eVZhbHVlIH0pDQogICAgICAgICAgICBpZiAoIWlzVmFsdWVWYWxpZCkgew0KICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnc2hvd0Vycm9yUG9wdXAnLCB0cnVlLCAnaW52YWxpZCcsIGBDb3VsZCBub3Qgc2V0IHRoZSAke3Byb3BlcnR5TmFtZX0gcHJvcGVydHkuIEludmFsaWQgcHJvcGVydHkgVmFsdWVgKTsNCiAgICAgICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucmVzdWx0QXJyYXlbMl0gPT09IHRydWUpIHsNCg0KICAgICAgICAgIH0NCiAgICAgICAgICAvLyB0aGlzLnVwZGF0ZVZhbHVlUHJvcGVydHkoeyBwcm9wZXJ0eU5hbWU6IHByb3BlcnR5TmFtZSwgdmFsdWU6IHByb3BlcnR5VmFsdWUgfSkNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0eU5hbWUgPT09ICdUZXh0Jykgew0KICAgICAgICBjb25zdCBjb250cm9sVHlwZSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bdGhpcy5nZXRTZWxlY3RlZENvbnRyb2xzRGF0YXNbMF1dLnR5cGUNCiAgICAgICAgaWYgKGNvbnRyb2xUeXBlID09PSAnTGlzdEJveCcpIHsNCiAgICAgICAgICBjb25zdCBpc1RleHRWYWxpZCA9IHRoaXMudmFsaWRhdGVUZXh0VmFsdWVQcm9wZXJ0eShwcm9wZXJ0eVZhbHVlLCBwcm9wZXJ0eU5hbWUsIHRoaXMuZ2V0U2VsZWN0ZWRDb250cm9sc0RhdGFzWzBdKQ0KICAgICAgICAgIGlmIChpc1RleHRWYWxpZCkgew0KICAgICAgICAgICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkocHJvcGVydHlOYW1lLCBwcm9wZXJ0eVZhbHVlKQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnc2hvd0Vycm9yUG9wdXAnLCB0cnVlLCAnaW52YWxpZCcsIGBDb3VsZCBub3Qgc2V0IHRoZSAke3Byb3BlcnR5TmFtZX0gcHJvcGVydHkuIEludmFsaWQgcHJvcGVydHkgVmFsdWVgKTsNCiAgICAgICAgICAgIChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSA9IHRoaXMudGFibGVEYXRhIVtwcm9wZXJ0eU5hbWVdIS52YWx1ZSEgYXMgc3RyaW5nDQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuZW1pdFVwZGF0ZVByb3BlcnR5KHByb3BlcnR5TmFtZSwgcHJvcGVydHlWYWx1ZSkNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0eU5hbWUgPT09ICdDb250cm9sU291cmNlJykgew0KICAgICAgICBjb25zdCBpc1ZhbGlkID0gdGhpcy52YWxpZGF0ZUNvbnRyb2xTb3VyY2VQcm9wZXJ0eShwcm9wZXJ0eVZhbHVlKQ0KICAgICAgICBpZiAoaXNWYWxpZCkgew0KICAgICAgICAgIHRoaXMuZW1pdFVwZGF0ZVByb3BlcnR5KHByb3BlcnR5TmFtZSwgcHJvcGVydHlWYWx1ZSkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnc2hvd0Vycm9yUG9wdXAnLCB0cnVlLCAnaW52YWxpZCcsICdJbnZhbGlkIHByb3BlcnR5IHZhbHVlLicpDQogICAgICAgIH0NCiAgICAgIH0gZWxzZSBpZiAocHJvcGVydHlOYW1lID09PSAnUm93U291cmNlJykgew0KICAgICAgICBjb25zdCBpc1ZhbGlkID0gdGhpcy52YWxpZGF0ZVJvd1NvdXJjZVByb3BlcnR5KHByb3BlcnR5VmFsdWUpDQogICAgICAgIGlmIChpc1ZhbGlkKSB7DQogICAgICAgICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkocHJvcGVydHlOYW1lLCBwcm9wZXJ0eVZhbHVlKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdzaG93RXJyb3JQb3B1cCcsIHRydWUsICdpbnZhbGlkJywgJ0ludmFsaWQgcHJvcGVydHkgdmFsdWUuJykNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0eU5hbWUgPT09ICdDb2x1bW5XaWR0aHMnKSB7DQogICAgICAgIGNvbnN0IHJlc3VsdFZhbHVlID0gdGhpcy52YWxpZGF0ZUNvbHVtbldpZHRocyhwcm9wZXJ0eU5hbWUsIHByb3BlcnR5VmFsdWUpDQogICAgICAgIGlmIChyZXN1bHRWYWx1ZSAhPT0gJ0ludmFsaWQnKSB7DQogICAgICAgICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkocHJvcGVydHlOYW1lLCByZXN1bHRWYWx1ZSkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnc2hvd0Vycm9yUG9wdXAnLCB0cnVlLCAnaW52YWxpZCcsIGBDb3VsZCBub3Qgc2V0IHRoZSAke3Byb3BlcnR5TmFtZX0gcHJvcGVydHkuIFR5cGUgbWlzbWF0Y2hgKTsNCiAgICAgICAgICAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSB0aGlzLnRhYmxlRGF0YSFbcHJvcGVydHlOYW1lXSEudmFsdWUhIGFzIHN0cmluZw0KICAgICAgICB9DQogICAgICB9IGVsc2UgaWYgKHByb3BlcnR5TmFtZSA9PT0gJ0xpc3RXaWR0aCcpIHsNCiAgICAgICAgY29uc3QgcmVzdWx0VmFsdWUgPSB0aGlzLnZhbGlkYXRlTGlzdFdpZHRoKHByb3BlcnR5TmFtZSwgcHJvcGVydHlWYWx1ZSkNCiAgICAgICAgaWYgKHJlc3VsdFZhbHVlICE9PSAnSW52YWxpZCcgJiYgcmVzdWx0VmFsdWUgIT09ICdOZWdhdGl2ZScpIHsNCiAgICAgICAgICB0aGlzLmVtaXRVcGRhdGVQcm9wZXJ0eShwcm9wZXJ0eU5hbWUsIHJlc3VsdFZhbHVlKQ0KICAgICAgICB9IGVsc2UgaWYgKHJlc3VsdFZhbHVlID09PSAnTmVnYXRpdmUnKSB7DQogICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3Nob3dFcnJvclBvcHVwJywgdHJ1ZSwgJ2ludmFsaWQnLCBgQ291bGQgbm90IHNldCB0aGUgJHtwcm9wZXJ0eU5hbWV9IHByb3BlcnR5LiBJbnZhbGlkIHByb3BlcnR5IHZhbHVlYCk7DQogICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnc2hvd0Vycm9yUG9wdXAnLCB0cnVlLCAnaW52YWxpZCcsIGBDb3VsZCBub3Qgc2V0IHRoZSAke3Byb3BlcnR5TmFtZX0gcHJvcGVydHkuIFR5cGUgbWlzbWF0Y2hgKTsNCiAgICAgICAgICAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSB0aGlzLnRhYmxlRGF0YSFbcHJvcGVydHlOYW1lXSEudmFsdWUhIGFzIHN0cmluZw0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLmVtaXRVcGRhdGVQcm9wZXJ0eShwcm9wZXJ0eU5hbWUsIHByb3BlcnR5VmFsdWUpDQogICAgICB9DQogICAgfSBlbHNlIGlmIChpbnB1dFR5cGUgPT09ICdudW1iZXInIHx8IGlucHV0VHlwZSA9PT0gJ2Zsb2F0Jykgew0KICAgICAgY29uc3QgdmFsdWUgPSBwcm9wZXJ0eVZhbHVlLmluY2x1ZGVzKCcuJykgPyBwYXJzZUZsb2F0KHByb3BlcnR5VmFsdWUpIDogcGFyc2VJbnQocHJvcGVydHlWYWx1ZSkNCiAgICAgIGlmIChwcm9wZXJ0eU5hbWUgPT09ICdIZWlnaHQnIHx8IHByb3BlcnR5TmFtZSA9PT0gJ1dpZHRoJykgew0KICAgICAgICBpZiAoKHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bdGhpcy5nZXRTZWxlY3RlZENvbnRyb2xzRGF0YXNbMF1dLnR5cGUgPT09ICdVc2VyZm9ybScpKSB7DQogICAgICAgICAgaWYgKHByb3BlcnR5TmFtZSA9PT0gJ1dpZHRoJykgew0KICAgICAgICAgICAgaWYgKHZhbHVlID49IDAgJiYgdmFsdWUgPCAxMDMpIHsNCiAgICAgICAgICAgICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkocHJvcGVydHlOYW1lLCAxMDMpOw0KICAgICAgICAgICAgICAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSAnMTAzJw0KICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA+IDk4MzApIHsNCiAgICAgICAgICAgICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkocHJvcGVydHlOYW1lLCA5ODMwKQ0KICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA8IDApIHsNCiAgICAgICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHRoaXMuZW1pdFVwZGF0ZVByb3BlcnR5KHByb3BlcnR5TmFtZSwgdmFsdWUpDQogICAgICAgICAgICB9DQogICAgICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0eU5hbWUgPT09ICdIZWlnaHQnKSB7DQogICAgICAgICAgICBpZiAodmFsdWUgPj0gMCAmJiB2YWx1ZSA8IDMwKSB7DQogICAgICAgICAgICAgIHRoaXMuZW1pdFVwZGF0ZVByb3BlcnR5KHByb3BlcnR5TmFtZSwgMzApOw0KICAgICAgICAgICAgICAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSAnMzAnDQogICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID4gOTgzMCkgew0KICAgICAgICAgICAgICB0aGlzLmVtaXRVcGRhdGVQcm9wZXJ0eShwcm9wZXJ0eU5hbWUsIDk4MzApDQogICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlIDwgMCkgew0KICAgICAgICAgICAgICAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSB0aGlzLnRhYmxlRGF0YSFbcHJvcGVydHlOYW1lXSEudmFsdWUhIGFzIHN0cmluZw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkocHJvcGVydHlOYW1lLCB2YWx1ZSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSBpZiAoY2hlY2tQcm9wZXJ0eVZhbHVlKHByb3BlcnR5TmFtZSwgdmFsdWUpKSB7DQogICAgICAgICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkocHJvcGVydHlOYW1lLCB2YWx1ZSkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSB0aGlzLnRhYmxlRGF0YSFbcHJvcGVydHlOYW1lXSEudmFsdWUhIGFzIHN0cmluZw0KICAgICAgICAgIGlmICh2YWx1ZSA+IDMyNzY3KSB7DQogICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnc2hvd0Vycm9yUG9wdXAnLCB0cnVlLCAnb3ZlcmZsb3cnLCAnT3ZlcmZsb3cnKQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnc2hvd0Vycm9yUG9wdXAnLCB0cnVlLCAnaW52YWxpZCcsIGBDb3VsZCBub3Qgc2V0IHRoZSAke3Byb3BlcnR5TmFtZX0gcHJvcGVydHkuIEludmFsaWQgcHJvcGVydHkgdmFsdWUuIEVudGVyIGEgdmFsdWUgYmV0d2VlbiAwIGFuZCAzMjc2OGApDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9IGVsc2UgaWYgKHByb3BlcnR5TmFtZSA9PT0gJ1RvcCcgfHwgcHJvcGVydHlOYW1lID09PSAnTGVmdCcpIHsNCiAgICAgICAgaWYgKGNoZWNrUHJvcGVydHlWYWx1ZShwcm9wZXJ0eU5hbWUsIHZhbHVlKSkgew0KICAgICAgICAgIHRoaXMuZW1pdFVwZGF0ZVByb3BlcnR5KHByb3BlcnR5TmFtZSwgdmFsdWUpDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcNCiAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnc2hvd0Vycm9yUG9wdXAnLCB0cnVlLCAnaW52YWxpZCcsIGBDb3VsZCBub3Qgc2V0IHRoZSAke3Byb3BlcnR5TmFtZX0gcHJvcGVydHkuIEludmFsaWQgcHJvcGVydHkgdmFsdWUuYCkNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0eU5hbWUgPT09ICdNYXhMZW5ndGgnKSB7DQogICAgICAgIGlmIChjaGVja1Byb3BlcnR5VmFsdWUocHJvcGVydHlOYW1lLCB2YWx1ZSkpIHsNCiAgICAgICAgICB0aGlzLmVtaXRVcGRhdGVQcm9wZXJ0eShwcm9wZXJ0eU5hbWUsIHZhbHVlKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSA9IHRoaXMudGFibGVEYXRhIVtwcm9wZXJ0eU5hbWVdIS52YWx1ZSEgYXMgc3RyaW5nDQogICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3Nob3dFcnJvclBvcHVwJywgdHJ1ZSwgJ2ludmFsaWQnLCBgQ291bGQgbm90IHNldCB0aGUgJHtwcm9wZXJ0eU5hbWV9IHByb3BlcnR5LiBJbnZhbGlkIHByb3BlcnR5IHZhbHVlLiBFbnRlciBhIHZhbHVlIGJldHdlZW4gMCBhbmQgIDIxNDc0ODM2NDdgKQ0KICAgICAgICB9DQogICAgICB9IGVsc2UgaWYgKHByb3BlcnR5TmFtZSA9PT0gJ0JvdW5kQ29sdW1uJykgew0KICAgICAgICBpZiAoY2hlY2tQcm9wZXJ0eVZhbHVlKHByb3BlcnR5TmFtZSwgdmFsdWUpKSB7DQogICAgICAgICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkocHJvcGVydHlOYW1lLCB2YWx1ZSkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSB0aGlzLnRhYmxlRGF0YSFbcHJvcGVydHlOYW1lXSEudmFsdWUhIGFzIHN0cmluZw0KICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdzaG93RXJyb3JQb3B1cCcsIHRydWUsICdpbnZhbGlkJywgYENvdWxkIG5vdCBzZXQgdGhlICR7cHJvcGVydHlOYW1lfSBwcm9wZXJ0eS4gSW52YWxpZCBwcm9wZXJ0eSB2YWx1ZS4gRW50ZXIgYSB2YWx1ZSBiZXR3ZWVuIDAgYW5kIDY1NTM2YCkNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0eU5hbWUgPT09ICdDb2x1bW5Db3VudCcpIHsNCiAgICAgICAgaWYgKGNoZWNrUHJvcGVydHlWYWx1ZShwcm9wZXJ0eU5hbWUsIHZhbHVlKSkgew0KICAgICAgICAgIHRoaXMuZW1pdFVwZGF0ZVByb3BlcnR5KHByb3BlcnR5TmFtZSwgdmFsdWUpDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcNCiAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnc2hvd0Vycm9yUG9wdXAnLCB0cnVlLCAnaW52YWxpZCcsIGBDb3VsZCBub3Qgc2V0IHRoZSAke3Byb3BlcnR5TmFtZX0gcHJvcGVydHkuIEludmFsaWQgcHJvcGVydHkgdmFsdWUuIEVudGVyIGEgdmFsdWUgYmV0d2VlbiAtMSBhbmQgMjE0NzQ4MzY0N2ApDQogICAgICAgIH0NCiAgICAgIH0gZWxzZSBpZiAocHJvcGVydHlOYW1lID09PSAnTGlzdFJvd3MnKSB7DQogICAgICAgIGlmIChjaGVja1Byb3BlcnR5VmFsdWUocHJvcGVydHlOYW1lLCB2YWx1ZSkpIHsNCiAgICAgICAgICB0aGlzLmVtaXRVcGRhdGVQcm9wZXJ0eShwcm9wZXJ0eU5hbWUsIHZhbHVlKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSA9IHRoaXMudGFibGVEYXRhIVtwcm9wZXJ0eU5hbWVdIS52YWx1ZSEgYXMgc3RyaW5nDQogICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3Nob3dFcnJvclBvcHVwJywgdHJ1ZSwgJ2ludmFsaWQnLCBgQ291bGQgbm90IHNldCB0aGUgJHtwcm9wZXJ0eU5hbWV9IHByb3BlcnR5LiBJbnZhbGlkIHByb3BlcnR5IHZhbHVlLiBFbnRlciBhIHZhbHVlIGJldHdlZW4gMCBhbmQgMjE0NzQ4MzY0N2ApDQogICAgICAgIH0NCiAgICAgIH0gZWxzZSBpZiAocHJvcGVydHlOYW1lID09PSAnVGV4dENvbHVtbicpIHsNCiAgICAgICAgaWYgKGNoZWNrUHJvcGVydHlWYWx1ZShwcm9wZXJ0eU5hbWUsIHZhbHVlKSkgew0KICAgICAgICAgIHRoaXMuZW1pdFVwZGF0ZVByb3BlcnR5KHByb3BlcnR5TmFtZSwgdmFsdWUpDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcNCiAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnc2hvd0Vycm9yUG9wdXAnLCB0cnVlLCAnaW52YWxpZCcsIGBDb3VsZCBub3Qgc2V0IHRoZSAke3Byb3BlcnR5TmFtZX0gcHJvcGVydHkuIEludmFsaWQgcHJvcGVydHkgdmFsdWUuIEVudGVyIGEgdmFsdWUgYmV0d2VlbiAtMSBhbmQgMzI3NjhgKQ0KICAgICAgICB9DQogICAgICB9IGVsc2UgaWYgKHByb3BlcnR5TmFtZSA9PT0gJ1ZhbHVlJykgew0KICAgICAgICBjb25zdCBjb250cm9sRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bdGhpcy5nZXRTZWxlY3RlZENvbnRyb2xzRGF0YXNbMF1dDQogICAgICAgIGNvbnN0IGNvbnRyb2xUeXBlID0gY29udHJvbERhdGEudHlwZQ0KICAgICAgICBpZiAodGhpcy5nZXRTZWxlY3RlZENvbnRyb2xzRGF0YXMubGVuZ3RoID09PSAxKSB7DQogICAgICAgICAgaWYgKGNvbnRyb2xUeXBlID09PSAnVGFiU3RyaXAnKSB7DQogICAgICAgICAgICBpZiAodmFsdWUgPCAtMSB8fCB2YWx1ZSA+PSBjb250cm9sRGF0YS5leHRyYURhdGFzIS5UYWJzIS5sZW5ndGghKSB7DQogICAgICAgICAgICAgIChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSA9IHRoaXMudGFibGVEYXRhIVtwcm9wZXJ0eU5hbWVdIS52YWx1ZSEgYXMgc3RyaW5nDQogICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdzaG93RXJyb3JQb3B1cCcsIHRydWUsICdpbnZhbGlkJywgYENvdWxkIG5vdCBzZXQgdGhlICR7cHJvcGVydHlOYW1lfSBwcm9wZXJ0eS4gSW52YWxpZCBwcm9wZXJ0eSB2YWx1ZS5gKQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkocHJvcGVydHlOYW1lLCB2YWx1ZSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IGVsc2UgaWYgKGNvbnRyb2xUeXBlID09PSAnTXVsdGlQYWdlJykgew0KICAgICAgICAgICAgaWYgKHZhbHVlIDwgLTEgfHwgdmFsdWUgPj0gY29udHJvbERhdGEuY29udHJvbHMubGVuZ3RoKSB7DQogICAgICAgICAgICAgIChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSA9IHRoaXMudGFibGVEYXRhIVtwcm9wZXJ0eU5hbWVdIS52YWx1ZSEgYXMgc3RyaW5nDQogICAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdzaG93RXJyb3JQb3B1cCcsIHRydWUsICdpbnZhbGlkJywgYENvdWxkIG5vdCBzZXQgdGhlICR7cHJvcGVydHlOYW1lfSBwcm9wZXJ0eS4gSW52YWxpZCBwcm9wZXJ0eSB2YWx1ZS5gKQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkocHJvcGVydHlOYW1lLCB2YWx1ZSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IGVsc2UgaWYgKGNvbnRyb2xUeXBlID09PSAnU3BpbkJ1dHRvbicgfHwgY29udHJvbFR5cGUgPT09ICdTY3JvbGxCYXInKSB7DQogICAgICAgICAgICBpZiAodGhpcy5pc0RlY2ltYWxOdW1iZXIocHJvcGVydHlWYWx1ZSkpIHsNCiAgICAgICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIGNvbnN0IGlzU3VjY2VzcyA9IHRoaXMudXBkYXRlU3BpbkJ1dHRvblNjcm9sbEJhclZhbHVlUHJvcCh0aGlzLmdldFNlbGVjdGVkQ29udHJvbHNEYXRhc1swXSwgdmFsdWUpDQogICAgICAgICAgICAgIGlmICghaXNTdWNjZXNzKSB7DQogICAgICAgICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcNCiAgICAgICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnc2hvd0Vycm9yUG9wdXAnLCB0cnVlLCAnaW52YWxpZCcsIGBDb3VsZCBub3Qgc2V0IHRoZSAke3Byb3BlcnR5TmFtZX0gcHJvcGVydHkuIEludmFsaWQgcHJvcGVydHkgdmFsdWUuYCkNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLmVtaXRVcGRhdGVQcm9wZXJ0eShwcm9wZXJ0eU5hbWUsIHByb3BlcnR5VmFsdWUpDQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGlmICh0aGlzLmlzRGVjaW1hbE51bWJlcihwcm9wZXJ0eVZhbHVlKSkgew0KICAgICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgY29uc3QgaXNTdWNjZXNzID0gdGhpcy52YWxpZGF0ZU11bHRpcGxlVmFsdWVQcm9wZXJ0eSh7IHByb3BlcnR5TmFtZTogcHJvcGVydHlOYW1lLCB2YWx1ZTogcHJvcGVydHlWYWx1ZSB9KQ0KICAgICAgICAgICAgaWYgKCFpc1N1Y2Nlc3MpIHsNCiAgICAgICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcNCiAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3Nob3dFcnJvclBvcHVwJywgdHJ1ZSwgJ2ludmFsaWQnLCBgQ291bGQgbm90IHNldCB0aGUgJHtwcm9wZXJ0eU5hbWV9IHByb3BlcnR5LiBJbnZhbGlkIHByb3BlcnR5IHZhbHVlLmApDQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU11bHRpU2VsZWN0UHJvcFZhbHVlKHByb3BlcnR5TmFtZSwgdmFsdWUpDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9IGVsc2UgaWYgKHByb3BlcnR5TmFtZSA9PT0gJ01pbicgfHwgcHJvcGVydHlOYW1lID09PSAnTWF4JyB8fCBwcm9wZXJ0eU5hbWUgPT09ICdTbWFsbENoYW5nZScpIHsNCiAgICAgICAgaWYgKHRoaXMuaXNEZWNpbWFsTnVtYmVyKHByb3BlcnR5VmFsdWUpKSB7DQogICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcNCiAgICAgICAgfSBlbHNlIGlmIChjaGVja1Byb3BlcnR5VmFsdWUocHJvcGVydHlOYW1lLCB2YWx1ZSkpIHsNCiAgICAgICAgICBpZiAocHJvcGVydHlOYW1lID09PSAnTWluJyB8fCBwcm9wZXJ0eU5hbWUgPT09ICdNYXgnKSB7DQogICAgICAgICAgICB0aGlzLnVwZGF0ZVByb3BlcnR5KHsgcHJvcGVydHlOYW1lOiBwcm9wZXJ0eU5hbWUsIHZhbHVlOiB2YWx1ZSB9KQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLmVtaXRVcGRhdGVQcm9wZXJ0eShwcm9wZXJ0eU5hbWUsIHZhbHVlKQ0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSB0aGlzLnRhYmxlRGF0YSFbcHJvcGVydHlOYW1lXSEudmFsdWUhIGFzIHN0cmluZw0KICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdzaG93RXJyb3JQb3B1cCcsIHRydWUsICdpbnZhbGlkJywgYEludmFsaWQgcHJvcGVydHkgdmFsdWUuYCkNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0eU5hbWUgPT09ICdUYWJGaXhlZEhlaWdodCcgfHwgcHJvcGVydHlOYW1lID09PSAnVGFiRml4ZWRXaWR0aCcpIHsNCiAgICAgICAgaWYgKGNoZWNrUHJvcGVydHlWYWx1ZShwcm9wZXJ0eU5hbWUsIHZhbHVlKSkgew0KICAgICAgICAgIHRoaXMuZW1pdFVwZGF0ZVByb3BlcnR5KHByb3BlcnR5TmFtZSwgdmFsdWUpDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcNCiAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnc2hvd0Vycm9yUG9wdXAnLCB0cnVlLCAnaW52YWxpZCcsIGBDb3VsZCBub3Qgc2V0IHRoZSAke3Byb3BlcnR5TmFtZX0gcHJvcGVydHkuIEludmFsaWQgcHJvcGVydHkgdmFsdWUuIEVudGVyIGEgdmFsdWUgYmV0d2VlbiAwIGFuZCA3MjAwYCkNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0eU5hbWUgPT09ICdUYWJJbmRleCcpIHsNCiAgICAgICAgaWYgKHRoaXMuaXNEZWNpbWFsTnVtYmVyKHByb3BlcnR5VmFsdWUpKSB7DQogICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcNCiAgICAgICAgfSBlbHNlIGlmIChjaGVja1Byb3BlcnR5VmFsdWUocHJvcGVydHlOYW1lLCB2YWx1ZSkpIHsNCiAgICAgICAgICBjb25zdCBpc1N1Y2Nlc3MgPSB0aGlzLnVwZGF0ZVByb3BlcnR5KHsgcHJvcGVydHlOYW1lOiBwcm9wZXJ0eU5hbWUsIHZhbHVlOiB2YWx1ZSB9KQ0KICAgICAgICAgIGlmICghaXNTdWNjZXNzKSB7DQogICAgICAgICAgICAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSB0aGlzLnRhYmxlRGF0YSFbcHJvcGVydHlOYW1lXSEudmFsdWUhIGFzIHN0cmluZw0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSB0aGlzLnRhYmxlRGF0YSFbcHJvcGVydHlOYW1lXSEudmFsdWUhIGFzIHN0cmluZw0KICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCdzaG93RXJyb3JQb3B1cCcsIHRydWUsICdpbnZhbGlkJywgYENvdWxkIG5vdCBzZXQgdGhlICR7cHJvcGVydHlOYW1lfSBwcm9wZXJ0eS4gSW52YWxpZCBwcm9wZXJ0eSB2YWx1ZS4gRW50ZXIgYSB2YWx1ZSBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8gemVyby5gKQ0KICAgICAgICB9DQogICAgICB9IGVsc2UgaWYgKHByb3BlcnR5TmFtZSA9PT0gJ0luZGV4Jykgew0KICAgICAgICBpZiAodGhpcy5pc0RlY2ltYWxOdW1iZXIocHJvcGVydHlWYWx1ZSkpIHsNCiAgICAgICAgICAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUgPSB0aGlzLnRhYmxlRGF0YSFbcHJvcGVydHlOYW1lXSEudmFsdWUhIGFzIHN0cmluZw0KICAgICAgICB9IGVsc2UgaWYgKHZhbHVlIDwgMCkgew0KICAgICAgICAgIChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSA9IHRoaXMudGFibGVEYXRhIVtwcm9wZXJ0eU5hbWVdIS52YWx1ZSEgYXMgc3RyaW5nDQogICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3Nob3dFcnJvclBvcHVwJywgdHJ1ZSwgJ2ludmFsaWQnLCBgQ291bGQgbm90IHNldCB0aGUgJHtwcm9wZXJ0eU5hbWV9IHByb3BlcnR5LiBJbnZhbGlkIHByb3BlcnR5IHZhbHVlLiBFbnRlciBhIHZhbHVlIGJldHdlZW4gMCBhbmQgMzI3NjdgKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGNvbnN0IGlzU3VjY2VzcyA9IHRoaXMudXBkYXRlUHJvcGVydHkoeyBwcm9wZXJ0eU5hbWU6IHByb3BlcnR5TmFtZSwgdmFsdWU6IHByb3BlcnR5VmFsdWUgfSkNCiAgICAgICAgICBpZiAoIWlzU3VjY2Vzcykgew0KICAgICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhLkluZGV4IS52YWx1ZSEgYXMgc3RyaW5nDQogICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnc2hvd0Vycm9yUG9wdXAnLCB0cnVlLCAnaW52YWxpZCcsIGBDb3VsZCBub3Qgc2V0IHRoZSAke3Byb3BlcnR5TmFtZX0gcHJvcGVydHkuIEludmFsaWQgcHJvcGVydHkgdmFsdWUuYCkNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSBpZiAocHJvcGVydHlOYW1lID09PSAnRGVsYXknKSB7DQogICAgICAgIGlmICh0aGlzLmlzRGVjaW1hbE51bWJlcihwcm9wZXJ0eVZhbHVlKSkgew0KICAgICAgICAgIChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSA9IHRoaXMudGFibGVEYXRhIVtwcm9wZXJ0eU5hbWVdIS52YWx1ZSEgYXMgc3RyaW5nDQogICAgICAgIH0gZWxzZSBpZiAoY2hlY2tQcm9wZXJ0eVZhbHVlKHByb3BlcnR5TmFtZSwgcHJvcGVydHlWYWx1ZSkpIHsNCiAgICAgICAgICB0aGlzLmVtaXRVcGRhdGVQcm9wZXJ0eShwcm9wZXJ0eU5hbWUsIHZhbHVlKQ0KICAgICAgICB9IGVsc2UgaWYgKHZhbHVlIDwgMCkgew0KICAgICAgICAgIChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSA9IHRoaXMudGFibGVEYXRhIVtwcm9wZXJ0eU5hbWVdIS52YWx1ZSEgYXMgc3RyaW5nDQogICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3Nob3dFcnJvclBvcHVwJywgdHJ1ZSwgJ2ludmFsaWQnLCBgQ291bGQgbm90IHNldCB0aGUgJHtwcm9wZXJ0eU5hbWV9IHByb3BlcnR5LiBJbnZhbGlkIHByb3BlcnR5IHZhbHVlLiBFbnRlciBhIHZhbHVlIGdyZWF0ZXIgdGhhbiBvciBlcXVhbCB0byB6ZXJvLmApDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcNCiAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnc2hvd0Vycm9yUG9wdXAnLCB0cnVlLCAnaW52YWxpZCcsIGBJbnZhbGlkIHByb3BlcnR5IHZhbHVlLmApDQogICAgICAgIH0NCiAgICAgIH0gZWxzZSBpZiAocHJvcGVydHlOYW1lID09PSAnWm9vbScpIHsNCiAgICAgICAgaWYgKHRoaXMuaXNEZWNpbWFsTnVtYmVyKHByb3BlcnR5VmFsdWUpKSB7DQogICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcNCiAgICAgICAgfSBlbHNlIGlmIChjaGVja1Byb3BlcnR5VmFsdWUocHJvcGVydHlOYW1lLCBwcm9wZXJ0eVZhbHVlKSkgew0KICAgICAgICAgIHRoaXMuZW1pdFVwZGF0ZVByb3BlcnR5KHByb3BlcnR5TmFtZSwgdmFsdWUpDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcNCiAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnc2hvd0Vycm9yUG9wdXAnLCB0cnVlLCAnaW52YWxpZCcsIGBDb3VsZCBub3Qgc2V0IHRoZSAke3Byb3BlcnR5TmFtZX0gcHJvcGVydHkuIEludmFsaWQgcHJvcGVydHkgdmFsdWUuIEVudGVyIGEgdmFsdWUgYmV0d2VlbiAxMCBhbmQgNDAwLmApDQogICAgICAgIH0NCiAgICAgIH0gZWxzZSBpZiAocHJvcGVydHlOYW1lID09PSAnRHJhd0J1ZmZlcicpIHsNCiAgICAgICAgaWYgKHRoaXMuaXNEZWNpbWFsTnVtYmVyKHByb3BlcnR5VmFsdWUpKSB7DQogICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcNCiAgICAgICAgfSBlbHNlIGlmIChjaGVja1Byb3BlcnR5VmFsdWUocHJvcGVydHlOYW1lLCBwcm9wZXJ0eVZhbHVlKSkgew0KICAgICAgICAgIHRoaXMuZW1pdFVwZGF0ZVByb3BlcnR5KHByb3BlcnR5TmFtZSwgdmFsdWUpDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlID0gdGhpcy50YWJsZURhdGEhW3Byb3BlcnR5TmFtZV0hLnZhbHVlISBhcyBzdHJpbmcNCiAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgnc2hvd0Vycm9yUG9wdXAnLCB0cnVlLCAnaW52YWxpZCcsIGBDb3VsZCBub3Qgc2V0IHRoZSAke3Byb3BlcnR5TmFtZX0gcHJvcGVydHkuIEludmFsaWQgcHJvcGVydHkgdmFsdWUuIEVudGVyIGEgdmFsdWUgYmV0d2VlbiAxNjAwMCBhbmQgMTA0ODU3Ni5gKQ0KICAgICAgICB9DQogICAgICB9IGVsc2UgaWYgKHByb3BlcnR5TmFtZSA9PT0gJ1RyYW5zaXRpb25QZXJpb2QnKSB7DQogICAgICAgIGlmICh0aGlzLmlzRGVjaW1hbE51bWJlcihwcm9wZXJ0eVZhbHVlKSkgew0KICAgICAgICAgIChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSA9IHRoaXMudGFibGVEYXRhIVtwcm9wZXJ0eU5hbWVdIS52YWx1ZSEgYXMgc3RyaW5nDQogICAgICAgIH0gZWxzZSBpZiAoY2hlY2tQcm9wZXJ0eVZhbHVlKHByb3BlcnR5TmFtZSwgcHJvcGVydHlWYWx1ZSkpIHsNCiAgICAgICAgICB0aGlzLmVtaXRVcGRhdGVQcm9wZXJ0eShwcm9wZXJ0eU5hbWUsIHZhbHVlKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSA9IHRoaXMudGFibGVEYXRhIVtwcm9wZXJ0eU5hbWVdIS52YWx1ZSEgYXMgc3RyaW5nDQogICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3Nob3dFcnJvclBvcHVwJywgdHJ1ZSwgJ2ludmFsaWQnLCBgQ291bGQgbm90IHNldCB0aGUgJHtwcm9wZXJ0eU5hbWV9IHByb3BlcnR5LiBJbnZhbGlkIHByb3BlcnR5IHZhbHVlLiBFbnRlciBhIHZhbHVlIGJldHdlZW4gMCBhbmQgMTAwMDAuYCkNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkocHJvcGVydHlOYW1lLCB2YWx1ZSkNCiAgICAgIH0NCiAgICB9IGVsc2UgaWYgKGlucHV0VHlwZSA9PT0gJ0Jvb2xlYW4nKSB7DQogICAgICBpZiAoKHByb3BlcnR5TmFtZSA9PT0gJ0NhbmNlbCcgfHwgcHJvcGVydHlOYW1lID09PSAnRGVmYXVsdCcpICYmICgoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWUpID09PSAndHJ1ZScpIHsNCiAgICAgICAgdGhpcy51cGRhdGVQcm9wZXJ0eSh7IHByb3BlcnR5TmFtZTogcHJvcGVydHlOYW1lLCB2YWx1ZTogdHJ1ZSB9KQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkoDQogICAgICAgICAgcHJvcGVydHlOYW1lLA0KICAgICAgICAgIChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSA9PT0gJ3RydWUnDQogICAgICAgICkNCiAgICAgIH0NCiAgICB9IGVsc2UgaWYgKGlucHV0VHlwZSA9PT0gJ2FycmF5Jykgew0KICAgICAgaWYgKChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSAhPT0gJycpIHsNCiAgICAgICAgaWYgKHByb3BlcnR5TmFtZSA9PT0gJ0JvcmRlclN0eWxlJyAmJiBwcm9wZXJ0eVZhbHVlID09PSAnMScpIHsNCiAgICAgICAgICB0aGlzLmVtaXRVcGRhdGVQcm9wZXJ0eSgNCiAgICAgICAgICAgIHByb3BlcnR5TmFtZSwNCiAgICAgICAgICAgIHBhcnNlSW50KChlLnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZSkNCiAgICAgICAgICApDQogICAgICAgICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkoDQogICAgICAgICAgICAnU3BlY2lhbEVmZmVjdCcsDQogICAgICAgICAgICAwDQogICAgICAgICAgKQ0KICAgICAgICB9IGVsc2UgaWYgKHByb3BlcnR5TmFtZSA9PT0gJ1NwZWNpYWxFZmZlY3QnICYmIHBhcnNlSW50KHByb3BlcnR5VmFsdWUpID4gMCkgew0KICAgICAgICAgIHRoaXMuZW1pdFVwZGF0ZVByb3BlcnR5KA0KICAgICAgICAgICAgcHJvcGVydHlOYW1lLA0KICAgICAgICAgICAgcGFyc2VJbnQoKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlKQ0KICAgICAgICAgICkNCiAgICAgICAgICB0aGlzLmVtaXRVcGRhdGVQcm9wZXJ0eSgNCiAgICAgICAgICAgICdCb3JkZXJTdHlsZScsDQogICAgICAgICAgICAwDQogICAgICAgICAgKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuZW1pdFVwZGF0ZVByb3BlcnR5KA0KICAgICAgICAgICAgcHJvcGVydHlOYW1lLA0KICAgICAgICAgICAgcGFyc2VJbnQoKGUudGFyZ2V0IGFzIEhUTUxJbnB1dEVsZW1lbnQpLnZhbHVlKQ0KICAgICAgICAgICkNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfQ0KICB1cGRhdGVNdWx0aVNlbGVjdFByb3BWYWx1ZSAocHJvcGVydHlOYW1lOiBrZXlvZiBjb250cm9sUHJvcGVydGllcywgdmFsdWU6IG51bWJlcikgew0KICAgIGNvbnN0IHNlbGVjdGVkID0gdGhpcy5nZXRTZWxlY3RlZENvbnRyb2xzRGF0YXMhDQogICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWxlY3RlZC5sZW5ndGg7IGkrKykgew0KICAgICAgdGhpcy51cGRhdGVQcm9wVmFsdWUoc2VsZWN0ZWRbaV0sIHByb3BlcnR5TmFtZSwgdmFsdWUpDQogICAgfQ0KICB9DQogIHZhbGlkYXRlTXVsdGlwbGVWYWx1ZVByb3BlcnR5IChhcmc6IElQcm9wQ29udHJvbCkgew0KICAgIGRlYnVnZ2VyDQogICAgY29uc3Qgc2VsZWN0ZWQgPSB0aGlzLmdldFNlbGVjdGVkQ29udHJvbHNEYXRhcyENCiAgICBsZXQgaXNWYWxpZDogYm9vbGVhbiA9IHRydWUNCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbGVjdGVkLmxlbmd0aDsgaSsrKSB7DQogICAgICBjb25zdCB0eXBlID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtzZWxlY3RlZFtpXV0udHlwZQ0KICAgICAgaWYgKHR5cGUgPT09ICdTY3JvbGxCYXInIHx8IHR5cGUgPT09ICdTcGluQnV0dG9uJykgew0KICAgICAgICBpc1ZhbGlkID0gdGhpcy5jaGVja1ZhbHVlUmFuZ2VNaW5NYXgoc2VsZWN0ZWRbaV0sIGFyZy52YWx1ZSkNCiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ011bHRpUGFnZScgfHwgdHlwZSA9PT0gJ1RhYlN0cmlwJykgew0KICAgICAgICBpZiAoYXJnLnZhbHVlIDwgLTEgfHwgKHR5cGUgPT09ICdUYWJTdHJpcCcgJiYgYXJnLnZhbHVlID49IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bc2VsZWN0ZWRbaV1dLmV4dHJhRGF0YXMhLlRhYnMhLmxlbmd0aCEpIHx8DQogICAgICAgICh0eXBlID09PSAnTXVsdGlQYWdlJyAmJiBhcmcudmFsdWUgPj0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtzZWxlY3RlZFtpXV0uY29udHJvbHMubGVuZ3RoISkpIHsNCiAgICAgICAgICBpc1ZhbGlkID0gZmFsc2UNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBpc1ZhbGlkID0gdHJ1ZQ0KICAgICAgICB9DQogICAgICB9DQogICAgICBpZiAoIWlzVmFsaWQpIHsNCiAgICAgICAgcmV0dXJuIGlzVmFsaWQNCiAgICAgIH0NCiAgICB9DQogICAgcmV0dXJuIGlzVmFsaWQNCiAgfQ0KICBpc0RlY2ltYWxOdW1iZXIgKHByb3BWYWx1ZSA6IHN0cmluZykgew0KICAgIGlmIChwcm9wVmFsdWUuaW5kZXhPZignLicpID4gLTEpIHsNCiAgICAgIEV2ZW50QnVzLiRlbWl0KCdzaG93RXJyb3JQb3B1cCcsIHRydWUsICdpbnZhbGlkJywgYEludmFsaWQgcHJvcGVydHkgdmFsdWUuYCkNCiAgICAgIHJldHVybiB0cnVlDQogICAgfQ0KICAgIHJldHVybiBmYWxzZQ0KICB9DQogIGhhbmRsZUNvbnZlcnRpb25JbWFnZVRvQmFzZTY0IChlOiBFdmVudCkgew0KICAgIGxldCB0aGF0ID0gdGhpcw0KICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCkNCiAgICBjb25zdCBmaWxlSW5wdXQgPSAoZS50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudCkNCiAgICBjb25zdCBmaWxlUGF0aCA9IGZpbGVJbnB1dC52YWx1ZQ0KICAgIGxldCBhbGxvd2VkRXh0ZW5zaW9ucw0KICAgIGxldCB0eXBlTWlzbWF0Y2hFeHRlbnNpb25zDQogICAgLy8gQWxsb3dlZCBmaWxlIHR5cGUNCiAgICBpZiAoZmlsZUlucHV0Lm5hbWUgPT09ICdQaWN0dXJlJykgew0KICAgICAgYWxsb3dlZEV4dGVuc2lvbnMgPSAvKFwuanBnfFwuanBlZ3xcLmJtcHxcLmljb3xcLmdpZikkL2kNCiAgICAgIHR5cGVNaXNtYXRjaEV4dGVuc2lvbnMgPSAvKFwuanBnfFwuanBlZ3xcLmJtcHxcLmljb3xcLmdpZikkL2kNCiAgICB9IGVsc2Ugew0KICAgICAgYWxsb3dlZEV4dGVuc2lvbnMgPSAvKFwuYm1wfFwuaWNvKSQvaQ0KICAgICAgdHlwZU1pc21hdGNoRXh0ZW5zaW9ucyA9IC8oXC5ibXB8XC5pY298XC5naWYpJC9pDQogICAgfQ0KICAgIGlmICghYWxsb3dlZEV4dGVuc2lvbnMuZXhlYyhmaWxlUGF0aCkpIHsNCiAgICAgIGZpbGVJbnB1dC52YWx1ZSA9ICcnDQogICAgICBpZiAodHlwZU1pc21hdGNoRXh0ZW5zaW9ucy5leGVjKGZpbGVQYXRoKSkgew0KICAgICAgICBFdmVudEJ1cy4kZW1pdCgnc2hvd0Vycm9yUG9wdXAnLCB0cnVlLCAnaW52YWxpZCcsIGBDb3VsZCBub3Qgc2V0IHRoZSAke2ZpbGVJbnB1dC5uYW1lfSBwcm9wZXJ0eS4gVGhlIHBpY3R1cmUgdHlwZSBpcyBub3QgdmFsaWQuYCkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIEV2ZW50QnVzLiRlbWl0KCdzaG93RXJyb3JQb3B1cCcsIHRydWUsICdpbnZhbGlkJywgJ0ludmFsaWQgUGljdHVyZScpDQogICAgICB9DQogICAgICByZXR1cm4gZmFsc2UNCiAgICB9IGVsc2Ugew0KICAgICAgaWYgKGZpbGVJbnB1dC5maWxlcyAmJiBmaWxlSW5wdXQuZmlsZXNbMF0pIHsNCiAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7DQogICAgICAgICAgdGhhdC5lbWl0VXBkYXRlUHJvcGVydHkoZmlsZUlucHV0Lm5hbWUgYXMga2V5b2YgY29udHJvbFByb3BlcnRpZXMsIHJlYWRlci5yZXN1bHQpDQogICAgICAgIH0NCiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZUlucHV0LmZpbGVzWzBdKQ0KICAgICAgfQ0KICAgIH0NCiAgfQ0KDQogIGVtaXRGb250ICh0ZW1wVmFsOiBmb250KSB7DQogICAgdGhpcy5lbWl0VXBkYXRlUHJvcGVydHkoJ0ZvbnQnLCB0ZW1wVmFsKQ0KICB9DQogIGNvbG9yUGFsZXR0ZVByb3AgKHNlbGVjdGVkVmFsdWU6IElTZWxlY3RlZENvbG9QYWxldHRlVmFsdWUpIHsNCiAgICB0aGlzLmVtaXRVcGRhdGVQcm9wZXJ0eShzZWxlY3RlZFZhbHVlLnByb3BlcnR5TmFtZSBhcyBrZXlvZiBjb250cm9sUHJvcGVydGllcywgc2VsZWN0ZWRWYWx1ZS5wcm9wZXJ0eVZhbHVlKQ0KICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/FormDesigner/components/organisms/FDTable","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"btn-group\">\r\n      <button class=\"button\" default>Alphabetic</button>\r\n      <button class=\"button\">Categorized</button>\r\n    </div>\r\n    <div\r\n      style=\"\r\n        position: absolute;\r\n        height: calc(100% - 59px);\r\n        overflow-y: auto;\r\n        overflow-x: hidden;\r\n        width: 100%;\r\n      \"\r\n    >\r\n      <FDTableItems\r\n        v-for=\"(value, propertyName, index) in tableData\"\r\n        :key=\"index\"\r\n        :controlPropertyData=\"value\"\r\n        :propertyName=\"propertyName\"\r\n        @updateAppearance=\"updateAppearance\"\r\n        @emitFont=\"emitFont\"\r\n        @colorPaletteProp=\"colorPaletteProp\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Prop, Vue, Emit } from 'vue-property-decorator'\r\nimport { State, Action } from 'vuex-class'\r\nimport FDTableItems from '../../molecules/FDTableItems/index.vue'\r\nimport { IselectControl, IsetChildControls, IupdateControl, IupdateControlExtraData, IupdatedSelectedControl } from '@/storeModules/fd/actions'\r\nimport { EventBus } from '@/FormDesigner/event-bus'\r\nimport { checkPropertyValue } from '@/storeModules/fd/checkValidation'\r\n\r\ninterface IPropControl {\r\n  propertyName: keyof controlProperties\r\n  value : any\r\n}\r\n\r\n@Component({\r\n  name: 'FDTable',\r\n  components: {\r\n    FDTableItems\r\n  }\r\n})\r\nexport default class FDTable extends Vue {\r\n  @Prop({ type: Object, required: true }) tableData!: tableDatas;\r\n  @State((state) => state.fd.userformData) userformData!: userformData;\r\n  @Prop({ required: true, type: String }) public readonly userFormId! : string\r\n  @Prop({ required: true }) public readonly getSelectedControlsDatas: any\r\n  @Prop() resultArray: boolean[]\r\n  @Action('fd/updateControl') updateControl!: (payload: IupdateControl) => void;\r\n  @Action('fd/updateControlExtraData') updateControlExtraData!: (\r\n    payload: IupdateControlExtraData\r\n  ) => void;\r\n  @Action('fd/setChildControls') setChildControls!: (\r\n    payload: IsetChildControls\r\n  ) => void;\r\n  @State((state) => state.fd.selectedControls) selectedControls!: fdState['selectedControls'];\r\n\r\n  emitUpdateProperty (\r\n    propertyName: keyof controlProperties,\r\n    value: any\r\n  ) {\r\n    this.updateProperty({ propertyName: propertyName, value: value })\r\n  }\r\n\r\n  emitUpdateExtraProperty (\r\n    propertyName: keyof controlProperties,\r\n    value: any\r\n  ) {\r\n    this.updateProperty({ propertyName: propertyName, value: value })\r\n  }\r\n  updatePageIndex (propValue: number) {\r\n    const userData = this.userformData[this.userFormId]\r\n    const selected = this.selectedControls[this.userFormId].selected[0]\r\n    const swapTabIndex = userData[selected].properties.Index!\r\n    const container = this.selectedControls[this.userFormId].container[0]\r\n\r\n    if (propValue < userData[container].controls.length) {\r\n      const index = userData[container].controls.findIndex(val => userData[val].properties.Index === propValue)\r\n      this.updatePropValue(userData[container].controls[index], 'Index', swapTabIndex)\r\n      this.updatePropValue(selected, 'Index', propValue)\r\n      const controls = userData[container].controls\r\n      controls.sort((a, b) => {\r\n        return userData[a].properties.Index! - userData[b].properties.Index!\r\n      })\r\n      this.setChildControls({\r\n        userFormId: this.userFormId,\r\n        containerId: container,\r\n        targetControls: controls\r\n      })\r\n      return true\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n  getLowestIndex (tempControls: string[], controlLength: number, propertyType: boolean) {\r\n    let lastControlId = controlLength\r\n    const userData = this.userformData[this.userFormId]\r\n    for (let i = 0; i < tempControls.length; i++) {\r\n      const propetyName = propertyType ? userData[tempControls[i]].extraDatas!.zIndex! : userData[tempControls[i]].extraDatas!.TabIndex!\r\n      if (propetyName !== -1) {\r\n        const IdNum = propetyName\r\n        if (!isNaN(IdNum) && lastControlId > IdNum) {\r\n          lastControlId = IdNum\r\n        }\r\n      }\r\n    }\r\n    return lastControlId\r\n  }\r\n  swapTabIndex (tempZIndex: number) {\r\n    const userData = this.userformData[this.userFormId]\r\n    const container = this.selectedControls[this.userFormId].container[0]\r\n    const selected = this.selectedControls[this.userFormId].selected[0]\r\n    const swapTabIndex = userData[selected].properties!.TabIndex!\r\n    if (tempZIndex <= userData[container].controls.length - 1 && tempZIndex > -1) {\r\n      const index = userData[container].controls.findIndex(\r\n        (val) => userData[val].properties!.TabIndex === tempZIndex\r\n      )\r\n      this.updatePropValue(userData[container].controls[index], 'TabIndex', swapTabIndex)\r\n      this.updatePropValue(selected, 'TabIndex', tempZIndex)\r\n    }\r\n  }\r\n  updateTabIndexValue (val: number) {\r\n    const userData = this.userformData[this.userFormId]\r\n    const container = this.selectedControls[this.userFormId].container[0]\r\n    const selected = this.selectedControls[this.userFormId].selected[0]\r\n    const containerControls = this.userformData[this.userFormId][container].controls\r\n    const controlType = userData[selected].type\r\n    if (controlType !== 'FDImage') {\r\n      const tempControls = []\r\n      for (const index in containerControls) {\r\n        const cntrlData = this.userformData[this.userFormId][containerControls[index]]\r\n        if (cntrlData.type === 'FDImage') {\r\n          tempControls.push(containerControls[index])\r\n        }\r\n      }\r\n      const lastControlId = tempControls.length > 0 ? this.getLowestIndex(tempControls, userData[container].controls.length - 1, false)\r\n        : this.userformData[this.userFormId][container].controls.length - 1\r\n      if (val <= lastControlId) {\r\n        this.swapTabIndex(val)\r\n        return true\r\n      } else {\r\n        return false\r\n      }\r\n    }\r\n  }\r\n\r\n  updateExtraProperty (arg: IupdateControlExtraData) {\r\n    const selected = this.getSelectedControlsDatas!\r\n    for (let i = 0; i < selected.length; i++) {\r\n      this.updateControlExtraData({\r\n        userFormId: this.userFormId,\r\n        controlId: selected[i],\r\n        propertyName: arg.propertyName,\r\n        value: arg.value\r\n      })\r\n    }\r\n  }\r\n  updateProperty (arg: IPropControl) {\r\n    const selected = this.getSelectedControlsDatas!\r\n    for (let i = 0; i < selected.length; i++) {\r\n      if (arg.propertyName === 'TabIndex') {\r\n        return this.updateTabIndexValue(parseInt(arg.value))\r\n      } else if (arg.propertyName === 'Index') {\r\n        return this.updatePageIndex(parseInt(arg.value))\r\n      } else if (arg.propertyName === 'Name') {\r\n        return this.updateName(selected[i], arg.value)\r\n      } else if (arg.propertyName === 'Value' && (this.userformData[this.userFormId][selected[i]].type === 'SpinButton' || this.userformData[this.userFormId][selected[i]].type === 'ScrollBar')) {\r\n        return this.updateSpinButtonScrollBarValueProp(selected[i], arg.value)\r\n      } else if (arg.propertyName === 'Value' && (this.userformData[this.userFormId][selected[i]].type === 'OptionButton') &&\r\n      (this.userformData[this.userFormId][selected[i]].properties.GroupName !== '') && arg.value === 'True') {\r\n        const groupName = this.userformData[this.userFormId][selected[i]].properties.GroupName!\r\n        this.updateValueForCommonGroupName(selected[i], arg.value, groupName)\r\n      } else if (arg.propertyName === 'Min' || arg.propertyName === 'Max') {\r\n        this.updatePropValue(selected[i], arg.propertyName, arg.value)\r\n        this.validateValueProperty(selected[i], arg.value)\r\n      } else if (arg.propertyName === 'Cancel' || arg.propertyName === 'Default') {\r\n        this.validateCancelDefaultProp(selected[i], arg.propertyName, arg.value)\r\n      } else {\r\n        this.updatePropValue(selected[i], arg.propertyName, arg.value)\r\n      }\r\n    }\r\n  }\r\n\r\n  updateValueProperty (arg: IPropControl) {\r\n    const selected = this.getSelectedControlsDatas!\r\n    let isValid: boolean = true\r\n    for (let i = 0; i < selected.length; i++) {\r\n      const type = this.userformData[this.userFormId][selected[i]].type\r\n      if (type === 'ListBox') {\r\n        isValid = this.validateTextValueProperty(arg.value, arg.propertyName, selected[i])\r\n      }\r\n    }\r\n    if (isValid) {\r\n      this.emitUpdateProperty(arg.propertyName, arg.value)\r\n    }\r\n    return isValid\r\n  }\r\n  updatePropValue (id: string, propName: keyof controlProperties, propValue: any) {\r\n    this.updateControl({\r\n      userFormId: this.userFormId,\r\n      controlId: id,\r\n      propertyName: propName,\r\n      value: propValue\r\n    })\r\n  }\r\n  updateValueForCommonGroupName (id: string, value: string, groupName: string) {\r\n    const userData = Object.keys(this.userformData[this.userFormId])\r\n    this.updatePropValue(id, 'Value', 'True')\r\n    for (let i = 0; i < userData.length; i++) {\r\n      const controlData = this.userformData[this.userFormId][userData[i]]\r\n      if (controlData.type === 'OptionButton' && controlData.properties.GroupName === groupName && controlData.properties.ID !== id) {\r\n        this.updatePropValue(controlData.properties.ID, 'Value', 'False')\r\n      }\r\n    }\r\n  }\r\n  validateValueProperty (id: string, value: number) {\r\n    let actualValue = this.userformData[this.userFormId][id].properties.Value! as number\r\n    if (!this.checkValueRangeMinMax(id, actualValue)) {\r\n      this.updatePropValue(id, 'Value', value)\r\n    }\r\n  }\r\n  updateSpinButtonScrollBarValueProp (id: string, value: number) {\r\n    if (this.checkValueRangeMinMax(id, value)) {\r\n      this.updatePropValue(id, 'Value', value)\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n  validateCancelDefaultProp (id: string, propName: keyof controlProperties, value: boolean) {\r\n    const userFormControls = Object.keys(this.userformData[this.userFormId])\r\n    for (let controlId of userFormControls) {\r\n      if (this.userformData[this.userFormId][controlId].type === 'CommandButton') {\r\n        if (controlId === id) {\r\n          this.updatePropValue(id, propName, value)\r\n        } else {\r\n          this.updatePropValue(controlId, propName, false)\r\n        }\r\n      }\r\n    }\r\n  }\r\n  checkValueRangeMinMax (id: string, value: number) {\r\n    let maxValue = this.userformData[this.userFormId][id].properties.Max!\r\n    let minValue = this.userformData[this.userFormId][id].properties.Min!\r\n    let min = Math.min(minValue, maxValue)\r\n    let max = Math.max(minValue, maxValue)\r\n    if (value >= min && value <= max) {\r\n      return true\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n  updateName (id: string, value: string) {\r\n    let userData\r\n    let isUnique\r\n    if (this.userformData[this.userFormId][id].type === 'Userform') {\r\n      userData = Object.keys(this.userformData)\r\n      isUnique = userData.findIndex(val => this.userformData[val][val].properties.Name === value && val !== id)\r\n    } else {\r\n      userData = Object.keys(this.userformData[this.userFormId])\r\n      isUnique = userData.findIndex(val => this.userformData[this.userFormId][val].properties.Name === value && val !== id)\r\n    }\r\n    if (isUnique === -1 && value !== '') {\r\n      this.updatePropValue(id, 'Name', value)\r\n      return true\r\n    } else {\r\n      return false\r\n    }\r\n  }\r\n  validateValuePropertyChboxOpbtnTglbtn (propertyName : keyof controlProperties, propertyValue : string) : string {\r\n    let resultValue = ''\r\n    if (!isNaN(parseInt(propertyValue))) {\r\n      if (parseInt(propertyValue) === 0) {\r\n        this.emitUpdateProperty(propertyName, 'False')\r\n        resultValue = 'False'\r\n      } else {\r\n        this.emitUpdateProperty(propertyName, 'True')\r\n        resultValue = 'True'\r\n      }\r\n    } else if (propertyValue.toLowerCase() === 'true') {\r\n      this.emitUpdateProperty(propertyName, 'True')\r\n      resultValue = 'True'\r\n    } else if (propertyValue.toLowerCase() === 'false') {\r\n      this.emitUpdateProperty(propertyName, 'False')\r\n      resultValue = 'False'\r\n    } else {\r\n      this.emitUpdateProperty(propertyName, '')\r\n      resultValue = ''\r\n    }\r\n    return resultValue\r\n  }\r\n  validateControlSourceProperty (propertyValue : string) {\r\n    // should validate the propertyValue\r\n    return true\r\n  }\r\n  validateRowSourceProperty (propertyValue : string) {\r\n    // should validate the propertyValue\r\n    return true\r\n  }\r\n  validateTextValueProperty (propertyValue : string, propertyName: string, controlId: string) {\r\n    const controlData = this.userformData[this.userFormId][controlId]\r\n    const rowSourceData = controlData.extraDatas!.RowSourceData!\r\n    const boundColumn = propertyName === 'Value' ? controlData.properties.BoundColumn! : 1\r\n    if (boundColumn <= 0 || boundColumn > rowSourceData[0].length) {\r\n      return false\r\n    }\r\n    for (let i = 0; i < rowSourceData.length; i++) {\r\n      if (propertyValue === rowSourceData[i][boundColumn - 1]) {\r\n        return true\r\n      }\r\n    }\r\n    return false\r\n  }\r\n  validateColumnWidths (propertyName : keyof controlProperties, propertyValue : string) :string {\r\n    if (propertyValue === '') {\r\n      return ''\r\n    }\r\n    const initialColWidths = propertyValue.split(';')\r\n    let validPropertyValue: boolean = false\r\n    initialColWidths.forEach(element => {\r\n      for (let index = 0; index < element.length; index++) {\r\n        if (element.includes('in')) {\r\n          if ((element.charCodeAt(index) > 47 && element.charCodeAt(index) < 58) || (element.charCodeAt(index) === 73 || element.charCodeAt(index) === 105 || element.charCodeAt(index) === 32) || (element.charCodeAt(index) === 78 || element.charCodeAt(index) === 110 || element.charCodeAt(index) === 32)) {\r\n            validPropertyValue = true\r\n          } else {\r\n            validPropertyValue = false\r\n            break\r\n          }\r\n        } else if (element.includes('cm')) {\r\n          if ((element.charCodeAt(index) > 47 && element.charCodeAt(index) < 58) || (element.charCodeAt(index) === 67 || element.charCodeAt(index) === 99 || element.charCodeAt(index) === 32) || (element.charCodeAt(index) === 77 || element.charCodeAt(index) === 109 || element.charCodeAt(index) === 32)) {\r\n            validPropertyValue = true\r\n          } else {\r\n            validPropertyValue = false\r\n            break\r\n          }\r\n        } else if (element.includes('pt')) {\r\n          if ((element.charCodeAt(index) > 47 && element.charCodeAt(index) < 58) || (element.charCodeAt(index) === 80 || element.charCodeAt(index) === 112 || element.charCodeAt(index) === 32) || (element.charCodeAt(index) === 84 || element.charCodeAt(index) === 116 || element.charCodeAt(index) === 32)) {\r\n            validPropertyValue = true\r\n          } else {\r\n            validPropertyValue = false\r\n            break\r\n          }\r\n        } else {\r\n          if ((element.charCodeAt(index) > 47 && element.charCodeAt(index) < 58)) {\r\n            validPropertyValue = true\r\n          } else {\r\n            validPropertyValue = false\r\n            break\r\n          }\r\n        }\r\n      }\r\n    })\r\n    if (validPropertyValue) {\r\n      let a = (propertyValue.split(';'))\r\n      let pointValue:any = []\r\n      let newColumnWidthsValue = ''\r\n      a.forEach(element => {\r\n        if (!isNaN(parseInt(element))) {\r\n          if (element.includes('in')) {\r\n            pointValue.push(parseInt(element) * 72)\r\n          } else if (element.includes('cm')) {\r\n            pointValue.push(parseInt(element) * 28.35)\r\n          } else {\r\n            pointValue.push(parseInt(element))\r\n          }\r\n        }\r\n      })\r\n      for (let index = 0; index < pointValue.length; index++) {\r\n        if (index === pointValue.length - 1) {\r\n          newColumnWidthsValue = newColumnWidthsValue + (pointValue[index]) + 'pt'\r\n        } else {\r\n          newColumnWidthsValue = newColumnWidthsValue + (pointValue[index]) + 'pt;'\r\n        }\r\n      }\r\n      return newColumnWidthsValue\r\n    } else {\r\n      return 'Invalid'\r\n    }\r\n  }\r\n  validateListWidth (propertyName : keyof controlProperties, propertyValue : string) :string {\r\n    if (propertyValue === '') {\r\n      return 'Invalid'\r\n    }\r\n    if (propertyValue[0] === '-') {\r\n      return 'Negative'\r\n    }\r\n    const initialListWidth = propertyValue\r\n    let validPropertyValue: boolean = false\r\n    const element = initialListWidth\r\n    for (let index = 0; index < initialListWidth.length; index++) {\r\n      if (element.includes('in') && (element.endsWith('in'))) {\r\n        if ((element.charCodeAt(index) > 47 && element.charCodeAt(index) < 58) || (element.charCodeAt(index) === 73 || element.charCodeAt(index) === 105 || element.charCodeAt(index) === 32) || (element.charCodeAt(index) === 78 || element.charCodeAt(index) === 110 || element.charCodeAt(index) === 32)) {\r\n          validPropertyValue = true\r\n        } else {\r\n          validPropertyValue = false\r\n          break\r\n        }\r\n      } else if (element.includes('cm') && (element.endsWith('cm'))) {\r\n        if ((element.charCodeAt(index) > 47 && element.charCodeAt(index) < 58) || (element.charCodeAt(index) === 67 || element.charCodeAt(index) === 99 || element.charCodeAt(index) === 32) || (element.charCodeAt(index) === 77 || element.charCodeAt(index) === 109 || element.charCodeAt(index) === 32)) {\r\n          validPropertyValue = true\r\n        } else {\r\n          validPropertyValue = false\r\n          break\r\n        }\r\n      } else if (element.includes('pt') && (element.endsWith('pt'))) {\r\n        if ((element.charCodeAt(index) > 47 && element.charCodeAt(index) < 58) || (element.charCodeAt(index) === 80 || element.charCodeAt(index) === 112 || element.charCodeAt(index) === 32) || (element.charCodeAt(index) === 84 || element.charCodeAt(index) === 116 || element.charCodeAt(index) === 32)) {\r\n          validPropertyValue = true\r\n        } else {\r\n          validPropertyValue = false\r\n          break\r\n        }\r\n      } else {\r\n        if ((element.charCodeAt(index) > 47 && element.charCodeAt(index) < 58)) {\r\n          validPropertyValue = true\r\n        } else {\r\n          validPropertyValue = false\r\n          break\r\n        }\r\n      }\r\n    }\r\n    if (validPropertyValue) {\r\n      let a = propertyValue\r\n      let pointValue:any = []\r\n      let newColumnWidthsValue = ''\r\n      const element = a\r\n      if (!isNaN(parseInt(element))) {\r\n        if (element.includes('in')) {\r\n          pointValue.push(parseInt(element) * 72)\r\n        } else if (element.includes('cm')) {\r\n          pointValue.push(parseInt(element) * 28.35)\r\n        } else {\r\n          pointValue.push(parseInt(element))\r\n        }\r\n      }\r\n      newColumnWidthsValue = pointValue + 'pt'\r\n      return newColumnWidthsValue\r\n    } else {\r\n      return 'Invalid'\r\n    }\r\n  }\r\n  updateAppearance (e: Event) {\r\n    const propertyName: keyof controlProperties = (e.target as HTMLInputElement).name as keyof controlProperties\r\n    const inputType = this.tableData[propertyName]!.type\r\n    let propertyValue = (e.target as HTMLInputElement).value\r\n    if (inputType === 'file') {\r\n      if (propertyName === 'MouseIcon' || propertyName === 'Picture') {\r\n        this.handleConvertionImageToBase64(e)\r\n      }\r\n    } else if (inputType === 'String') {\r\n      if (propertyName === 'Accelerator' || propertyName === 'PasswordChar') {\r\n        this.emitUpdateProperty(\r\n          propertyName,\r\n          propertyValue !== '' ? propertyValue[0] : propertyValue\r\n        );\r\n        (e.target as HTMLInputElement).value = propertyValue && propertyValue[0]\r\n      } else if (propertyName === 'Name') {\r\n        if (checkPropertyValue(propertyName, propertyValue)) {\r\n          const isSuccess = this.updateProperty({ propertyName: propertyName, value: propertyValue })\r\n          if (!isSuccess) {\r\n            (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n            EventBus.$emit('showErrorPopup', true, 'invalid', 'Could not set the Name property. Ambiguous name.')\r\n          }\r\n        } else {\r\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Not a legal object name: '${propertyValue}'`)\r\n        }\r\n      } else if (propertyName === 'Value') {\r\n        if (this.getSelectedControlsDatas.length === 1) {\r\n          const controlType = this.userformData[this.userFormId][this.getSelectedControlsDatas[0]].type\r\n          if (controlType === 'CheckBox' || controlType === 'OptionButton' || controlType === 'ToggleButton') {\r\n            const resultValue = this.validateValuePropertyChboxOpbtnTglbtn(propertyName, propertyValue);\r\n            (e.target as HTMLInputElement).value = resultValue\r\n          } else if (controlType === 'ListBox') {\r\n            const isTextValid = this.validateTextValueProperty(propertyValue, propertyName, this.getSelectedControlsDatas[0])\r\n            if (isTextValid) {\r\n              this.emitUpdateProperty(propertyName, propertyValue)\r\n            } else {\r\n              EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property Value`);\r\n              (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n            }\r\n          } else {\r\n            this.emitUpdateProperty(propertyName, propertyValue)\r\n          }\r\n        } else {\r\n          if (this.resultArray[0] === true) {\r\n            const resultValue = this.validateValuePropertyChboxOpbtnTglbtn(propertyName, propertyValue);\r\n            (e.target as HTMLInputElement).value = resultValue\r\n          } else if (this.resultArray[1] === true) {\r\n            const isValueValid = this.updateValueProperty({ propertyName: propertyName, value: propertyValue })\r\n            if (!isValueValid) {\r\n              EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property Value`);\r\n              (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n            }\r\n          } else if (this.resultArray[2] === true) {\r\n\r\n          }\r\n          // this.updateValueProperty({ propertyName: propertyName, value: propertyValue })\r\n        }\r\n      } else if (propertyName === 'Text') {\r\n        const controlType = this.userformData[this.userFormId][this.getSelectedControlsDatas[0]].type\r\n        if (controlType === 'ListBox') {\r\n          const isTextValid = this.validateTextValueProperty(propertyValue, propertyName, this.getSelectedControlsDatas[0])\r\n          if (isTextValid) {\r\n            this.emitUpdateProperty(propertyName, propertyValue)\r\n          } else {\r\n            EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property Value`);\r\n            (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n          }\r\n        } else {\r\n          this.emitUpdateProperty(propertyName, propertyValue)\r\n        }\r\n      } else if (propertyName === 'ControlSource') {\r\n        const isValid = this.validateControlSourceProperty(propertyValue)\r\n        if (isValid) {\r\n          this.emitUpdateProperty(propertyName, propertyValue)\r\n        } else {\r\n          EventBus.$emit('showErrorPopup', true, 'invalid', 'Invalid property value.')\r\n        }\r\n      } else if (propertyName === 'RowSource') {\r\n        const isValid = this.validateRowSourceProperty(propertyValue)\r\n        if (isValid) {\r\n          this.emitUpdateProperty(propertyName, propertyValue)\r\n        } else {\r\n          EventBus.$emit('showErrorPopup', true, 'invalid', 'Invalid property value.')\r\n        }\r\n      } else if (propertyName === 'ColumnWidths') {\r\n        const resultValue = this.validateColumnWidths(propertyName, propertyValue)\r\n        if (resultValue !== 'Invalid') {\r\n          this.emitUpdateProperty(propertyName, resultValue)\r\n        } else {\r\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Type mismatch`);\r\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n        }\r\n      } else if (propertyName === 'ListWidth') {\r\n        const resultValue = this.validateListWidth(propertyName, propertyValue)\r\n        if (resultValue !== 'Invalid' && resultValue !== 'Negative') {\r\n          this.emitUpdateProperty(propertyName, resultValue)\r\n        } else if (resultValue === 'Negative') {\r\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value`);\r\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n        } else {\r\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Type mismatch`);\r\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n        }\r\n      } else {\r\n        this.emitUpdateProperty(propertyName, propertyValue)\r\n      }\r\n    } else if (inputType === 'number' || inputType === 'float') {\r\n      const value = propertyValue.includes('.') ? parseFloat(propertyValue) : parseInt(propertyValue)\r\n      if (propertyName === 'Height' || propertyName === 'Width') {\r\n        if ((this.userformData[this.userFormId][this.getSelectedControlsDatas[0]].type === 'Userform')) {\r\n          if (propertyName === 'Width') {\r\n            if (value >= 0 && value < 103) {\r\n              this.emitUpdateProperty(propertyName, 103);\r\n              (e.target as HTMLInputElement).value = '103'\r\n            } else if (value > 9830) {\r\n              this.emitUpdateProperty(propertyName, 9830)\r\n            } else if (value < 0) {\r\n              (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n            } else {\r\n              this.emitUpdateProperty(propertyName, value)\r\n            }\r\n          } else if (propertyName === 'Height') {\r\n            if (value >= 0 && value < 30) {\r\n              this.emitUpdateProperty(propertyName, 30);\r\n              (e.target as HTMLInputElement).value = '30'\r\n            } else if (value > 9830) {\r\n              this.emitUpdateProperty(propertyName, 9830)\r\n            } else if (value < 0) {\r\n              (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n            } else {\r\n              this.emitUpdateProperty(propertyName, value)\r\n            }\r\n          }\r\n        } else if (checkPropertyValue(propertyName, value)) {\r\n          this.emitUpdateProperty(propertyName, value)\r\n        } else {\r\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n          if (value > 32767) {\r\n            EventBus.$emit('showErrorPopup', true, 'overflow', 'Overflow')\r\n          } else {\r\n            EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value. Enter a value between 0 and 32768`)\r\n          }\r\n        }\r\n      } else if (propertyName === 'Top' || propertyName === 'Left') {\r\n        if (checkPropertyValue(propertyName, value)) {\r\n          this.emitUpdateProperty(propertyName, value)\r\n        } else {\r\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value.`)\r\n        }\r\n      } else if (propertyName === 'MaxLength') {\r\n        if (checkPropertyValue(propertyName, value)) {\r\n          this.emitUpdateProperty(propertyName, value)\r\n        } else {\r\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value. Enter a value between 0 and  2147483647`)\r\n        }\r\n      } else if (propertyName === 'BoundColumn') {\r\n        if (checkPropertyValue(propertyName, value)) {\r\n          this.emitUpdateProperty(propertyName, value)\r\n        } else {\r\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value. Enter a value between 0 and 65536`)\r\n        }\r\n      } else if (propertyName === 'ColumnCount') {\r\n        if (checkPropertyValue(propertyName, value)) {\r\n          this.emitUpdateProperty(propertyName, value)\r\n        } else {\r\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value. Enter a value between -1 and 2147483647`)\r\n        }\r\n      } else if (propertyName === 'ListRows') {\r\n        if (checkPropertyValue(propertyName, value)) {\r\n          this.emitUpdateProperty(propertyName, value)\r\n        } else {\r\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value. Enter a value between 0 and 2147483647`)\r\n        }\r\n      } else if (propertyName === 'TextColumn') {\r\n        if (checkPropertyValue(propertyName, value)) {\r\n          this.emitUpdateProperty(propertyName, value)\r\n        } else {\r\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value. Enter a value between -1 and 32768`)\r\n        }\r\n      } else if (propertyName === 'Value') {\r\n        const controlData = this.userformData[this.userFormId][this.getSelectedControlsDatas[0]]\r\n        const controlType = controlData.type\r\n        if (this.getSelectedControlsDatas.length === 1) {\r\n          if (controlType === 'TabStrip') {\r\n            if (value < -1 || value >= controlData.extraDatas!.Tabs!.length!) {\r\n              (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n              EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value.`)\r\n            } else {\r\n              this.emitUpdateProperty(propertyName, value)\r\n            }\r\n          } else if (controlType === 'MultiPage') {\r\n            if (value < -1 || value >= controlData.controls.length) {\r\n              (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n              EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value.`)\r\n            } else {\r\n              this.emitUpdateProperty(propertyName, value)\r\n            }\r\n          } else if (controlType === 'SpinButton' || controlType === 'ScrollBar') {\r\n            if (this.isDecimalNumber(propertyValue)) {\r\n              (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n            } else {\r\n              const isSuccess = this.updateSpinButtonScrollBarValueProp(this.getSelectedControlsDatas[0], value)\r\n              if (!isSuccess) {\r\n                (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n                EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value.`)\r\n              }\r\n            }\r\n          } else {\r\n            this.emitUpdateProperty(propertyName, propertyValue)\r\n          }\r\n        } else {\r\n          if (this.isDecimalNumber(propertyValue)) {\r\n            (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n          } else {\r\n            const isSuccess = this.validateMultipleValueProperty({ propertyName: propertyName, value: propertyValue })\r\n            if (!isSuccess) {\r\n              (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n              EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value.`)\r\n            } else {\r\n              this.updateMultiSelectPropValue(propertyName, value)\r\n            }\r\n          }\r\n        }\r\n      } else if (propertyName === 'Min' || propertyName === 'Max' || propertyName === 'SmallChange') {\r\n        if (this.isDecimalNumber(propertyValue)) {\r\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n        } else if (checkPropertyValue(propertyName, value)) {\r\n          if (propertyName === 'Min' || propertyName === 'Max') {\r\n            this.updateProperty({ propertyName: propertyName, value: value })\r\n          } else {\r\n            this.emitUpdateProperty(propertyName, value)\r\n          }\r\n        } else {\r\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Invalid property value.`)\r\n        }\r\n      } else if (propertyName === 'TabFixedHeight' || propertyName === 'TabFixedWidth') {\r\n        if (checkPropertyValue(propertyName, value)) {\r\n          this.emitUpdateProperty(propertyName, value)\r\n        } else {\r\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value. Enter a value between 0 and 7200`)\r\n        }\r\n      } else if (propertyName === 'TabIndex') {\r\n        if (this.isDecimalNumber(propertyValue)) {\r\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n        } else if (checkPropertyValue(propertyName, value)) {\r\n          const isSuccess = this.updateProperty({ propertyName: propertyName, value: value })\r\n          if (!isSuccess) {\r\n            (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n          }\r\n        } else {\r\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value. Enter a value greater than or equal to zero.`)\r\n        }\r\n      } else if (propertyName === 'Index') {\r\n        if (this.isDecimalNumber(propertyValue)) {\r\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n        } else if (value < 0) {\r\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value. Enter a value between 0 and 32767`)\r\n        } else {\r\n          const isSuccess = this.updateProperty({ propertyName: propertyName, value: propertyValue })\r\n          if (!isSuccess) {\r\n            (e.target as HTMLInputElement).value = this.tableData!.Index!.value! as string\r\n            EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value.`)\r\n          }\r\n        }\r\n      } else if (propertyName === 'Delay') {\r\n        if (this.isDecimalNumber(propertyValue)) {\r\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n        } else if (checkPropertyValue(propertyName, propertyValue)) {\r\n          this.emitUpdateProperty(propertyName, value)\r\n        } else if (value < 0) {\r\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value. Enter a value greater than or equal to zero.`)\r\n        } else {\r\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Invalid property value.`)\r\n        }\r\n      } else if (propertyName === 'Zoom') {\r\n        if (this.isDecimalNumber(propertyValue)) {\r\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n        } else if (checkPropertyValue(propertyName, propertyValue)) {\r\n          this.emitUpdateProperty(propertyName, value)\r\n        } else {\r\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value. Enter a value between 10 and 400.`)\r\n        }\r\n      } else if (propertyName === 'DrawBuffer') {\r\n        if (this.isDecimalNumber(propertyValue)) {\r\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n        } else if (checkPropertyValue(propertyName, propertyValue)) {\r\n          this.emitUpdateProperty(propertyName, value)\r\n        } else {\r\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value. Enter a value between 16000 and 1048576.`)\r\n        }\r\n      } else if (propertyName === 'TransitionPeriod') {\r\n        if (this.isDecimalNumber(propertyValue)) {\r\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n        } else if (checkPropertyValue(propertyName, propertyValue)) {\r\n          this.emitUpdateProperty(propertyName, value)\r\n        } else {\r\n          (e.target as HTMLInputElement).value = this.tableData![propertyName]!.value! as string\r\n          EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${propertyName} property. Invalid property value. Enter a value between 0 and 10000.`)\r\n        }\r\n      } else {\r\n        this.emitUpdateProperty(propertyName, value)\r\n      }\r\n    } else if (inputType === 'Boolean') {\r\n      if ((propertyName === 'Cancel' || propertyName === 'Default') && ((e.target as HTMLInputElement).value) === 'true') {\r\n        this.updateProperty({ propertyName: propertyName, value: true })\r\n      } else {\r\n        this.emitUpdateProperty(\r\n          propertyName,\r\n          (e.target as HTMLInputElement).value === 'true'\r\n        )\r\n      }\r\n    } else if (inputType === 'array') {\r\n      if ((e.target as HTMLInputElement).value !== '') {\r\n        if (propertyName === 'BorderStyle' && propertyValue === '1') {\r\n          this.emitUpdateProperty(\r\n            propertyName,\r\n            parseInt((e.target as HTMLInputElement).value)\r\n          )\r\n          this.emitUpdateProperty(\r\n            'SpecialEffect',\r\n            0\r\n          )\r\n        } else if (propertyName === 'SpecialEffect' && parseInt(propertyValue) > 0) {\r\n          this.emitUpdateProperty(\r\n            propertyName,\r\n            parseInt((e.target as HTMLInputElement).value)\r\n          )\r\n          this.emitUpdateProperty(\r\n            'BorderStyle',\r\n            0\r\n          )\r\n        } else {\r\n          this.emitUpdateProperty(\r\n            propertyName,\r\n            parseInt((e.target as HTMLInputElement).value)\r\n          )\r\n        }\r\n      }\r\n    }\r\n  }\r\n  updateMultiSelectPropValue (propertyName: keyof controlProperties, value: number) {\r\n    const selected = this.getSelectedControlsDatas!\r\n    for (let i = 0; i < selected.length; i++) {\r\n      this.updatePropValue(selected[i], propertyName, value)\r\n    }\r\n  }\r\n  validateMultipleValueProperty (arg: IPropControl) {\r\n    debugger\r\n    const selected = this.getSelectedControlsDatas!\r\n    let isValid: boolean = true\r\n    for (let i = 0; i < selected.length; i++) {\r\n      const type = this.userformData[this.userFormId][selected[i]].type\r\n      if (type === 'ScrollBar' || type === 'SpinButton') {\r\n        isValid = this.checkValueRangeMinMax(selected[i], arg.value)\r\n      } else if (type === 'MultiPage' || type === 'TabStrip') {\r\n        if (arg.value < -1 || (type === 'TabStrip' && arg.value >= this.userformData[this.userFormId][selected[i]].extraDatas!.Tabs!.length!) ||\r\n        (type === 'MultiPage' && arg.value >= this.userformData[this.userFormId][selected[i]].controls.length!)) {\r\n          isValid = false\r\n        } else {\r\n          isValid = true\r\n        }\r\n      }\r\n      if (!isValid) {\r\n        return isValid\r\n      }\r\n    }\r\n    return isValid\r\n  }\r\n  isDecimalNumber (propValue : string) {\r\n    if (propValue.indexOf('.') > -1) {\r\n      EventBus.$emit('showErrorPopup', true, 'invalid', `Invalid property value.`)\r\n      return true\r\n    }\r\n    return false\r\n  }\r\n  handleConvertionImageToBase64 (e: Event) {\r\n    let that = this\r\n    const reader = new FileReader()\r\n    const fileInput = (e.target as HTMLInputElement)\r\n    const filePath = fileInput.value\r\n    let allowedExtensions\r\n    let typeMismatchExtensions\r\n    // Allowed file type\r\n    if (fileInput.name === 'Picture') {\r\n      allowedExtensions = /(\\.jpg|\\.jpeg|\\.bmp|\\.ico|\\.gif)$/i\r\n      typeMismatchExtensions = /(\\.jpg|\\.jpeg|\\.bmp|\\.ico|\\.gif)$/i\r\n    } else {\r\n      allowedExtensions = /(\\.bmp|\\.ico)$/i\r\n      typeMismatchExtensions = /(\\.bmp|\\.ico|\\.gif)$/i\r\n    }\r\n    if (!allowedExtensions.exec(filePath)) {\r\n      fileInput.value = ''\r\n      if (typeMismatchExtensions.exec(filePath)) {\r\n        EventBus.$emit('showErrorPopup', true, 'invalid', `Could not set the ${fileInput.name} property. The picture type is not valid.`)\r\n      } else {\r\n        EventBus.$emit('showErrorPopup', true, 'invalid', 'Invalid Picture')\r\n      }\r\n      return false\r\n    } else {\r\n      if (fileInput.files && fileInput.files[0]) {\r\n        reader.onload = function (e) {\r\n          that.emitUpdateProperty(fileInput.name as keyof controlProperties, reader.result)\r\n        }\r\n        reader.readAsDataURL(fileInput.files[0])\r\n      }\r\n    }\r\n  }\r\n\r\n  emitFont (tempVal: font) {\r\n    this.emitUpdateProperty('Font', tempVal)\r\n  }\r\n  colorPaletteProp (selectedValue: ISelectedColoPaletteValue) {\r\n    this.emitUpdateProperty(selectedValue.propertyName as keyof controlProperties, selectedValue.propertyValue)\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.node {\r\n  text-align: left;\r\n}\r\ntable {\r\n  margin-right: 0%;\r\n  width: 100%;\r\n  border: 1px solid black;\r\n  border-collapse: collapse;\r\n  color: black;\r\n}\r\nth,\r\ntd {\r\n  text-align: left;\r\n  font-size: 11px;\r\n  margin-right: 0%;\r\n  width: fit-content;\r\n  border: 1px solid black;\r\n  border-collapse: collapse;\r\n  color: black;\r\n}\r\nth {\r\n  width: 120%;\r\n  font-size: 12px;\r\n}\r\n.form-control {\r\n  float: left;\r\n  width: 280px;\r\n  cursor: pointer;\r\n  background-color: rgb(190, 185, 185);\r\n}\r\nlabel {\r\n  float: left;\r\n}\r\nselect {\r\n  width: 100%;\r\n  padding: 1px 2px;\r\n}\r\ninput {\r\n  width: 100%;\r\n}\r\n.btn-group .button {\r\n  border: none;\r\n  color: black;\r\n  text-align: center;\r\n  text-decoration: none;\r\n  display: inline-block;\r\n  font-size: 12px;\r\n  cursor: pointer;\r\n}\r\n.lefttd {\r\n  width: 120px;\r\n}\r\n</style>\r\n"]}]}