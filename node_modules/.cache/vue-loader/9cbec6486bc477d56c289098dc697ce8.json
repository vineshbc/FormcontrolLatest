{"remainingRequest":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mobiotics/Projects/hancom/FormcontrolLatest/src/FormDesigner/components/atoms/FDContextMenu/index.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/src/FormDesigner/components/atoms/FDContextMenu/index.vue","mtime":1612284288000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCmltcG9ydCB7IENvbXBvbmVudCwgVnVlLCBQcm9wLCBFbWl0IH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcicNCmltcG9ydCBGRFNWR0ltYWdlIGZyb20gJ0AvRm9ybURlc2lnbmVyL2NvbXBvbmVudHMvYXRvbXMvRkRTVkdJbWFnZS9pbmRleC52dWUnDQppbXBvcnQgeyBDb250cm9sUHJvcGVydHlEYXRhIH0gZnJvbSAnQC9Gb3JtRGVzaWduZXIvbW9kZWxzL0NvbnRyb2xzVGFibGVQcm9wZXJ0aWVzL0NvbnRyb2xQcm9wZXJ0eURhdGEudHMnDQoNCmltcG9ydCB7IEFjdGlvbiwgU3RhdGUgfSBmcm9tICd2dWV4LWNsYXNzJw0KaW1wb3J0IHsNCiAgSWFkZENoaWxkQ29udHJvbHMsDQogIElhZGRDb250cm9sLA0KICBJZGVsZXRlQ29udHJvbCwNCiAgSXNlbGVjdENvbnRyb2wsDQogIElzZXRDaGlsZENvbnRyb2xzLA0KICBJdXBkYXRlQ29udHJvbCwNCiAgSXVwZGF0ZUNvbnRyb2xFeHRyYURhdGEsDQogIEl1cGRhdGVDb3B5Q29udHJvbExpc3QsDQogIEl1cGRhdGVHcm91cA0KfSBmcm9tICdAL3N0b3JlTW9kdWxlcy9mZC9hY3Rpb25zJw0KaW1wb3J0IHsgRXZlbnRCdXMgfSBmcm9tICdAL0Zvcm1EZXNpZ25lci9ldmVudC1idXMnDQppbXBvcnQgRkRDb21tb25NZXRob2QgZnJvbSAnQC9hcGkvYWJzdHJhY3QvRm9ybURlc2lnbmVyL0ZEQ29tbW9uTWV0aG9kJw0KDQpAQ29tcG9uZW50KHsNCiAgbmFtZTogJ0NvbnRleHRNZW51JywNCiAgY29tcG9uZW50czogew0KICAgIEZEU1ZHSW1hZ2UNCiAgfQ0KfSkNCmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbnRleHRNZW51IGV4dGVuZHMgRkRDb21tb25NZXRob2Qgew0KICBAUHJvcCgpIHZhbHVlczogQXJyYXk8SUNvbnRyb2xDb250ZXh0TWVudT47DQogIEBQcm9wKCkgdXNlckZvcm1JZDogc3RyaW5nOw0KICBAUHJvcCgpIGNvbnRhaW5lcklkOiBzdHJpbmc7DQogIEBQcm9wKCkga2V5RXZlbnROYW1lOiBzdHJpbmc7DQogIEBQcm9wKCkgY29udHJvbElkOiBzdHJpbmc7DQogIEBQcm9wKCkgc2VsZWN0ZWRUYWI6IG51bWJlcjsNCiAgQFByb3AoKSBkYXRhOiBjb250cm9sRGF0YTsNCiAgQFByb3AoKSBncm91cFN0eWxlQXJyYXk6IEFycmF5PElHcm91cFN0eWxlPg0KICBAUHJvcCgpIGNvbnRleHRNZW51dHlwZTogc3RyaW5nDQogIEBQcm9wKCkgZWRpdFRleHRSZWY6IEhUTUxTcGFuRWxlbWVudCB8IEhUTUxUZXh0QXJlYUVsZW1lbnQNCiAgQFByb3AoKSBjb3BpZWRUZXh0OiBzdHJpbmcNCiAgQFByb3AoKSB0ZXh0TWVudTogYm9vbGVhbg0KDQogIEBTdGF0ZSgoc3RhdGUpID0+IHN0YXRlLmZkLnNlbGVjdGVkQ29udHJvbHMpDQogIHNlbGVjdGVkQ29udHJvbHMhOiBmZFN0YXRlWydzZWxlY3RlZENvbnRyb2xzJ107DQogIEBTdGF0ZSgoc3RhdGU6IHJvb3RTdGF0ZSkgPT4gc3RhdGUuZmQuY29weUNvbnRyb2xMaXN0KQ0KICBjb3B5Q29udHJvbExpc3QhOiBmZFN0YXRlWydjb3B5Q29udHJvbExpc3QnXTsNCiAgQFN0YXRlKChzdGF0ZSkgPT4gc3RhdGUuZmQudXNlcmZvcm1EYXRhKSB1c2VyZm9ybURhdGEhOiB1c2VyZm9ybURhdGE7DQogIEBTdGF0ZSgoc3RhdGUpID0+IHN0YXRlLmZkLmNvcGllZENvbnRyb2wpIGNvcGllZENvbnRyb2whOiB1c2VyZm9ybURhdGE7DQogIEBTdGF0ZSgoc3RhdGUpID0+IHN0YXRlLmZkLmdyb3VwZWRDb250cm9scykNCiAgZ3JvdXBlZENvbnRyb2xzITogZmRTdGF0ZVsnZ3JvdXBlZENvbnRyb2xzJ107DQoNCiAgQEFjdGlvbignZmQvZGVsZXRlQ29udHJvbCcpIGRlbGV0ZUNvbnRyb2whOiAocGF5bG9hZDogSWRlbGV0ZUNvbnRyb2wpID0+IHZvaWQ7DQogIEBBY3Rpb24oJ2ZkL2RlbGV0ZUNvcGllZENvbnRyb2wnKSBkZWxldGVDb3BpZWRDb250cm9sITogKHBheWxvYWQ6IElkZWxldGVDb250cm9sKSA9PiB2b2lkOw0KICBAQWN0aW9uKCdmZC91cGRhdGVDb3B5Q29udHJvbExpc3QnKSB1cGRhdGVDb3B5Q29udHJvbExpc3QhOiAoDQogICAgcGF5bG9hZDogSXVwZGF0ZUNvcHlDb250cm9sTGlzdA0KICApID0+IHZvaWQ7DQogIEBBY3Rpb24oJ2ZkL2FkZENvbnRyb2wnKSBhZGRDb250cm9sITogKHBheWxvYWQ6IElhZGRDb250cm9sKSA9PiB2b2lkOw0KICBAQWN0aW9uKCdmZC9hZGRDb3BpZWRDb250cm9sJykgYWRkQ29waWVkQ29udHJvbCE6ICgNCiAgICBwYXlsb2FkOiBJYWRkQ29udHJvbA0KICApID0+IHZvaWQ7DQogIEBBY3Rpb24oJ2ZkL3NlbGVjdENvbnRyb2wnKSBzZWxlY3RDb250cm9sITogKHBheWxvYWQ6IElzZWxlY3RDb250cm9sKSA9PiB2b2lkOw0KICBAQWN0aW9uKCdmZC91cGRhdGVHcm91cCcpIHVwZGF0ZUdyb3VwITogKHBheWxvYWQ6IEl1cGRhdGVHcm91cCkgPT4gdm9pZDsNCiAgQEFjdGlvbignZmQvdXBkYXRlQ29udHJvbEV4dHJhRGF0YScpIHVwZGF0ZUNvbnRyb2xFeHRyYURhdGEhOiAoDQogICAgcGF5bG9hZDogSXVwZGF0ZUNvbnRyb2xFeHRyYURhdGENCiAgKSA9PiB2b2lkOw0KICBAQWN0aW9uKCdmZC91cGRhdGVDb250cm9sJykgdXBkYXRlQ29udHJvbCE6IChwYXlsb2FkOiBJdXBkYXRlQ29udHJvbCkgPT4gdm9pZDsNCiAgQEFjdGlvbignZmQvc2V0Q2hpbGRDb250cm9scycpIHNldENoaWxkQ29udHJvbHMhOiAoDQogICAgcGF5bG9hZDogSXNldENoaWxkQ29udHJvbHMNCiAgKSA9PiB2b2lkOw0KICBAQWN0aW9uKCdmZC9hZGRDaGlsZENvbnRyb2xzJykgYWRkQ2hpbGRDb250cm9scyE6ICgNCiAgICBwYXlsb2FkOiBJYWRkQ2hpbGRDb250cm9scw0KICApID0+IHZvaWQ7DQogIGNvbnRyb2xBY3Rpb24gKGV2ZW50OiBFdmVudCwgY29udHJvbEFjdGlvbk5hbWU6IHN0cmluZywgc3ViVmFsOiBzdHJpbmcpIHsNCiAgICBpZiAodGhpcy50ZXh0TWVudSA9PT0gZmFsc2UpIHsNCiAgICAgIGlmIChjb250cm9sQWN0aW9uTmFtZSA9PT0gJ0lEX0NPUFknKSB7DQogICAgICAgIHRoaXMuY29weUNvbnRyb2woJ2NvcHknKQ0KICAgICAgfSBlbHNlIGlmIChjb250cm9sQWN0aW9uTmFtZSA9PT0gJ0lEX0RFTEVURScpIHsNCiAgICAgICAgdGhpcy5jbGlja0RlbGV0ZSgpDQogICAgICB9IGVsc2UgaWYgKGNvbnRyb2xBY3Rpb25OYW1lID09PSAnSURfUEFTVEUnKSB7DQogICAgICAgIHRoaXMucGFzdGVDb250cm9sKCkNCiAgICAgIH0gZWxzZSBpZiAoY29udHJvbEFjdGlvbk5hbWUgPT09ICdJRF9DVVQnKSB7DQogICAgICAgIHRoaXMuY3V0Q29udHJvbCgpDQogICAgICB9IGVsc2UgaWYgKGNvbnRyb2xBY3Rpb25OYW1lID09PSAnSURfU0VMRUNUQUxMJykgew0KICAgICAgICB0aGlzLnNlbGVjdEFsbCgpDQogICAgICB9IGVsc2UgaWYgKGNvbnRyb2xBY3Rpb25OYW1lID09PSAnSURfR1JPVVAnKSB7DQogICAgICAgIHRoaXMuZ3JvdXBDb250cm9sKCkNCiAgICAgIH0gZWxzZSBpZiAoY29udHJvbEFjdGlvbk5hbWUgPT09ICdJRF9VTkdST1VQJykgew0KICAgICAgICB0aGlzLnVuR3JvdXBDb250cm9sKCkNCiAgICAgIH0gZWxzZSBpZiAoY29udHJvbEFjdGlvbk5hbWUgPT09ICdJRF9ORVdQQUdFJykgew0KICAgICAgICB0aGlzLmFkZE5ld1BhZ2UoKQ0KICAgICAgfSBlbHNlIGlmIChjb250cm9sQWN0aW9uTmFtZSA9PT0gJ0lEX0RFTEVURVBBR0UnKSB7DQogICAgICAgIHRoaXMuZGVsZXRlQ3VycmVudFBhZ2UoKQ0KICAgICAgfSBlbHNlIGlmIChjb250cm9sQWN0aW9uTmFtZSA9PT0gJ0lEX0NPTlRST0xGT1JXQVJEJykgew0KICAgICAgICB0aGlzLmJyaW5nRm9yd2FyZCgpDQogICAgICB9IGVsc2UgaWYgKGNvbnRyb2xBY3Rpb25OYW1lID09PSAnSURfQ09OVFJPTEJBQ0tXQVJEJykgew0KICAgICAgICB0aGlzLmJyaW5nQmFja3dhcmQoKQ0KICAgICAgfSBlbHNlIGlmIChjb250cm9sQWN0aW9uTmFtZSA9PT0gJ0lEX09CSkVDVFBST1AnKSB7DQogICAgICAgIHRoaXMuZGlzcGxheVByb3AoKQ0KICAgICAgfSBlbHNlIGlmIChjb250cm9sQWN0aW9uTmFtZSA9PT0gJ0lEX1JFTkFNRScpIHsNCiAgICAgICAgY29uc3Qgc2VsZWN0ZWRQYWdlSUQgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5zZWxlY3RlZFswXQ0KICAgICAgICBFdmVudEJ1cy4kZW1pdCgNCiAgICAgICAgICAncmVuYW1lUGFnZScsDQogICAgICAgICAgdGhpcy51c2VyRm9ybUlkLA0KICAgICAgICAgIHNlbGVjdGVkUGFnZUlELA0KICAgICAgICAgIHRoaXMuc2VsZWN0ZWRUYWIsDQogICAgICAgICAgdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtzZWxlY3RlZFBhZ2VJRF0udHlwZQ0KICAgICAgICApDQogICAgICB9IGVsc2UgaWYgKGNvbnRyb2xBY3Rpb25OYW1lID09PSAnSURfTU9WRScpIHsNCiAgICAgICAgY29uc3QgdHlwZSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bdGhpcy5jb250cm9sSWRdLnR5cGUNCiAgICAgICAgaWYgKHR5cGUgPT09ICdNdWx0aVBhZ2UnKSB7DQogICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3VzZXJGb3JtVGFiT3JkZXInLCB0aGlzLnVzZXJGb3JtSWQsIHRoaXMuY29udHJvbElkLCB0eXBlKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCd0YWJTdHJpcFRhYk9yZGVyJywgdGhpcy51c2VyRm9ybUlkLCB0aGlzLmNvbnRyb2xJZCwgdHlwZSkNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIGlmIChjb250cm9sQWN0aW9uTmFtZSA9PT0gJ0lEX1RBQk9SREVSJykgew0KICAgICAgICBFdmVudEJ1cy4kZW1pdCgndXNlckZvcm1UYWJPcmRlcicsIHRoaXMudXNlckZvcm1JZCwgdGhpcy5jb250YWluZXJJZCwgJycpDQogICAgICB9IGVsc2UgaWYgKA0KICAgICAgICBjb250cm9sQWN0aW9uTmFtZSA9PT0gJ0lEX0FMSUdOJyB8fA0KICAgICAgY29udHJvbEFjdGlvbk5hbWUgPT09ICdJRF9NQUtFU0FNRVNJWkUnDQogICAgICApIHsNCiAgICAgICAgdGhpcy5jb250cm9sQWxpZ25NZW50KHN1YlZhbCkNCiAgICAgIH0NCiAgICB9IGVsc2Ugew0KICAgICAgaWYgKGNvbnRyb2xBY3Rpb25OYW1lID09PSAnSURfQ09QWScpIHsNCiAgICAgICAgdGhpcy5jb3B5VGV4dCgpDQogICAgICB9IGVsc2UgaWYgKGNvbnRyb2xBY3Rpb25OYW1lID09PSAnSURfREVMRVRFJykgew0KICAgICAgICB0aGlzLmRlbGV0ZVRleHQoKQ0KICAgICAgfSBlbHNlIGlmIChjb250cm9sQWN0aW9uTmFtZSA9PT0gJ0lEX1BBU1RFJykgew0KICAgICAgICBpZiAoZXZlbnQgaW5zdGFuY2VvZiBNb3VzZUV2ZW50KSB7DQogICAgICAgICAgdGhpcy5wYXN0ZVRleHQoZXZlbnQpDQogICAgICAgIH0NCiAgICAgIH0gZWxzZSBpZiAoY29udHJvbEFjdGlvbk5hbWUgPT09ICdJRF9DVVQnKSB7DQogICAgICAgIHRoaXMuY3V0VGV4dCgpDQogICAgICB9IGVsc2UgaWYgKGNvbnRyb2xBY3Rpb25OYW1lID09PSAnSURfT0JKRUNUUFJPUCcpIHsNCiAgICAgICAgdGhpcy5kaXNwbGF5UHJvcCgpDQogICAgICB9DQogICAgfQ0KICAgIHRoaXMuY2xvc2VNZW51KCkNCiAgfQ0KICBjdXRUZXh0ICgpIHsNCiAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnY3V0JykNCiAgfQ0KICBkZWxldGVUZXh0ICgpIHsNCiAgICBkb2N1bWVudC5leGVjQ29tbWFuZCgnZGVsZXRlJykNCiAgfQ0KICBjb3B5VGV4dCAoKSB7DQogICAgZG9jdW1lbnQuZXhlY0NvbW1hbmQoJ2NvcHknKQ0KICB9DQogIHBhc3RlVGV4dCAoZXZlbnQ6IE1vdXNlRXZlbnQpIHsNCiAgICBjb25zdCBjb250cm9sVHlwZSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bdGhpcy5jb250cm9sSWRdLnR5cGUNCiAgICBjb25zdCBwb3NpdGlvbiA9IHRoaXMuZ2V0Q3Vyc29yUG9zKGV2ZW50KQ0KICAgIGNvbnN0IGxlbmd0aCA9IHBvc2l0aW9uLmVuZFBvc2l0aW9uIC0gcG9zaXRpb24uc3RhcnRQb3NpdGlvbg0KICAgIGxldCBiYXNlVmFsdWUgPSB0aGlzLmVkaXRUZXh0UmVmLmlubmVySFRNTC5zcGxpdCgnJykNCiAgICBiYXNlVmFsdWUuc3BsaWNlKHBvc2l0aW9uLnN0YXJ0UG9zaXRpb24sIGxlbmd0aCkNCiAgICBjb25zdCB1cGRhdGVWYWx1ZSA9IGJhc2VWYWx1ZS5zbGljZSgwLCBwb3NpdGlvbi5zdGFydFBvc2l0aW9uKS5qb2luKCcnKSArIHRoaXMuY29waWVkVGV4dCArIGJhc2VWYWx1ZS5zbGljZShwb3NpdGlvbi5zdGFydFBvc2l0aW9uKS5qb2luKCcnKQ0KICAgIEV2ZW50QnVzLiRlbWl0KCd1cGRhdGVUZXh0JywgdXBkYXRlVmFsdWUpDQogIH0NCiAgZ2V0Q3Vyc29yUG9zIChldmVudDogTW91c2VFdmVudCkgew0KICAgIGxldCBzdGFydFBvc2l0aW9uID0gMA0KICAgIGxldCBlbmRQb3NpdGlvbiA9IDANCiAgICBjb25zdCBpc1N1cHBvcnRlZCA9IHR5cGVvZiB3aW5kb3cuZ2V0U2VsZWN0aW9uICE9PSAndW5kZWZpbmVkJw0KICAgIGlmIChpc1N1cHBvcnRlZCkgew0KICAgICAgY29uc3Qgc2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpIQ0KICAgICAgaWYgKHNlbGVjdGlvbi5hbmNob3JPZmZzZXQgPiBzZWxlY3Rpb24uZm9jdXNPZmZzZXQpIHsNCiAgICAgICAgc3RhcnRQb3NpdGlvbiA9IHNlbGVjdGlvbi5mb2N1c09mZnNldA0KICAgICAgICBlbmRQb3NpdGlvbiA9IHNlbGVjdGlvbi5hbmNob3JPZmZzZXQNCiAgICAgIH0gZWxzZSBpZiAoc2VsZWN0aW9uLmFuY2hvck9mZnNldCA9PT0gc2VsZWN0aW9uLmZvY3VzT2Zmc2V0KSB7DQogICAgICAgIHN0YXJ0UG9zaXRpb24gPSBzZWxlY3Rpb24uZm9jdXNPZmZzZXQNCiAgICAgICAgZW5kUG9zaXRpb24gPSBzZWxlY3Rpb24uZm9jdXNPZmZzZXQNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHN0YXJ0UG9zaXRpb24gPSBzZWxlY3Rpb24uYW5jaG9yT2Zmc2V0DQogICAgICAgIGVuZFBvc2l0aW9uID0gc2VsZWN0aW9uLmZvY3VzT2Zmc2V0DQogICAgICB9DQogICAgfQ0KICAgIHJldHVybiB7IHN0YXJ0UG9zaXRpb246IHN0YXJ0UG9zaXRpb24sIGVuZFBvc2l0aW9uOiBlbmRQb3NpdGlvbiB9DQogIH0NCiAgY3JlYXRlZCAoKSB7DQogICAgRXZlbnRCdXMuJG9uKCdncm91cENvbnRyb2wnLCAodmFsdWU6IHN0cmluZykgPT4gew0KICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLmNvbnRhaW5lclswXSA9PT0gdGhpcy5jb250YWluZXJJZCkgew0KICAgICAgICBpZiAodmFsdWUgPT09ICdncm91cCcpIHsNCiAgICAgICAgICB0aGlzLmdyb3VwQ29udHJvbCgpDQogICAgICAgIH0gZWxzZSBpZiAodmFsdWUgPT09ICd1bmdyb3VwJykgew0KICAgICAgICAgIHRoaXMudW5Hcm91cENvbnRyb2woKQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSkNCiAgfQ0KICBkZXN0cm95ZWQgKCkgew0KICAgIEV2ZW50QnVzLiRvZmYoJ2dyb3VwQ29udHJvbCcpDQogIH0NCiAgQEVtaXQoJ2Nsb3NlTWVudScpDQogIGNsb3NlTWVudSAoKSB7DQogICAgcmV0dXJuIDANCiAgfQ0KDQogIGRpc3BsYXlQcm9wICgpIHsNCiAgICBFdmVudEJ1cy4kZW1pdCgnZGlzcFByb3AnLCBmYWxzZSkNCiAgfQ0KICBjcmVhdGVQYWdlTmFtZSAocGFnZUxpc3Q6IHN0cmluZ1tdKSB7DQogICAgbGV0IGxhc3RDb250cm9sSWQgPSAwDQogICAgZm9yIChsZXQgaSBvZiBwYWdlTGlzdCkgew0KICAgICAgaWYgKGkuaW5kZXhPZignUGFnZScpICE9PSAtMSkgew0KICAgICAgICBjb25zdCBJZE51bSA9IGkuc3BsaXQoJ1BhZ2UnKS5wb3AoKSB8fCAnLTEnDQogICAgICAgIGNvbnN0IHBhc3JlSWQgPSBwYXJzZUludChJZE51bSwgMTApDQogICAgICAgIGlmICghaXNOYU4ocGFzcmVJZCkgJiYgbGFzdENvbnRyb2xJZCA8IHBhc3JlSWQpIHsNCiAgICAgICAgICBsYXN0Q29udHJvbElkID0gcGFzcmVJZA0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICAgIHJldHVybiBsYXN0Q29udHJvbElkICsgMQ0KICB9DQogIGdldFBhZ2VDb3VudCAoY29udGFpbmVyOiBzdHJpbmcpIHsNCiAgICBjb25zdCBwYWdlTGlzdDogc3RyaW5nW10gPSBbXQ0KICAgIGZvciAoY29uc3QgcGFnZUlkIG9mIHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY29udGFpbmVyXS5jb250cm9scykgew0KICAgICAgcGFnZUxpc3QucHVzaCh0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW3BhZ2VJZF0ucHJvcGVydGllcy5OYW1lISkNCiAgICB9DQogICAgY29uc3QgbmFtZSA9IHRoaXMuY3JlYXRlUGFnZU5hbWUocGFnZUxpc3QpDQogICAgcmV0dXJuIG5hbWUNCiAgfQ0KDQogIGFkZE5ld1BhZ2UgKCkgew0KICAgIGNvbnN0IHR5cGUgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW3RoaXMuY29udHJvbElkXS50eXBlDQogICAgaWYgKHR5cGUgPT09ICdUYWJTdHJpcCcpIHsNCiAgICAgIGNvbnN0IHRhYkNvbnRyb2xEYXRhID0gSlNPTi5wYXJzZSgNCiAgICAgICAgSlNPTi5zdHJpbmdpZnkodGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVt0aGlzLmNvbnRyb2xJZF0pDQogICAgICApLmV4dHJhRGF0YXMuVGFicw0KICAgICAgbGV0IHByZXZUYWJJZCA9IC0xDQogICAgICBjb25zdCBpbml0aWFsVGFiRGF0YTogdGFic0l0ZW1zID0gew0KICAgICAgICBOYW1lOiAnJywNCiAgICAgICAgQ2FwdGlvbjogJycsDQogICAgICAgIFRvb2xUaXA6ICcnLA0KICAgICAgICBBY2NlbGVyYXRvcjogJycNCiAgICAgIH0NCiAgICAgIGlmICh0YWJDb250cm9sRGF0YS5sZW5ndGggPiAwKSB7DQogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGFiQ29udHJvbERhdGEubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICBjb25zdCBpZCA9IHRhYkNvbnRyb2xEYXRhW2ldLk5hbWUuc3BsaXQoJ1RhYicpLnBvcCgpIHx8ICctMScNCiAgICAgICAgICBjb25zdCBwYXJzZUlkID0gcGFyc2VJbnQoaWQsIDEwKQ0KICAgICAgICAgIGlmICghaXNOYU4ocGFyc2VJZCkgJiYgcHJldlRhYklkIDwgcGFyc2VJZCkgew0KICAgICAgICAgICAgcHJldlRhYklkID0gcGFyc2VJZA0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBwcmV2VGFiSWQgKz0gMQ0KICAgICAgICBpbml0aWFsVGFiRGF0YS5OYW1lID0gYFRhYiR7cHJldlRhYklkfWANCiAgICAgICAgaW5pdGlhbFRhYkRhdGEuQ2FwdGlvbiA9IGBUYWIke3ByZXZUYWJJZH1gDQogICAgICB9IGVsc2Ugew0KICAgICAgICBpbml0aWFsVGFiRGF0YS5OYW1lID0gYFRhYiR7MX1gDQogICAgICAgIGluaXRpYWxUYWJEYXRhLkNhcHRpb24gPSBgVGFiJHsxfWANCiAgICAgIH0NCiAgICAgIHRhYkNvbnRyb2xEYXRhLnB1c2goaW5pdGlhbFRhYkRhdGEpDQogICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xFeHRyYURhdGEoew0KICAgICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsDQogICAgICAgIGNvbnRyb2xJZDogdGhpcy5jb250cm9sSWQsDQogICAgICAgIHByb3BlcnR5TmFtZTogJ1RhYnMnLA0KICAgICAgICB2YWx1ZTogdGFiQ29udHJvbERhdGENCiAgICAgIH0pDQogICAgICB0aGlzLnVwZGF0ZUNvbnRyb2woew0KICAgICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsDQogICAgICAgIGNvbnRyb2xJZDogdGhpcy5jb250cm9sSWQsDQogICAgICAgIHByb3BlcnR5TmFtZTogJ1ZhbHVlJywNCiAgICAgICAgdmFsdWU6IHByZXZUYWJJZCAtIDENCiAgICAgIH0pDQogICAgfSBlbHNlIGlmICh0eXBlID09PSAnTXVsdGlQYWdlJykgew0KICAgICAgY29uc3QgcGFyZW50SWQgPSB0aGlzLmNvbnRyb2xJZC5zcGxpdCgnTXVsdGlQYWdlJykucG9wKCkNCiAgICAgIGNvbnN0IGNvbnRyb2xOYW1lID0gYFBhZ2Uke3BhcmVudElkfV9gDQoNCiAgICAgIGxldCBsYXN0Q29udHJvbElkID0gMA0KICAgICAgY29uc3QgdXNlcmZvcm1Db250cm9sSWRzID0gT2JqZWN0LmtleXModGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXSkNCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdXNlcmZvcm1Db250cm9sSWRzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgIGlmICh1c2VyZm9ybUNvbnRyb2xJZHNbaV0uaW5kZXhPZihjb250cm9sTmFtZSkgIT09IC0xKSB7DQogICAgICAgICAgY29uc3QgSWROdW0gPQ0KICAgICAgICAgIHVzZXJmb3JtQ29udHJvbElkc1tpXS5zcGxpdChjb250cm9sTmFtZSkucG9wKCkgfHwgJy0xJw0KICAgICAgICAgIGNvbnN0IHBhc3JlSWQgPSBwYXJzZUludChJZE51bSwgMTApDQogICAgICAgICAgaWYgKCFpc05hTihwYXNyZUlkKSAmJiBsYXN0Q29udHJvbElkIDwgcGFzcmVJZCkgew0KICAgICAgICAgICAgbGFzdENvbnRyb2xJZCA9IHBhc3JlSWQNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGNvbnN0IGNvbnRyb2xQcm9wRGF0YSA9IG5ldyBDb250cm9sUHJvcGVydHlEYXRhKCkNCiAgICAgIGxldCBjb250cm9sT2JqID0gY29udHJvbFByb3BEYXRhLmRhdGFbJ1BhZ2UnXQ0KICAgICAgY29uc3QgaXRlbSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoY29udHJvbE9iaiEpKQ0KICAgICAgbGFzdENvbnRyb2xJZCArPSAxDQogICAgICBpdGVtLnByb3BlcnRpZXMuSUQgPSBgSURfJHtjb250cm9sTmFtZX0ke2xhc3RDb250cm9sSWR9YA0KICAgICAgY29uc3QgY291bnQgPSB0aGlzLmdldFBhZ2VDb3VudCh0aGlzLmNvbnRyb2xJZCkNCiAgICAgIGl0ZW0ucHJvcGVydGllcy5DYXB0aW9uID0gYFBhZ2Uke2NvdW50fWANCiAgICAgIGl0ZW0ucHJvcGVydGllcy5OYW1lID0gYFBhZ2Uke2NvdW50fWANCiAgICAgIGl0ZW0ucHJvcGVydGllcy5JbmRleCA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bdGhpcy5jb250cm9sSWRdLmNvbnRyb2xzLmxlbmd0aA0KICAgICAgdGhpcy5hZGRDb250cm9sKHsNCiAgICAgICAgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLA0KICAgICAgICBjb250cm9sSWQ6IHRoaXMuY29udHJvbElkLA0KICAgICAgICBhZGRJZDogaXRlbS5wcm9wZXJ0aWVzLklELA0KICAgICAgICBpdGVtOiBpdGVtDQogICAgICB9KQ0KICAgICAgdGhpcy51cGRhdGVDb250cm9sKHsNCiAgICAgICAgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLA0KICAgICAgICBjb250cm9sSWQ6IHRoaXMuY29udHJvbElkLA0KICAgICAgICBwcm9wZXJ0eU5hbWU6ICdWYWx1ZScsDQogICAgICAgIHZhbHVlOiBpdGVtLnByb3BlcnRpZXMuSW5kZXgNCiAgICAgIH0pDQogICAgICB0aGlzLnNlbGVjdENvbnRyb2woew0KICAgICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsDQogICAgICAgIHNlbGVjdDogew0KICAgICAgICAgIGNvbnRhaW5lcjogdGhpcy5nZXRDb250YWluZXJMaXN0KGl0ZW0ucHJvcGVydGllcy5JRCksDQogICAgICAgICAgc2VsZWN0ZWQ6IFtpdGVtLnByb3BlcnRpZXMuSURdDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgICBFdmVudEJ1cy4kZW1pdCgndXBkYXRlTXVsdGlQYWdlVmFsdWUnKQ0KICAgIH0NCiAgfQ0KICBicmluZ0ZvcndhcmQgKCkgew0KICAgIGNvbnN0IHVzZXJEYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXQ0KICAgIGNvbnN0IGhpZ2hQcm9yQ29udHJvbCA9IFtdDQogICAgY29uc3QgbG93UHJvckNvbnRyb2wgPSBbXQ0KICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuZ2V0Q29udGFpbmVyTGlzdCh0aGlzLmdldFNlbGVjdGVkQ29udHJvbHNEYXRhcyFbMF0pWzBdDQogICAgY29uc3QgY29udGFpbmVyQ29udHJvbHMgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2NvbnRhaW5lcl0uY29udHJvbHMNCiAgICBmb3IgKGNvbnN0IGluZGV4IGluIGNvbnRhaW5lckNvbnRyb2xzKSB7DQogICAgICBjb25zdCBjbnRybERhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2NvbnRhaW5lckNvbnRyb2xzW2luZGV4XV0NCiAgICAgIGlmIChjbnRybERhdGEudHlwZSA9PT0gJ011bHRpUGFnZScgfHwgY250cmxEYXRhLnR5cGUgPT09ICdGcmFtZScgfHwgY250cmxEYXRhLnR5cGUgPT09ICdMaXN0Qm94Jykgew0KICAgICAgICBoaWdoUHJvckNvbnRyb2wucHVzaChjb250YWluZXJDb250cm9sc1tpbmRleF0pDQogICAgICB9IGVsc2Ugew0KICAgICAgICBsb3dQcm9yQ29udHJvbC5wdXNoKGNvbnRhaW5lckNvbnRyb2xzW2luZGV4XSkNCiAgICAgIH0NCiAgICB9DQogICAgbGV0IG5leHRTZWxjdGVkU2VyaWVzOiBzdHJpbmdbXSA9IFtdDQogICAgbGV0IG5leHRIaWdoQ29udHJvbFNlcmllczogc3RyaW5nW10gPSBbXQ0KICAgIGNvbnN0IGdldFNlbENvbnRyb2wgPSBbLi4udGhpcy5nZXRTZWxlY3RlZENvbnRyb2xzRGF0YXMhXQ0KICAgIGdldFNlbENvbnRyb2wuc29ydCgoYSwgYikgPT4gew0KICAgICAgcmV0dXJuIHVzZXJEYXRhW2FdLmV4dHJhRGF0YXMhLnpJbmRleCEgLSB1c2VyRGF0YVtiXS5leHRyYURhdGFzIS56SW5kZXghDQogICAgfSkNCiAgICBmb3IgKGNvbnN0IHNlbENvbnRyb2wgb2YgZ2V0U2VsQ29udHJvbCEpIHsNCiAgICAgIGNvbnN0IHR5cGUgPSB1c2VyRGF0YVtzZWxDb250cm9sXS50eXBlDQogICAgICBjb25zdCB0ZW1wWkluZGV4ID0gdXNlckRhdGFbc2VsQ29udHJvbF0uZXh0cmFEYXRhcyEuekluZGV4IQ0KICAgICAgY29uc3QgY29udHJvbEluZGV4ID0gT2JqZWN0LmtleXModXNlckRhdGEpLmZpbmRJbmRleCgodmFsOiBzdHJpbmcsIGluZGV4OiBudW1iZXIpID0+IHsNCiAgICAgICAgcmV0dXJuICd6SW5kZXgnIGluIHVzZXJEYXRhW3ZhbF0uZXh0cmFEYXRhcyEgJiYgKHVzZXJEYXRhW3ZhbF0uZXh0cmFEYXRhcyEuekluZGV4ID09PSB0ZW1wWkluZGV4ICsgMSkNCiAgICAgIH0pDQogICAgICBjb25zdCBuZXh0U2VsZWN0ZWRDb250cm9sID0gY29udHJvbEluZGV4ICE9PSAtMSA/IE9iamVjdC5rZXlzKHVzZXJEYXRhKVtjb250cm9sSW5kZXhdIDogJycNCiAgICAgIGNvbnN0IG5leHRDb250cm9sVHlwZSA9IHVzZXJEYXRhW25leHRTZWxlY3RlZENvbnRyb2xdLnR5cGUNCiAgICAgIGlmIChuZXh0U2VsZWN0ZWRDb250cm9sICE9PSAnJyAmJiAhaGlnaFByb3JDb250cm9sLmluY2x1ZGVzKG5leHRTZWxlY3RlZENvbnRyb2wpKSB7DQogICAgICAgIGlmIChnZXRTZWxDb250cm9sIS5pbmNsdWRlcyhuZXh0U2VsZWN0ZWRDb250cm9sKSkgew0KICAgICAgICAgIGlmICghbmV4dFNlbGN0ZWRTZXJpZXMuaW5jbHVkZXMoc2VsQ29udHJvbCkpIHsNCiAgICAgICAgICAgIG5leHRTZWxjdGVkU2VyaWVzLnB1c2goc2VsQ29udHJvbCkNCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKCFuZXh0U2VsY3RlZFNlcmllcy5pbmNsdWRlcyhuZXh0U2VsZWN0ZWRDb250cm9sKSkgew0KICAgICAgICAgICAgbmV4dFNlbGN0ZWRTZXJpZXMucHVzaChuZXh0U2VsZWN0ZWRDb250cm9sKQ0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBpZiAoT2JqZWN0LmtleXMobmV4dFNlbGN0ZWRTZXJpZXMpLmxlbmd0aCAhPT0gMCkgew0KICAgICAgICAgICAgY29uc3QgdGVtcEV4Y2hhZ2VJbmRleCA9IHVzZXJEYXRhW25leHRTZWxjdGVkU2VyaWVzWzBdXS5leHRyYURhdGFzIS56SW5kZXghDQogICAgICAgICAgICBjb25zdCBzd2FwVGFiSW5kZXggPSB1c2VyRGF0YVtuZXh0U2VsZWN0ZWRDb250cm9sXS5leHRyYURhdGFzIS56SW5kZXghDQogICAgICAgICAgICBpZiAoc3dhcFRhYkluZGV4IDw9IHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHMubGVuZ3RoIC8qICYmIHN3YXBUYWJJbmRleCA+IDAgKi8pIHsNCiAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSB1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzLmZpbmRJbmRleCgNCiAgICAgICAgICAgICAgICAodmFsKSA9PiB1c2VyRGF0YVt2YWxdLmV4dHJhRGF0YXMhLnpJbmRleCA9PT0gc3dhcFRhYkluZGV4DQogICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHNbaW5kZXhdLCAnekluZGV4JywgdGVtcEV4Y2hhZ2VJbmRleCkNCiAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKG5leHRTZWxjdGVkU2VyaWVzWzBdLCAnekluZGV4Jywgc3dhcFRhYkluZGV4IC0gKG5leHRTZWxjdGVkU2VyaWVzIS5sZW5ndGggLSAxKSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZvciAobGV0IGogPSAxOyBqIDwgbmV4dFNlbGN0ZWRTZXJpZXMubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICAgICAgY29uc3QgdXBkYXRlSW5kZXggPSB1c2VyRGF0YVtuZXh0U2VsY3RlZFNlcmllc1tqXV0uZXh0cmFEYXRhcyEuekluZGV4ISArIDENCiAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKG5leHRTZWxjdGVkU2VyaWVzW2pdLCAnekluZGV4JywgdXBkYXRlSW5kZXgpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBuZXh0U2VsY3RlZFNlcmllcyA9IFtdDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGNvbnN0IHN3YXBUYWJJbmRleCA9IHVzZXJEYXRhW25leHRTZWxlY3RlZENvbnRyb2xdLmV4dHJhRGF0YXMhLnpJbmRleCENCiAgICAgICAgICAgIGlmIChzd2FwVGFiSW5kZXggPD0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5sZW5ndGggLyogJiYgc3dhcFRhYkluZGV4ID4gMCAqLykgew0KICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHMuZmluZEluZGV4KA0KICAgICAgICAgICAgICAgICh2YWwpID0+IHVzZXJEYXRhW3ZhbF0uZXh0cmFEYXRhcyEuekluZGV4ID09PSBzd2FwVGFiSW5kZXgNCiAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXMoc2VsQ29udHJvbCwgJ3pJbmRleCcsIHN3YXBUYWJJbmRleCkNCiAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKG5leHRTZWxlY3RlZENvbnRyb2wsICd6SW5kZXgnLCB0ZW1wWkluZGV4KQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgaWYgKGdldFNlbENvbnRyb2whLmluY2x1ZGVzKG5leHRTZWxlY3RlZENvbnRyb2wpICYmICh0eXBlID09PSAnRnJhbWUnIHx8IHR5cGUgPT09ICdNdWx0aVBhZ2UnIHx8IHR5cGUgPT09ICdMaXN0Qm94JykpIHsNCiAgICAgICAgICBpZiAoIW5leHRIaWdoQ29udHJvbFNlcmllcy5pbmNsdWRlcyhzZWxDb250cm9sKSkgew0KICAgICAgICAgICAgbmV4dEhpZ2hDb250cm9sU2VyaWVzLnB1c2goc2VsQ29udHJvbCkNCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKCFuZXh0SGlnaENvbnRyb2xTZXJpZXMuaW5jbHVkZXMobmV4dFNlbGVjdGVkQ29udHJvbCkpIHsNCiAgICAgICAgICAgIG5leHRIaWdoQ29udHJvbFNlcmllcy5wdXNoKG5leHRTZWxlY3RlZENvbnRyb2wpDQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdGcmFtZScgfHwgdHlwZSA9PT0gJ011bHRpUGFnZScgfHwgdHlwZSA9PT0gJ0xpc3RCb3gnKSB7DQogICAgICAgICAgaWYgKE9iamVjdC5rZXlzKG5leHRIaWdoQ29udHJvbFNlcmllcykubGVuZ3RoICE9PSAwKSB7DQogICAgICAgICAgICBjb25zdCB0ZW1wRXhjaGFnZUluZGV4ID0gdXNlckRhdGFbbmV4dEhpZ2hDb250cm9sU2VyaWVzWzBdXS5leHRyYURhdGFzIS56SW5kZXghDQogICAgICAgICAgICBjb25zdCBzd2FwVGFiSW5kZXggPSB1c2VyRGF0YVtuZXh0U2VsZWN0ZWRDb250cm9sXS5leHRyYURhdGFzIS56SW5kZXghDQogICAgICAgICAgICBpZiAoc3dhcFRhYkluZGV4IDw9IHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHMubGVuZ3RoKSB7DQogICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5maW5kSW5kZXgoDQogICAgICAgICAgICAgICAgKHZhbCkgPT4gdXNlckRhdGFbdmFsXS5leHRyYURhdGFzIS56SW5kZXggPT09IHN3YXBUYWJJbmRleA0KICAgICAgICAgICAgICApDQogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyh1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzW2luZGV4XSwgJ3pJbmRleCcsIHRlbXBFeGNoYWdlSW5kZXgpDQogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhuZXh0SGlnaENvbnRyb2xTZXJpZXNbMF0sICd6SW5kZXgnLCBzd2FwVGFiSW5kZXggLSAobmV4dEhpZ2hDb250cm9sU2VyaWVzIS5sZW5ndGggLSAxKSkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZvciAobGV0IGogPSAxOyBqIDwgbmV4dEhpZ2hDb250cm9sU2VyaWVzLmxlbmd0aDsgaisrKSB7DQogICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUluZGV4ID0gdXNlckRhdGFbbmV4dEhpZ2hDb250cm9sU2VyaWVzW2pdXS5leHRyYURhdGFzIS56SW5kZXghICsgMQ0KICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXMobmV4dEhpZ2hDb250cm9sU2VyaWVzW2pdLCAnekluZGV4JywgdXBkYXRlSW5kZXgpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBuZXh0SGlnaENvbnRyb2xTZXJpZXMgPSBbXQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBjb25zdCBzd2FwVGFiSW5kZXggPSB1c2VyRGF0YVtuZXh0U2VsZWN0ZWRDb250cm9sXS5leHRyYURhdGFzIS56SW5kZXghDQogICAgICAgICAgICBpZiAoc3dhcFRhYkluZGV4IDw9IHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHMubGVuZ3RoIC8qICYmIHN3YXBUYWJJbmRleCA+IDAgKi8pIHsNCiAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSB1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzLmZpbmRJbmRleCgNCiAgICAgICAgICAgICAgICAodmFsKSA9PiB1c2VyRGF0YVt2YWxdLmV4dHJhRGF0YXMhLnpJbmRleCA9PT0gc3dhcFRhYkluZGV4DQogICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKHNlbENvbnRyb2wsICd6SW5kZXgnLCBzd2FwVGFiSW5kZXgpDQogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhuZXh0U2VsZWN0ZWRDb250cm9sLCAnekluZGV4JywgdGVtcFpJbmRleCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogIH0NCiAgYnJpbmdCYWNrd2FyZCAoKSB7DQogICAgY29uc3QgdXNlckRhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdDQogICAgY29uc3QgaGlnaFByb3JDb250cm9sID0gW10NCiAgICBjb25zdCBsb3dQcm9yQ29udHJvbCA9IFtdDQogICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5nZXRDb250YWluZXJMaXN0KHRoaXMuZ2V0U2VsZWN0ZWRDb250cm9sc0RhdGFzIVswXSlbMF0NCiAgICBjb25zdCBjb250YWluZXJDb250cm9scyA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY29udGFpbmVyXS5jb250cm9scw0KICAgIGZvciAoY29uc3QgaW5kZXggaW4gY29udGFpbmVyQ29udHJvbHMpIHsNCiAgICAgIGNvbnN0IGNudHJsRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY29udGFpbmVyQ29udHJvbHNbaW5kZXhdXQ0KICAgICAgaWYgKGNudHJsRGF0YS50eXBlID09PSAnTXVsdGlQYWdlJyB8fCBjbnRybERhdGEudHlwZSA9PT0gJ0ZyYW1lJyB8fCBjbnRybERhdGEudHlwZSA9PT0gJ0xpc3RCb3gnKSB7DQogICAgICAgIGhpZ2hQcm9yQ29udHJvbC5wdXNoKGNvbnRhaW5lckNvbnRyb2xzW2luZGV4XSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGxvd1Byb3JDb250cm9sLnB1c2goY29udGFpbmVyQ29udHJvbHNbaW5kZXhdKQ0KICAgICAgfQ0KICAgIH0NCiAgICBsZXQgbmV4dFNlbGN0ZWRTZXJpZXM6IHN0cmluZ1tdID0gW10NCiAgICBsZXQgbmV4dEhpZ2hDb250cm9sU2VyaWVzOiBzdHJpbmdbXSA9IFtdDQogICAgY29uc3QgZ2V0U2VsQ29udHJvbCA9IFsuLi50aGlzLmdldFNlbGVjdGVkQ29udHJvbHNEYXRhcyFdDQogICAgZ2V0U2VsQ29udHJvbC5zb3J0KChhLCBiKSA9PiB7DQogICAgICByZXR1cm4gdXNlckRhdGFbYV0uZXh0cmFEYXRhcyEuekluZGV4ISAtIHVzZXJEYXRhW2JdLmV4dHJhRGF0YXMhLnpJbmRleCENCiAgICB9KQ0KICAgIGZvciAoY29uc3Qgc2VsQ29udHJvbCBvZiBnZXRTZWxDb250cm9sKSB7DQogICAgICBjb25zdCB0eXBlID0gdXNlckRhdGFbc2VsQ29udHJvbF0udHlwZQ0KICAgICAgY29uc3QgdGVtcFpJbmRleCA9IHVzZXJEYXRhW3NlbENvbnRyb2xdLmV4dHJhRGF0YXMhLnpJbmRleCENCiAgICAgIGNvbnN0IGNvbnRyb2xJbmRleCA9IE9iamVjdC5rZXlzKHVzZXJEYXRhKS5maW5kSW5kZXgoKHZhbDogc3RyaW5nLCBpbmRleDogbnVtYmVyKSA9PiB7DQogICAgICAgIHJldHVybiAnekluZGV4JyBpbiB1c2VyRGF0YVt2YWxdLmV4dHJhRGF0YXMhICYmICh1c2VyRGF0YVt2YWxdLmV4dHJhRGF0YXMhLnpJbmRleCA9PT0gdGVtcFpJbmRleCAtIDEpDQogICAgICB9KQ0KICAgICAgY29uc3QgbmV4dFNlbGVjdGVkQ29udHJvbCA9IGNvbnRyb2xJbmRleCAhPT0gLTEgPyBPYmplY3Qua2V5cyh1c2VyRGF0YSlbY29udHJvbEluZGV4XSA6ICcnDQogICAgICAvLyBjb25zdCBuZXh0Q29udHJvbFR5cGUgPSB1c2VyRGF0YVtuZXh0U2VsZWN0ZWRDb250cm9sXS50eXBlDQogICAgICBpZiAobmV4dFNlbGVjdGVkQ29udHJvbCAhPT0gJycgJiYgIWhpZ2hQcm9yQ29udHJvbC5pbmNsdWRlcyhzZWxDb250cm9sKSkgew0KICAgICAgICBpZiAoZ2V0U2VsQ29udHJvbCEuaW5jbHVkZXMobmV4dFNlbGVjdGVkQ29udHJvbCkpIHsNCiAgICAgICAgICBpZiAoIW5leHRTZWxjdGVkU2VyaWVzLmluY2x1ZGVzKHNlbENvbnRyb2wpKSB7DQogICAgICAgICAgICBuZXh0U2VsY3RlZFNlcmllcy5wdXNoKHNlbENvbnRyb2wpDQogICAgICAgICAgfQ0KICAgICAgICAgIGlmICghbmV4dFNlbGN0ZWRTZXJpZXMuaW5jbHVkZXMobmV4dFNlbGVjdGVkQ29udHJvbCkpIHsNCiAgICAgICAgICAgIG5leHRTZWxjdGVkU2VyaWVzLnB1c2gobmV4dFNlbGVjdGVkQ29udHJvbCkNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgaWYgKE9iamVjdC5rZXlzKG5leHRTZWxjdGVkU2VyaWVzKS5sZW5ndGggIT09IDApIHsNCiAgICAgICAgICAgIGNvbnN0IHRlbXBFeGNoYWdlSW5kZXggPSB1c2VyRGF0YVtuZXh0U2VsY3RlZFNlcmllc1swXV0uZXh0cmFEYXRhcyEuekluZGV4IQ0KICAgICAgICAgICAgY29uc3Qgc3dhcFRhYkluZGV4ID0gdXNlckRhdGFbbmV4dFNlbGVjdGVkQ29udHJvbF0uZXh0cmFEYXRhcyEuekluZGV4IQ0KICAgICAgICAgICAgaWYgKHN3YXBUYWJJbmRleCA8PSB1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzLmxlbmd0aCAmJiBzd2FwVGFiSW5kZXggPiAwKSB7DQogICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5maW5kSW5kZXgoDQogICAgICAgICAgICAgICAgKHZhbCkgPT4gdXNlckRhdGFbdmFsXS5leHRyYURhdGFzIS56SW5kZXggPT09IHN3YXBUYWJJbmRleA0KICAgICAgICAgICAgICApDQogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyh1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzW2luZGV4XSwgJ3pJbmRleCcsIHRlbXBFeGNoYWdlSW5kZXgpDQogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhuZXh0U2VsY3RlZFNlcmllc1swXSwgJ3pJbmRleCcsIChuZXh0U2VsY3RlZFNlcmllcyEubGVuZ3RoICsgMSkgLSBzd2FwVGFiSW5kZXgpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBmb3IgKGxldCBqID0gMTsgaiA8IG5leHRTZWxjdGVkU2VyaWVzLmxlbmd0aDsgaisrKSB7DQogICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUluZGV4ID0gdXNlckRhdGFbbmV4dFNlbGN0ZWRTZXJpZXNbal1dLmV4dHJhRGF0YXMhLnpJbmRleCEgLSAxDQogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhuZXh0U2VsY3RlZFNlcmllc1tqXSwgJ3pJbmRleCcsIHVwZGF0ZUluZGV4KQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbmV4dFNlbGN0ZWRTZXJpZXMgPSBbXQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBjb25zdCBzd2FwVGFiSW5kZXggPSB1c2VyRGF0YVtuZXh0U2VsZWN0ZWRDb250cm9sXS5leHRyYURhdGFzIS56SW5kZXghDQogICAgICAgICAgICBpZiAoc3dhcFRhYkluZGV4IDw9IHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHMubGVuZ3RoICYmIHN3YXBUYWJJbmRleCA+IDApIHsNCiAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSB1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzLmZpbmRJbmRleCgNCiAgICAgICAgICAgICAgICAodmFsKSA9PiB1c2VyRGF0YVt2YWxdLmV4dHJhRGF0YXMhLnpJbmRleCA9PT0gc3dhcFRhYkluZGV4DQogICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKHNlbENvbnRyb2wsICd6SW5kZXgnLCBzd2FwVGFiSW5kZXgpDQogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhuZXh0U2VsZWN0ZWRDb250cm9sLCAnekluZGV4JywgdGVtcFpJbmRleCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSBpZiAoIWxvd1Byb3JDb250cm9sLmluY2x1ZGVzKG5leHRTZWxlY3RlZENvbnRyb2wpICYmICh0eXBlID09PSAnRnJhbWUnIHx8IHR5cGUgPT09ICdNdWx0aVBhZ2UnIHx8IHR5cGUgPT09ICdMaXN0Qm94JykpIHsNCiAgICAgICAgaWYgKGdldFNlbENvbnRyb2whLmluY2x1ZGVzKG5leHRTZWxlY3RlZENvbnRyb2wpKSB7DQogICAgICAgICAgaWYgKCFuZXh0SGlnaENvbnRyb2xTZXJpZXMuaW5jbHVkZXMoc2VsQ29udHJvbCkpIHsNCiAgICAgICAgICAgIG5leHRIaWdoQ29udHJvbFNlcmllcy5wdXNoKHNlbENvbnRyb2wpDQogICAgICAgICAgfQ0KICAgICAgICAgIGlmICghbmV4dEhpZ2hDb250cm9sU2VyaWVzLmluY2x1ZGVzKG5leHRTZWxlY3RlZENvbnRyb2wpKSB7DQogICAgICAgICAgICBuZXh0SGlnaENvbnRyb2xTZXJpZXMucHVzaChuZXh0U2VsZWN0ZWRDb250cm9sKQ0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBpZiAoT2JqZWN0LmtleXMobmV4dEhpZ2hDb250cm9sU2VyaWVzKS5sZW5ndGggIT09IDApIHsNCiAgICAgICAgICAgIGNvbnN0IHRlbXBFeGNoYWdlSW5kZXggPSB1c2VyRGF0YVtuZXh0SGlnaENvbnRyb2xTZXJpZXNbMF1dLmV4dHJhRGF0YXMhLnpJbmRleCENCiAgICAgICAgICAgIGNvbnN0IHN3YXBUYWJJbmRleCA9IHVzZXJEYXRhW25leHRTZWxlY3RlZENvbnRyb2xdLmV4dHJhRGF0YXMhLnpJbmRleCENCiAgICAgICAgICAgIGlmIChzd2FwVGFiSW5kZXggPD0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSB1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzLmZpbmRJbmRleCgNCiAgICAgICAgICAgICAgICAodmFsKSA9PiB1c2VyRGF0YVt2YWxdLmV4dHJhRGF0YXMhLnpJbmRleCA9PT0gc3dhcFRhYkluZGV4DQogICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHNbaW5kZXhdLCAnekluZGV4JywgdGVtcEV4Y2hhZ2VJbmRleCkNCiAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKG5leHRIaWdoQ29udHJvbFNlcmllc1swXSwgJ3pJbmRleCcsIChuZXh0SGlnaENvbnRyb2xTZXJpZXMhLmxlbmd0aCArIDEpIC0gc3dhcFRhYkluZGV4KQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZm9yIChsZXQgaiA9IDE7IGogPCBuZXh0SGlnaENvbnRyb2xTZXJpZXMubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICAgICAgY29uc3QgdXBkYXRlSW5kZXggPSB1c2VyRGF0YVtuZXh0SGlnaENvbnRyb2xTZXJpZXNbal1dLmV4dHJhRGF0YXMhLnpJbmRleCEgLSAxDQogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhuZXh0SGlnaENvbnRyb2xTZXJpZXNbal0sICd6SW5kZXgnLCB1cGRhdGVJbmRleCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG5leHRIaWdoQ29udHJvbFNlcmllcyA9IFtdDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGNvbnN0IHN3YXBUYWJJbmRleCA9IHVzZXJEYXRhW25leHRTZWxlY3RlZENvbnRyb2xdLmV4dHJhRGF0YXMhLnpJbmRleCENCiAgICAgICAgICAgIGlmIChzd2FwVGFiSW5kZXggPD0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5sZW5ndGggJiYgc3dhcFRhYkluZGV4ID4gMCkgew0KICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHMuZmluZEluZGV4KA0KICAgICAgICAgICAgICAgICh2YWwpID0+IHVzZXJEYXRhW3ZhbF0uZXh0cmFEYXRhcyEuekluZGV4ID09PSBzd2FwVGFiSW5kZXgNCiAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXMoc2VsQ29udHJvbCwgJ3pJbmRleCcsIHN3YXBUYWJJbmRleCkNCiAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKG5leHRTZWxlY3RlZENvbnRyb2wsICd6SW5kZXgnLCB0ZW1wWkluZGV4KQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfQ0KICBkZWxldGVQYWdlSW5kZXggKGlkOiBzdHJpbmcpIHsNCiAgICBjb25zdCB1c2VyRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF0NCiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5jb250YWluZXJbMF0NCiAgICBjb25zdCB0ZW1wSW5kZXggPSB1c2VyRGF0YVtpZF0ucHJvcGVydGllcyEuSW5kZXghDQogICAgZm9yIChjb25zdCBrZXkgaW4gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scykgew0KICAgICAgY29uc3QgY29udHJvbFpJbmRleCA9IHVzZXJEYXRhW3VzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHNba2V5XV0ucHJvcGVydGllcyEuSW5kZXghDQogICAgICBpZiAoY29udHJvbFpJbmRleCA+IHRlbXBJbmRleCkgew0KICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2woew0KICAgICAgICAgIHVzZXJGb3JtSWQ6IHRoaXMudXNlckZvcm1JZCwNCiAgICAgICAgICBjb250cm9sSWQ6IHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHNba2V5XSwNCiAgICAgICAgICBwcm9wZXJ0eU5hbWU6ICdJbmRleCcsDQogICAgICAgICAgdmFsdWU6IGNvbnRyb2xaSW5kZXggLSAxDQogICAgICAgIH0pDQogICAgICB9DQogICAgfQ0KICB9DQogIGRlbGV0ZUN1cnJlbnRQYWdlICgpIHsNCiAgICBjb25zdCB0eXBlID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVt0aGlzLmNvbnRyb2xJZF0udHlwZQ0KICAgIGlmICh0eXBlID09PSAnVGFiU3RyaXAnKSB7DQogICAgICBjb25zdCB0YWJDb250cm9sRGF0YSA9IEpTT04ucGFyc2UoDQogICAgICAgIEpTT04uc3RyaW5naWZ5KHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bdGhpcy5jb250cm9sSWRdKQ0KICAgICAgKS5leHRyYURhdGFzLlRhYnMNCiAgICAgIGlmICh0YWJDb250cm9sRGF0YSAmJiB0YWJDb250cm9sRGF0YS5sZW5ndGggPiAwKSB7DQogICAgICAgIHRhYkNvbnRyb2xEYXRhLnNwbGljZSh0aGlzLnNlbGVjdGVkVGFiLCAxKQ0KICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xFeHRyYURhdGEoew0KICAgICAgICAgIHVzZXJGb3JtSWQ6IHRoaXMudXNlckZvcm1JZCwNCiAgICAgICAgICBjb250cm9sSWQ6IHRoaXMuY29udHJvbElkLA0KICAgICAgICAgIHByb3BlcnR5TmFtZTogJ1RhYnMnLA0KICAgICAgICAgIHZhbHVlOiB0YWJDb250cm9sRGF0YQ0KICAgICAgICB9KQ0KICAgICAgICB0aGlzLnVwZGF0ZVRhYlN0cmlwVmFsdWUodGhpcy5zZWxlY3RlZFRhYiEgLSAxKQ0KICAgICAgfQ0KICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ011bHRpUGFnZScpIHsNCiAgICAgIGNvbnN0IGNvbnRyb2xzID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVt0aGlzLmNvbnRyb2xJZF0uY29udHJvbHMNCiAgICAgIGlmIChjb250cm9scy5sZW5ndGggPiAwKSB7DQogICAgICAgIHRoaXMuZGVsZXRlUGFnZUluZGV4KHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkWzBdKQ0KICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uc2VsZWN0ZWRbMF1dLnByb3BlcnRpZXMuSW5kZXgNCiAgICAgICAgdGhpcy5kZWxldGVDb250cm9sKHsNCiAgICAgICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsDQogICAgICAgICAgcGFyZW50SWQ6IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLmNvbnRhaW5lclswXSwNCiAgICAgICAgICB0YXJnZXRJZDogdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uc2VsZWN0ZWRbMF0NCiAgICAgICAgfSkNCiAgICAgICAgdGhpcy51cGRhdGVJbmRleChpbmRleCEgLSAxKQ0KICAgICAgfQ0KICAgICAgRXZlbnRCdXMuJGVtaXQoJ3VwZGF0ZU11bHRpUGFnZVZhbHVlJykNCiAgICB9DQogIH0NCiAgdXBkYXRlVGFiU3RyaXBWYWx1ZSAoaW5kZXg6IG51bWJlcikgew0KICAgIGNvbnN0IHVzZXJEYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXQ0KICAgIGNvbnN0IHRhYnMgPSB1c2VyRGF0YVt0aGlzLmNvbnRyb2xJZF0uZXh0cmFEYXRhcyEuVGFicyENCiAgICBjb25zdCB0YWJJbmRleCA9IHRhYnMuZmluZEluZGV4KCh2YWwsIGtleSkgPT4ga2V5ID09PSBpbmRleCArIDEpDQogICAgaWYgKHRhYkluZGV4ICE9PSAtMSkgew0KICAgICAgY29uc3QgdmFsdWUgPSBpbmRleCArIDENCiAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KCdWYWx1ZScsIHZhbHVlLCB0aGlzLmNvbnRyb2xJZCkNCiAgICB9IGVsc2UgaWYgKHRhYkluZGV4ID09PSAtMSAmJiBpbmRleCAhPT0gLTEpIHsNCiAgICAgIGNvbnN0IHZhbHVlID0gaW5kZXgNCiAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KCdWYWx1ZScsIHZhbHVlLCB0aGlzLmNvbnRyb2xJZCkNCiAgICB9IGVsc2Ugew0KICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkoJ1ZhbHVlJywgLTEsIHRoaXMuY29udHJvbElkKQ0KICAgIH0NCiAgfQ0KICBjaGFuZ2VTZWxlY3QgKGNvbnRyb2w6IHN0cmluZykgew0KICAgIHRoaXMuc2VsZWN0Q29udHJvbCh7DQogICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsDQogICAgICBzZWxlY3Q6IHsNCiAgICAgICAgY29udGFpbmVyOiB0aGlzLmdldENvbnRhaW5lckxpc3QoY29udHJvbCksDQogICAgICAgIHNlbGVjdGVkOiBbY29udHJvbF0NCiAgICAgIH0NCiAgICB9KQ0KICB9DQogIHVwZGF0ZUluZGV4IChpbmRleDogbnVtYmVyKSB7DQogICAgY29uc3QgdXNlckRhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdDQogICAgY29uc3QgY29udHJvbHMgPSB1c2VyRGF0YVt0aGlzLmNvbnRyb2xJZF0uY29udHJvbHMNCiAgICBjb25zdCBwYWdlSW5kZXggPSBjb250cm9scy5maW5kSW5kZXgodmFsID0+IHVzZXJEYXRhW3ZhbF0ucHJvcGVydGllcy5JbmRleCA9PT0gaW5kZXggKyAxKQ0KICAgIGlmIChwYWdlSW5kZXggIT09IC0xKSB7DQogICAgICBjb25zdCB2YWx1ZSA9IHVzZXJEYXRhW2NvbnRyb2xzW3BhZ2VJbmRleF1dLnByb3BlcnRpZXMuSW5kZXghDQogICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSgnVmFsdWUnLCB2YWx1ZSwgdGhpcy5jb250cm9sSWQpDQogICAgICB0aGlzLmNoYW5nZVNlbGVjdChjb250cm9sc1twYWdlSW5kZXhdKQ0KICAgIH0gZWxzZSBpZiAocGFnZUluZGV4ID09PSAtMSAmJiBpbmRleCAhPT0gLTEpIHsNCiAgICAgIGNvbnN0IHVwZGF0ZUluZGV4ID0gY29udHJvbHMuZmluZEluZGV4KHZhbCA9PiB1c2VyRGF0YVt2YWxdLnByb3BlcnRpZXMuSW5kZXggPT09IGluZGV4KQ0KICAgICAgY29uc3QgdmFsdWUgPSB1c2VyRGF0YVtjb250cm9sc1t1cGRhdGVJbmRleF1dLnByb3BlcnRpZXMuSW5kZXghDQogICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSgnVmFsdWUnLCB2YWx1ZSwgdGhpcy5jb250cm9sSWQpDQogICAgICB0aGlzLmNoYW5nZVNlbGVjdChjb250cm9sc1t1cGRhdGVJbmRleF0pDQogICAgfSBlbHNlIHsNCiAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KCdWYWx1ZScsIC0xLCB0aGlzLmNvbnRyb2xJZCkNCiAgICAgIHRoaXMuY2hhbmdlU2VsZWN0KHRoaXMuY29udHJvbElkKQ0KICAgIH0NCiAgfQ0KICB1cGRhdGVDb250cm9sUHJvcGVydHkgKA0KICAgIHByb3BlcnR5TmFtZToga2V5b2YgY29udHJvbFByb3BlcnRpZXMsDQogICAgcHJvcGVydHlWYWx1ZTogbnVtYmVyIHwgc3RyaW5nLA0KICAgIGNvbnRyb2xJZDogc3RyaW5nDQogICkgew0KICAgIHRoaXMudXBkYXRlQ29udHJvbCh7DQogICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsDQogICAgICBjb250cm9sSWQ6IGNvbnRyb2xJZCwNCiAgICAgIHByb3BlcnR5TmFtZTogcHJvcGVydHlOYW1lLA0KICAgICAgdmFsdWU6IHByb3BlcnR5VmFsdWUNCiAgICB9KQ0KICB9DQoNCiAgdW5Hcm91cENvbnRyb2wgKCkgew0KICAgIGNvbnN0IGlzR3JvdXAgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5zZWxlY3RlZFswXS5zdGFydHNXaXRoKCdncm91cCcpDQogICAgY29uc3Qgc2VsQ29udHJvbCA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkWzBdDQogICAgY29uc3Qgc2VsZWN0ZWQgPSBpc0dyb3VwDQogICAgICA/IHNlbENvbnRyb2wNCiAgICAgIDogdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtzZWxDb250cm9sXS5wcm9wZXJ0aWVzLkdyb3VwSUQhDQoNCiAgICBjb25zdCBjb250cm9sTGlzdCA9IFtdDQogICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXSkgew0KICAgICAgY29uc3QgdHlwZSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1ba2V5XS50eXBlDQogICAgICBpZiAoDQogICAgICAgIHR5cGUgIT09ICdVc2VyZm9ybScgJiYNCiAgICAgICAgdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtrZXldLnByb3BlcnRpZXMuR3JvdXBJRCA9PT0gc2VsZWN0ZWQNCiAgICAgICkgew0KICAgICAgICBjb250cm9sTGlzdC5wdXNoKGtleSkNCiAgICAgIH0NCiAgICB9DQogICAgY29uc3QgZ3JvdXBBcnJheSA9IFsuLi50aGlzLmdyb3VwZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdIS5ncm91cEFycmF5IV0NCiAgICB0aGlzLnVwZGF0ZUNvbnRyb2xHcm91cElEKHNlbGVjdGVkLCAnJykNCiAgICBjb25zdCBpbmRleCA9IHRoaXMuZ3JvdXBlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0hLmdyb3VwQXJyYXkhLmZpbmRJbmRleCgNCiAgICAgICh2YWwpID0+IHZhbCA9PT0gc2VsZWN0ZWQNCiAgICApDQogICAgZ3JvdXBBcnJheS5zcGxpY2UoaW5kZXgsIDEpDQogICAgdGhpcy51cGRhdGVHcm91cCh7IHVzZXJGb3JtSWQ6IHRoaXMudXNlckZvcm1JZCwgZ3JvdXBBcnJheTogZ3JvdXBBcnJheSB9KQ0KICAgIHRoaXMuc2VsZWN0Q29udHJvbCh7DQogICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsDQogICAgICBzZWxlY3Q6IHsNCiAgICAgICAgY29udGFpbmVyOiBpc0dyb3VwDQogICAgICAgICAgPyB0aGlzLmdldENvbnRhaW5lckxpc3QoY29udHJvbExpc3RbMF0pDQogICAgICAgICAgOiB0aGlzLmdldENvbnRhaW5lckxpc3Qoc2VsQ29udHJvbFswXSksDQogICAgICAgIHNlbGVjdGVkOiBpc0dyb3VwID8gY29udHJvbExpc3QgOiBbc2VsQ29udHJvbF0NCiAgICAgIH0NCiAgICB9KQ0KICB9DQoNCiAgLyoqDQogICAqIEBkZXNjcmlwdGlvbiBUbyBnZW5lcmF0ZSBuZXcgR3JvdXBJRA0KICAgKiBAZnVuY3Rpb24gY3JlYXRlR3JvdXBJZA0KICAgKi8NCiAgY3JlYXRlR3JvdXBJZCAoKSB7DQogICAgbGV0IGxhc3RDb250cm9sSWQgPSAwDQogICAgZm9yIChsZXQgaSBvZiB0aGlzLmdyb3VwZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdIS5ncm91cEFycmF5ISkgew0KICAgICAgaWYgKGkuaW5kZXhPZignZ3JvdXAnKSAhPT0gLTEpIHsNCiAgICAgICAgY29uc3QgSWROdW0gPSBpLnNwbGl0KCdncm91cCcpLnBvcCgpIHx8ICctMScNCiAgICAgICAgY29uc3QgcGFzcmVJZCA9IHBhcnNlSW50KElkTnVtLCAxMCkNCiAgICAgICAgaWYgKCFpc05hTihwYXNyZUlkKSAmJiBsYXN0Q29udHJvbElkIDwgcGFzcmVJZCkgew0KICAgICAgICAgIGxhc3RDb250cm9sSWQgPSBwYXNyZUlkDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogICAgcmV0dXJuIGBncm91cCR7bGFzdENvbnRyb2xJZCArIDF9YA0KICB9DQoNCiAgQEVtaXQoJ2NyZWF0ZUdyb3VwJykNCiAgY3JlYXRlR3JvdXAgKGdyb3VwSWQ6IHN0cmluZykgew0KICAgIHJldHVybiBncm91cElkDQogIH0NCg0KICB1cGRhdGVDb250cm9sR3JvdXBJRCAoZ3JvdXBOYW1lOiBzdHJpbmcsIHVwZGF0ZUdyb3VwSWQ6IHN0cmluZykgew0KICAgIGZvciAoY29uc3QgdmFsIGluIHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF0pIHsNCiAgICAgIGlmICghdmFsLnN0YXJ0c1dpdGgoJ0lEX1VTRVJGT1JNJykpIHsNCiAgICAgICAgY29uc3QgY29udHJvbEdycElkID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVt2YWxdLnByb3BlcnRpZXMNCiAgICAgICAgICAuR3JvdXBJRA0KICAgICAgICBpZiAoY29udHJvbEdycElkID09PSBncm91cE5hbWUpIHsNCiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSgnR3JvdXBJRCcsIHVwZGF0ZUdyb3VwSWQsIHZhbCkNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfQ0KICAvKioNCiAgICogQGRlc2NyaXB0aW9uIFRvIHVwZGF0ZSB0aGUgZ3JvdXAgSW5mb3JtYXRpb24gaW4gbWFpbiBkYXRhDQogICAqIEBmdW5jdGlvbiBncm91cENvbnRyb2wNCiAgICovDQogIGdyb3VwQ29udHJvbCAoKSB7DQogICAgbGV0IHVwZGF0ZUdyb3VwSWQ6IHN0cmluZyA9ICcnDQogICAgY29uc3Qgc2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5zZWxlY3RlZA0KDQogICAgY29uc3Qgc2VsZWN0ZWRHcm91cEFycmF5ID0gc2VsZWN0ZWQuZmlsdGVyKA0KICAgICAgKHZhbDogc3RyaW5nKSA9PiB2YWwuc3RhcnRzV2l0aCgnZ3JvdXAnKSAmJiB2YWwNCiAgICApDQogICAgdXBkYXRlR3JvdXBJZCA9IHNlbGVjdGVkR3JvdXBBcnJheVswXQ0KICAgIGlmIChzZWxlY3RlZEdyb3VwQXJyYXkubGVuZ3RoID49IDIpIHsNCiAgICAgIGNvbnN0IGdyb3VwQXJyYXkgPSBbDQogICAgICAgIC4uLnRoaXMuZ3JvdXBlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0hLmdyb3VwQXJyYXkhDQogICAgICBdDQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdyb3VwQXJyYXkubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBzZWxlY3RlZEdyb3VwQXJyYXkubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICBpZiAoc2VsZWN0ZWRHcm91cEFycmF5W2pdID09PSBncm91cEFycmF5W2ldKSB7DQogICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xHcm91cElEKGdyb3VwQXJyYXlbaV0sIHNlbGVjdGVkR3JvdXBBcnJheVswXSkNCiAgICAgICAgICAgIGdyb3VwQXJyYXkuc3BsaWNlKGksIDEpDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgICB0aGlzLnVwZGF0ZUdyb3VwKHsNCiAgICAgICAgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLA0KICAgICAgICBncm91cEFycmF5OiBbLi4uZ3JvdXBBcnJheSwgc2VsZWN0ZWRHcm91cEFycmF5WzBdXQ0KICAgICAgfSkNCiAgICAgIHVwZGF0ZUdyb3VwSWQgPSBzZWxlY3RlZEdyb3VwQXJyYXlbMF0hDQogICAgfSBlbHNlIGlmIChzZWxlY3RlZEdyb3VwQXJyYXkubGVuZ3RoID09PSAwKSB7DQogICAgICB1cGRhdGVHcm91cElkID0gdGhpcy5jcmVhdGVHcm91cElkKCkNCiAgICAgIGNvbnN0IGdyb3VwQXJyYXkgPSBbDQogICAgICAgIC4uLnRoaXMuZ3JvdXBlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0hLmdyb3VwQXJyYXkhLA0KICAgICAgICB1cGRhdGVHcm91cElkDQogICAgICBdDQogICAgICB0aGlzLnVwZGF0ZUdyb3VwKHsgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLCBncm91cEFycmF5OiBncm91cEFycmF5IH0pDQogICAgfQ0KDQogICAgZm9yIChsZXQgdmFsIG9mIHNlbGVjdGVkKSB7DQogICAgICBpZiAoIXZhbC5zdGFydHNXaXRoKCdncm91cCcpKSB7DQogICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KCdHcm91cElEJywgdXBkYXRlR3JvdXBJZCwgdmFsKQ0KICAgICAgfQ0KICAgIH0NCiAgICB0aGlzLmNyZWF0ZUdyb3VwKHVwZGF0ZUdyb3VwSWQpDQogICAgdGhpcy5zZWxlY3RDb250cm9sKHsNCiAgICAgIHVzZXJGb3JtSWQ6IHRoaXMudXNlckZvcm1JZCwNCiAgICAgIHNlbGVjdDogew0KICAgICAgICBjb250YWluZXI6IHRoaXMuZ2V0Q29udGFpbmVyTGlzdCh1cGRhdGVHcm91cElkKSwNCiAgICAgICAgc2VsZWN0ZWQ6IFt1cGRhdGVHcm91cElkXQ0KICAgICAgfQ0KICAgIH0pDQogIH0NCg0KICAvKioNCiAgICogQGRlc2NyaXB0aW9uIFRvIHNlbGVjdCBhbGwgdGhlIGNvbnRyb2xzIGluIHJlc3BlY3RpdmUgY29udGFpbmVyIHByZXNlbnQgaW4gcmVzcGVjdGl2ZSB1c2VyZm9ybQ0KICAgKiBAZnVuY3Rpb24gc2VsZWN0QWxsDQogICAqLw0KICBzZWxlY3RBbGwgKCkgew0KICAgIC8vIGNvbnN0IHNlbGVjZXRlZENvbnRhaW5lciA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLmNvbnRhaW5lclswXQ0KICAgIGNvbnN0IGNvbnRyb2xPYmplY3RMaXN0ID0gWw0KICAgICAgLi4udGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVt0aGlzLmNvbnRhaW5lcklkXS5jb250cm9scw0KICAgIF0NCiAgICBjb25zdCBzZWxlY2VkR3JvdXA6IHN0cmluZ1tdID0gW10NCiAgICBmb3IgKGNvbnN0IHZhbCBvZiBjb250cm9sT2JqZWN0TGlzdCkgew0KICAgICAgY29uc3QgY29udHJvbEdyb3VwSWQ6IHN0cmluZyA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bdmFsXQ0KICAgICAgICAucHJvcGVydGllcy5Hcm91cElEIQ0KICAgICAgaWYgKGNvbnRyb2xHcm91cElkICYmIGNvbnRyb2xHcm91cElkICE9PSAnJykgew0KICAgICAgICAhc2VsZWNlZEdyb3VwLmluY2x1ZGVzKGNvbnRyb2xHcm91cElkKSEgJiYNCiAgICAgICAgICBzZWxlY2VkR3JvdXAucHVzaChjb250cm9sR3JvdXBJZCkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHNlbGVjZWRHcm91cC5wdXNoKHZhbCkNCiAgICAgIH0NCiAgICB9DQoNCiAgICBpZiAoY29udHJvbE9iamVjdExpc3QubGVuZ3RoICE9PSAwKSB7DQogICAgICB0aGlzLnNlbGVjdENvbnRyb2woew0KICAgICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsDQogICAgICAgIHNlbGVjdDogew0KICAgICAgICAgIGNvbnRhaW5lcjogdGhpcy5nZXRDb250YWluZXJMaXN0KHNlbGVjZWRHcm91cFswXSksDQogICAgICAgICAgc2VsZWN0ZWQ6IFsuLi5zZWxlY2VkR3JvdXBdDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfQ0KICB9DQoNCiAgLyoqDQogICAqIEBkZXNjcmlwdGlvbiBUbyB1cGRhdGUgdGhlIGN1dHRlZCBjb250cm9scyBpbiByZXNwZWN0aXZlIGNvbnRhaW5lciBwcmVzZW50IGluIHJlc3BlY3RpdmUgdXNlcmZvcm0NCiAgICogQGZ1bmN0aW9uIGN1dENvbnRyb2wNCiAgICovDQogIGN1dENvbnRyb2wgKCkgew0KICAgIHRoaXMuY29weUNvbnRyb2woJ2N1dCcpDQogICAgdGhpcy5jbGlja0RlbGV0ZSgpDQogIH0NCg0KICAvKioNCiAgICogQGRlc2NyaXB0aW9uIFRvIHVwZGF0ZSB0aGUgY29waWVkIGNvbnRyb2xzIGluIHJlc3BlY3RpdmUgY29udGFpbmVyIHByZXNlbnQgaW4gcmVzcGVjdGl2ZSB1c2VyZm9ybQ0KICAgKiBAZnVuY3Rpb24gY29weUNvbnRyb2wNCiAgICovDQogIGNvcHlDb250cm9sICh0eXBlOiBzdHJpbmcpIHsNCiAgICBpZiAodGhpcy5jb3BpZWRDb250cm9sW3RoaXMudXNlckZvcm1JZF1bdGhpcy51c2VyRm9ybUlkXS5jb250cm9scy5sZW5ndGggPiAwKSB7DQogICAgICBjb25zdCBsZW5ndGhDb3VudCA9IHRoaXMuY29waWVkQ29udHJvbFt0aGlzLnVzZXJGb3JtSWRdW3RoaXMudXNlckZvcm1JZF0uY29udHJvbHMubGVuZ3RoDQogICAgICBjb25zdCBjb250cm9scyA9IFsuLi50aGlzLmNvcGllZENvbnRyb2xbdGhpcy51c2VyRm9ybUlkXVt0aGlzLnVzZXJGb3JtSWRdLmNvbnRyb2xzXQ0KICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGhDb3VudDsgaSsrKSB7DQogICAgICAgIHRoaXMuZGVsZXRlQ29waWVkQ29udHJvbCh7DQogICAgICAgICAgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLA0KICAgICAgICAgIHBhcmVudElkOiB0aGlzLnVzZXJGb3JtSWQsDQogICAgICAgICAgdGFyZ2V0SWQ6IGNvbnRyb2xzW2ldDQogICAgICAgIH0pDQogICAgICB9DQogICAgfQ0KICAgIGNvbnN0IHVzZXJGb3JtRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF0NCiAgICBjb25zdCBzZWxDb250YWluZXIgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5jb250YWluZXJbMF0NCiAgICBjb25zdCBzZWxTZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkDQogICAgY29uc3QgdXBkYXRlU2VsZWN0ZWQgPSBbXQ0KICAgIGZvciAobGV0IGNvbnRyb2wgb2Ygc2VsU2VsZWN0ZWQpIHsNCiAgICAgIGlmICghY29udHJvbC5zdGFydHNXaXRoKCdncm91cCcpICYmIHVzZXJGb3JtRGF0YVtjb250cm9sXS50eXBlID09PSAnUGFnZScpIHsNCiAgICAgICAgY29udHJvbCA9IHRoaXMuZ2V0Q29udGFpbmVyTGlzdChjb250cm9sKVswXQ0KICAgICAgfQ0KICAgICAgdXBkYXRlU2VsZWN0ZWQucHVzaChjb250cm9sKQ0KICAgIH0NCiAgICB0aGlzLnVwZGF0ZUNvcHlDb250cm9sTGlzdCh7DQogICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsDQogICAgICBwYXJlbnRJZDogc2VsQ29udGFpbmVyLA0KICAgICAgdGFyZ2V0SWQ6IHVwZGF0ZVNlbGVjdGVkLA0KICAgICAgdHlwZTogdHlwZQ0KICAgIH0pDQoNCiAgICBjb25zdCByZWNDb3B5Q29udHJvbCA9IChkYVRhcmdldDogc3RyaW5nKSA9PiB7DQogICAgICBjb25zdCBkYVRhcmdldENvbnRyb2xzID0gdXNlckZvcm1EYXRhW2RhVGFyZ2V0XS5jb250cm9scw0KICAgICAgaWYgKGRhVGFyZ2V0Q29udHJvbHMubGVuZ3RoID4gMCkgew0KICAgICAgICBmb3IgKGxldCBpIGluIGRhVGFyZ2V0Q29udHJvbHMpIHsNCiAgICAgICAgICBjb25zdCBjb250cm9sT2JqZWN0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh1c2VyRm9ybURhdGFbZGFUYXJnZXRDb250cm9sc1tpXV0pKQ0KICAgICAgICAgIGNvbnN0IGNvbnRyb2xBcnJheSA9IFtdDQogICAgICAgICAgY29uc3QgY3RybE9iaiA9IHsgLi4uY29udHJvbE9iamVjdCwgY29udHJvbHM6IFtdIH0NCiAgICAgICAgICB0aGlzLmFkZENvcGllZENvbnRyb2woew0KICAgICAgICAgICAgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLA0KICAgICAgICAgICAgY29udHJvbElkOiBkYVRhcmdldCwNCiAgICAgICAgICAgIGFkZElkOiBkYVRhcmdldENvbnRyb2xzW2ldLA0KICAgICAgICAgICAgaXRlbTogY3RybE9iag0KICAgICAgICAgIH0pDQogICAgICAgICAgcmVjQ29weUNvbnRyb2woZGFUYXJnZXRDb250cm9sc1tpXSkNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCg0KICAgIGZvciAobGV0IGtleSBvZiBzZWxTZWxlY3RlZCkgew0KICAgICAgaWYgKCFrZXkuc3RhcnRzV2l0aCgnZ3JvdXAnKSkgew0KICAgICAgICBpZiAodXNlckZvcm1EYXRhW2tleV0udHlwZSA9PT0gJ1BhZ2UnKSB7DQogICAgICAgICAga2V5ID0gdGhpcy5nZXRDb250YWluZXJMaXN0KGtleSlbMF0NCiAgICAgICAgfQ0KICAgICAgICBjb25zdCBjb250cm9sT2JqZWN0ID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh1c2VyRm9ybURhdGFba2V5XSkpDQogICAgICAgIGNvbnN0IGN0cmxPYmogPSB7IC4uLmNvbnRyb2xPYmplY3QsIGNvbnRyb2xzOiBbXSB9DQogICAgICAgIHRoaXMuYWRkQ29waWVkQ29udHJvbCh7DQogICAgICAgICAgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLA0KICAgICAgICAgIGNvbnRyb2xJZDogdGhpcy51c2VyRm9ybUlkLA0KICAgICAgICAgIGFkZElkOiBrZXksDQogICAgICAgICAgaXRlbTogY3RybE9iag0KICAgICAgICB9KQ0KICAgICAgICByZWNDb3B5Q29udHJvbChrZXkpDQogICAgICB9IGVsc2Ugew0KICAgICAgICBmb3IgKGxldCBjdHJsSWQgaW4gdXNlckZvcm1EYXRhKSB7DQogICAgICAgICAgY29uc3QgY29udHJvbFByb3AgPSB1c2VyRm9ybURhdGFbY3RybElkXS5wcm9wZXJ0aWVzLkdyb3VwSUQNCiAgICAgICAgICBpZiAoY29udHJvbFByb3ApIHsNCiAgICAgICAgICAgIGlmIChjb250cm9sUHJvcCA9PT0ga2V5KSB7DQogICAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xPYmplY3QgPSBKU09OLnBhcnNlKA0KICAgICAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHVzZXJGb3JtRGF0YVtjdHJsSWRdKQ0KICAgICAgICAgICAgICApDQogICAgICAgICAgICAgIGNvbnN0IGN0cmxPYmogPSB7IC4uLmNvbnRyb2xPYmplY3QsIGNvbnRyb2xzOiBbXSB9DQogICAgICAgICAgICAgIHRoaXMuYWRkQ29waWVkQ29udHJvbCh7DQogICAgICAgICAgICAgICAgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLA0KICAgICAgICAgICAgICAgIGNvbnRyb2xJZDogdGhpcy51c2VyRm9ybUlkLA0KICAgICAgICAgICAgICAgIGFkZElkOiBjdHJsSWQsDQogICAgICAgICAgICAgICAgaXRlbTogY3RybE9iag0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICByZWNDb3B5Q29udHJvbChjdHJsSWQpDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICB9DQogIHVwZGF0ZU5ld0NvbnRyb2wgKHBhcmVudElkOiBzdHJpbmcsIGN0cmxJZDogc3RyaW5nLCBjdHJsT2JqOiBjb250cm9sRGF0YSwgaXNQYXJlbnQ6IGJvb2xlYW4pIHsNCiAgICB0aGlzLmFkZENvbnRyb2woew0KICAgICAgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLA0KICAgICAgY29udHJvbElkOiBwYXJlbnRJZCwNCiAgICAgIGFkZElkOiBjdHJsSWQsDQogICAgICBpdGVtOiBjdHJsT2JqDQogICAgfSkNCiAgICBpZiAoaXNQYXJlbnQpIHsNCiAgICAgIGNvbnN0IG5ld1RhYkluZGV4ID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtwYXJlbnRJZF0uY29udHJvbHMubGVuZ3RoDQogICAgICB0aGlzLnVwZGF0ZVRhYkluZGV4VmFsdWUoY3RybElkKQ0KICAgICAgdGhpcy51cGRhdGVaSW5kZXhWYWx1ZShjdHJsSWQpDQogICAgfQ0KICB9DQoNCiAgbmV3UGFzdGVDb250cm9sSWQgKGtleTogc3RyaW5nLCBwYXJlbnRJZDogc3RyaW5nKSB7DQogICAgY29uc3QgdXNlckZvcm1EYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXQ0KICAgIGxldCBsYXN0Q29udHJvbElkID0gMA0KICAgIGNvbnN0IHR5cGUgPSBrZXkgaW4gdXNlckZvcm1EYXRhID8gdXNlckZvcm1EYXRhW2tleV0udHlwZSA6ICcnDQogICAgY29uc3QgcGFyZW50TmFtZSA9IHBhcmVudElkICE9PSAnJyA/IHBhcmVudElkLnNwbGl0KCdNdWx0aVBhZ2UnKS5wb3AoKSA6IC0xDQogICAgY29uc3Qgc2VsZWN0ZWRDb250cm9sTmFtZTogc3RyaW5nIHwgdW5kZWZpbmVkID0NCiAgICB0eXBlID09PSAnUGFnZScNCiAgICAgID8gYFBhZ2Uke3BhcmVudE5hbWV9X2ANCiAgICAgIDoga2V5LnJlcGxhY2UoL1swLTldL2csICcnKS5zcGxpdCgnXycpLnBvcCgpDQogICAgY29uc3QgdXNlcmZvcm1Db250cm9sSWRzID0gT2JqZWN0LmtleXModXNlckZvcm1EYXRhKQ0KICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdXNlcmZvcm1Db250cm9sSWRzLmxlbmd0aDsgaSsrKSB7DQogICAgICBpZiAodXNlcmZvcm1Db250cm9sSWRzW2ldLmluZGV4T2Yoc2VsZWN0ZWRDb250cm9sTmFtZSEpICE9PSAtMSkgew0KICAgICAgICBjb25zdCBJZE51bSA9IHVzZXJmb3JtQ29udHJvbElkc1tpXS5zcGxpdChzZWxlY3RlZENvbnRyb2xOYW1lISkucG9wKCkgfHwgJy0xJw0KICAgICAgICBjb25zdCBwYXNyZUlkID0gcGFyc2VJbnQoSWROdW0sIDEwKQ0KICAgICAgICBpZiAoIWlzTmFOKHBhc3JlSWQpICYmIGxhc3RDb250cm9sSWQgPCBwYXNyZUlkKSB7DQogICAgICAgICAgbGFzdENvbnRyb2xJZCA9IHBhc3JlSWQNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgICBsYXN0Q29udHJvbElkICs9IDENCiAgICBjb25zdCBOYW1lID0gYCR7c2VsZWN0ZWRDb250cm9sTmFtZX0ke2xhc3RDb250cm9sSWR9YA0KICAgIHJldHVybiBOYW1lDQogIH0NCiAgcmVtb3ZlQ2hpbGRDb250cm9sIChkYVRhcmdldDogc3RyaW5nLCBkZWxldGVDb250cm9sOiBzdHJpbmcpIHsNCiAgICBjb25zdCByZW1vdmVDb250cm9sID0gWy4uLnRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bZGFUYXJnZXRdLmNvbnRyb2xzXQ0KICAgIGNvbnN0IHJlbW92ZUluZGV4ID0gcmVtb3ZlQ29udHJvbC5maW5kSW5kZXgoKHZhbCkgPT4gdmFsID09PSBkZWxldGVDb250cm9sKQ0KICAgIHJlbW92ZUNvbnRyb2wuc3BsaWNlKHJlbW92ZUluZGV4LCAxKQ0KICAgIHRoaXMuc2V0Q2hpbGRDb250cm9scyh7DQogICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsDQogICAgICBjb250YWluZXJJZDogZGFUYXJnZXQsDQogICAgICB0YXJnZXRDb250cm9sczogcmVtb3ZlQ29udHJvbA0KICAgIH0pDQogIH0NCiAgZ2V0UGFzdGVDb250cm9sU2l6ZSAoKSB7DQogICAgY29uc3QgdXNyRnJtRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF0NCiAgICBjb25zdCBwYXN0ZUNvbnRyb2xzID0gWy4uLnRoaXMuZ2V0U2VsZWN0ZWRDb250cm9sc0RhdGFzIV0NCiAgICBjb25zdCBwYXN0ZUNvbnRhaW5lciA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLmNvbnRhaW5lclswXQ0KICAgIGNvbnN0IGxlZnRBcnJheSA9IFsuLi5wYXN0ZUNvbnRyb2xzXQ0KICAgIGNvbnN0IHRvcEFycmF5ID0gWy4uLnBhc3RlQ29udHJvbHNdDQogICAgY29uc3QgcmlnaHRBcnJheSA9IFsuLi5wYXN0ZUNvbnRyb2xzXQ0KICAgIGNvbnN0IGJvdHRvbUFycmF5ID0gWy4uLnBhc3RlQ29udHJvbHNdDQogICAgbGVmdEFycmF5LnNvcnQoKGEsIGIpID0+IHsNCiAgICAgIHJldHVybiB1c3JGcm1EYXRhW2FdLnByb3BlcnRpZXMuTGVmdCEgLSB1c3JGcm1EYXRhW2JdLnByb3BlcnRpZXMuTGVmdCENCiAgICB9KQ0KICAgIHRvcEFycmF5LnNvcnQoKGEsIGIpID0+IHsNCiAgICAgIHJldHVybiB1c3JGcm1EYXRhW2FdLnByb3BlcnRpZXMuVG9wISAtIHVzckZybURhdGFbYl0ucHJvcGVydGllcy5Ub3AhDQogICAgfSkNCiAgICByaWdodEFycmF5LnNvcnQoKGEsIGIpID0+IHsNCiAgICAgIHJldHVybiAodXNyRnJtRGF0YVtiXS5wcm9wZXJ0aWVzLkxlZnQhICsgdXNyRnJtRGF0YVtiXS5wcm9wZXJ0aWVzLldpZHRoISkgLQ0KICAgICAgICh1c3JGcm1EYXRhW2FdLnByb3BlcnRpZXMuTGVmdCEgKyB1c3JGcm1EYXRhW2FdLnByb3BlcnRpZXMuV2lkdGghKQ0KICAgIH0pDQogICAgYm90dG9tQXJyYXkuc29ydCgoYSwgYikgPT4gew0KICAgICAgcmV0dXJuICh1c3JGcm1EYXRhW2JdLnByb3BlcnRpZXMuVG9wISArIHVzckZybURhdGFbYl0ucHJvcGVydGllcy5IZWlnaHQhKSAtDQogICAgICAgKHVzckZybURhdGFbYV0ucHJvcGVydGllcy5Ub3AhICsgdXNyRnJtRGF0YVthXS5wcm9wZXJ0aWVzLkhlaWdodCEpDQogICAgfSkNCiAgICBjb25zdCBncm91cFJlY3RMZWZ0ID0gdXNyRnJtRGF0YVtsZWZ0QXJyYXlbMF1dLnByb3BlcnRpZXMuTGVmdCENCiAgICBjb25zdCBncm91cFJlY3RUb3AgPSB1c3JGcm1EYXRhW3RvcEFycmF5WzBdXS5wcm9wZXJ0aWVzLlRvcCENCiAgICBjb25zdCBncm91cFJlY3RCb3R0b20gPSB1c3JGcm1EYXRhW2JvdHRvbUFycmF5WzBdXS5wcm9wZXJ0aWVzLlRvcCEgKyB1c3JGcm1EYXRhW2JvdHRvbUFycmF5WzBdXS5wcm9wZXJ0aWVzLkhlaWdodCENCiAgICBjb25zdCBncm91cFJlY3RSaWdodCA9IHVzckZybURhdGFbcmlnaHRBcnJheVswXV0ucHJvcGVydGllcy5MZWZ0ISArIHVzckZybURhdGFbcmlnaHRBcnJheVswXV0ucHJvcGVydGllcy5XaWR0aCENCg0KICAgIGNvbnN0IGRlbHRhVG9wID0gKGdyb3VwUmVjdEJvdHRvbSAtIGdyb3VwUmVjdFRvcCkgLyAyDQogICAgY29uc3QgZGVsdGFMZWZ0ID0gKGdyb3VwUmVjdFJpZ2h0IC0gZ3JvdXBSZWN0TGVmdCkgLyAyDQoNCiAgICBjb25zdCB0eXBlID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtwYXN0ZUNvbnRhaW5lcl0udHlwZQ0KICAgIGNvbnN0IGNvbnRhaW5lciA9IHR5cGUgPT09ICdQYWdlJyA/IHVzckZybURhdGFbdGhpcy5nZXRDb250YWluZXJMaXN0KHBhc3RlQ29udGFpbmVyKVswXV0ucHJvcGVydGllcyA6IHVzckZybURhdGFbcGFzdGVDb250YWluZXJdLnByb3BlcnRpZXMNCiAgICBjb25zdCBjb250YWluZXJIZWlnaHQgPSB0eXBlID09PSAnVXNlcmZvcm0nID8gY29udGFpbmVyLkhlaWdodCEgLSAzNyA6IGNvbnRhaW5lci5IZWlnaHQhIC0gMjANCiAgICBjb25zdCB0YXJnZXRUb3AgPSAoKGNvbnRhaW5lckhlaWdodCkgLyAyKSAtIGRlbHRhVG9wDQogICAgY29uc3QgdGFyZ2V0TGVmdCA9IChjb250YWluZXIuV2lkdGghIC8gMikgLSBkZWx0YUxlZnQNCg0KICAgIGNvbnN0IGRpZmZUb3AgPSB0YXJnZXRUb3AgLSB1c3JGcm1EYXRhW3RvcEFycmF5WzBdXS5wcm9wZXJ0aWVzLlRvcCEgKyB1c3JGcm1EYXRhW3Bhc3RlQ29udGFpbmVyXS5wcm9wZXJ0aWVzLlNjcm9sbFRvcCENCiAgICBjb25zdCBkaWZmTGVmdCA9IHRhcmdldExlZnQgLSB1c3JGcm1EYXRhW2xlZnRBcnJheVswXV0ucHJvcGVydGllcy5MZWZ0ISArIHVzckZybURhdGFbcGFzdGVDb250YWluZXJdLnByb3BlcnRpZXMuU2Nyb2xsTGVmdCENCg0KICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVmdEFycmF5Lmxlbmd0aDsgaSsrKSB7DQogICAgICBsZXQgbGVmdCA9IHVzckZybURhdGFbbGVmdEFycmF5W2ldXS5wcm9wZXJ0aWVzLkxlZnQhICsgZGlmZkxlZnQNCiAgICAgIGlmICghaXNOYU4obGVmdCkpIHsNCiAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkoJ0xlZnQnLCBsZWZ0LCBsZWZ0QXJyYXlbaV0pDQogICAgICB9DQogICAgfQ0KICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdG9wQXJyYXkubGVuZ3RoOyBpKyspIHsNCiAgICAgIGxldCB0b3AgPSB1c3JGcm1EYXRhW3RvcEFycmF5W2ldXS5wcm9wZXJ0aWVzLlRvcCEgKyBkaWZmVG9wDQogICAgICBpZiAoIWlzTmFOKHRvcCkpIHsNCiAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkoJ1RvcCcsIHRvcCwgdG9wQXJyYXlbaV0pDQogICAgICB9DQogICAgfQ0KICB9DQogIC8qKg0KICAgKiBAZGVzY3JpcHRpb24gVG8gcGFzdGUgY29udHJvbHMgaW4gcmVzcGVjdGl2ZSBjb250YWluZXIgcHJlc2VudCBpbiByZXNwZWN0aXZlIHVzZXJmb3JtDQogICAqIEBmdW5jdGlvbiBwYXN0ZUNvbnRyb2wNCiAgICovDQogIHBhc3RlQ29udHJvbCAoKSB7DQogICAgaWYgKHRoaXMuY29weUNvbnRyb2xMaXN0LnR5cGUgPT09ICdjb3B5Jykgew0KICAgICAgY29uc3Qgc2VsQ29udGFpbmVyID0gdGhpcy5jb3B5Q29udHJvbExpc3QucGFyZW50SWQNCiAgICAgIGNvbnN0IHNlbFNlbGVjdGVkID0gdGhpcy5jb3B5Q29udHJvbExpc3QudGFyZ2V0SWQNCiAgICAgIGNvbnN0IHVzZXJGb3JtRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF0NCiAgICAgIGNvbnN0IHByZXNlbnRHcm91cElkOiBzdHJpbmdbXSA9IFtdDQogICAgICBjb25zdCBuZXdHcm91cElkOiBzdHJpbmdbXSA9IFtdDQogICAgICBjb25zdCBvbGRDb250cm9sSWQ6IHN0cmluZ1tdID0gW10NCiAgICAgIGNvbnN0IG5ld0NvbnRyb2xJZDogc3RyaW5nW10gPSBbXQ0KDQogICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLmNvcGllZENvbnRyb2xbdGhpcy51c2VyRm9ybUlkXSkgew0KICAgICAgICBjb25zdCBjb250cm9sUHJvcCA9IHRoaXMuY29waWVkQ29udHJvbFt0aGlzLnVzZXJGb3JtSWRdW2tleV0ucHJvcGVydGllcy5Hcm91cElEDQogICAgICAgIGlmIChjb250cm9sUHJvcCAmJiAhcHJlc2VudEdyb3VwSWQuaW5jbHVkZXMoY29udHJvbFByb3ApKSB7DQogICAgICAgICAgcHJlc2VudEdyb3VwSWQucHVzaChjb250cm9sUHJvcCkNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgZm9yIChsZXQgaiBpbiBwcmVzZW50R3JvdXBJZCkgew0KICAgICAgICBjb25zdCBuZXdJZCA9IHRoaXMuY3JlYXRlR3JvdXBJZCgpDQogICAgICAgIG5ld0dyb3VwSWQucHVzaChuZXdJZCkNCiAgICAgICAgbGV0IGdyb3VwQXJyYXk6IHN0cmluZ1tdID0gWw0KICAgICAgICAgIC4uLnRoaXMuZ3JvdXBlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0hLmdyb3VwQXJyYXkhLA0KICAgICAgICAgIG5ld0lkDQogICAgICAgIF0NCiAgICAgICAgdGhpcy51cGRhdGVHcm91cCh7DQogICAgICAgICAgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLA0KICAgICAgICAgIGdyb3VwQXJyYXk6IGdyb3VwQXJyYXkhDQogICAgICAgIH0pDQogICAgICB9DQoNCiAgICAgIGNvbnN0IHJlY0NvcHlDb250cm9sID0gKGRhVGFyZ2V0OiBzdHJpbmcpID0+IHsNCiAgICAgICAgY29uc3QgZGFUYXJnZXRDb250cm9scyA9IHVzZXJGb3JtRGF0YVtkYVRhcmdldF0uY29udHJvbHMNCiAgICAgICAgaWYgKGRhVGFyZ2V0Q29udHJvbHMgJiYgZGFUYXJnZXRDb250cm9scy5sZW5ndGggPiAwKSB7DQogICAgICAgICAgZm9yIChsZXQgaSA9IDAsIGxpbWl0ID0gZGFUYXJnZXRDb250cm9scy5sZW5ndGg7IGkgPCBsaW1pdDsgaSsrKSB7DQogICAgICAgICAgICBjb25zdCBrZXkgPSBkYVRhcmdldENvbnRyb2xzW2ldDQogICAgICAgICAgICBjb25zdCBOYW1lID0gdGhpcy5uZXdQYXN0ZUNvbnRyb2xJZChrZXksIGRhVGFyZ2V0KQ0KICAgICAgICAgICAgY29uc3QgY29udHJvbElEOnwgc3RyaW5nfCB1bmRlZmluZWQgPSBgSURfJHtOYW1lfWANCiAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xPYmogPSB7IC4uLnRoaXMuY29waWVkQ29udHJvbFt0aGlzLnVzZXJGb3JtSWRdW2tleV0gfQ0KICAgICAgICAgICAgbGV0IGdyb3VwSWRJbmRleCA9IC0xDQogICAgICAgICAgICBncm91cElkSW5kZXggPSBwcmVzZW50R3JvdXBJZC5maW5kSW5kZXgoKHZhbCkgPT4gdmFsID09PSBjb250cm9sT2JqLnByb3BlcnRpZXMuR3JvdXBJRCkNCiAgICAgICAgICAgIGNvbnN0IGl0ZW06IGNvbnRyb2xEYXRhID0gew0KICAgICAgICAgICAgICAuLi5jb250cm9sT2JqLA0KICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7DQogICAgICAgICAgICAgICAgLi4uY29udHJvbE9iai5wcm9wZXJ0aWVzLA0KICAgICAgICAgICAgICAgIElEOiBjb250cm9sSUQhLA0KICAgICAgICAgICAgICAgIEdyb3VwSUQ6IGdyb3VwSWRJbmRleCAhPT0gLTEgPyBuZXdHcm91cElkW2dyb3VwSWRJbmRleF0gOiAnJywNCiAgICAgICAgICAgICAgICBOYW1lOiBOYW1lDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHRoaXMucmVtb3ZlQ2hpbGRDb250cm9sKGRhVGFyZ2V0LCBrZXkpDQogICAgICAgICAgICB0aGlzLnVwZGF0ZU5ld0NvbnRyb2woZGFUYXJnZXQsIGNvbnRyb2xJRCwgaXRlbSwgZmFsc2UpDQogICAgICAgICAgICByZWNDb3B5Q29udHJvbChjb250cm9sSUQpDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIGZvciAoY29uc3Qga2V5IG9mIHNlbFNlbGVjdGVkKSB7DQogICAgICAgIGlmICgha2V5LnN0YXJ0c1dpdGgoJ2dyb3VwJykpIHsNCiAgICAgICAgICBvbGRDb250cm9sSWQucHVzaChrZXkpDQogICAgICAgICAgY29uc3QgTmFtZSA9IHRoaXMubmV3UGFzdGVDb250cm9sSWQoa2V5LCAnJykNCiAgICAgICAgICBjb25zdCBjb250cm9sSUQ6fCBzdHJpbmd8IHVuZGVmaW5lZCA9IGBJRF8ke05hbWV9YA0KICAgICAgICAgIGNvbnN0IGNvbnRyb2xPYmogPSB7IC4uLnRoaXMuY29waWVkQ29udHJvbFt0aGlzLnVzZXJGb3JtSWRdW2tleV0gfQ0KICAgICAgICAgIG5ld0NvbnRyb2xJZC5wdXNoKGNvbnRyb2xJRCkNCiAgICAgICAgICBsZXQgZ3JvdXBJZEluZGV4ID0gLTENCiAgICAgICAgICBncm91cElkSW5kZXggPSBwcmVzZW50R3JvdXBJZC5maW5kSW5kZXgoDQogICAgICAgICAgICAodmFsKSA9PiBjb250cm9sT2JqLnByb3BlcnRpZXMuR3JvdXBJRCA9PT0gdmFsDQogICAgICAgICAgKQ0KICAgICAgICAgIGlmIChzZWxTZWxlY3RlZC5sZW5ndGggPT09IDEgJiYgdGhpcy5jb3BpZWRDb250cm9sW3RoaXMudXNlckZvcm1JZF1bc2VsU2VsZWN0ZWRbMF1dLnByb3BlcnRpZXMuR3JvdXBJRCAhPT0gJycpIHsNCiAgICAgICAgICAgIGdyb3VwSWRJbmRleCA9IC0xDQogICAgICAgICAgfQ0KICAgICAgICAgIGNvbnN0IGl0ZW06IGNvbnRyb2xEYXRhID0gew0KICAgICAgICAgICAgLi4uY29udHJvbE9iaiwNCiAgICAgICAgICAgIHByb3BlcnRpZXM6IHsNCiAgICAgICAgICAgICAgLi4uY29udHJvbE9iai5wcm9wZXJ0aWVzLA0KICAgICAgICAgICAgICBJRDogY29udHJvbElEISwNCiAgICAgICAgICAgICAgR3JvdXBJRDogZ3JvdXBJZEluZGV4ICE9PSAtMSA/IG5ld0dyb3VwSWRbZ3JvdXBJZEluZGV4XSA6ICcnLA0KICAgICAgICAgICAgICBOYW1lOiBOYW1lDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIHRoaXMudXBkYXRlTmV3Q29udHJvbCh0aGlzLmNvbnRhaW5lcklkLCBjb250cm9sSUQsIGl0ZW0sIHRydWUpDQogICAgICAgICAgcmVjQ29weUNvbnRyb2woY29udHJvbElEKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGZvciAobGV0IGN0cmxJZCBpbiB0aGlzLmNvcGllZENvbnRyb2xbdGhpcy51c2VyRm9ybUlkXSkgew0KICAgICAgICAgICAgY29uc3QgY29udHJvbFByb3AgPSB0aGlzLmNvcGllZENvbnRyb2xbdGhpcy51c2VyRm9ybUlkXVtjdHJsSWRdDQogICAgICAgICAgICAgIC5wcm9wZXJ0aWVzLkdyb3VwSUQNCiAgICAgICAgICAgIGlmIChjb250cm9sUHJvcCkgew0KICAgICAgICAgICAgICBpZiAoY29udHJvbFByb3AgPT09IGtleSkgew0KICAgICAgICAgICAgICAgIGNvbnN0IE5hbWUgPSB0aGlzLm5ld1Bhc3RlQ29udHJvbElkKGN0cmxJZCwgJycpDQogICAgICAgICAgICAgICAgY29uc3QgY29udHJvbElEOnwgc3RyaW5nfCB1bmRlZmluZWQgPSBgSURfJHtOYW1lfWANCiAgICAgICAgICAgICAgICBjb25zdCBjb250cm9sT2JqID0gdGhpcy5jb3BpZWRDb250cm9sW3RoaXMudXNlckZvcm1JZF1bY3RybElkXQ0KDQogICAgICAgICAgICAgICAgbGV0IGdyb3VwSWRJbmRleCA9IC0xDQogICAgICAgICAgICAgICAgZ3JvdXBJZEluZGV4ID0gcHJlc2VudEdyb3VwSWQuZmluZEluZGV4KA0KICAgICAgICAgICAgICAgICAgKHZhbCkgPT4gY29udHJvbE9iai5wcm9wZXJ0aWVzLkdyb3VwSUQgPT09IHZhbA0KICAgICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgICBjb25zdCBpdGVtOiBjb250cm9sRGF0YSA9IHsNCiAgICAgICAgICAgICAgICAgIC4uLmNvbnRyb2xPYmosDQogICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7DQogICAgICAgICAgICAgICAgICAgIC4uLmNvbnRyb2xPYmoucHJvcGVydGllcywNCiAgICAgICAgICAgICAgICAgICAgSUQ6IGNvbnRyb2xJRCEsDQogICAgICAgICAgICAgICAgICAgIEdyb3VwSUQ6IGdyb3VwSWRJbmRleCAhPT0gLTEgPyBuZXdHcm91cElkW2dyb3VwSWRJbmRleF0gOiAnJywNCiAgICAgICAgICAgICAgICAgICAgTmFtZTogTmFtZQ0KICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZU5ld0NvbnRyb2wodGhpcy5jb250YWluZXJJZCwgY29udHJvbElELCBpdGVtLCB0cnVlKQ0KICAgICAgICAgICAgICAgIHJlY0NvcHlDb250cm9sKGNvbnRyb2xJRCkNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgZm9yIChsZXQgaiBvZiBuZXdHcm91cElkKSB7DQogICAgICAgIHRoaXMuY3JlYXRlR3JvdXAoaikNCiAgICAgIH0NCiAgICAgIGNvbnN0IG5ld1NlbGVjdGVkOiBzdHJpbmdbXSA9IFtdDQogICAgICBmb3IgKGNvbnN0IGNvbnRyb2wgb2Ygc2VsU2VsZWN0ZWQpIHsNCiAgICAgICAgaWYgKGNvbnRyb2wuc3RhcnRzV2l0aCgnZ3JvdXAnKSkgew0KICAgICAgICAgIGNvbnN0IGluZGV4ID0gcHJlc2VudEdyb3VwSWQuZmluZEluZGV4KCh2YWwpID0+IHZhbCA9PT0gY29udHJvbCkNCiAgICAgICAgICBuZXdTZWxlY3RlZC5wdXNoKG5ld0dyb3VwSWRbaW5kZXhdKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGNvbnN0IGluZGV4ID0gb2xkQ29udHJvbElkLmZpbmRJbmRleCgodmFsKSA9PiB2YWwgPT09IGNvbnRyb2wpDQogICAgICAgICAgbmV3U2VsZWN0ZWQucHVzaChuZXdDb250cm9sSWRbaW5kZXhdKQ0KICAgICAgICB9DQogICAgICB9DQogICAgICB0aGlzLnNlbGVjdENvbnRyb2woew0KICAgICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsDQogICAgICAgIHNlbGVjdDogew0KICAgICAgICAgIGNvbnRhaW5lcjogdGhpcy5nZXRDb250YWluZXJMaXN0KG5ld1NlbGVjdGVkWzBdKSwNCiAgICAgICAgICBzZWxlY3RlZDogbmV3U2VsZWN0ZWQNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICB9IGVsc2UgaWYgKHRoaXMuY29weUNvbnRyb2xMaXN0LnR5cGUgPT09ICdjdXQnKSB7DQogICAgICBjb25zdCBzZWxDb250YWluZXIgPSB0aGlzLmNvcHlDb250cm9sTGlzdC5wYXJlbnRJZA0KICAgICAgY29uc3Qgc2VsU2VsZWN0ZWQgPSB0aGlzLmNvcHlDb250cm9sTGlzdC50YXJnZXRJZA0KICAgICAgY29uc3QgdXNlckZvcm1EYXRhID0gdGhpcy5jb3BpZWRDb250cm9sW3RoaXMudXNlckZvcm1JZF0NCiAgICAgIGNvbnN0IHJlY0NvcHlDb250cm9sID0gKGRhVGFyZ2V0OiBzdHJpbmcpID0+IHsNCiAgICAgICAgY29uc3QgZGFUYXJnZXRDb250cm9scyA9IHVzZXJGb3JtRGF0YVtkYVRhcmdldF0uY29udHJvbHMNCiAgICAgICAgaWYgKGRhVGFyZ2V0Q29udHJvbHMubGVuZ3RoID4gMCkgew0KICAgICAgICAgIGZvciAobGV0IGkgPSAwLCBsaW1pdCA9IGRhVGFyZ2V0Q29udHJvbHMubGVuZ3RoOyBpIDwgbGltaXQ7IGkrKykgew0KICAgICAgICAgICAgY29uc3Qga2V5ID0gZGFUYXJnZXRDb250cm9sc1tpXQ0KICAgICAgICAgICAgY29uc3QgY29udHJvbE9iaiA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5jb3BpZWRDb250cm9sW3RoaXMudXNlckZvcm1JZF1ba2V5XSkpDQogICAgICAgICAgICBjb25zdCBpdGVtOiBjb250cm9sRGF0YSA9IHsNCiAgICAgICAgICAgICAgLi4uY29udHJvbE9iag0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgdGhpcy5yZW1vdmVDaGlsZENvbnRyb2woZGFUYXJnZXQsIGtleSkNCiAgICAgICAgICAgIHRoaXMudXBkYXRlTmV3Q29udHJvbChkYVRhcmdldCwga2V5LCBpdGVtLCBmYWxzZSkNCiAgICAgICAgICAgIHJlY0NvcHlDb250cm9sKGtleSkNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGZvciAoY29uc3Qga2V5IG9mIHNlbFNlbGVjdGVkKSB7DQogICAgICAgIGlmICgha2V5LnN0YXJ0c1dpdGgoJ2dyb3VwJykpIHsNCiAgICAgICAgICBjb25zdCBjb250cm9sT2JqID0gSlNPTi5wYXJzZSgNCiAgICAgICAgICAgIEpTT04uc3RyaW5naWZ5KHRoaXMuY29waWVkQ29udHJvbFt0aGlzLnVzZXJGb3JtSWRdW2tleV0pDQogICAgICAgICAgKQ0KICAgICAgICAgIGlmIChzZWxTZWxlY3RlZC5sZW5ndGggPT09IDEgJiYgdXNlckZvcm1EYXRhW3NlbFNlbGVjdGVkWzBdXS5wcm9wZXJ0aWVzLkdyb3VwSUQhICE9PSAnJykgew0KICAgICAgICAgICAgY29udHJvbE9iai5wcm9wZXJ0aWVzLkdyb3VwSUQgPSAnJw0KICAgICAgICAgIH0NCiAgICAgICAgICBjb25zdCBpdGVtOiBjb250cm9sRGF0YSA9IHsNCiAgICAgICAgICAgIC4uLmNvbnRyb2xPYmoNCiAgICAgICAgICB9DQogICAgICAgICAgdGhpcy51cGRhdGVOZXdDb250cm9sKHRoaXMuY29udGFpbmVySWQsIGtleSwgaXRlbSwgdHJ1ZSkNCiAgICAgICAgICByZWNDb3B5Q29udHJvbChrZXkpDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgZm9yIChsZXQgY3RybElkIGluIHVzZXJGb3JtRGF0YSkgew0KICAgICAgICAgICAgY29uc3QgY29udHJvbFByb3AgPSB1c2VyRm9ybURhdGFbY3RybElkXS5wcm9wZXJ0aWVzLkdyb3VwSUQNCiAgICAgICAgICAgIGlmIChjb250cm9sUHJvcCkgew0KICAgICAgICAgICAgICBpZiAoY29udHJvbFByb3AgPT09IGtleSkgew0KICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRyb2xPYmogPSBKU09OLnBhcnNlKA0KICAgICAgICAgICAgICAgICAgSlNPTi5zdHJpbmdpZnkodGhpcy5jb3BpZWRDb250cm9sW3RoaXMudXNlckZvcm1JZF1bY3RybElkXSkNCiAgICAgICAgICAgICAgICApDQogICAgICAgICAgICAgICAgY29uc3QgaXRlbTogY29udHJvbERhdGEgPSB7DQogICAgICAgICAgICAgICAgICAuLi5jb250cm9sT2JqDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTmV3Q29udHJvbCh0aGlzLmNvbnRhaW5lcklkLCBjdHJsSWQsIGl0ZW0sIHRydWUpDQogICAgICAgICAgICAgICAgcmVjQ29weUNvbnRyb2woY3RybElkKQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgICB0aGlzLnNlbGVjdENvbnRyb2woew0KICAgICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsDQogICAgICAgIHNlbGVjdDogew0KICAgICAgICAgIGNvbnRhaW5lcjogdGhpcy5nZXRDb250YWluZXJMaXN0KHNlbFNlbGVjdGVkWzBdKSwNCiAgICAgICAgICBzZWxlY3RlZDogc2VsU2VsZWN0ZWQNCiAgICAgICAgfQ0KICAgICAgfSkNCiAgICAgIHRoaXMudXBkYXRlQ29weUNvbnRyb2xMaXN0KHsNCiAgICAgICAgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLA0KICAgICAgICBwYXJlbnRJZDogdGhpcy5jb250YWluZXJJZCwNCiAgICAgICAgdGFyZ2V0SWQ6IHNlbFNlbGVjdGVkLA0KICAgICAgICB0eXBlOiAnY29weScNCiAgICAgIH0pDQogICAgfQ0KICAgIHRoaXMuZ2V0UGFzdGVDb250cm9sU2l6ZSgpDQogICAgY29uc3Qgc2VsU2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5zZWxlY3RlZA0KICAgIGZvciAoY29uc3QgY29udHJvbCBvZiBzZWxTZWxlY3RlZCkgew0KICAgICAgaWYgKGNvbnRyb2wuc3RhcnRzV2l0aCgnZ3JvdXAnKSkgew0KICAgICAgICB0aGlzLmNyZWF0ZUdyb3VwKGNvbnRyb2wpDQogICAgICB9DQogICAgfQ0KICAgIEV2ZW50QnVzLiRlbWl0KCdhZnRlclBhc3RlJykNCiAgfQ0KDQogIC8qKg0KICAgKiBAZGVzY3JpcHRpb24gVG8gZGVsZXRlIGNvbnRyb2xzIGluIHJlc3BlY3RpdmUgY29udGFpbmVyIHByZXNlbnQgaW4gcmVzcGVjdGl2ZSB1c2VyZm9ybQ0KICAgKiBAZnVuY3Rpb24gY2xpY2tEZWxldGUNCiAgICovDQogIGNsaWNrRGVsZXRlICgpIHsNCiAgICBjb25zdCBzZWxDb250cm9sID0gW10NCiAgICBjb25zdCB1c2VyRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF0NCiAgICBjb25zdCBzZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkDQogICAgY29uc3Qgc2VsQ29udGFpbmVyID0gdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uY29udGFpbmVyDQogICAgY29uc3QgZmlsdGVyQ29udHJvbHMgPSBbXQ0KICAgIGNvbnN0IGNvbnRyb2xzID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVt0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5jb250YWluZXJbMF1dLmNvbnRyb2xzDQogICAgZm9yIChjb25zdCBjb250cm9sIG9mIHNlbGVjdGVkKSB7DQogICAgICBpZiAoIWNvbnRyb2wuc3RhcnRzV2l0aCgnSURfVVNFUkZPUk0nKSkgew0KICAgICAgICBpZiAoY29udHJvbC5zdGFydHNXaXRoKCdncm91cCcpKSB7DQogICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdXNlckRhdGEpIHsNCiAgICAgICAgICAgIGlmICgNCiAgICAgICAgICAgICAgdXNlckRhdGFba2V5XS5wcm9wZXJ0aWVzLkdyb3VwSUQgPT09IGNvbnRyb2wNCiAgICAgICAgICAgICkgew0KICAgICAgICAgICAgICBzZWxDb250cm9sLnB1c2goa2V5KQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBzZWxDb250cm9sLnB1c2goY29udHJvbCkNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgICBpZiAoc2VsZWN0ZWQubGVuZ3RoID09PSAxICYmICFzZWxlY3RlZFswXS5zdGFydHNXaXRoKCdncm91cCcpICYmIHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bc2VsZWN0ZWRbMF1dLnByb3BlcnRpZXMuR3JvdXBJRCAhPT0gJycpIHsNCiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgY29udHJvbHMubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgaWYgKHVzZXJEYXRhW2NvbnRyb2xzW2pdXS5wcm9wZXJ0aWVzLkdyb3VwSUQgPT09IHVzZXJEYXRhW3NlbGVjdGVkWzBdXS5wcm9wZXJ0aWVzLkdyb3VwSUQpIHsNCiAgICAgICAgICBmaWx0ZXJDb250cm9scy5wdXNoKGNvbnRyb2xzW2pdKQ0KICAgICAgICB9DQogICAgICB9DQogICAgICBpZiAoZmlsdGVyQ29udHJvbHMubGVuZ3RoID09PSAyKSB7DQogICAgICAgIGNvbnN0IGN1clNlbGVjdCA9IGZpbHRlckNvbnRyb2xzWzBdID09PSBzZWxlY3RlZFswXSA/IGZpbHRlckNvbnRyb2xzWzFdIDogZmlsdGVyQ29udHJvbHNbMF0NCiAgICAgICAgY29uc3Qgc2VsR3JvdXBJZCA9IHVzZXJEYXRhW3NlbGVjdGVkWzBdXS5wcm9wZXJ0aWVzLkdyb3VwSUQNCiAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkoJ0dyb3VwSUQnLCAnJywgY3VyU2VsZWN0KQ0KICAgICAgfQ0KICAgIH0NCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbENvbnRyb2wubGVuZ3RoOyBpKyspIHsNCiAgICAgIGNvbnN0IGNvbnRyb2xJZCA9IHVzZXJEYXRhW3NlbENvbnRyb2xbaV1dLnR5cGUgPT09ICdQYWdlJyA/IHNlbENvbnRhaW5lclswXSA6IHNlbENvbnRyb2xbaV0NCiAgICAgIHRoaXMuZGVsZXRlWkluZGV4KGNvbnRyb2xJZCkNCiAgICAgIHRoaXMuZGVsZXRlVGFiSW5kZXgoY29udHJvbElkKQ0KICAgICAgdGhpcy5kZWxldGVDb250cm9sKHsNCiAgICAgICAgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLA0KICAgICAgICBwYXJlbnRJZDogdGhpcy5nZXRDb250YWluZXJMaXN0KGNvbnRyb2xJZClbMF0sDQogICAgICAgIHRhcmdldElkOiBjb250cm9sSWQNCiAgICAgIH0pDQogICAgfQ0KDQogICAgdGhpcy5zZWxlY3RDb250cm9sKHsNCiAgICAgIHVzZXJGb3JtSWQ6IHRoaXMudXNlckZvcm1JZCwNCiAgICAgIHNlbGVjdDogew0KICAgICAgICBjb250YWluZXI6IHVzZXJEYXRhW3NlbENvbnRhaW5lclswXV0udHlwZSA9PT0gJ011bHRpUGFnZScgPyB0aGlzLmdldENvbnRhaW5lckxpc3Qoc2VsQ29udGFpbmVyWzBdKSA6IHNlbENvbnRhaW5lciwNCiAgICAgICAgc2VsZWN0ZWQ6IHVzZXJEYXRhW3NlbENvbnRhaW5lclswXV0udHlwZSA9PT0gJ011bHRpUGFnZScgPyBbdGhpcy5nZXRDb250YWluZXJMaXN0KHNlbENvbnRhaW5lclswXSlbMF1dIDogW3NlbENvbnRhaW5lclswXV0NCiAgICAgIH0NCiAgICB9KQ0KICAgIEV2ZW50QnVzLiRlbWl0KCdmb2N1c1VzZXJGb3JtJykNCiAgfQ0KICB1cGRhdGVBY3Rpb24gKGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7DQogICAgbGV0IGNvbnRyb2xBY3Rpb25OYW1lID0gJycNCiAgICBpZiAoZXZlbnQuY3RybEtleSAmJiBldmVudC5jb2RlID09PSAnS2V5QScpIHsNCiAgICAgIGNvbnRyb2xBY3Rpb25OYW1lID0gJ0lEX1NFTEVDVEFMTCcNCiAgICB9IGVsc2UgaWYgKGV2ZW50LmN0cmxLZXkgJiYgZXZlbnQuY29kZSA9PT0gJ0tleUMnKSB7DQogICAgICBpZiAoDQogICAgICAgIHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkWzBdICE9PSB0aGlzLnVzZXJGb3JtSWQNCiAgICAgICkgew0KICAgICAgICBjb250cm9sQWN0aW9uTmFtZSA9ICdJRF9DT1BZJw0KICAgICAgfQ0KICAgIH0gZWxzZSBpZiAoZXZlbnQua2V5Q29kZSA9PT0gNDYpIHsNCiAgICAgIGNvbnRyb2xBY3Rpb25OYW1lID0gJ0lEX0RFTEVURScNCiAgICB9IGVsc2UgaWYgKGV2ZW50LmN0cmxLZXkgJiYgZXZlbnQuY29kZSA9PT0gJ0tleVYnKSB7DQogICAgICBjb250cm9sQWN0aW9uTmFtZSA9ICdJRF9QQVNURScNCiAgICB9IGVsc2UgaWYgKGV2ZW50LmtleUNvZGUgJiYgZXZlbnQuY29kZSA9PT0gJ0tleVgnKSB7DQogICAgICBjb250cm9sQWN0aW9uTmFtZSA9ICdJRF9DVVQnDQogICAgfQ0KICAgIHRoaXMuY29udHJvbEFjdGlvbihldmVudCwgY29udHJvbEFjdGlvbk5hbWUsICcnKQ0KICB9DQogIHVwZGF0ZVByb3BWYWwgKHByb3BOYW1lOiBzdHJpbmcsIHByb3BWYWx1ZTogbnVtYmVyKSB7DQogICAgY29uc3QgY3RybFNlbCA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkDQogICAgY29uc3QgdXNyRnJtRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF0NCiAgICBmb3IgKGxldCBpbmRleCA9IDE7IGluZGV4IDwgY3RybFNlbC5sZW5ndGg7IGluZGV4KyspIHsNCiAgICAgIGlmICghY3RybFNlbFtpbmRleF0uc3RhcnRzV2l0aCgnZ3JvdXAnKSkgew0KICAgICAgICBjb25zdCBjdXJQcm9wID0gdXNyRnJtRGF0YVtjdHJsU2VsW2luZGV4XV0ucHJvcGVydGllcw0KICAgICAgICBpZiAocHJvcE5hbWUgPT09ICdzZWxSaWdodCcpIHsNCiAgICAgICAgICBjb25zdCBjdXJSaWdodCA9IGN1clByb3AuV2lkdGghICsgY3VyUHJvcC5MZWZ0IQ0KICAgICAgICAgIGNvbnN0IHZhbHVlID0gY3VyUHJvcC5MZWZ0ISArIChwcm9wVmFsdWUgLSBjdXJSaWdodCkNCiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSgnTGVmdCcsIHZhbHVlLCBjdHJsU2VsW2luZGV4XSkNCiAgICAgICAgfSBlbHNlIGlmIChwcm9wTmFtZSA9PT0gJ3NlbEJvdHRvbScpIHsNCiAgICAgICAgICBjb25zdCBjdXJCb3R0b20gPSBjdXJQcm9wLkhlaWdodCEgKyBjdXJQcm9wLlRvcCENCiAgICAgICAgICBjb25zdCB2YWx1ZSA9IGN1clByb3AuVG9wISArIChwcm9wVmFsdWUgLSBjdXJCb3R0b20pDQogICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkoJ1RvcCcsIHZhbHVlLCBjdHJsU2VsW2luZGV4XSkNCiAgICAgICAgfQ0KICAgICAgICBpZiAocHJvcE5hbWUgPT09ICdzZWxDZW50ZXInKSB7DQogICAgICAgICAgY29uc3QgY3VyQ2VudGVyID0gY3VyUHJvcC5XaWR0aCEgLyAyDQogICAgICAgICAgY29uc3QgdmFsdWUgPSBwcm9wVmFsdWUgLSBjdXJDZW50ZXINCiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSgnTGVmdCcsIHZhbHVlLCBjdHJsU2VsW2luZGV4XSkNCiAgICAgICAgfQ0KICAgICAgICBpZiAocHJvcE5hbWUgPT09ICdzZWxNaWRkbGUnKSB7DQogICAgICAgICAgY29uc3QgY3VyTWlkZGxlID0gY3VyUHJvcC5IZWlnaHQhIC8gMg0KICAgICAgICAgIGNvbnN0IHZhbHVlID0gcHJvcFZhbHVlIC0gY3VyTWlkZGxlDQogICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkoJ1RvcCcsIHZhbHVlLCBjdHJsU2VsW2luZGV4XSkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBjb25zdCBwcm9wZXJ0eW5hbWU6IGtleW9mIGNvbnRyb2xQcm9wZXJ0aWVzID0gcHJvcE5hbWUgYXMga2V5b2YgY29udHJvbFByb3BlcnRpZXMNCiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eShwcm9wZXJ0eW5hbWUsIHByb3BWYWx1ZSwgY3RybFNlbFtpbmRleF0pDQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGNvbnN0IGdyb3VwSW5kZXg6IG51bWJlciA9IHRoaXMuZ3JvdXBTdHlsZUFycmF5LmZpbmRJbmRleCh2YWwgPT4gdmFsLmdyb3VwTmFtZSA9PT0gY3RybFNlbFtpbmRleF0pDQogICAgICAgIGNvbnN0IGN1clByb3AgPSB0aGlzLmdyb3VwU3R5bGVBcnJheVtncm91cEluZGV4XQ0KICAgICAgICBjb25zdCBsZWZ0ID0gcGFyc2VJbnQoY3VyUHJvcC5sZWZ0ISkNCiAgICAgICAgY29uc3QgdG9wID0gcGFyc2VJbnQoY3VyUHJvcC50b3AhKQ0KICAgICAgICBjb25zdCB3aWR0aCA9IHBhcnNlSW50KGN1clByb3Aud2lkdGghKQ0KICAgICAgICBjb25zdCBoZWlnaHQgPSBwYXJzZUludChjdXJQcm9wLmhlaWdodCEpDQogICAgICAgIGxldCB2YWx1ZSA9IC0xDQogICAgICAgIGlmIChwcm9wTmFtZSA9PT0gJ3NlbFJpZ2h0Jykgew0KICAgICAgICAgIHZhbHVlID0gbGVmdCEgKyAocHJvcFZhbHVlIC0gKHdpZHRoISArIGxlZnQhKSkNCiAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgndXBkYXN0ZUdyb3VwU2l6ZScsICdMZWZ0JywgdmFsdWUsIGdyb3VwSW5kZXgpDQogICAgICAgIH0gZWxzZSBpZiAocHJvcE5hbWUgPT09ICdzZWxCb3R0b20nKSB7DQogICAgICAgICAgdmFsdWUgPSB0b3AhICsgKHByb3BWYWx1ZSAtIChoZWlnaHQgKyB0b3ApKQ0KICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCd1cGRhc3RlR3JvdXBTaXplJywgJ1RvcCcsIHZhbHVlLCBncm91cEluZGV4KQ0KICAgICAgICB9DQogICAgICAgIGlmIChwcm9wTmFtZSA9PT0gJ3NlbENlbnRlcicpIHsNCiAgICAgICAgICB2YWx1ZSA9IHByb3BWYWx1ZSAtICh3aWR0aCEgLyAyKQ0KICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCd1cGRhc3RlR3JvdXBTaXplJywgJ0xlZnQnLCB2YWx1ZSwgZ3JvdXBJbmRleCkNCiAgICAgICAgfQ0KICAgICAgICBpZiAocHJvcE5hbWUgPT09ICdzZWxNaWRkbGUnKSB7DQogICAgICAgICAgdmFsdWUgPSBwcm9wVmFsdWUgLSBoZWlnaHQhIC8gMg0KICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCd1cGRhc3RlR3JvdXBTaXplJywgJ1RvcCcsIHZhbHVlLCBncm91cEluZGV4KQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGNvbnN0IHByb3BlcnR5bmFtZToga2V5b2YgY29udHJvbFByb3BlcnRpZXMgPSBwcm9wTmFtZSBhcyBrZXlvZiBjb250cm9sUHJvcGVydGllcw0KICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCd1cGRhc3RlR3JvdXBTaXplJywgcHJvcGVydHluYW1lLCBwcm9wVmFsdWUsIGdyb3VwSW5kZXgpDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogIH0NCiAgY29udmVydFRvR3JpZFNpemUgKHZhbDogbnVtYmVyKSB7DQogICAgY29uc3QgZ3JpZFNpemUgPSA5DQogICAgcmV0dXJuIE1hdGgucm91bmQodmFsIC8gZ3JpZFNpemUpICogZ3JpZFNpemUNCiAgfQ0KICBjb250cm9sQWxpZ25NZW50IChzdWJWYWw6IHN0cmluZykgew0KICAgIGNvbnN0IG1haW5TZWwgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5zZWxlY3RlZFswXQ0KICAgIGNvbnN0IGlzR3JvdXAgPSBtYWluU2VsLnN0YXJ0c1dpdGgoJ2dyb3VwJykNCiAgICBjb25zdCB1c3JGcm1EYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXQ0KICAgIGNvbnN0IGN0cmxQcm9wID0gIWlzR3JvdXAgJiYgdXNyRnJtRGF0YVttYWluU2VsXS5wcm9wZXJ0aWVzDQogICAgY29uc3QgZ3JvdXBJbmRleDogbnVtYmVyID0gdGhpcy5ncm91cFN0eWxlQXJyYXkuZmluZEluZGV4KHZhbCA9PiB2YWwuZ3JvdXBOYW1lID09PSBtYWluU2VsKQ0KICAgIGNvbnN0IG5ld09iamVjdCA9IHsNCiAgICAgIExlZnQ6IGlzR3JvdXAgJiYgZ3JvdXBJbmRleCAhPT0gLTEgPyBwYXJzZUludCh0aGlzLmdyb3VwU3R5bGVBcnJheVtncm91cEluZGV4XS5sZWZ0ISkgOiBjdHJsUHJvcCA/IGN0cmxQcm9wLkxlZnQhIDogMCwNCiAgICAgIFRvcDogaXNHcm91cCAmJiBncm91cEluZGV4ICE9PSAtMSA/IHBhcnNlSW50KHRoaXMuZ3JvdXBTdHlsZUFycmF5W2dyb3VwSW5kZXhdLnRvcCEpIDogY3RybFByb3AgPyBjdHJsUHJvcC5Ub3AhIDogMCwNCiAgICAgIFdpZHRoOiBpc0dyb3VwICYmIGdyb3VwSW5kZXggIT09IC0xID8gcGFyc2VJbnQodGhpcy5ncm91cFN0eWxlQXJyYXlbZ3JvdXBJbmRleF0ud2lkdGghKSA6IGN0cmxQcm9wID8gY3RybFByb3AuV2lkdGghIDogMCwNCiAgICAgIEhlaWdodDogaXNHcm91cCAmJiBncm91cEluZGV4ICE9PSAtMSA/IHBhcnNlSW50KHRoaXMuZ3JvdXBTdHlsZUFycmF5W2dyb3VwSW5kZXhdLmhlaWdodCEpIDogY3RybFByb3AgPyBjdHJsUHJvcC5IZWlnaHQhIDogMA0KICAgIH0NCiAgICBpZiAoc3ViVmFsID09PSAnSURfQUxJR05MRUZUJykgew0KICAgICAgdGhpcy51cGRhdGVQcm9wVmFsKCdMZWZ0JywgbmV3T2JqZWN0LkxlZnQhKQ0KICAgIH0gZWxzZSBpZiAoc3ViVmFsID09PSAnSURfQUxJR05UT1AnKSB7DQogICAgICB0aGlzLnVwZGF0ZVByb3BWYWwoJ1RvcCcsIG5ld09iamVjdC5Ub3AhKQ0KICAgIH0gZWxzZSBpZiAoc3ViVmFsID09PSAnSURfQUxJR05SSUdIVCcpIHsNCiAgICAgIGNvbnN0IHNlbFJpZ2h0ID0gbmV3T2JqZWN0LldpZHRoISArIG5ld09iamVjdC5MZWZ0IQ0KICAgICAgdGhpcy51cGRhdGVQcm9wVmFsKCdzZWxSaWdodCcsIHNlbFJpZ2h0KQ0KICAgIH0gZWxzZSBpZiAoc3ViVmFsID09PSAnSURfQUxJR05CT1RUT00nKSB7DQogICAgICBjb25zdCBzZWxCb3R0b20gPSBuZXdPYmplY3QuSGVpZ2h0ISArIG5ld09iamVjdC5Ub3AhDQogICAgICB0aGlzLnVwZGF0ZVByb3BWYWwoJ3NlbEJvdHRvbScsIHNlbEJvdHRvbSkNCiAgICB9IGVsc2UgaWYgKHN1YlZhbCA9PT0gJ0lEX0FMSUdOQ0VOVEVSJykgew0KICAgICAgY29uc3Qgc2VsQ2VudGVyID0gbmV3T2JqZWN0LkxlZnQhICsgbmV3T2JqZWN0LldpZHRoISAvIDINCiAgICAgIHRoaXMudXBkYXRlUHJvcFZhbCgnc2VsQ2VudGVyJywgc2VsQ2VudGVyKQ0KICAgIH0gZWxzZSBpZiAoc3ViVmFsID09PSAnSURfQUxJR05NSURETEUnKSB7DQogICAgICBjb25zdCBzZWxNaWRkbGUgPSBuZXdPYmplY3QuVG9wISArIG5ld09iamVjdC5IZWlnaHQhIC8gMg0KICAgICAgdGhpcy51cGRhdGVQcm9wVmFsKCdzZWxNaWRkbGUnLCBzZWxNaWRkbGUpDQogICAgfSBlbHNlIGlmIChzdWJWYWwgPT09ICdJRF9XSURUSCcpIHsNCiAgICAgIHRoaXMudXBkYXRlUHJvcFZhbCgnV2lkdGgnLCBuZXdPYmplY3QuV2lkdGghKQ0KICAgIH0gZWxzZSBpZiAoc3ViVmFsID09PSAnSURfSEVJR0hUJykgew0KICAgICAgdGhpcy51cGRhdGVQcm9wVmFsKCdIZWlnaHQnLCBuZXdPYmplY3QuSGVpZ2h0ISkNCiAgICB9IGVsc2UgaWYgKHN1YlZhbCA9PT0gJ0lEX0JPVEgnKSB7DQogICAgICB0aGlzLnVwZGF0ZVByb3BWYWwoJ0hlaWdodCcsIG5ld09iamVjdC5IZWlnaHQhKQ0KICAgICAgdGhpcy51cGRhdGVQcm9wVmFsKCdXaWR0aCcsIG5ld09iamVjdC5XaWR0aCEpDQogICAgfSBlbHNlIGlmIChzdWJWYWwgPT09ICdJRF9HUklEJykgew0KICAgICAgY29uc3QgY3RybFNlbCA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkDQogICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgY3RybFNlbC5sZW5ndGg7IGluZGV4KyspIHsNCiAgICAgICAgaWYgKCFjdHJsU2VsW2luZGV4XS5zdGFydHNXaXRoKCdncm91cCcpKSB7DQogICAgICAgICAgY29uc3QgY3VyUHJvcCA9IHVzckZybURhdGFbY3RybFNlbFtpbmRleF1dLnByb3BlcnRpZXMNCiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSgnTGVmdCcsIHRoaXMuY29udmVydFRvR3JpZFNpemUoY3VyUHJvcC5MZWZ0ISksIGN0cmxTZWxbaW5kZXhdKQ0KICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KCdUb3AnLCB0aGlzLmNvbnZlcnRUb0dyaWRTaXplKGN1clByb3AuVG9wISksIGN0cmxTZWxbaW5kZXhdKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGNvbnN0IGdyb3VwSW5kZXg6IG51bWJlciA9IHRoaXMuZ3JvdXBTdHlsZUFycmF5LmZpbmRJbmRleCh2YWwgPT4gdmFsLmdyb3VwTmFtZSA9PT0gY3RybFNlbFtpbmRleF0pDQogICAgICAgICAgY29uc3QgY3VyUHJvcCA9IHRoaXMuZ3JvdXBTdHlsZUFycmF5W2dyb3VwSW5kZXhdDQogICAgICAgICAgY29uc3QgbGVmdCA9IHBhcnNlSW50KGN1clByb3AubGVmdCEpDQogICAgICAgICAgY29uc3QgdG9wID0gcGFyc2VJbnQoY3VyUHJvcC50b3AhKQ0KICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KCd1cGRhc3RlR3JvdXBTaXplJywgJ1RvcCcsIHRoaXMuY29udmVydFRvR3JpZFNpemUodG9wKSwgZ3JvdXBJbmRleCkNCiAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgndXBkYXN0ZUdyb3VwU2l6ZScsICdMZWZ0JywgdGhpcy5jb252ZXJ0VG9HcmlkU2l6ZShsZWZ0KSwgZ3JvdXBJbmRleCkNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfQ0KDQogIGNvbnRyb2xEaXNhYmxlIChldmVudDogTW91c2VFdmVudCkgew0KICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCkNCiAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKQ0KICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8EA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/FormDesigner/components/atoms/FDContextMenu","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"outercontext-div\">\r\n      <div class=\"wrapper-context\" v-for=\"(value, i) in values\" :key=\"i\">\r\n        <button\r\n          class=\"wrapper1-context\"\r\n          v-if=\"value.values.length === 0\"\r\n          :style=\"{\r\n            border: value.text === 'none' ? '0.3px solid white' : '',\r\n            background: value.text === 'none' ? 'white' : '',\r\n            height: value.text === 'none' ? '4px' : '',\r\n            'padding-top': value.text === 'none' ? '0px' : '',\r\n            outline: value.text === 'none' ? 'none' : '',\r\n          }\"\r\n          @mousedown.stop=\"value.disabled === false ? controlAction($event,value.id) : controlDisable($event)\"\r\n        >\r\n          <div>\r\n            <FDSVGImage v-if=\"value.icon\" :name=\"value.icon\" />\r\n          </div>\r\n          <span v-if=\"value.text === 'none'\">\r\n            <hr />\r\n          </span>\r\n          <span\r\n            v-else\r\n            class=\"set-context\"\r\n            v-html=\"value.text\"\r\n            :style=\"{ opacity: value.disabled ? 0.5 : 1 }\"\r\n            >{{ value.text }}\r\n          </span>\r\n        </button>\r\n        <button class=\"wrapper1-context wrapper21\" v-else>\r\n          <div></div>\r\n          <ul class=\"set-context top-level-menu\">\r\n            <li>\r\n              <a href=\"#\" v-html=\"value.text\"  @mousedown.prevent.stop>{{ value.text }}</a>\r\n              <ul class=\"third-level-menu\">\r\n                <li\r\n                  class=\"wrapper1-context\"\r\n                  v-for=\"(subVal, i) in value.values\"\r\n                  :key=\"i\"\r\n                  :style=\"{\r\n                    border: subVal.text === 'none' ? '0.3px solid white' : '',\r\n                    background: subVal.text === 'none' ? 'white' : '',\r\n                    height: subVal.text === 'none' ? '4px' : '',\r\n                    'padding-top': subVal.text === 'none' ? '0px' : '',\r\n                    outline: subVal.text === 'none' ? 'none' : '',\r\n                  }\"\r\n                  @mousedown.stop=\"subVal.disabled === false ? controlAction($event,value.id, subVal.id): controlDisable($event)\"\r\n                >\r\n                  <div>\r\n                    <FDSVGImage v-if=\"subVal.icon\" :name=\"subVal.icon\" />\r\n                  </div>\r\n                  <a v-if=\"subVal.text === 'none'\">\r\n                    <hr />\r\n                  </a>\r\n                  <a\r\n                    v-else\r\n                    href=\"#\"\r\n                    v-html=\"subVal.text\"\r\n                    :style=\"{ opacity: subVal.disabled ? 0.5 : 1 }\"\r\n                    >{{ subVal.text }}</a\r\n                  >\r\n                </li>\r\n              </ul>\r\n            </li>\r\n          </ul>\r\n          <div style=\"margin-top: 2px;\">\r\n          <div class=\"triangle-right\"></div>\r\n          </div>\r\n        </button>\r\n      </div>\r\n    </div>\r\n    <div></div>\r\n    <div></div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Vue, Prop, Emit } from 'vue-property-decorator'\r\nimport FDSVGImage from '@/FormDesigner/components/atoms/FDSVGImage/index.vue'\r\nimport { ControlPropertyData } from '@/FormDesigner/models/ControlsTableProperties/ControlPropertyData.ts'\r\n\r\nimport { Action, State } from 'vuex-class'\r\nimport {\r\n  IaddChildControls,\r\n  IaddControl,\r\n  IdeleteControl,\r\n  IselectControl,\r\n  IsetChildControls,\r\n  IupdateControl,\r\n  IupdateControlExtraData,\r\n  IupdateCopyControlList,\r\n  IupdateGroup\r\n} from '@/storeModules/fd/actions'\r\nimport { EventBus } from '@/FormDesigner/event-bus'\r\nimport FDCommonMethod from '@/api/abstract/FormDesigner/FDCommonMethod'\r\n\r\n@Component({\r\n  name: 'ContextMenu',\r\n  components: {\r\n    FDSVGImage\r\n  }\r\n})\r\nexport default class ContextMenu extends FDCommonMethod {\r\n  @Prop() values: Array<IControlContextMenu>;\r\n  @Prop() userFormId: string;\r\n  @Prop() containerId: string;\r\n  @Prop() keyEventName: string;\r\n  @Prop() controlId: string;\r\n  @Prop() selectedTab: number;\r\n  @Prop() data: controlData;\r\n  @Prop() groupStyleArray: Array<IGroupStyle>\r\n  @Prop() contextMenutype: string\r\n  @Prop() editTextRef: HTMLSpanElement | HTMLTextAreaElement\r\n  @Prop() copiedText: string\r\n  @Prop() textMenu: boolean\r\n\r\n  @State((state) => state.fd.selectedControls)\r\n  selectedControls!: fdState['selectedControls'];\r\n  @State((state: rootState) => state.fd.copyControlList)\r\n  copyControlList!: fdState['copyControlList'];\r\n  @State((state) => state.fd.userformData) userformData!: userformData;\r\n  @State((state) => state.fd.copiedControl) copiedControl!: userformData;\r\n  @State((state) => state.fd.groupedControls)\r\n  groupedControls!: fdState['groupedControls'];\r\n\r\n  @Action('fd/deleteControl') deleteControl!: (payload: IdeleteControl) => void;\r\n  @Action('fd/deleteCopiedControl') deleteCopiedControl!: (payload: IdeleteControl) => void;\r\n  @Action('fd/updateCopyControlList') updateCopyControlList!: (\r\n    payload: IupdateCopyControlList\r\n  ) => void;\r\n  @Action('fd/addControl') addControl!: (payload: IaddControl) => void;\r\n  @Action('fd/addCopiedControl') addCopiedControl!: (\r\n    payload: IaddControl\r\n  ) => void;\r\n  @Action('fd/selectControl') selectControl!: (payload: IselectControl) => void;\r\n  @Action('fd/updateGroup') updateGroup!: (payload: IupdateGroup) => void;\r\n  @Action('fd/updateControlExtraData') updateControlExtraData!: (\r\n    payload: IupdateControlExtraData\r\n  ) => void;\r\n  @Action('fd/updateControl') updateControl!: (payload: IupdateControl) => void;\r\n  @Action('fd/setChildControls') setChildControls!: (\r\n    payload: IsetChildControls\r\n  ) => void;\r\n  @Action('fd/addChildControls') addChildControls!: (\r\n    payload: IaddChildControls\r\n  ) => void;\r\n  controlAction (event: Event, controlActionName: string, subVal: string) {\r\n    if (this.textMenu === false) {\r\n      if (controlActionName === 'ID_COPY') {\r\n        this.copyControl('copy')\r\n      } else if (controlActionName === 'ID_DELETE') {\r\n        this.clickDelete()\r\n      } else if (controlActionName === 'ID_PASTE') {\r\n        this.pasteControl()\r\n      } else if (controlActionName === 'ID_CUT') {\r\n        this.cutControl()\r\n      } else if (controlActionName === 'ID_SELECTALL') {\r\n        this.selectAll()\r\n      } else if (controlActionName === 'ID_GROUP') {\r\n        this.groupControl()\r\n      } else if (controlActionName === 'ID_UNGROUP') {\r\n        this.unGroupControl()\r\n      } else if (controlActionName === 'ID_NEWPAGE') {\r\n        this.addNewPage()\r\n      } else if (controlActionName === 'ID_DELETEPAGE') {\r\n        this.deleteCurrentPage()\r\n      } else if (controlActionName === 'ID_CONTROLFORWARD') {\r\n        this.bringForward()\r\n      } else if (controlActionName === 'ID_CONTROLBACKWARD') {\r\n        this.bringBackward()\r\n      } else if (controlActionName === 'ID_OBJECTPROP') {\r\n        this.displayProp()\r\n      } else if (controlActionName === 'ID_RENAME') {\r\n        const selectedPageID = this.selectedControls[this.userFormId].selected[0]\r\n        EventBus.$emit(\r\n          'renamePage',\r\n          this.userFormId,\r\n          selectedPageID,\r\n          this.selectedTab,\r\n          this.userformData[this.userFormId][selectedPageID].type\r\n        )\r\n      } else if (controlActionName === 'ID_MOVE') {\r\n        const type = this.userformData[this.userFormId][this.controlId].type\r\n        if (type === 'MultiPage') {\r\n          EventBus.$emit('userFormTabOrder', this.userFormId, this.controlId, type)\r\n        } else {\r\n          EventBus.$emit('tabStripTabOrder', this.userFormId, this.controlId, type)\r\n        }\r\n      } else if (controlActionName === 'ID_TABORDER') {\r\n        EventBus.$emit('userFormTabOrder', this.userFormId, this.containerId, '')\r\n      } else if (\r\n        controlActionName === 'ID_ALIGN' ||\r\n      controlActionName === 'ID_MAKESAMESIZE'\r\n      ) {\r\n        this.controlAlignMent(subVal)\r\n      }\r\n    } else {\r\n      if (controlActionName === 'ID_COPY') {\r\n        this.copyText()\r\n      } else if (controlActionName === 'ID_DELETE') {\r\n        this.deleteText()\r\n      } else if (controlActionName === 'ID_PASTE') {\r\n        if (event instanceof MouseEvent) {\r\n          this.pasteText(event)\r\n        }\r\n      } else if (controlActionName === 'ID_CUT') {\r\n        this.cutText()\r\n      } else if (controlActionName === 'ID_OBJECTPROP') {\r\n        this.displayProp()\r\n      }\r\n    }\r\n    this.closeMenu()\r\n  }\r\n  cutText () {\r\n    document.execCommand('cut')\r\n  }\r\n  deleteText () {\r\n    document.execCommand('delete')\r\n  }\r\n  copyText () {\r\n    document.execCommand('copy')\r\n  }\r\n  pasteText (event: MouseEvent) {\r\n    const controlType = this.userformData[this.userFormId][this.controlId].type\r\n    const position = this.getCursorPos(event)\r\n    const length = position.endPosition - position.startPosition\r\n    let baseValue = this.editTextRef.innerHTML.split('')\r\n    baseValue.splice(position.startPosition, length)\r\n    const updateValue = baseValue.slice(0, position.startPosition).join('') + this.copiedText + baseValue.slice(position.startPosition).join('')\r\n    EventBus.$emit('updateText', updateValue)\r\n  }\r\n  getCursorPos (event: MouseEvent) {\r\n    let startPosition = 0\r\n    let endPosition = 0\r\n    const isSupported = typeof window.getSelection !== 'undefined'\r\n    if (isSupported) {\r\n      const selection = window.getSelection()!\r\n      if (selection.anchorOffset > selection.focusOffset) {\r\n        startPosition = selection.focusOffset\r\n        endPosition = selection.anchorOffset\r\n      } else if (selection.anchorOffset === selection.focusOffset) {\r\n        startPosition = selection.focusOffset\r\n        endPosition = selection.focusOffset\r\n      } else {\r\n        startPosition = selection.anchorOffset\r\n        endPosition = selection.focusOffset\r\n      }\r\n    }\r\n    return { startPosition: startPosition, endPosition: endPosition }\r\n  }\r\n  created () {\r\n    EventBus.$on('groupControl', (value: string) => {\r\n      if (this.selectedControls[this.userFormId].container[0] === this.containerId) {\r\n        if (value === 'group') {\r\n          this.groupControl()\r\n        } else if (value === 'ungroup') {\r\n          this.unGroupControl()\r\n        }\r\n      }\r\n    })\r\n  }\r\n  destroyed () {\r\n    EventBus.$off('groupControl')\r\n  }\r\n  @Emit('closeMenu')\r\n  closeMenu () {\r\n    return 0\r\n  }\r\n\r\n  displayProp () {\r\n    EventBus.$emit('dispProp', false)\r\n  }\r\n  createPageName (pageList: string[]) {\r\n    let lastControlId = 0\r\n    for (let i of pageList) {\r\n      if (i.indexOf('Page') !== -1) {\r\n        const IdNum = i.split('Page').pop() || '-1'\r\n        const pasreId = parseInt(IdNum, 10)\r\n        if (!isNaN(pasreId) && lastControlId < pasreId) {\r\n          lastControlId = pasreId\r\n        }\r\n      }\r\n    }\r\n    return lastControlId + 1\r\n  }\r\n  getPageCount (container: string) {\r\n    const pageList: string[] = []\r\n    for (const pageId of this.userformData[this.userFormId][container].controls) {\r\n      pageList.push(this.userformData[this.userFormId][pageId].properties.Name!)\r\n    }\r\n    const name = this.createPageName(pageList)\r\n    return name\r\n  }\r\n\r\n  addNewPage () {\r\n    const type = this.userformData[this.userFormId][this.controlId].type\r\n    if (type === 'TabStrip') {\r\n      const tabControlData = JSON.parse(\r\n        JSON.stringify(this.userformData[this.userFormId][this.controlId])\r\n      ).extraDatas.Tabs\r\n      let prevTabId = -1\r\n      const initialTabData: tabsItems = {\r\n        Name: '',\r\n        Caption: '',\r\n        ToolTip: '',\r\n        Accelerator: ''\r\n      }\r\n      if (tabControlData.length > 0) {\r\n        for (let i = 0; i < tabControlData.length; i++) {\r\n          const id = tabControlData[i].Name.split('Tab').pop() || '-1'\r\n          const parseId = parseInt(id, 10)\r\n          if (!isNaN(parseId) && prevTabId < parseId) {\r\n            prevTabId = parseId\r\n          }\r\n        }\r\n        prevTabId += 1\r\n        initialTabData.Name = `Tab${prevTabId}`\r\n        initialTabData.Caption = `Tab${prevTabId}`\r\n      } else {\r\n        initialTabData.Name = `Tab${1}`\r\n        initialTabData.Caption = `Tab${1}`\r\n      }\r\n      tabControlData.push(initialTabData)\r\n      this.updateControlExtraData({\r\n        userFormId: this.userFormId,\r\n        controlId: this.controlId,\r\n        propertyName: 'Tabs',\r\n        value: tabControlData\r\n      })\r\n      this.updateControl({\r\n        userFormId: this.userFormId,\r\n        controlId: this.controlId,\r\n        propertyName: 'Value',\r\n        value: prevTabId - 1\r\n      })\r\n    } else if (type === 'MultiPage') {\r\n      const parentId = this.controlId.split('MultiPage').pop()\r\n      const controlName = `Page${parentId}_`\r\n\r\n      let lastControlId = 0\r\n      const userformControlIds = Object.keys(this.userformData[this.userFormId])\r\n      for (let i = 0; i < userformControlIds.length; i++) {\r\n        if (userformControlIds[i].indexOf(controlName) !== -1) {\r\n          const IdNum =\r\n          userformControlIds[i].split(controlName).pop() || '-1'\r\n          const pasreId = parseInt(IdNum, 10)\r\n          if (!isNaN(pasreId) && lastControlId < pasreId) {\r\n            lastControlId = pasreId\r\n          }\r\n        }\r\n      }\r\n      const controlPropData = new ControlPropertyData()\r\n      let controlObj = controlPropData.data['Page']\r\n      const item = JSON.parse(JSON.stringify(controlObj!))\r\n      lastControlId += 1\r\n      item.properties.ID = `ID_${controlName}${lastControlId}`\r\n      const count = this.getPageCount(this.controlId)\r\n      item.properties.Caption = `Page${count}`\r\n      item.properties.Name = `Page${count}`\r\n      item.properties.Index = this.userformData[this.userFormId][this.controlId].controls.length\r\n      this.addControl({\r\n        userFormId: this.userFormId,\r\n        controlId: this.controlId,\r\n        addId: item.properties.ID,\r\n        item: item\r\n      })\r\n      this.updateControl({\r\n        userFormId: this.userFormId,\r\n        controlId: this.controlId,\r\n        propertyName: 'Value',\r\n        value: item.properties.Index\r\n      })\r\n      this.selectControl({\r\n        userFormId: this.userFormId,\r\n        select: {\r\n          container: this.getContainerList(item.properties.ID),\r\n          selected: [item.properties.ID]\r\n        }\r\n      })\r\n      EventBus.$emit('updateMultiPageValue')\r\n    }\r\n  }\r\n  bringForward () {\r\n    const userData = this.userformData[this.userFormId]\r\n    const highProrControl = []\r\n    const lowProrControl = []\r\n    const container = this.getContainerList(this.getSelectedControlsDatas![0])[0]\r\n    const containerControls = this.userformData[this.userFormId][container].controls\r\n    for (const index in containerControls) {\r\n      const cntrlData = this.userformData[this.userFormId][containerControls[index]]\r\n      if (cntrlData.type === 'MultiPage' || cntrlData.type === 'Frame' || cntrlData.type === 'ListBox') {\r\n        highProrControl.push(containerControls[index])\r\n      } else {\r\n        lowProrControl.push(containerControls[index])\r\n      }\r\n    }\r\n    let nextSelctedSeries: string[] = []\r\n    let nextHighControlSeries: string[] = []\r\n    const getSelControl = [...this.getSelectedControlsDatas!]\r\n    getSelControl.sort((a, b) => {\r\n      return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\r\n    })\r\n    for (const selControl of getSelControl!) {\r\n      const type = userData[selControl].type\r\n      const tempZIndex = userData[selControl].extraDatas!.zIndex!\r\n      const controlIndex = Object.keys(userData).findIndex((val: string, index: number) => {\r\n        return 'zIndex' in userData[val].extraDatas! && (userData[val].extraDatas!.zIndex === tempZIndex + 1)\r\n      })\r\n      const nextSelectedControl = controlIndex !== -1 ? Object.keys(userData)[controlIndex] : ''\r\n      const nextControlType = userData[nextSelectedControl].type\r\n      if (nextSelectedControl !== '' && !highProrControl.includes(nextSelectedControl)) {\r\n        if (getSelControl!.includes(nextSelectedControl)) {\r\n          if (!nextSelctedSeries.includes(selControl)) {\r\n            nextSelctedSeries.push(selControl)\r\n          }\r\n          if (!nextSelctedSeries.includes(nextSelectedControl)) {\r\n            nextSelctedSeries.push(nextSelectedControl)\r\n          }\r\n        } else {\r\n          if (Object.keys(nextSelctedSeries).length !== 0) {\r\n            const tempExchageIndex = userData[nextSelctedSeries[0]].extraDatas!.zIndex!\r\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\r\n            if (swapTabIndex <= userData[container].controls.length /* && swapTabIndex > 0 */) {\r\n              const index = userData[container].controls.findIndex(\r\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\r\n              )\r\n              this.updateExtraDatas(userData[container].controls[index], 'zIndex', tempExchageIndex)\r\n              this.updateExtraDatas(nextSelctedSeries[0], 'zIndex', swapTabIndex - (nextSelctedSeries!.length - 1))\r\n            }\r\n            for (let j = 1; j < nextSelctedSeries.length; j++) {\r\n              const updateIndex = userData[nextSelctedSeries[j]].extraDatas!.zIndex! + 1\r\n              this.updateExtraDatas(nextSelctedSeries[j], 'zIndex', updateIndex)\r\n            }\r\n            nextSelctedSeries = []\r\n          } else {\r\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\r\n            if (swapTabIndex <= userData[container].controls.length /* && swapTabIndex > 0 */) {\r\n              const index = userData[container].controls.findIndex(\r\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\r\n              )\r\n              this.updateExtraDatas(selControl, 'zIndex', swapTabIndex)\r\n              this.updateExtraDatas(nextSelectedControl, 'zIndex', tempZIndex)\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        if (getSelControl!.includes(nextSelectedControl) && (type === 'Frame' || type === 'MultiPage' || type === 'ListBox')) {\r\n          if (!nextHighControlSeries.includes(selControl)) {\r\n            nextHighControlSeries.push(selControl)\r\n          }\r\n          if (!nextHighControlSeries.includes(nextSelectedControl)) {\r\n            nextHighControlSeries.push(nextSelectedControl)\r\n          }\r\n        } else if (type === 'Frame' || type === 'MultiPage' || type === 'ListBox') {\r\n          if (Object.keys(nextHighControlSeries).length !== 0) {\r\n            const tempExchageIndex = userData[nextHighControlSeries[0]].extraDatas!.zIndex!\r\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\r\n            if (swapTabIndex <= userData[container].controls.length) {\r\n              const index = userData[container].controls.findIndex(\r\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\r\n              )\r\n              this.updateExtraDatas(userData[container].controls[index], 'zIndex', tempExchageIndex)\r\n              this.updateExtraDatas(nextHighControlSeries[0], 'zIndex', swapTabIndex - (nextHighControlSeries!.length - 1))\r\n            }\r\n            for (let j = 1; j < nextHighControlSeries.length; j++) {\r\n              const updateIndex = userData[nextHighControlSeries[j]].extraDatas!.zIndex! + 1\r\n              this.updateExtraDatas(nextHighControlSeries[j], 'zIndex', updateIndex)\r\n            }\r\n            nextHighControlSeries = []\r\n          } else {\r\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\r\n            if (swapTabIndex <= userData[container].controls.length /* && swapTabIndex > 0 */) {\r\n              const index = userData[container].controls.findIndex(\r\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\r\n              )\r\n              this.updateExtraDatas(selControl, 'zIndex', swapTabIndex)\r\n              this.updateExtraDatas(nextSelectedControl, 'zIndex', tempZIndex)\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  bringBackward () {\r\n    const userData = this.userformData[this.userFormId]\r\n    const highProrControl = []\r\n    const lowProrControl = []\r\n    const container = this.getContainerList(this.getSelectedControlsDatas![0])[0]\r\n    const containerControls = this.userformData[this.userFormId][container].controls\r\n    for (const index in containerControls) {\r\n      const cntrlData = this.userformData[this.userFormId][containerControls[index]]\r\n      if (cntrlData.type === 'MultiPage' || cntrlData.type === 'Frame' || cntrlData.type === 'ListBox') {\r\n        highProrControl.push(containerControls[index])\r\n      } else {\r\n        lowProrControl.push(containerControls[index])\r\n      }\r\n    }\r\n    let nextSelctedSeries: string[] = []\r\n    let nextHighControlSeries: string[] = []\r\n    const getSelControl = [...this.getSelectedControlsDatas!]\r\n    getSelControl.sort((a, b) => {\r\n      return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\r\n    })\r\n    for (const selControl of getSelControl) {\r\n      const type = userData[selControl].type\r\n      const tempZIndex = userData[selControl].extraDatas!.zIndex!\r\n      const controlIndex = Object.keys(userData).findIndex((val: string, index: number) => {\r\n        return 'zIndex' in userData[val].extraDatas! && (userData[val].extraDatas!.zIndex === tempZIndex - 1)\r\n      })\r\n      const nextSelectedControl = controlIndex !== -1 ? Object.keys(userData)[controlIndex] : ''\r\n      // const nextControlType = userData[nextSelectedControl].type\r\n      if (nextSelectedControl !== '' && !highProrControl.includes(selControl)) {\r\n        if (getSelControl!.includes(nextSelectedControl)) {\r\n          if (!nextSelctedSeries.includes(selControl)) {\r\n            nextSelctedSeries.push(selControl)\r\n          }\r\n          if (!nextSelctedSeries.includes(nextSelectedControl)) {\r\n            nextSelctedSeries.push(nextSelectedControl)\r\n          }\r\n        } else {\r\n          if (Object.keys(nextSelctedSeries).length !== 0) {\r\n            const tempExchageIndex = userData[nextSelctedSeries[0]].extraDatas!.zIndex!\r\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\r\n            if (swapTabIndex <= userData[container].controls.length && swapTabIndex > 0) {\r\n              const index = userData[container].controls.findIndex(\r\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\r\n              )\r\n              this.updateExtraDatas(userData[container].controls[index], 'zIndex', tempExchageIndex)\r\n              this.updateExtraDatas(nextSelctedSeries[0], 'zIndex', (nextSelctedSeries!.length + 1) - swapTabIndex)\r\n            }\r\n            for (let j = 1; j < nextSelctedSeries.length; j++) {\r\n              const updateIndex = userData[nextSelctedSeries[j]].extraDatas!.zIndex! - 1\r\n              this.updateExtraDatas(nextSelctedSeries[j], 'zIndex', updateIndex)\r\n            }\r\n            nextSelctedSeries = []\r\n          } else {\r\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\r\n            if (swapTabIndex <= userData[container].controls.length && swapTabIndex > 0) {\r\n              const index = userData[container].controls.findIndex(\r\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\r\n              )\r\n              this.updateExtraDatas(selControl, 'zIndex', swapTabIndex)\r\n              this.updateExtraDatas(nextSelectedControl, 'zIndex', tempZIndex)\r\n            }\r\n          }\r\n        }\r\n      } else if (!lowProrControl.includes(nextSelectedControl) && (type === 'Frame' || type === 'MultiPage' || type === 'ListBox')) {\r\n        if (getSelControl!.includes(nextSelectedControl)) {\r\n          if (!nextHighControlSeries.includes(selControl)) {\r\n            nextHighControlSeries.push(selControl)\r\n          }\r\n          if (!nextHighControlSeries.includes(nextSelectedControl)) {\r\n            nextHighControlSeries.push(nextSelectedControl)\r\n          }\r\n        } else {\r\n          if (Object.keys(nextHighControlSeries).length !== 0) {\r\n            const tempExchageIndex = userData[nextHighControlSeries[0]].extraDatas!.zIndex!\r\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\r\n            if (swapTabIndex <= userData[container].controls.length) {\r\n              const index = userData[container].controls.findIndex(\r\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\r\n              )\r\n              this.updateExtraDatas(userData[container].controls[index], 'zIndex', tempExchageIndex)\r\n              this.updateExtraDatas(nextHighControlSeries[0], 'zIndex', (nextHighControlSeries!.length + 1) - swapTabIndex)\r\n            }\r\n            for (let j = 1; j < nextHighControlSeries.length; j++) {\r\n              const updateIndex = userData[nextHighControlSeries[j]].extraDatas!.zIndex! - 1\r\n              this.updateExtraDatas(nextHighControlSeries[j], 'zIndex', updateIndex)\r\n            }\r\n            nextHighControlSeries = []\r\n          } else {\r\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\r\n            if (swapTabIndex <= userData[container].controls.length && swapTabIndex > 0) {\r\n              const index = userData[container].controls.findIndex(\r\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\r\n              )\r\n              this.updateExtraDatas(selControl, 'zIndex', swapTabIndex)\r\n              this.updateExtraDatas(nextSelectedControl, 'zIndex', tempZIndex)\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  deletePageIndex (id: string) {\r\n    const userData = this.userformData[this.userFormId]\r\n    const container = this.selectedControls[this.userFormId].container[0]\r\n    const tempIndex = userData[id].properties!.Index!\r\n    for (const key in userData[container].controls) {\r\n      const controlZIndex = userData[userData[container].controls[key]].properties!.Index!\r\n      if (controlZIndex > tempIndex) {\r\n        this.updateControl({\r\n          userFormId: this.userFormId,\r\n          controlId: userData[container].controls[key],\r\n          propertyName: 'Index',\r\n          value: controlZIndex - 1\r\n        })\r\n      }\r\n    }\r\n  }\r\n  deleteCurrentPage () {\r\n    const type = this.userformData[this.userFormId][this.controlId].type\r\n    if (type === 'TabStrip') {\r\n      const tabControlData = JSON.parse(\r\n        JSON.stringify(this.userformData[this.userFormId][this.controlId])\r\n      ).extraDatas.Tabs\r\n      if (tabControlData && tabControlData.length > 0) {\r\n        tabControlData.splice(this.selectedTab, 1)\r\n        this.updateControlExtraData({\r\n          userFormId: this.userFormId,\r\n          controlId: this.controlId,\r\n          propertyName: 'Tabs',\r\n          value: tabControlData\r\n        })\r\n        this.updateTabStripValue(this.selectedTab! - 1)\r\n      }\r\n    } else if (type === 'MultiPage') {\r\n      const controls = this.userformData[this.userFormId][this.controlId].controls\r\n      if (controls.length > 0) {\r\n        this.deletePageIndex(this.selectedControls[this.userFormId].selected[0])\r\n        const index = this.userformData[this.userFormId][this.selectedControls[this.userFormId].selected[0]].properties.Index\r\n        this.deleteControl({\r\n          userFormId: this.userFormId,\r\n          parentId: this.selectedControls[this.userFormId].container[0],\r\n          targetId: this.selectedControls[this.userFormId].selected[0]\r\n        })\r\n        this.updateIndex(index! - 1)\r\n      }\r\n      EventBus.$emit('updateMultiPageValue')\r\n    }\r\n  }\r\n  updateTabStripValue (index: number) {\r\n    const userData = this.userformData[this.userFormId]\r\n    const tabs = userData[this.controlId].extraDatas!.Tabs!\r\n    const tabIndex = tabs.findIndex((val, key) => key === index + 1)\r\n    if (tabIndex !== -1) {\r\n      const value = index + 1\r\n      this.updateControlProperty('Value', value, this.controlId)\r\n    } else if (tabIndex === -1 && index !== -1) {\r\n      const value = index\r\n      this.updateControlProperty('Value', value, this.controlId)\r\n    } else {\r\n      this.updateControlProperty('Value', -1, this.controlId)\r\n    }\r\n  }\r\n  changeSelect (control: string) {\r\n    this.selectControl({\r\n      userFormId: this.userFormId,\r\n      select: {\r\n        container: this.getContainerList(control),\r\n        selected: [control]\r\n      }\r\n    })\r\n  }\r\n  updateIndex (index: number) {\r\n    const userData = this.userformData[this.userFormId]\r\n    const controls = userData[this.controlId].controls\r\n    const pageIndex = controls.findIndex(val => userData[val].properties.Index === index + 1)\r\n    if (pageIndex !== -1) {\r\n      const value = userData[controls[pageIndex]].properties.Index!\r\n      this.updateControlProperty('Value', value, this.controlId)\r\n      this.changeSelect(controls[pageIndex])\r\n    } else if (pageIndex === -1 && index !== -1) {\r\n      const updateIndex = controls.findIndex(val => userData[val].properties.Index === index)\r\n      const value = userData[controls[updateIndex]].properties.Index!\r\n      this.updateControlProperty('Value', value, this.controlId)\r\n      this.changeSelect(controls[updateIndex])\r\n    } else {\r\n      this.updateControlProperty('Value', -1, this.controlId)\r\n      this.changeSelect(this.controlId)\r\n    }\r\n  }\r\n  updateControlProperty (\r\n    propertyName: keyof controlProperties,\r\n    propertyValue: number | string,\r\n    controlId: string\r\n  ) {\r\n    this.updateControl({\r\n      userFormId: this.userFormId,\r\n      controlId: controlId,\r\n      propertyName: propertyName,\r\n      value: propertyValue\r\n    })\r\n  }\r\n\r\n  unGroupControl () {\r\n    const isGroup = this.selectedControls[this.userFormId].selected[0].startsWith('group')\r\n    const selControl = this.selectedControls[this.userFormId].selected[0]\r\n    const selected = isGroup\r\n      ? selControl\r\n      : this.userformData[this.userFormId][selControl].properties.GroupID!\r\n\r\n    const controlList = []\r\n    for (const key in this.userformData[this.userFormId]) {\r\n      const type = this.userformData[this.userFormId][key].type\r\n      if (\r\n        type !== 'Userform' &&\r\n        this.userformData[this.userFormId][key].properties.GroupID === selected\r\n      ) {\r\n        controlList.push(key)\r\n      }\r\n    }\r\n    const groupArray = [...this.groupedControls[this.userFormId]!.groupArray!]\r\n    this.updateControlGroupID(selected, '')\r\n    const index = this.groupedControls[this.userFormId]!.groupArray!.findIndex(\r\n      (val) => val === selected\r\n    )\r\n    groupArray.splice(index, 1)\r\n    this.updateGroup({ userFormId: this.userFormId, groupArray: groupArray })\r\n    this.selectControl({\r\n      userFormId: this.userFormId,\r\n      select: {\r\n        container: isGroup\r\n          ? this.getContainerList(controlList[0])\r\n          : this.getContainerList(selControl[0]),\r\n        selected: isGroup ? controlList : [selControl]\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * @description To generate new GroupID\r\n   * @function createGroupId\r\n   */\r\n  createGroupId () {\r\n    let lastControlId = 0\r\n    for (let i of this.groupedControls[this.userFormId]!.groupArray!) {\r\n      if (i.indexOf('group') !== -1) {\r\n        const IdNum = i.split('group').pop() || '-1'\r\n        const pasreId = parseInt(IdNum, 10)\r\n        if (!isNaN(pasreId) && lastControlId < pasreId) {\r\n          lastControlId = pasreId\r\n        }\r\n      }\r\n    }\r\n    return `group${lastControlId + 1}`\r\n  }\r\n\r\n  @Emit('createGroup')\r\n  createGroup (groupId: string) {\r\n    return groupId\r\n  }\r\n\r\n  updateControlGroupID (groupName: string, updateGroupId: string) {\r\n    for (const val in this.userformData[this.userFormId]) {\r\n      if (!val.startsWith('ID_USERFORM')) {\r\n        const controlGrpId = this.userformData[this.userFormId][val].properties\r\n          .GroupID\r\n        if (controlGrpId === groupName) {\r\n          this.updateControlProperty('GroupID', updateGroupId, val)\r\n        }\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * @description To update the group Information in main data\r\n   * @function groupControl\r\n   */\r\n  groupControl () {\r\n    let updateGroupId: string = ''\r\n    const selected = this.selectedControls[this.userFormId].selected\r\n\r\n    const selectedGroupArray = selected.filter(\r\n      (val: string) => val.startsWith('group') && val\r\n    )\r\n    updateGroupId = selectedGroupArray[0]\r\n    if (selectedGroupArray.length >= 2) {\r\n      const groupArray = [\r\n        ...this.groupedControls[this.userFormId]!.groupArray!\r\n      ]\r\n      for (let i = 0; i < groupArray.length; i++) {\r\n        for (let j = 0; j < selectedGroupArray.length; j++) {\r\n          if (selectedGroupArray[j] === groupArray[i]) {\r\n            this.updateControlGroupID(groupArray[i], selectedGroupArray[0])\r\n            groupArray.splice(i, 1)\r\n          }\r\n        }\r\n      }\r\n      this.updateGroup({\r\n        userFormId: this.userFormId,\r\n        groupArray: [...groupArray, selectedGroupArray[0]]\r\n      })\r\n      updateGroupId = selectedGroupArray[0]!\r\n    } else if (selectedGroupArray.length === 0) {\r\n      updateGroupId = this.createGroupId()\r\n      const groupArray = [\r\n        ...this.groupedControls[this.userFormId]!.groupArray!,\r\n        updateGroupId\r\n      ]\r\n      this.updateGroup({ userFormId: this.userFormId, groupArray: groupArray })\r\n    }\r\n\r\n    for (let val of selected) {\r\n      if (!val.startsWith('group')) {\r\n        this.updateControlProperty('GroupID', updateGroupId, val)\r\n      }\r\n    }\r\n    this.createGroup(updateGroupId)\r\n    this.selectControl({\r\n      userFormId: this.userFormId,\r\n      select: {\r\n        container: this.getContainerList(updateGroupId),\r\n        selected: [updateGroupId]\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * @description To select all the controls in respective container present in respective userform\r\n   * @function selectAll\r\n   */\r\n  selectAll () {\r\n    // const selecetedContainer = this.selectedControls[this.userFormId].container[0]\r\n    const controlObjectList = [\r\n      ...this.userformData[this.userFormId][this.containerId].controls\r\n    ]\r\n    const selecedGroup: string[] = []\r\n    for (const val of controlObjectList) {\r\n      const controlGroupId: string = this.userformData[this.userFormId][val]\r\n        .properties.GroupID!\r\n      if (controlGroupId && controlGroupId !== '') {\r\n        !selecedGroup.includes(controlGroupId)! &&\r\n          selecedGroup.push(controlGroupId)\r\n      } else {\r\n        selecedGroup.push(val)\r\n      }\r\n    }\r\n\r\n    if (controlObjectList.length !== 0) {\r\n      this.selectControl({\r\n        userFormId: this.userFormId,\r\n        select: {\r\n          container: this.getContainerList(selecedGroup[0]),\r\n          selected: [...selecedGroup]\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @description To update the cutted controls in respective container present in respective userform\r\n   * @function cutControl\r\n   */\r\n  cutControl () {\r\n    this.copyControl('cut')\r\n    this.clickDelete()\r\n  }\r\n\r\n  /**\r\n   * @description To update the copied controls in respective container present in respective userform\r\n   * @function copyControl\r\n   */\r\n  copyControl (type: string) {\r\n    if (this.copiedControl[this.userFormId][this.userFormId].controls.length > 0) {\r\n      const lengthCount = this.copiedControl[this.userFormId][this.userFormId].controls.length\r\n      const controls = [...this.copiedControl[this.userFormId][this.userFormId].controls]\r\n      for (let i = 0; i < lengthCount; i++) {\r\n        this.deleteCopiedControl({\r\n          userFormId: this.userFormId,\r\n          parentId: this.userFormId,\r\n          targetId: controls[i]\r\n        })\r\n      }\r\n    }\r\n    const userFormData = this.userformData[this.userFormId]\r\n    const selContainer = this.selectedControls[this.userFormId].container[0]\r\n    const selSelected = this.selectedControls[this.userFormId].selected\r\n    const updateSelected = []\r\n    for (let control of selSelected) {\r\n      if (!control.startsWith('group') && userFormData[control].type === 'Page') {\r\n        control = this.getContainerList(control)[0]\r\n      }\r\n      updateSelected.push(control)\r\n    }\r\n    this.updateCopyControlList({\r\n      userFormId: this.userFormId,\r\n      parentId: selContainer,\r\n      targetId: updateSelected,\r\n      type: type\r\n    })\r\n\r\n    const recCopyControl = (daTarget: string) => {\r\n      const daTargetControls = userFormData[daTarget].controls\r\n      if (daTargetControls.length > 0) {\r\n        for (let i in daTargetControls) {\r\n          const controlObject = JSON.parse(JSON.stringify(userFormData[daTargetControls[i]]))\r\n          const controlArray = []\r\n          const ctrlObj = { ...controlObject, controls: [] }\r\n          this.addCopiedControl({\r\n            userFormId: this.userFormId,\r\n            controlId: daTarget,\r\n            addId: daTargetControls[i],\r\n            item: ctrlObj\r\n          })\r\n          recCopyControl(daTargetControls[i])\r\n        }\r\n      }\r\n    }\r\n\r\n    for (let key of selSelected) {\r\n      if (!key.startsWith('group')) {\r\n        if (userFormData[key].type === 'Page') {\r\n          key = this.getContainerList(key)[0]\r\n        }\r\n        const controlObject = JSON.parse(JSON.stringify(userFormData[key]))\r\n        const ctrlObj = { ...controlObject, controls: [] }\r\n        this.addCopiedControl({\r\n          userFormId: this.userFormId,\r\n          controlId: this.userFormId,\r\n          addId: key,\r\n          item: ctrlObj\r\n        })\r\n        recCopyControl(key)\r\n      } else {\r\n        for (let ctrlId in userFormData) {\r\n          const controlProp = userFormData[ctrlId].properties.GroupID\r\n          if (controlProp) {\r\n            if (controlProp === key) {\r\n              const controlObject = JSON.parse(\r\n                JSON.stringify(userFormData[ctrlId])\r\n              )\r\n              const ctrlObj = { ...controlObject, controls: [] }\r\n              this.addCopiedControl({\r\n                userFormId: this.userFormId,\r\n                controlId: this.userFormId,\r\n                addId: ctrlId,\r\n                item: ctrlObj\r\n              })\r\n              recCopyControl(ctrlId)\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  updateNewControl (parentId: string, ctrlId: string, ctrlObj: controlData, isParent: boolean) {\r\n    this.addControl({\r\n      userFormId: this.userFormId,\r\n      controlId: parentId,\r\n      addId: ctrlId,\r\n      item: ctrlObj\r\n    })\r\n    if (isParent) {\r\n      const newTabIndex = this.userformData[this.userFormId][parentId].controls.length\r\n      this.updateTabIndexValue(ctrlId)\r\n      this.updateZIndexValue(ctrlId)\r\n    }\r\n  }\r\n\r\n  newPasteControlId (key: string, parentId: string) {\r\n    const userFormData = this.userformData[this.userFormId]\r\n    let lastControlId = 0\r\n    const type = key in userFormData ? userFormData[key].type : ''\r\n    const parentName = parentId !== '' ? parentId.split('MultiPage').pop() : -1\r\n    const selectedControlName: string | undefined =\r\n    type === 'Page'\r\n      ? `Page${parentName}_`\r\n      : key.replace(/[0-9]/g, '').split('_').pop()\r\n    const userformControlIds = Object.keys(userFormData)\r\n    for (let i = 0; i < userformControlIds.length; i++) {\r\n      if (userformControlIds[i].indexOf(selectedControlName!) !== -1) {\r\n        const IdNum = userformControlIds[i].split(selectedControlName!).pop() || '-1'\r\n        const pasreId = parseInt(IdNum, 10)\r\n        if (!isNaN(pasreId) && lastControlId < pasreId) {\r\n          lastControlId = pasreId\r\n        }\r\n      }\r\n    }\r\n    lastControlId += 1\r\n    const Name = `${selectedControlName}${lastControlId}`\r\n    return Name\r\n  }\r\n  removeChildControl (daTarget: string, deleteControl: string) {\r\n    const removeControl = [...this.userformData[this.userFormId][daTarget].controls]\r\n    const removeIndex = removeControl.findIndex((val) => val === deleteControl)\r\n    removeControl.splice(removeIndex, 1)\r\n    this.setChildControls({\r\n      userFormId: this.userFormId,\r\n      containerId: daTarget,\r\n      targetControls: removeControl\r\n    })\r\n  }\r\n  getPasteControlSize () {\r\n    const usrFrmData = this.userformData[this.userFormId]\r\n    const pasteControls = [...this.getSelectedControlsDatas!]\r\n    const pasteContainer = this.selectedControls[this.userFormId].container[0]\r\n    const leftArray = [...pasteControls]\r\n    const topArray = [...pasteControls]\r\n    const rightArray = [...pasteControls]\r\n    const bottomArray = [...pasteControls]\r\n    leftArray.sort((a, b) => {\r\n      return usrFrmData[a].properties.Left! - usrFrmData[b].properties.Left!\r\n    })\r\n    topArray.sort((a, b) => {\r\n      return usrFrmData[a].properties.Top! - usrFrmData[b].properties.Top!\r\n    })\r\n    rightArray.sort((a, b) => {\r\n      return (usrFrmData[b].properties.Left! + usrFrmData[b].properties.Width!) -\r\n       (usrFrmData[a].properties.Left! + usrFrmData[a].properties.Width!)\r\n    })\r\n    bottomArray.sort((a, b) => {\r\n      return (usrFrmData[b].properties.Top! + usrFrmData[b].properties.Height!) -\r\n       (usrFrmData[a].properties.Top! + usrFrmData[a].properties.Height!)\r\n    })\r\n    const groupRectLeft = usrFrmData[leftArray[0]].properties.Left!\r\n    const groupRectTop = usrFrmData[topArray[0]].properties.Top!\r\n    const groupRectBottom = usrFrmData[bottomArray[0]].properties.Top! + usrFrmData[bottomArray[0]].properties.Height!\r\n    const groupRectRight = usrFrmData[rightArray[0]].properties.Left! + usrFrmData[rightArray[0]].properties.Width!\r\n\r\n    const deltaTop = (groupRectBottom - groupRectTop) / 2\r\n    const deltaLeft = (groupRectRight - groupRectLeft) / 2\r\n\r\n    const type = this.userformData[this.userFormId][pasteContainer].type\r\n    const container = type === 'Page' ? usrFrmData[this.getContainerList(pasteContainer)[0]].properties : usrFrmData[pasteContainer].properties\r\n    const containerHeight = type === 'Userform' ? container.Height! - 37 : container.Height! - 20\r\n    const targetTop = ((containerHeight) / 2) - deltaTop\r\n    const targetLeft = (container.Width! / 2) - deltaLeft\r\n\r\n    const diffTop = targetTop - usrFrmData[topArray[0]].properties.Top! + usrFrmData[pasteContainer].properties.ScrollTop!\r\n    const diffLeft = targetLeft - usrFrmData[leftArray[0]].properties.Left! + usrFrmData[pasteContainer].properties.ScrollLeft!\r\n\r\n    for (let i = 0; i < leftArray.length; i++) {\r\n      let left = usrFrmData[leftArray[i]].properties.Left! + diffLeft\r\n      if (!isNaN(left)) {\r\n        this.updateControlProperty('Left', left, leftArray[i])\r\n      }\r\n    }\r\n    for (let i = 0; i < topArray.length; i++) {\r\n      let top = usrFrmData[topArray[i]].properties.Top! + diffTop\r\n      if (!isNaN(top)) {\r\n        this.updateControlProperty('Top', top, topArray[i])\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * @description To paste controls in respective container present in respective userform\r\n   * @function pasteControl\r\n   */\r\n  pasteControl () {\r\n    if (this.copyControlList.type === 'copy') {\r\n      const selContainer = this.copyControlList.parentId\r\n      const selSelected = this.copyControlList.targetId\r\n      const userFormData = this.userformData[this.userFormId]\r\n      const presentGroupId: string[] = []\r\n      const newGroupId: string[] = []\r\n      const oldControlId: string[] = []\r\n      const newControlId: string[] = []\r\n\r\n      for (const key in this.copiedControl[this.userFormId]) {\r\n        const controlProp = this.copiedControl[this.userFormId][key].properties.GroupID\r\n        if (controlProp && !presentGroupId.includes(controlProp)) {\r\n          presentGroupId.push(controlProp)\r\n        }\r\n      }\r\n      for (let j in presentGroupId) {\r\n        const newId = this.createGroupId()\r\n        newGroupId.push(newId)\r\n        let groupArray: string[] = [\r\n          ...this.groupedControls[this.userFormId]!.groupArray!,\r\n          newId\r\n        ]\r\n        this.updateGroup({\r\n          userFormId: this.userFormId,\r\n          groupArray: groupArray!\r\n        })\r\n      }\r\n\r\n      const recCopyControl = (daTarget: string) => {\r\n        const daTargetControls = userFormData[daTarget].controls\r\n        if (daTargetControls && daTargetControls.length > 0) {\r\n          for (let i = 0, limit = daTargetControls.length; i < limit; i++) {\r\n            const key = daTargetControls[i]\r\n            const Name = this.newPasteControlId(key, daTarget)\r\n            const controlID:| string| undefined = `ID_${Name}`\r\n            const controlObj = { ...this.copiedControl[this.userFormId][key] }\r\n            let groupIdIndex = -1\r\n            groupIdIndex = presentGroupId.findIndex((val) => val === controlObj.properties.GroupID)\r\n            const item: controlData = {\r\n              ...controlObj,\r\n              properties: {\r\n                ...controlObj.properties,\r\n                ID: controlID!,\r\n                GroupID: groupIdIndex !== -1 ? newGroupId[groupIdIndex] : '',\r\n                Name: Name\r\n              }\r\n            }\r\n            this.removeChildControl(daTarget, key)\r\n            this.updateNewControl(daTarget, controlID, item, false)\r\n            recCopyControl(controlID)\r\n          }\r\n        }\r\n      }\r\n\r\n      for (const key of selSelected) {\r\n        if (!key.startsWith('group')) {\r\n          oldControlId.push(key)\r\n          const Name = this.newPasteControlId(key, '')\r\n          const controlID:| string| undefined = `ID_${Name}`\r\n          const controlObj = { ...this.copiedControl[this.userFormId][key] }\r\n          newControlId.push(controlID)\r\n          let groupIdIndex = -1\r\n          groupIdIndex = presentGroupId.findIndex(\r\n            (val) => controlObj.properties.GroupID === val\r\n          )\r\n          if (selSelected.length === 1 && this.copiedControl[this.userFormId][selSelected[0]].properties.GroupID !== '') {\r\n            groupIdIndex = -1\r\n          }\r\n          const item: controlData = {\r\n            ...controlObj,\r\n            properties: {\r\n              ...controlObj.properties,\r\n              ID: controlID!,\r\n              GroupID: groupIdIndex !== -1 ? newGroupId[groupIdIndex] : '',\r\n              Name: Name\r\n            }\r\n          }\r\n          this.updateNewControl(this.containerId, controlID, item, true)\r\n          recCopyControl(controlID)\r\n        } else {\r\n          for (let ctrlId in this.copiedControl[this.userFormId]) {\r\n            const controlProp = this.copiedControl[this.userFormId][ctrlId]\r\n              .properties.GroupID\r\n            if (controlProp) {\r\n              if (controlProp === key) {\r\n                const Name = this.newPasteControlId(ctrlId, '')\r\n                const controlID:| string| undefined = `ID_${Name}`\r\n                const controlObj = this.copiedControl[this.userFormId][ctrlId]\r\n\r\n                let groupIdIndex = -1\r\n                groupIdIndex = presentGroupId.findIndex(\r\n                  (val) => controlObj.properties.GroupID === val\r\n                )\r\n                const item: controlData = {\r\n                  ...controlObj,\r\n                  properties: {\r\n                    ...controlObj.properties,\r\n                    ID: controlID!,\r\n                    GroupID: groupIdIndex !== -1 ? newGroupId[groupIdIndex] : '',\r\n                    Name: Name\r\n                  }\r\n                }\r\n                this.updateNewControl(this.containerId, controlID, item, true)\r\n                recCopyControl(controlID)\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      for (let j of newGroupId) {\r\n        this.createGroup(j)\r\n      }\r\n      const newSelected: string[] = []\r\n      for (const control of selSelected) {\r\n        if (control.startsWith('group')) {\r\n          const index = presentGroupId.findIndex((val) => val === control)\r\n          newSelected.push(newGroupId[index])\r\n        } else {\r\n          const index = oldControlId.findIndex((val) => val === control)\r\n          newSelected.push(newControlId[index])\r\n        }\r\n      }\r\n      this.selectControl({\r\n        userFormId: this.userFormId,\r\n        select: {\r\n          container: this.getContainerList(newSelected[0]),\r\n          selected: newSelected\r\n        }\r\n      })\r\n    } else if (this.copyControlList.type === 'cut') {\r\n      const selContainer = this.copyControlList.parentId\r\n      const selSelected = this.copyControlList.targetId\r\n      const userFormData = this.copiedControl[this.userFormId]\r\n      const recCopyControl = (daTarget: string) => {\r\n        const daTargetControls = userFormData[daTarget].controls\r\n        if (daTargetControls.length > 0) {\r\n          for (let i = 0, limit = daTargetControls.length; i < limit; i++) {\r\n            const key = daTargetControls[i]\r\n            const controlObj = JSON.parse(JSON.stringify(this.copiedControl[this.userFormId][key]))\r\n            const item: controlData = {\r\n              ...controlObj\r\n            }\r\n            this.removeChildControl(daTarget, key)\r\n            this.updateNewControl(daTarget, key, item, false)\r\n            recCopyControl(key)\r\n          }\r\n        }\r\n      }\r\n      for (const key of selSelected) {\r\n        if (!key.startsWith('group')) {\r\n          const controlObj = JSON.parse(\r\n            JSON.stringify(this.copiedControl[this.userFormId][key])\r\n          )\r\n          if (selSelected.length === 1 && userFormData[selSelected[0]].properties.GroupID! !== '') {\r\n            controlObj.properties.GroupID = ''\r\n          }\r\n          const item: controlData = {\r\n            ...controlObj\r\n          }\r\n          this.updateNewControl(this.containerId, key, item, true)\r\n          recCopyControl(key)\r\n        } else {\r\n          for (let ctrlId in userFormData) {\r\n            const controlProp = userFormData[ctrlId].properties.GroupID\r\n            if (controlProp) {\r\n              if (controlProp === key) {\r\n                const controlObj = JSON.parse(\r\n                  JSON.stringify(this.copiedControl[this.userFormId][ctrlId])\r\n                )\r\n                const item: controlData = {\r\n                  ...controlObj\r\n                }\r\n                this.updateNewControl(this.containerId, ctrlId, item, true)\r\n                recCopyControl(ctrlId)\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n      this.selectControl({\r\n        userFormId: this.userFormId,\r\n        select: {\r\n          container: this.getContainerList(selSelected[0]),\r\n          selected: selSelected\r\n        }\r\n      })\r\n      this.updateCopyControlList({\r\n        userFormId: this.userFormId,\r\n        parentId: this.containerId,\r\n        targetId: selSelected,\r\n        type: 'copy'\r\n      })\r\n    }\r\n    this.getPasteControlSize()\r\n    const selSelected = this.selectedControls[this.userFormId].selected\r\n    for (const control of selSelected) {\r\n      if (control.startsWith('group')) {\r\n        this.createGroup(control)\r\n      }\r\n    }\r\n    EventBus.$emit('afterPaste')\r\n  }\r\n\r\n  /**\r\n   * @description To delete controls in respective container present in respective userform\r\n   * @function clickDelete\r\n   */\r\n  clickDelete () {\r\n    const selControl = []\r\n    const userData = this.userformData[this.userFormId]\r\n    const selected = this.selectedControls[this.userFormId].selected\r\n    const selContainer = this.selectedControls[this.userFormId].container\r\n    const filterControls = []\r\n    const controls = this.userformData[this.userFormId][this.selectedControls[this.userFormId].container[0]].controls\r\n    for (const control of selected) {\r\n      if (!control.startsWith('ID_USERFORM')) {\r\n        if (control.startsWith('group')) {\r\n          for (const key in userData) {\r\n            if (\r\n              userData[key].properties.GroupID === control\r\n            ) {\r\n              selControl.push(key)\r\n            }\r\n          }\r\n        } else {\r\n          selControl.push(control)\r\n        }\r\n      }\r\n    }\r\n    if (selected.length === 1 && !selected[0].startsWith('group') && this.userformData[this.userFormId][selected[0]].properties.GroupID !== '') {\r\n      for (let j = 0; j < controls.length; j++) {\r\n        if (userData[controls[j]].properties.GroupID === userData[selected[0]].properties.GroupID) {\r\n          filterControls.push(controls[j])\r\n        }\r\n      }\r\n      if (filterControls.length === 2) {\r\n        const curSelect = filterControls[0] === selected[0] ? filterControls[1] : filterControls[0]\r\n        const selGroupId = userData[selected[0]].properties.GroupID\r\n        this.updateControlProperty('GroupID', '', curSelect)\r\n      }\r\n    }\r\n    for (let i = 0; i < selControl.length; i++) {\r\n      const controlId = userData[selControl[i]].type === 'Page' ? selContainer[0] : selControl[i]\r\n      this.deleteZIndex(controlId)\r\n      this.deleteTabIndex(controlId)\r\n      this.deleteControl({\r\n        userFormId: this.userFormId,\r\n        parentId: this.getContainerList(controlId)[0],\r\n        targetId: controlId\r\n      })\r\n    }\r\n\r\n    this.selectControl({\r\n      userFormId: this.userFormId,\r\n      select: {\r\n        container: userData[selContainer[0]].type === 'MultiPage' ? this.getContainerList(selContainer[0]) : selContainer,\r\n        selected: userData[selContainer[0]].type === 'MultiPage' ? [this.getContainerList(selContainer[0])[0]] : [selContainer[0]]\r\n      }\r\n    })\r\n    EventBus.$emit('focusUserForm')\r\n  }\r\n  updateAction (event: KeyboardEvent) {\r\n    let controlActionName = ''\r\n    if (event.ctrlKey && event.code === 'KeyA') {\r\n      controlActionName = 'ID_SELECTALL'\r\n    } else if (event.ctrlKey && event.code === 'KeyC') {\r\n      if (\r\n        this.selectedControls[this.userFormId].selected[0] !== this.userFormId\r\n      ) {\r\n        controlActionName = 'ID_COPY'\r\n      }\r\n    } else if (event.keyCode === 46) {\r\n      controlActionName = 'ID_DELETE'\r\n    } else if (event.ctrlKey && event.code === 'KeyV') {\r\n      controlActionName = 'ID_PASTE'\r\n    } else if (event.keyCode && event.code === 'KeyX') {\r\n      controlActionName = 'ID_CUT'\r\n    }\r\n    this.controlAction(event, controlActionName, '')\r\n  }\r\n  updatePropVal (propName: string, propValue: number) {\r\n    const ctrlSel = this.selectedControls[this.userFormId].selected\r\n    const usrFrmData = this.userformData[this.userFormId]\r\n    for (let index = 1; index < ctrlSel.length; index++) {\r\n      if (!ctrlSel[index].startsWith('group')) {\r\n        const curProp = usrFrmData[ctrlSel[index]].properties\r\n        if (propName === 'selRight') {\r\n          const curRight = curProp.Width! + curProp.Left!\r\n          const value = curProp.Left! + (propValue - curRight)\r\n          this.updateControlProperty('Left', value, ctrlSel[index])\r\n        } else if (propName === 'selBottom') {\r\n          const curBottom = curProp.Height! + curProp.Top!\r\n          const value = curProp.Top! + (propValue - curBottom)\r\n          this.updateControlProperty('Top', value, ctrlSel[index])\r\n        }\r\n        if (propName === 'selCenter') {\r\n          const curCenter = curProp.Width! / 2\r\n          const value = propValue - curCenter\r\n          this.updateControlProperty('Left', value, ctrlSel[index])\r\n        }\r\n        if (propName === 'selMiddle') {\r\n          const curMiddle = curProp.Height! / 2\r\n          const value = propValue - curMiddle\r\n          this.updateControlProperty('Top', value, ctrlSel[index])\r\n        } else {\r\n          const propertyname: keyof controlProperties = propName as keyof controlProperties\r\n          this.updateControlProperty(propertyname, propValue, ctrlSel[index])\r\n        }\r\n      } else {\r\n        const groupIndex: number = this.groupStyleArray.findIndex(val => val.groupName === ctrlSel[index])\r\n        const curProp = this.groupStyleArray[groupIndex]\r\n        const left = parseInt(curProp.left!)\r\n        const top = parseInt(curProp.top!)\r\n        const width = parseInt(curProp.width!)\r\n        const height = parseInt(curProp.height!)\r\n        let value = -1\r\n        if (propName === 'selRight') {\r\n          value = left! + (propValue - (width! + left!))\r\n          EventBus.$emit('updasteGroupSize', 'Left', value, groupIndex)\r\n        } else if (propName === 'selBottom') {\r\n          value = top! + (propValue - (height + top))\r\n          EventBus.$emit('updasteGroupSize', 'Top', value, groupIndex)\r\n        }\r\n        if (propName === 'selCenter') {\r\n          value = propValue - (width! / 2)\r\n          EventBus.$emit('updasteGroupSize', 'Left', value, groupIndex)\r\n        }\r\n        if (propName === 'selMiddle') {\r\n          value = propValue - height! / 2\r\n          EventBus.$emit('updasteGroupSize', 'Top', value, groupIndex)\r\n        } else {\r\n          const propertyname: keyof controlProperties = propName as keyof controlProperties\r\n          EventBus.$emit('updasteGroupSize', propertyname, propValue, groupIndex)\r\n        }\r\n      }\r\n    }\r\n  }\r\n  convertToGridSize (val: number) {\r\n    const gridSize = 9\r\n    return Math.round(val / gridSize) * gridSize\r\n  }\r\n  controlAlignMent (subVal: string) {\r\n    const mainSel = this.selectedControls[this.userFormId].selected[0]\r\n    const isGroup = mainSel.startsWith('group')\r\n    const usrFrmData = this.userformData[this.userFormId]\r\n    const ctrlProp = !isGroup && usrFrmData[mainSel].properties\r\n    const groupIndex: number = this.groupStyleArray.findIndex(val => val.groupName === mainSel)\r\n    const newObject = {\r\n      Left: isGroup && groupIndex !== -1 ? parseInt(this.groupStyleArray[groupIndex].left!) : ctrlProp ? ctrlProp.Left! : 0,\r\n      Top: isGroup && groupIndex !== -1 ? parseInt(this.groupStyleArray[groupIndex].top!) : ctrlProp ? ctrlProp.Top! : 0,\r\n      Width: isGroup && groupIndex !== -1 ? parseInt(this.groupStyleArray[groupIndex].width!) : ctrlProp ? ctrlProp.Width! : 0,\r\n      Height: isGroup && groupIndex !== -1 ? parseInt(this.groupStyleArray[groupIndex].height!) : ctrlProp ? ctrlProp.Height! : 0\r\n    }\r\n    if (subVal === 'ID_ALIGNLEFT') {\r\n      this.updatePropVal('Left', newObject.Left!)\r\n    } else if (subVal === 'ID_ALIGNTOP') {\r\n      this.updatePropVal('Top', newObject.Top!)\r\n    } else if (subVal === 'ID_ALIGNRIGHT') {\r\n      const selRight = newObject.Width! + newObject.Left!\r\n      this.updatePropVal('selRight', selRight)\r\n    } else if (subVal === 'ID_ALIGNBOTTOM') {\r\n      const selBottom = newObject.Height! + newObject.Top!\r\n      this.updatePropVal('selBottom', selBottom)\r\n    } else if (subVal === 'ID_ALIGNCENTER') {\r\n      const selCenter = newObject.Left! + newObject.Width! / 2\r\n      this.updatePropVal('selCenter', selCenter)\r\n    } else if (subVal === 'ID_ALIGNMIDDLE') {\r\n      const selMiddle = newObject.Top! + newObject.Height! / 2\r\n      this.updatePropVal('selMiddle', selMiddle)\r\n    } else if (subVal === 'ID_WIDTH') {\r\n      this.updatePropVal('Width', newObject.Width!)\r\n    } else if (subVal === 'ID_HEIGHT') {\r\n      this.updatePropVal('Height', newObject.Height!)\r\n    } else if (subVal === 'ID_BOTH') {\r\n      this.updatePropVal('Height', newObject.Height!)\r\n      this.updatePropVal('Width', newObject.Width!)\r\n    } else if (subVal === 'ID_GRID') {\r\n      const ctrlSel = this.selectedControls[this.userFormId].selected\r\n      for (let index = 0; index < ctrlSel.length; index++) {\r\n        if (!ctrlSel[index].startsWith('group')) {\r\n          const curProp = usrFrmData[ctrlSel[index]].properties\r\n          this.updateControlProperty('Left', this.convertToGridSize(curProp.Left!), ctrlSel[index])\r\n          this.updateControlProperty('Top', this.convertToGridSize(curProp.Top!), ctrlSel[index])\r\n        } else {\r\n          const groupIndex: number = this.groupStyleArray.findIndex(val => val.groupName === ctrlSel[index])\r\n          const curProp = this.groupStyleArray[groupIndex]\r\n          const left = parseInt(curProp.left!)\r\n          const top = parseInt(curProp.top!)\r\n          EventBus.$emit('updasteGroupSize', 'Top', this.convertToGridSize(top), groupIndex)\r\n          EventBus.$emit('updasteGroupSize', 'Left', this.convertToGridSize(left), groupIndex)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  controlDisable (event: MouseEvent) {\r\n    event.preventDefault()\r\n    event.stopPropagation()\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.outercontext-div {\r\n  border: 0.3px solid black;\r\n  box-shadow: 2px 2px lightgray;\r\n  width: 150px;\r\n  height: auto;\r\n  font-size: 13px;\r\n  position: fixed;\r\n  z-index: 1000;\r\n}\r\n.wrapper-context {\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.wrapper1-context {\r\n  display: grid;\r\n  grid-template-columns: 10% 90%;\r\n  border: 0.3px solid white;\r\n  background: white;\r\n  height: 24px;\r\n  padding-top: 5px;\r\n  outline: none;\r\n}\r\n.wrapper1-context:hover {\r\n  background-color: rgb(155, 215, 255);\r\n  border: 0.3px solid rgb(0, 153, 255);\r\n}\r\n.wrapper21 {\r\n  display: grid;\r\n  grid-template-columns: 10% 85% 5%;\r\n}\r\n.triangle-right {\r\n  border-top: 4px solid transparent;\r\n  border-left: 5px solid black;\r\n  border-bottom: 4px solid transparent;\r\n}\r\n.iset-context {\r\n  text-align: left;\r\n  padding-left: 15px;\r\n  font-size: 12px;\r\n}\r\n.set-context {\r\n  text-align: left;\r\n  padding-left: 15px;\r\n  font-size: 12px;\r\n}\r\nhr {\r\n  margin: 0px;\r\n}\r\nul {\r\n  list-style-type: none;\r\n  margin-block-start: 0em;\r\n  margin-block-end: 0em;\r\n  margin-inline-start: 0px;\r\n  margin-inline-end: 0px;\r\n  padding-inline-start: 0px;\r\n  margin-top: 0px;\r\n  margin-bottom: 0px;\r\n}\r\n\r\n/* testing submenu */\r\n\r\n.top-level-menu {\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n\r\n.top-level-menu > li {\r\n  position: absolute;\r\n  float: left;\r\n  height: 30px;\r\n  width: 143px;\r\n}\r\n\r\n.top-level-menu li:hover > ul {\r\n  /* On hover, display the next level's menu */\r\n  display: inline;\r\n}\r\n\r\n/* Menu Link Styles */\r\n\r\n.top-level-menu a /* Apply to all links inside the multi-level menu */ {\r\n  font-size: 12px;\r\n  color: black;\r\n  text-decoration: none;\r\n  padding: 0 0 0 10px;\r\n  padding-left: 15px;\r\n\r\n  /* Make the link cover the entire list item-container */\r\n  display: block;\r\n}\r\n.top-level-menu a:hover {\r\n  color: black;\r\n}\r\n.third-level-menu {\r\n  position: absolute;\r\n  top: 0;\r\n  right: -100px;\r\n  width: 110px;\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0;\r\n  display: none;\r\n  border: 1px solid black;\r\n  background-color: white;\r\n}\r\n\r\n.third-level-menu > li {\r\n  height: 20px;\r\n  padding-top: 5px;\r\n  /* margin: 1px; */\r\n}\r\n.third-level-menu > li:hover {\r\n  background-color: rgb(155, 215, 255);\r\n  border: 0.2px solid rgb(0, 153, 255);\r\n}\r\n.top-level-menu1 {\r\n  list-style: none;\r\n  padding: 0;\r\n  margin: 0;\r\n}\r\n\r\n.top-level-menu1 > li {\r\n  position: absolute;\r\n  float: left;\r\n  height: 30px;\r\n  width: 143px;\r\n}\r\n\r\n.top-level-menu1 li:hover > ul {\r\n  /* On hover, display the next level's menu */\r\n  display: inline;\r\n}\r\n\r\n/* Menu Link Styles */\r\n\r\n.top-level-menu1 a /* Apply to all links inside the multi-level menu */ {\r\n  font-size: 12px;\r\n  color: black;\r\n  text-decoration: none;\r\n  padding: 0 0 0 10px;\r\n  padding-left: 15px;\r\n\r\n  /* Make the link cover the entire list item-container */\r\n  display: block;\r\n}\r\n.top-level-menu1 a:hover {\r\n  color: black;\r\n}\r\n.third {\r\n  padding-left: 5px;\r\n}\r\n.third > a {\r\n  padding-left: 10px;\r\n}\r\n.icons {\r\n  margin-left: 3px;\r\n}\r\n</style>\r\n"]}]}