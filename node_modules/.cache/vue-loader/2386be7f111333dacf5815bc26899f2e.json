{"remainingRequest":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mobiotics/Projects/hancom/FormcontrolLatest/src/FormDesigner/components/atoms/FDMultiPage/index.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/src/FormDesigner/components/atoms/FDMultiPage/index.vue","mtime":1612288570000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQppbXBvcnQgeyBDb21wb25lbnQsIE1peGlucywgUHJvcCwgUmVmLCBXYXRjaCB9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InDQppbXBvcnQgeyBTdGF0ZSwgQWN0aW9uIH0gZnJvbSAndnVleC1jbGFzcycNCmltcG9ydCBGZENvbnRhaW5lclZ1ZSBmcm9tICdAL2FwaS9hYnN0cmFjdC9Gb3JtRGVzaWduZXIvRmRDb250YWluZXJWdWUnDQppbXBvcnQgeyBjb250cm9sUHJvcGVydGllcyB9IGZyb20gJ0AvRm9ybURlc2lnbmVyL2NvbnRyb2xzLXByb3BlcnRpZXMnDQppbXBvcnQgQ29udGV4dE1lbnUgZnJvbSAnLi4vRkRDb250ZXh0TWVudS9pbmRleC52dWUnDQppbXBvcnQgeyB0YWJzQ29udGV4dE1lbnUgfSBmcm9tICcuLi8uLi8uLi9tb2RlbHMvdGFic0NvbnRleHRNZW51Jw0KaW1wb3J0IFZ1ZSBmcm9tICd2dWUnDQppbXBvcnQgRkRDb250cm9sVGFicyBmcm9tICdAL0Zvcm1EZXNpZ25lci9jb21wb25lbnRzL2F0b21zL0ZEQ29udHJvbFRhYnMvaW5kZXgudnVlJw0KaW1wb3J0IENvbnRhaW5lciBmcm9tICdAL0Zvcm1EZXNpZ25lci9jb21wb25lbnRzL29yZ2FuaXNtcy9GRENvbnRhaW5lci9pbmRleC52dWUnDQppbXBvcnQgeyBFdmVudEJ1cyB9IGZyb20gJ0AvRm9ybURlc2lnbmVyL2V2ZW50LWJ1cycNCg0KQENvbXBvbmVudCh7DQogIG5hbWU6ICdGRE11bHRpUGFnZScsDQogIGNvbXBvbmVudHM6IHsNCiAgICBDb250ZXh0TWVudSwNCiAgICBGRENvbnRyb2xUYWJzLA0KICAgIENvbnRhaW5lcjogKCkgPT4NCiAgICAgIGltcG9ydCgnQC9Gb3JtRGVzaWduZXIvY29tcG9uZW50cy9vcmdhbmlzbXMvRkRDb250YWluZXIvaW5kZXgudnVlJykNCiAgfQ0KfSkNCmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZETXVsdGlQYWdlIGV4dGVuZHMgTWl4aW5zKEZkQ29udGFpbmVyVnVlKSB7DQogIEBTdGF0ZSgoc3RhdGUpID0+IHN0YXRlLmZkLnVzZXJmb3JtRGF0YSkgdXNlcmZvcm1EYXRhITogdXNlcmZvcm1EYXRhOw0KICBAUHJvcCh7IHJlcXVpcmVkOiB0cnVlLCB0eXBlOiBTdHJpbmcgfSkgcHVibGljIHVzZXJGb3JtSWQhOiBzdHJpbmc7DQogIEBSZWYoJ3Njcm9sbGluZycpIHNjcm9sbGluZzogSFRNTERpdkVsZW1lbnQ7DQogIEBSZWYoJ2NvbnRlbnRSZWYnKSBjb250ZW50UmVmOiBIVE1MRGl2RWxlbWVudDsNCiAgQFJlZignY29udGFpbmVyUmVmJykgcmVhZG9ubHkgY29udGFpbmVyUmVmITogQ29udGFpbmVyOw0KICBAUmVmKCdtdWx0aXBhZ2UnKSBtdWx0aXBhZ2U6IEhUTUxEaXZFbGVtZW50Ow0KICBAUmVmKCdjb250cm9sVGFic1JlZicpIGNvbnRyb2xUYWJzUmVmOiBIVE1MRGl2RWxlbWVudFtdOw0KICBAUmVmKCdjb250cm9sVGFiJykgY29udHJvbFRhYjogRkRDb250cm9sVGFic1tdOw0KICBAUmVmKCdidXR0b25TdHlsZVJlZicpIGJ1dHRvblN0eWxlUmVmOiBIVE1MRGl2RWxlbWVudDsNCg0KICB2aWV3TWVudTogYm9vbGVhbiA9IGZhbHNlOw0KICB0b3A6IHN0cmluZyA9ICcwcHgnOw0KICBsZWZ0OiBzdHJpbmcgPSAnMHB4JzsNCiAgY29udGV4dE1lbnVWYWx1ZTogQXJyYXk8SWNvbnRleHRNZW51PiA9IHRhYnNDb250ZXh0TWVudTsNCiAgdXBkYXRlZFZhbHVlOiBudW1iZXIgPSAwOw0KICBzZWxlY3RlZFBhZ2VJRDogc3RyaW5nID0gJyc7DQogIG11bHRpUGFnZUNvbnRleHRNZW51OiBib29sZWFuID0gZmFsc2U7DQogIHRlbXBXaWR0aDogbnVtYmVyID0gMDsNCiAgdGVtcEhlaWdodDogbnVtYmVyID0gMDsNCiAgbXVsdGlSb3dDb3VudDogbnVtYmVyID0gMTsNCiAgaXNTY3JvbGxWaXNpYmxlID0gZmFsc2U7DQogIHRvcFZhbHVlOiBudW1iZXIgPSAwOw0KICB3aWR0aFZhbHVlOiBudW1iZXIgPSA0MDsNCiAgcm93c0NvdW50OiBzdHJpbmcgPSAnJzsNCg0KICAvKioNCiAgICogQGRlc2NyaXB0aW9uIHNldHMgc2Nyb2xsYmFyIGxlZnQgYW5kIHRvcCBwb3NpdGlvbg0KICAgKiBAZnVuY3Rpb24gc2Nyb2xsTGVmdFRvcA0KICAgKiBAcGFyYW0gY29udHJvbERhdGEgcHJvcENvbnRyb2xEYXRhIHBhc3NlZCBhcyBpbnB1dA0KICAgKi8NCiAgc2Nyb2xsTGVmdFRvcCAoY29udHJvbERhdGE6IGNvbnRyb2xEYXRhKSB7DQogICAgaWYgKHRoaXMuc2VsZWN0ZWRQYWdlRGF0YSkgew0KICAgICAgY29uc3Qgc2Nyb2xsTGVmdDogbnVtYmVyID0gY29udHJvbERhdGEhLnByb3BlcnRpZXMuU2Nyb2xsTGVmdCENCiAgICAgIGNvbnN0IHNjcm9sbFRvcDogbnVtYmVyID0gY29udHJvbERhdGEhLnByb3BlcnRpZXMuU2Nyb2xsVG9wIQ0KICAgICAgaWYgKHNjcm9sbExlZnQgPiAwKSB7DQogICAgICAgICh0aGlzLmNvbnRlbnRSZWYgYXMgSVNjcm9sbFJlZikuc2Nyb2xsTGVmdCA9IHNjcm9sbExlZnQNCiAgICAgIH0NCiAgICAgIGlmIChzY3JvbGxUb3AgPiAwKSB7DQogICAgICAgICh0aGlzLmNvbnRlbnRSZWYgYXMgSVNjcm9sbFJlZikuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wDQogICAgICB9DQogICAgfQ0KICB9DQogIGZvY3VzUGFnZSAoKSB7DQogICAgaWYgKHR5cGVvZiB0aGlzLnByb3BlcnRpZXMuVmFsdWUgPT09ICdudW1iZXInICYmIHRoaXMuY29udHJvbHMubGVuZ3RoID4gMCkgew0KICAgICAgY29uc3QgdmFsdWU6IG51bWJlciA9IHRoaXMucHJvcGVydGllcy5WYWx1ZSBhcyBudW1iZXI7DQogICAgICAodGhpcy5jb250cm9sVGFiW3ZhbHVlXS4kZWwuY2hpbGRyZW5bMV0gYXMgSFRNTFNwYW5FbGVtZW50KS5mb2N1cygpDQogICAgfSBlbHNlIHsNCiAgICAgICh0aGlzLiRlbC5jaGlsZHJlblswXSBhcyBIVE1MRGl2RWxlbWVudCkuZm9jdXMoKQ0KICAgIH0NCiAgfQ0KICBjbG9zZUNvbnRleHRNZW51ICgpIHsNCiAgICB0aGlzLm11bHRpUGFnZUNvbnRleHRNZW51ID0gZmFsc2UNCiAgICB0aGlzLmZvY3VzUGFnZSgpDQogIH0NCiAgLyoqDQogICAqIEBkZXNjcmlwdGlvbiB0YWtlcyBhIHNpbmdsZSBwYWdlIHZhbHVlIGJhc2VkIG9uIHRoZSB2YWx1ZSBvZiB0aGUgY29udHJvbA0KICAgKiBAZnVuY3Rpb24gcGFnZURhdGENCiAgICoNCiAgICovDQogIHBhZ2VEYXRhICh2YWx1ZTogc3RyaW5nKTogY29udHJvbERhdGEgew0KICAgIHJldHVybiB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW3ZhbHVlXQ0KICB9DQoNCiAgZ2V0IG91dGVyRGl2U3R5bGVPYmogKCkgew0KICAgIHJldHVybiB7DQogICAgICB3aWR0aDogYCR7dGhpcy5wcm9wZXJ0aWVzLldpZHRoIX1weGAsDQogICAgICBoZWlnaHQ6IGAke3RoaXMucHJvcGVydGllcy5IZWlnaHQhfXB4YA0KICAgIH0NCiAgfQ0KICAvKioNCiAgICogQGRlc2NyaXB0aW9uIHN0eWxlIG9iamVjdCBpcyBwYXNzZWQgdG8gOnN0eWxlIGF0dHJpYnV0ZSBpbiBkaXYgdGFnDQogICAqIGR5bmFtaWNhbGx5IGNoYW5naW5nIHRoZSBzdHlsZXMgb2YgdGhlIGNvbXBvbmVudCBiYXNlZCBvbiBkYXRhDQogICAqIEBmdW5jdGlvbiBwYWdlU3R5bGVPYmoNCiAgICoNCiAgICovDQogIGdldCBwYWdlU3R5bGVPYmogKCkgew0KICAgIGNvbnN0IGNvbnRyb2xQcm9wID0gdGhpcy5wcm9wZXJ0aWVzDQogICAgbGV0IGRpc3BsYXkgPSAnJw0KICAgIGlmICh0aGlzLmlzUnVuTW9kZSkgew0KICAgICAgZGlzcGxheSA9IGNvbnRyb2xQcm9wLlZpc2libGUgPyAnaW5saW5lLWJsb2NrJyA6ICdub25lJw0KICAgIH0gZWxzZSB7DQogICAgICBkaXNwbGF5ID0gJ2lubGluZS1ibG9jaycNCiAgICB9DQogICAgcmV0dXJuIHsNCiAgICAgIGxlZnQ6IGAke2NvbnRyb2xQcm9wLkxlZnR9cHhgLA0KICAgICAgd2lkdGg6IGAke2NvbnRyb2xQcm9wLldpZHRofXB4YCwNCiAgICAgIGhlaWdodDogYCR7Y29udHJvbFByb3AuSGVpZ2h0fXB4YCwNCiAgICAgIHRvcDogYCR7Y29udHJvbFByb3AuVG9wfXB4YCwNCiAgICAgIGJhY2tncm91bmRDb2xvcjogY29udHJvbFByb3AuQmFja0NvbG9yLA0KICAgICAgZGlzcGxheTogZGlzcGxheSwNCiAgICAgIGJvcmRlckxlZnQ6ICcycHggc29saWQgd2hpdGVzbW9rZScsDQogICAgICBib3JkZXJCb3R0b206IGNvbnRyb2xQcm9wLlRhYk9yaWVudGF0aW9uID09PSAwID8gJzFweCBzb2xpZCBncmF5JyA6ICcnDQogICAgfQ0KICB9DQoNCiAgLyoqDQogICAqIEBkZXNjcmlwdGlvbiBzdHlsZSBvYmplY3QgaXMgcGFzc2VkIHRvIDpzdHlsZSBhdHRyaWJ1dGUgaW4gZGl2IHRhZw0KICAgKiBkeW5hbWljYWxseSBjaGFuZ2luZyB0aGUgc3R5bGVzIG9mIHRoZSBjb21wb25lbnQgYmFzZWQgb24gZGF0YQ0KICAgKiBAZnVuY3Rpb24gc3R5bGVUYWJzT2JqDQogICAqDQogICAqLw0KICBwcm90ZWN0ZWQgZ2V0IHN0eWxlVGFic09iaiAoKTogUGFydGlhbDxDU1NTdHlsZURlY2xhcmF0aW9uPiB7DQogICAgY29uc3QgY29udHJvbFByb3AgPSB0aGlzLnByb3BlcnRpZXMNCiAgICByZXR1cm4gew0KICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLA0KICAgICAgZGlzcGxheTogJ2ZsZXgnLA0KICAgICAganVzdGlmeUNvbnRlbnQ6IGNvbnRyb2xQcm9wLlRhYk9yaWVudGF0aW9uID09PSAzID8gJ2ZsZXgtZW5kJyA6ICcnLA0KICAgICAgaGVpZ2h0OiBgJHtjb250cm9sUHJvcC5IZWlnaHQhfXB4YA0KICAgIH0NCiAgfQ0KDQogIC8qKg0KICAgKiBAZGVzY3JpcHRpb24gc3R5bGUgb2JqZWN0IGlzIHBhc3NlZCB0byA6c3R5bGUgYXR0cmlidXRlIGluIGRpdiB0YWcNCiAgICogZHluYW1pY2FsbHkgY2hhbmdpbmcgdGhlIHN0eWxlcyBvZiB0aGUgY29tcG9uZW50IGJhc2VkIG9uIGRhdGENCiAgICogQGZ1bmN0aW9uIHN0eWxlTW92ZU9iag0KICAgKg0KICAgKi8NCiAgcHJvdGVjdGVkIGdldCBzdHlsZU1vdmVPYmogKCk6IFBhcnRpYWw8Q1NTU3R5bGVEZWNsYXJhdGlvbj4gew0KICAgIGNvbnN0IGNvbnRyb2xQcm9wID0gdGhpcy5wcm9wZXJ0aWVzDQogICAgcmV0dXJuIHsNCiAgICAgIGFsaWduU2VsZjogY29udHJvbFByb3AuVGFiT3JpZW50YXRpb24gPT09IDEgPyAnZmxleC1lbmQnIDogJycsDQogICAgICBmbG9hdDogY29udHJvbFByb3AuVGFiT3JpZW50YXRpb24gPT09IDMgPyAncmlnaHQnIDogJycsDQogICAgICB3aGl0ZVNwYWNlOiBjb250cm9sUHJvcC5NdWx0aVJvdyA9PT0gdHJ1ZSA/ICdicmVhay1zcGFjZXMnIDogJ25vd3JhcCcsDQogICAgICB6SW5kZXg6IGNvbnRyb2xQcm9wLk11bHRpUm93ID09PSB0cnVlID8gJzEwMCcgOiAnJywNCiAgICAgIGRpcmVjdGlvbjogKGNvbnRyb2xQcm9wLk11bHRpUm93ICYmIGNvbnRyb2xQcm9wLlRhYk9yaWVudGF0aW9uID09PSAzKSA/ICdydGwnIDogJ2x0cicsDQogICAgICBkaXNwbGF5OiBjb250cm9sUHJvcC5TdHlsZSA9PT0gMiA/ICdub25lJyA6IChjb250cm9sUHJvcC5NdWx0aVJvdyAmJiBjb250cm9sUHJvcC5UYWJPcmllbnRhdGlvbiA9PT0gMikgfHwgKGNvbnRyb2xQcm9wLk11bHRpUm93ICYmIGNvbnRyb2xQcm9wLlRhYk9yaWVudGF0aW9uID09PSAzKSA/ICdncmlkJyA6ICdpbmxpbmUtYmxvY2snLA0KICAgICAgZ3JpZEF1dG9GbG93OiAoY29udHJvbFByb3AuTXVsdGlSb3cgJiYgY29udHJvbFByb3AuVGFiT3JpZW50YXRpb24gPT09IDIpIHx8IChjb250cm9sUHJvcC5NdWx0aVJvdyAmJiBjb250cm9sUHJvcC5UYWJPcmllbnRhdGlvbiA9PT0gMykgPyAnY29sdW1uJyA6ICcnLA0KICAgICAgZ3JpZFRlbXBsYXRlUm93czogKGNvbnRyb2xQcm9wLk11bHRpUm93ICYmIGNvbnRyb2xQcm9wLlRhYk9yaWVudGF0aW9uID09PSAyKSB8fCAoY29udHJvbFByb3AuTXVsdGlSb3cgJiYgY29udHJvbFByb3AuVGFiT3JpZW50YXRpb24gPT09IDMpID8gdGhpcy5yb3dzQ291bnQgOiAnJywNCiAgICAgIGhlaWdodDoNCiAgICAgICAgY29udHJvbFByb3AuVGFiT3JpZW50YXRpb24gPT09IDIgfHwgY29udHJvbFByb3AuVGFiT3JpZW50YXRpb24gPT09IDMNCiAgICAgICAgICA/IHRoaXMuaXNTY3JvbGxWaXNpYmxlDQogICAgICAgICAgICA/IGAke2NvbnRyb2xQcm9wLkhlaWdodCEgLSA1NH1weGANCiAgICAgICAgICAgIDogYCR7Y29udHJvbFByb3AuSGVpZ2h0fXB4YA0KICAgICAgICAgIDogJ2ZpdC1jb250ZW50JywNCiAgICAgIHdpZHRoOg0KICAgICAgICBjb250cm9sUHJvcC5UYWJPcmllbnRhdGlvbiA9PT0gMiB8fCBjb250cm9sUHJvcC5UYWJPcmllbnRhdGlvbiA9PT0gMw0KICAgICAgICAgID8gJycNCiAgICAgICAgICA6ICF0aGlzLmlzU2Nyb2xsVmlzaWJsZQ0KICAgICAgICAgICAgPyBgJHtjb250cm9sUHJvcC5XaWR0aH1weGANCiAgICAgICAgICAgIDogYCR7Y29udHJvbFByb3AuV2lkdGghIC0gNjB9cHhgLA0KICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLA0KICAgICAgZ3JpZEF1dG9Db2x1bW5zOiAoY29udHJvbFByb3AuTXVsdGlSb3cgJiYgY29udHJvbFByb3AuVGFiT3JpZW50YXRpb24gPT09IDIpIHx8IChjb250cm9sUHJvcC5NdWx0aVJvdyAmJiBjb250cm9sUHJvcC5UYWJPcmllbnRhdGlvbiA9PT0gMykgPyAnbWF4LWNvbnRlbnQnIDogJycNCiAgICB9DQogIH0NCg0KICAvKioNCiAgICogQGRlc2NyaXB0aW9uIHN0eWxlIG9iamVjdCBpcyBwYXNzZWQgdG8gOnN0eWxlIGF0dHJpYnV0ZSBpbiBkaXYgdGFnDQogICAqIGR5bmFtaWNhbGx5IGNoYW5naW5nIHRoZSBzdHlsZXMgb2YgdGhlIGNvbXBvbmVudCBiYXNlZCBvbiBkYXRhDQogICAqIEBmdW5jdGlvbiBjb250YWluZXJEaXZTdHlsZQ0KICAgKg0KICAgKi8NCiAgZ2V0IGNvbnRhaW5lckRpdlN0eWxlICgpIHsNCiAgICBpZiAodGhpcy5zZWxlY3RlZFBhZ2VEYXRhKSB7DQogICAgICBsZXQgem9vbVZhbCA9IHRoaXMuc2VsZWN0ZWRQYWdlRGF0YQ0KICAgICAgICA/IHRoaXMuc2VsZWN0ZWRQYWdlRGF0YS5wcm9wZXJ0aWVzLlpvb20hIC8gMTAwDQogICAgICAgIDogJycNCiAgICAgIHJldHVybiB7DQogICAgICAgIHdpZHRoOiAnMTAwJScsDQogICAgICAgIGhlaWdodDogJzEwMCUnLA0KICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJw0KICAgICAgICAvLyB6b29tOiB6b29tVmFsICsgJycNCiAgICAgIH0NCiAgICB9DQogIH0NCiAgLyoqDQogICAqIEBkZXNjcmlwdGlvbiBzdHlsZSBvYmplY3QgaXMgcGFzc2VkIHRvIDpzdHlsZSBhdHRyaWJ1dGUgaW4gYnV0dG9uIHRhZ3MNCiAgICogZHluYW1pY2FsbHkgY2hhbmdpbmcgdGhlIHN0eWxlcyBvZiB0aGUgY29tcG9uZW50IGJhc2VkIG9uIGRhdGENCiAgICogQGZ1bmN0aW9uIGdldFNjcm9sbEJ1dHRvblN0eWxlT2JqDQogICAqDQogICAqLw0KICBwcm90ZWN0ZWQgZ2V0IGdldFNjcm9sbEJ1dHRvblN0eWxlT2JqICgpOiBQYXJ0aWFsPENTU1N0eWxlRGVjbGFyYXRpb24+IHsNCiAgICBjb25zdCBjb250cm9sUHJvcCA9IHRoaXMucHJvcGVydGllcw0KICAgIGNvbnN0IHRhYnNMZW5ndGggPQ0KICAgICAgdGhpcy5wcm9wZXJ0aWVzLlRhYkZpeGVkV2lkdGghID4gMA0KICAgICAgICA/IHRoaXMuY29udHJvbHMubGVuZ3RoICogdGhpcy5wcm9wZXJ0aWVzLlRhYkZpeGVkV2lkdGghICsNCiAgICAgICAgICAxMCAqIHRoaXMuY29udHJvbHMhLmxlbmd0aA0KICAgICAgICA6IHRoaXMucHJvcGVydGllcy5Gb250IS5Gb250U2l6ZSEgPCAzNg0KICAgICAgICAgID8gdGhpcy5wcm9wZXJ0aWVzLkZvbnQhLkZvbnRTaXplISAqIDMuNSAqIHRoaXMuY29udHJvbHMhLmxlbmd0aA0KICAgICAgICAgIDogdGhpcy5wcm9wZXJ0aWVzLkZvbnQhLkZvbnRTaXplISAqIDIuMyAqIHRoaXMuY29udHJvbHMhLmxlbmd0aA0KICAgIGNvbnN0IHRhYnNIZWlnaHQgPQ0KICAgICAgdGhpcy5wcm9wZXJ0aWVzLlRhYkZpeGVkSGVpZ2h0ISA+IDANCiAgICAgICAgPyB0aGlzLmNvbnRyb2xzLmxlbmd0aCAqIHRoaXMucHJvcGVydGllcy5UYWJGaXhlZEhlaWdodCEgKw0KICAgICAgICAgIHRoaXMucHJvcGVydGllcy5Gb250IS5Gb250U2l6ZSEgKiB0aGlzLmNvbnRyb2xzIS5sZW5ndGgNCiAgICAgICAgOiB0aGlzLnByb3BlcnRpZXMuRm9udCEuRm9udFNpemUhICogMi4zICogdGhpcy5jb250cm9scyEubGVuZ3RoDQogICAgcmV0dXJuIHsNCiAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLA0KICAgICAgekluZGV4OiAnMycsDQogICAgICBtYXJnaW5Ub3A6DQogICAgICAgIGNvbnRyb2xQcm9wLlRhYk9yaWVudGF0aW9uID09PSAyIHx8IGNvbnRyb2xQcm9wLlRhYk9yaWVudGF0aW9uID09PSAzDQogICAgICAgICAgPyBgJHtjb250cm9sUHJvcC5IZWlnaHQhIC0gMzB9cHhgDQogICAgICAgICAgOiBjb250cm9sUHJvcC5UYWJPcmllbnRhdGlvbiA9PT0gMQ0KICAgICAgICAgICAgPyBgJHtjb250cm9sUHJvcC5IZWlnaHQhIC0gMjJ9cHhgDQogICAgICAgICAgICA6ICcwcHgnLA0KICAgICAgdHJhbnNmb3JtOg0KICAgICAgICBjb250cm9sUHJvcC5UYWJPcmllbnRhdGlvbiA9PT0gMg0KICAgICAgICAgID8gJ3JvdGF0ZSg5MGRlZyknDQogICAgICAgICAgOiB0aGlzLnRyYW5zZm9ybVNjcm9sbEJ1dHRvblN0eWxlLA0KICAgICAgZGlzcGxheTogIXRoaXMucHJvcGVydGllcy5NdWx0aVJvdw0KICAgICAgICA/IHRoaXMuaXNTY3JvbGxWaXNpYmxlDQogICAgICAgICAgPyAnYmxvY2snDQogICAgICAgICAgOiAnbm9uZScNCiAgICAgICAgOiAnbm9uZScsDQogICAgICByaWdodDoNCiAgICAgICAgY29udHJvbFByb3AuVGFiT3JpZW50YXRpb24gPT09IDMNCiAgICAgICAgICA/ICctMTRweCcNCiAgICAgICAgICA6IGNvbnRyb2xQcm9wLlRhYk9yaWVudGF0aW9uID09PSAyDQogICAgICAgICAgICA/IGAke2NvbnRyb2xQcm9wLldpZHRoISAtIDQwfXB4YA0KICAgICAgICAgICAgOiAnMHB4JywNCiAgICAgIHRvcDogJzBweCcNCiAgICB9DQogIH0NCg0KICBzY3JvbGxEaXNhYmxlZFZhbGlkYXRlICgpIHsNCiAgICBpZiAodGhpcy5wcm9wZXJ0aWVzLlRhYk9yaWVudGF0aW9uID09PSAwIHx8IHRoaXMucHJvcGVydGllcy5UYWJPcmllbnRhdGlvbiA9PT0gMSkgew0KICAgICAgaWYgKHRoaXMuc2Nyb2xsaW5nKSB7DQogICAgICAgIGNvbnN0IHJpZ2h0QnV0dG9uID0gdGhpcy5idXR0b25TdHlsZVJlZi5jaGlsZHJlblsxXSBhcyBIVE1MQnV0dG9uRWxlbWVudA0KICAgICAgICBjb25zdCBsZWZ0QnV0dG9uID0gdGhpcy5idXR0b25TdHlsZVJlZi5jaGlsZHJlblswXSBhcyBIVE1MQnV0dG9uRWxlbWVudA0KICAgICAgICBpZiAodGhpcy5zY3JvbGxpbmcuc2Nyb2xsTGVmdCA+PSAodGhpcy5zY3JvbGxpbmcuc2Nyb2xsV2lkdGggLSB0aGlzLnNjcm9sbGluZy5jbGllbnRXaWR0aCAtIDMwKSkgew0KICAgICAgICAgIHJpZ2h0QnV0dG9uLnN0eWxlLm9wYWNpdHkgPSAnMC40Jw0KICAgICAgICAgIGxlZnRCdXR0b24uc3R5bGUub3BhY2l0eSA9ICcxJw0KICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2Nyb2xsaW5nLnNjcm9sbExlZnQgPT09IDApIHsNCiAgICAgICAgICBsZWZ0QnV0dG9uLnN0eWxlLm9wYWNpdHkgPSAnMC40Jw0KICAgICAgICAgIHJpZ2h0QnV0dG9uLnN0eWxlLm9wYWNpdHkgPSAnMScNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBsZWZ0QnV0dG9uLnN0eWxlLm9wYWNpdHkgPSAnMScNCiAgICAgICAgICByaWdodEJ1dHRvbi5zdHlsZS5vcGFjaXR5ID0gJzEnDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9IGVsc2Ugew0KICAgICAgaWYgKHRoaXMuc2Nyb2xsaW5nKSB7DQogICAgICAgIGNvbnN0IHJpZ2h0QnV0dG9uID0gdGhpcy5idXR0b25TdHlsZVJlZi5jaGlsZHJlblsxXSBhcyBIVE1MQnV0dG9uRWxlbWVudA0KICAgICAgICBjb25zdCBsZWZ0QnV0dG9uID0gdGhpcy5idXR0b25TdHlsZVJlZi5jaGlsZHJlblswXSBhcyBIVE1MQnV0dG9uRWxlbWVudA0KICAgICAgICBpZiAodGhpcy5zY3JvbGxpbmcuc2Nyb2xsVG9wID49ICh0aGlzLnNjcm9sbGluZy5zY3JvbGxIZWlnaHQgLSB0aGlzLnNjcm9sbGluZy5jbGllbnRIZWlnaHQpKSB7DQogICAgICAgICAgcmlnaHRCdXR0b24uc3R5bGUub3BhY2l0eSA9ICcwLjQnDQogICAgICAgICAgbGVmdEJ1dHRvbi5zdHlsZS5vcGFjaXR5ID0gJzEnDQogICAgICAgIH0gZWxzZSBpZiAodGhpcy5zY3JvbGxpbmcuc2Nyb2xsVG9wID09PSAwKSB7DQogICAgICAgICAgbGVmdEJ1dHRvbi5zdHlsZS5vcGFjaXR5ID0gJzAuNCcNCiAgICAgICAgICByaWdodEJ1dHRvbi5zdHlsZS5vcGFjaXR5ID0gJzEnDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgbGVmdEJ1dHRvbi5zdHlsZS5vcGFjaXR5ID0gJzEnDQogICAgICAgICAgcmlnaHRCdXR0b24uc3R5bGUub3BhY2l0eSA9ICcxJw0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICB9DQoNCiAgc2Nyb2xsQnV0dG9uVmVyaWZ5ICgpIHsNCiAgICBsZXQgc3VtID0gMA0KICAgIFZ1ZS5uZXh0VGljaygoKSA9PiB7DQogICAgICB0aGlzLmlzU2Nyb2xsVmlzaWJsZSA9IGZhbHNlDQogICAgICBpZiAoDQogICAgICAgIHRoaXMucHJvcGVydGllcy5UYWJPcmllbnRhdGlvbiA9PT0gMCB8fA0KICAgICAgICB0aGlzLnByb3BlcnRpZXMuVGFiT3JpZW50YXRpb24gPT09IDENCiAgICAgICkgew0KICAgICAgICBpZiAodGhpcy5zY3JvbGxpbmcgJiYgIXRoaXMucHJvcGVydGllcy5NdWx0aVJvdykgew0KICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5zY3JvbGxpbmcuY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICAgIGNvbnN0IGEgPSB0aGlzLnNjcm9sbGluZy5jaGlsZHJlbltpXSBhcyBIVE1MRGl2RWxlbWVudA0KICAgICAgICAgICAgc3VtICs9IGEub2Zmc2V0V2lkdGgNCiAgICAgICAgICB9DQogICAgICAgICAgY29uc3QgdGFic0xlbmd0aCA9IHN1bQ0KICAgICAgICAgIGlmICh0YWJzTGVuZ3RoID4gdGhpcy5wcm9wZXJ0aWVzLldpZHRoISkgew0KICAgICAgICAgICAgdGhpcy5pc1Njcm9sbFZpc2libGUgPSB0cnVlDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMuaXNTY3JvbGxWaXNpYmxlID0gZmFsc2UNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGlmICh0aGlzLnNjcm9sbGluZyAmJiAhdGhpcy5wcm9wZXJ0aWVzLk11bHRpUm93KSB7DQogICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNjcm9sbGluZy5jaGlsZHJlbi5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgY29uc3QgYSA9IHRoaXMuc2Nyb2xsaW5nLmNoaWxkcmVuW2ldIGFzIEhUTUxEaXZFbGVtZW50DQogICAgICAgICAgICBzdW0gKz0gYS5vZmZzZXRIZWlnaHQNCiAgICAgICAgICB9DQogICAgICAgICAgY29uc3QgdGFic0hlaWdodCA9IHN1bQ0KICAgICAgICAgIGlmICh0YWJzSGVpZ2h0ID4gdGhpcy5wcm9wZXJ0aWVzLkhlaWdodCEpIHsNCiAgICAgICAgICAgIHRoaXMuaXNTY3JvbGxWaXNpYmxlID0gdHJ1ZQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLmlzU2Nyb2xsVmlzaWJsZSA9IGZhbHNlDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgICB0aGlzLnNldFNjcm9sbExlZnQoKQ0KICAgICAgdGhpcy5zY3JvbGxEaXNhYmxlZFZhbGlkYXRlKCkNCiAgICAgIHRoaXMudXBkYXRlTXVsdGlSb3dmb3JMZWZ0QW5kUmlnaHQoKQ0KICAgIH0pDQogIH0NCg0KICAvKioNCiAgICogQGRlc2NyaXB0aW9uIHRha2VzIHRoZSBpbmRleCBWYWx1ZSBhbmQgcGFnZVZhbHVlIGFuZCBzZXQgdGhlIFZhbHVlIHByb3BlcnR5DQogICAqIEBmdW5jdGlvbiBpc0NoZWNrZWQNCiAgICoNCiAgICovDQogIGlzQ2hlY2tlZCAodmFsdWU6IHNlbGVjdGVkVGFiKSB7DQogICAgaWYgKHRoaXMuaXNFZGl0TW9kZSkgew0KICAgICAgdGhpcy51cGRhdGVkVmFsdWUgPSB2YWx1ZS5pbmRleFZhbHVlDQogICAgICB0aGlzLnNlbGVjdGVkUGFnZUlEID0gdmFsdWUucGFnZVZhbHVlDQogICAgICB0aGlzLnVwZGF0ZURhdGFNb2RlbCh7IHByb3BlcnR5TmFtZTogJ1ZhbHVlJywgdmFsdWU6IHZhbHVlLmluZGV4VmFsdWUgfSkNCiAgICAgIHRoaXMuc2VsZWN0Q29udHJvbCh7DQogICAgICAgIHVzZXJGb3JtSWQ6IHRoaXMudXNlckZvcm1JZCwNCiAgICAgICAgc2VsZWN0OiB7DQogICAgICAgICAgY29udGFpbmVyOiB0aGlzLmdldENvbnRhaW5lckxpc3QodGhpcy5zZWxlY3RlZFBhZ2VJRCksDQogICAgICAgICAgc2VsZWN0ZWQ6IFt0aGlzLnNlbGVjdGVkUGFnZUlEXQ0KICAgICAgICB9DQogICAgICB9KQ0KICAgICAgdGhpcy5mb2N1c1BhZ2UoKQ0KICAgIH0NCiAgfQ0KDQogIC8qKg0KICAgKiBAZGVzY3JpcHRpb24gdGFrZXMgdGhlIHJlZiBvZiB0aGUgZGl2IGFuZCBkZXRlcm1pbmVzIHRoZSBzY3JvbGxMZWZ0IGFuZCBzY3JvbGxUb3ANCiAgICogQGZ1bmN0aW9uIGxlZnRtb3ZlDQogICAqDQogICAqLw0KICBsZWZ0bW92ZSAoKSB7DQogICAgY29uc3Qgc2Nyb2xsUmVmID0gdGhpcy5zY3JvbGxpbmcNCiAgICBpZiAoDQogICAgICB0aGlzLnByb3BlcnRpZXMuVGFiT3JpZW50YXRpb24gPT09IDAgfHwNCiAgICAgIHRoaXMucHJvcGVydGllcy5UYWJPcmllbnRhdGlvbiA9PT0gMQ0KICAgICkgew0KICAgICAgc2Nyb2xsUmVmLnNjcm9sbExlZnQhIC09IDUwDQogICAgICBpZiAodGhpcy5zY3JvbGxpbmcpIHsNCiAgICAgICAgY29uc3QgcmlnaHRCdXR0b24gPSB0aGlzLmJ1dHRvblN0eWxlUmVmLmNoaWxkcmVuWzFdIGFzIEhUTUxCdXR0b25FbGVtZW50DQogICAgICAgIGNvbnN0IGxlZnRCdXR0b24gPSB0aGlzLmJ1dHRvblN0eWxlUmVmLmNoaWxkcmVuWzBdIGFzIEhUTUxCdXR0b25FbGVtZW50DQogICAgICAgIGlmICh0aGlzLnNjcm9sbGluZy5zY3JvbGxMZWZ0ID49ICh0aGlzLnNjcm9sbGluZy5zY3JvbGxXaWR0aCAtIHRoaXMuc2Nyb2xsaW5nLmNsaWVudFdpZHRoKSkgew0KICAgICAgICAgIHJpZ2h0QnV0dG9uLnN0eWxlLm9wYWNpdHkgPSAnMC40Jw0KICAgICAgICAgIGxlZnRCdXR0b24uc3R5bGUub3BhY2l0eSA9ICcxJw0KICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2Nyb2xsaW5nLnNjcm9sbExlZnQgPT09IDApIHsNCiAgICAgICAgICBsZWZ0QnV0dG9uLnN0eWxlLm9wYWNpdHkgPSAnMC40Jw0KICAgICAgICAgIHJpZ2h0QnV0dG9uLnN0eWxlLm9wYWNpdHkgPSAnMScNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBsZWZ0QnV0dG9uLnN0eWxlLm9wYWNpdHkgPSAnMScNCiAgICAgICAgICByaWdodEJ1dHRvbi5zdHlsZS5vcGFjaXR5ID0gJzEnDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9IGVsc2Ugew0KICAgICAgc2Nyb2xsUmVmLnNjcm9sbFRvcCEgLT0gNTANCiAgICAgIGlmICh0aGlzLnNjcm9sbGluZykgew0KICAgICAgICBjb25zdCByaWdodEJ1dHRvbiA9IHRoaXMuYnV0dG9uU3R5bGVSZWYuY2hpbGRyZW5bMV0gYXMgSFRNTEJ1dHRvbkVsZW1lbnQNCiAgICAgICAgY29uc3QgbGVmdEJ1dHRvbiA9IHRoaXMuYnV0dG9uU3R5bGVSZWYuY2hpbGRyZW5bMF0gYXMgSFRNTEJ1dHRvbkVsZW1lbnQNCiAgICAgICAgaWYgKHRoaXMuc2Nyb2xsaW5nLnNjcm9sbFRvcCA+PSAodGhpcy5zY3JvbGxpbmcuc2Nyb2xsSGVpZ2h0IC0gdGhpcy5zY3JvbGxpbmcuY2xpZW50SGVpZ2h0KSkgew0KICAgICAgICAgIHJpZ2h0QnV0dG9uLnN0eWxlLm9wYWNpdHkgPSAnMC40Jw0KICAgICAgICAgIGxlZnRCdXR0b24uc3R5bGUub3BhY2l0eSA9ICcxJw0KICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2Nyb2xsaW5nLnNjcm9sbFRvcCA9PT0gMCkgew0KICAgICAgICAgIGxlZnRCdXR0b24uc3R5bGUub3BhY2l0eSA9ICcwLjQnDQogICAgICAgICAgcmlnaHRCdXR0b24uc3R5bGUub3BhY2l0eSA9ICcxJw0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGxlZnRCdXR0b24uc3R5bGUub3BhY2l0eSA9ICcxJw0KICAgICAgICAgIHJpZ2h0QnV0dG9uLnN0eWxlLm9wYWNpdHkgPSAnMScNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfQ0KDQogIC8qKg0KICAgKiBAZGVzY3JpcHRpb24gdGFrZXMgdGhlIHJlZiBvZiB0aGUgZGl2IGFuZCBkZXRlcm1pbmVzIHRoZSBzY3JvbGxMZWZ0IGFuZCBzY3JvbGxUb3ANCiAgICogQGZ1bmN0aW9uIHJpZ2h0bW92ZQ0KICAgKg0KICAgKi8NCiAgcmlnaHRtb3ZlICgpIHsNCiAgICBjb25zdCBzY3JvbGxSZWYgPSB0aGlzLnNjcm9sbGluZw0KICAgIGxldCB0ZW1wU2Nyb2xsVG9wID0gc2Nyb2xsUmVmLnNjcm9sbFRvcCENCiAgICBpZiAoDQogICAgICB0aGlzLnByb3BlcnRpZXMuVGFiT3JpZW50YXRpb24gPT09IDAgfHwNCiAgICAgIHRoaXMucHJvcGVydGllcy5UYWJPcmllbnRhdGlvbiA9PT0gMQ0KICAgICkgew0KICAgICAgc2Nyb2xsUmVmLnNjcm9sbExlZnQhICs9IDUwDQogICAgICBpZiAodGhpcy5zY3JvbGxpbmcpIHsNCiAgICAgICAgY29uc3QgcmlnaHRCdXR0b24gPSB0aGlzLmJ1dHRvblN0eWxlUmVmLmNoaWxkcmVuWzFdIGFzIEhUTUxCdXR0b25FbGVtZW50DQogICAgICAgIGNvbnN0IGxlZnRCdXR0b24gPSB0aGlzLmJ1dHRvblN0eWxlUmVmLmNoaWxkcmVuWzBdIGFzIEhUTUxCdXR0b25FbGVtZW50DQogICAgICAgIGlmICh0aGlzLnNjcm9sbGluZy5zY3JvbGxMZWZ0ID49ICh0aGlzLnNjcm9sbGluZy5zY3JvbGxXaWR0aCAtIHRoaXMuc2Nyb2xsaW5nLmNsaWVudFdpZHRoIC0gMSkpIHsNCiAgICAgICAgICByaWdodEJ1dHRvbi5zdHlsZS5vcGFjaXR5ID0gJzAuNCcNCiAgICAgICAgICBsZWZ0QnV0dG9uLnN0eWxlLm9wYWNpdHkgPSAnMScNCiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNjcm9sbGluZy5zY3JvbGxMZWZ0ID09PSAwKSB7DQogICAgICAgICAgbGVmdEJ1dHRvbi5zdHlsZS5vcGFjaXR5ID0gJzAuNCcNCiAgICAgICAgICByaWdodEJ1dHRvbi5zdHlsZS5vcGFjaXR5ID0gJzEnDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgbGVmdEJ1dHRvbi5zdHlsZS5vcGFjaXR5ID0gJzEnDQogICAgICAgICAgcmlnaHRCdXR0b24uc3R5bGUub3BhY2l0eSA9ICcxJw0KICAgICAgICB9DQogICAgICB9DQogICAgfSBlbHNlIHsNCiAgICAgIHRlbXBTY3JvbGxUb3AgKz0gNTANCiAgICAgIHNjcm9sbFJlZi5zY3JvbGxUb3AgPSB0ZW1wU2Nyb2xsVG9wDQogICAgICBpZiAodGhpcy5zY3JvbGxpbmcpIHsNCiAgICAgICAgY29uc3QgcmlnaHRCdXR0b24gPSB0aGlzLmJ1dHRvblN0eWxlUmVmLmNoaWxkcmVuWzFdIGFzIEhUTUxCdXR0b25FbGVtZW50DQogICAgICAgIGNvbnN0IGxlZnRCdXR0b24gPSB0aGlzLmJ1dHRvblN0eWxlUmVmLmNoaWxkcmVuWzBdIGFzIEhUTUxCdXR0b25FbGVtZW50DQogICAgICAgIGlmICh0aGlzLnNjcm9sbGluZy5zY3JvbGxUb3AgPj0gKHRoaXMuc2Nyb2xsaW5nLnNjcm9sbEhlaWdodCAtIHRoaXMuc2Nyb2xsaW5nLmNsaWVudEhlaWdodCAtIDEpKSB7DQogICAgICAgICAgcmlnaHRCdXR0b24uc3R5bGUub3BhY2l0eSA9ICcwLjQnDQogICAgICAgICAgbGVmdEJ1dHRvbi5zdHlsZS5vcGFjaXR5ID0gJzEnDQogICAgICAgIH0gZWxzZSBpZiAodGhpcy5zY3JvbGxpbmcuc2Nyb2xsVG9wID09PSAwKSB7DQogICAgICAgICAgbGVmdEJ1dHRvbi5zdHlsZS5vcGFjaXR5ID0gJzAuNCcNCiAgICAgICAgICByaWdodEJ1dHRvbi5zdHlsZS5vcGFjaXR5ID0gJzEnDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgbGVmdEJ1dHRvbi5zdHlsZS5vcGFjaXR5ID0gJzEnDQogICAgICAgICAgcmlnaHRCdXR0b24uc3R5bGUub3BhY2l0eSA9ICcxJw0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICB9DQoNCiAgLyoqDQogICAqIEBkZXNjcmlwdGlvbiB0YWtlcyB0aGUgaW5kZXggVmFsdWUgYW5kIHNldHMgdGhlIFZhbHVlIHByb3BlcnR5DQogICAqIEBmdW5jdGlvbiBzZXRWYWx1ZQ0KICAgKg0KICAgKi8NCiAgc2V0VmFsdWUgKHZhbHVlOiBudW1iZXIpIHsNCiAgICB0aGlzLnVwZGF0ZWRWYWx1ZSA9IHZhbHVlDQogICAgdGhpcy51cGRhdGVEYXRhTW9kZWwoeyBwcm9wZXJ0eU5hbWU6ICdWYWx1ZScsIHZhbHVlOiB2YWx1ZSB9KQ0KICAgIHJldHVybiB0cnVlDQogIH0NCiAgLyoqDQogICAqIEBkZXNjcmlwdGlvbiBzdHlsZSBvYmplY3QgaXMgcGFzc2VkIHRvIDpzdHlsZSBhdHRyaWJ1dGUgaW4gZGl2IHRhZw0KICAgKiBkeW5hbWljYWxseSBjaGFuZ2luZyB0aGUgc3R5bGVzIG9mIHRoZSBjb21wb25lbnQgYmFzZWQgb24gZGF0YQ0KICAgKiBAZnVuY3Rpb24gZ2V0VGFiU3R5bGUNCiAgICoNCiAgICovDQogIHByb3RlY3RlZCBnZXQgZ2V0VGFiU3R5bGUgKCk6IFBhcnRpYWw8Q1NTU3R5bGVEZWNsYXJhdGlvbj4gew0KICAgIGNvbnN0IGNvbnRyb2xQcm9wID0gdGhpcy5wcm9wZXJ0aWVzDQogICAgcmV0dXJuIHsNCiAgICAgIGRpc3BsYXk6DQogICAgICAgIGNvbnRyb2xQcm9wLlRhYk9yaWVudGF0aW9uID09PSAwIHx8IGNvbnRyb2xQcm9wLlRhYk9yaWVudGF0aW9uID09PSAxDQogICAgICAgICAgPyAnaW5saW5lLWJsb2NrJw0KICAgICAgICAgIDogJ2Jsb2NrJywNCiAgICAgIGN1cnNvcjoNCiAgICAgICAgY29udHJvbFByb3AuTW91c2VQb2ludGVyICE9PSAwIHx8IGNvbnRyb2xQcm9wLk1vdXNlSWNvbiAhPT0gJycNCiAgICAgICAgICA/IHRoaXMuZ2V0TW91c2VDdXJzb3JEYXRhDQogICAgICAgICAgOiAnZGVmYXVsdCcNCiAgICB9DQogIH0NCg0KICAvKioNCiAgICogQGRlc2NyaXB0aW9uIGdldFJlcGVhdCByZXR1cm5zIHN0cmluZyB2YWx1ZSBmcm9tDQogICAqIGNvbnRyb2xQcm9wZXJ0aWVzLmV4dHJhRGF0YVJlcGVhdFByb3ANCiAgICogQGZ1bmN0aW9uIGdldFJlcGVhdA0KICAgKi8NCiAgcHJvdGVjdGVkIGdldCBnZXRSZXBlYXREYXRhICgpOiBzdHJpbmcgew0KICAgIGlmICh0aGlzLnNlbGVjdGVkUGFnZURhdGEpIHsNCiAgICAgIGNvbnN0IHBpY3R1cmUgPSB0aGlzLnNlbGVjdGVkUGFnZURhdGEucHJvcGVydGllcy5QaWN0dXJlIQ0KICAgICAgY29uc3QgcGljdHVyZVRpbGluZyA9IHRoaXMuc2VsZWN0ZWRQYWdlRGF0YS5wcm9wZXJ0aWVzLlBpY3R1cmVUaWxpbmchDQogICAgICBjb25zdCBwaWN0dXJlU2l6ZU1vZGUgPSB0aGlzLnNlbGVjdGVkUGFnZURhdGEucHJvcGVydGllcy5QaWN0dXJlU2l6ZU1vZGUhDQogICAgICByZXR1cm4gY29udHJvbFByb3BlcnRpZXMuZ2V0UmVwZWF0RGF0YVByb3AoDQogICAgICAgIHBpY3R1cmUsDQogICAgICAgIHBpY3R1cmVUaWxpbmcsDQogICAgICAgIHBpY3R1cmVTaXplTW9kZQ0KICAgICAgKQ0KICAgIH0gZWxzZSB7DQogICAgICByZXR1cm4gJycNCiAgICB9DQogIH0NCg0KICAvKioNCiAgICogQGRlc2NyaXB0aW9uIHN0eWxlIG9iamVjdCBpcyBwYXNzZWQgdG8gOnN0eWxlIGF0dHJpYnV0ZSBpbiBkaXYgdGFnDQogICAqIGR5bmFtaWNhbGx5IGNoYW5naW5nIHRoZSBzdHlsZXMgb2YgdGhlIGNvbXBvbmVudCBiYXNlZCBvbiBkYXRhDQogICAqIEBmdW5jdGlvbiBzdHlsZUNvbnRlbnRPYmoNCiAgICoNCiAgICovDQogIHByb3RlY3RlZCBnZXQgc3R5bGVDb250ZW50T2JqICgpOiBQYXJ0aWFsPENTU1N0eWxlRGVjbGFyYXRpb24+IHsNCiAgICBjb25zdCBjb250cm9sUHJvcCA9IHRoaXMucHJvcGVydGllcw0KICAgIGlmICh0aGlzLnNjcm9sbGluZykgew0KICAgICAgVnVlLm5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgdGhpcy50b3BWYWx1ZSA9IHRoaXMuc2Nyb2xsaW5nLm9mZnNldEhlaWdodCENCiAgICAgICAgdGhpcy53aWR0aFZhbHVlID0gdGhpcy5zY3JvbGxpbmcuY2xpZW50V2lkdGgNCiAgICAgIH0pDQogICAgfQ0KICAgIHJldHVybiB7DQogICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJywNCiAgICAgIGRpc3BsYXk6DQogICAgICBjb250cm9sUHJvcC5NdWx0aVJvdyA/ICdibG9jaycgOiBjb250cm9sUHJvcC5IZWlnaHQhIDwgY29udHJvbFByb3AuVGFiRml4ZWRIZWlnaHQhDQogICAgICAgID8gJ25vbmUnDQogICAgICAgIDogY29udHJvbFByb3AuV2lkdGghIDwgY29udHJvbFByb3AuVGFiRml4ZWRXaWR0aCENCiAgICAgICAgICA/ICdub25lJw0KICAgICAgICAgIDogY29udHJvbFByb3AuV2lkdGghIDwgMzAgfHwgY29udHJvbFByb3AuSGVpZ2h0ISA8IDMwDQogICAgICAgICAgICA/ICdub25lJw0KICAgICAgICAgICAgOiBjb250cm9sUHJvcC5UYWJPcmllbnRhdGlvbiA9PT0gMyA/IGNvbnRyb2xQcm9wLldpZHRoISA8ICh0aGlzLndpZHRoVmFsdWUgKyAxMikgPyAnbm9uZScgOiAnYmxvY2snIDogJ2Jsb2NrJywNCiAgICAgIHRvcDoNCiAgICAgICAgY29udHJvbFByb3AuU3R5bGUgIT09IDINCiAgICAgICAgICA/IGNvbnRyb2xQcm9wLlN0eWxlID09PSAxDQogICAgICAgICAgICA/IGNvbnRyb2xQcm9wLlRhYk9yaWVudGF0aW9uID09PSAwDQogICAgICAgICAgICAgID8gY29udHJvbFByb3AuTXVsdGlSb3cNCiAgICAgICAgICAgICAgICA/IHRoaXMudG9wVmFsdWUgKyAncHgnDQogICAgICAgICAgICAgICAgOiBjb250cm9sUHJvcC5UYWJGaXhlZEhlaWdodCEgPiAwDQogICAgICAgICAgICAgICAgICA/IGNvbnRyb2xQcm9wLlRhYkZpeGVkSGVpZ2h0ISArIDEzICsgJ3B4Jw0KICAgICAgICAgICAgICAgICAgOiBjb250cm9sUHJvcC5UYWJGaXhlZEhlaWdodCEgPT09IDANCiAgICAgICAgICAgICAgICAgICAgPyB0aGlzLnRlbXBIZWlnaHQgKyAxOSArICdweCcNCiAgICAgICAgICAgICAgICAgICAgOiAnMzZweCcNCiAgICAgICAgICAgICAgOiAnM3B4Jw0KICAgICAgICAgICAgOiBjb250cm9sUHJvcC5UYWJPcmllbnRhdGlvbiA9PT0gMA0KICAgICAgICAgICAgICA/IGNvbnRyb2xQcm9wLk11bHRpUm93DQogICAgICAgICAgICAgICAgPyB0aGlzLnRvcFZhbHVlICsgJ3B4Jw0KICAgICAgICAgICAgICAgIDogY29udHJvbFByb3AuVGFiRml4ZWRIZWlnaHQhID4gMA0KICAgICAgICAgICAgICAgICAgPyBjb250cm9sUHJvcC5UYWJGaXhlZEhlaWdodCEgKyAxMCArICdweCcNCiAgICAgICAgICAgICAgICAgIDogY29udHJvbFByb3AuVGFiRml4ZWRIZWlnaHQhID09PSAwDQogICAgICAgICAgICAgICAgICAgID8gdGhpcy50ZW1wSGVpZ2h0ICsgMTYgKyAncHgnDQogICAgICAgICAgICAgICAgICAgIDogJzMzcHgnDQogICAgICAgICAgICAgIDogJzBweCcNCiAgICAgICAgICA6ICcwcHgnLA0KICAgICAgaGVpZ2h0Og0KICAgICAgICBjb250cm9sUHJvcC5TdHlsZSAhPT0gMg0KICAgICAgICAgID8gY29udHJvbFByb3AuU3R5bGUgPT09IDEgPyBjb250cm9sUHJvcC5UYWJPcmllbnRhdGlvbiA9PT0gMCB8fCBjb250cm9sUHJvcC5UYWJPcmllbnRhdGlvbiA9PT0gMQ0KICAgICAgICAgICAgPyBjb250cm9sUHJvcC5NdWx0aVJvdw0KICAgICAgICAgICAgICA/IChjb250cm9sUHJvcC5IZWlnaHQhIC0NCiAgICAgICAgICAgICAgICB0aGlzLnRvcFZhbHVlICsgNSkgKyAncHgnDQogICAgICAgICAgICAgIDogY29udHJvbFByb3AuVGFiRml4ZWRIZWlnaHQhID4gMA0KICAgICAgICAgICAgICAgID8gY29udHJvbFByb3AuVGFiT3JpZW50YXRpb24gPT09IDANCiAgICAgICAgICAgICAgICAgID8gY29udHJvbFByb3AuSGVpZ2h0ISAtIGNvbnRyb2xQcm9wLlRhYkZpeGVkSGVpZ2h0ISAtIDE5ICsgJ3B4Jw0KICAgICAgICAgICAgICAgICAgOiBjb250cm9sUHJvcC5IZWlnaHQhIC0gY29udHJvbFByb3AuVGFiRml4ZWRIZWlnaHQhIC0gMTQgKyAncHgnDQogICAgICAgICAgICAgICAgOiBjb250cm9sUHJvcC5UYWJGaXhlZEhlaWdodCEgPT09IDANCiAgICAgICAgICAgICAgICAgID8gY29udHJvbFByb3AuRm9udCEuRm9udFNpemUhID09PSA3Mg0KICAgICAgICAgICAgICAgICAgICA/IGNvbnRyb2xQcm9wLkhlaWdodCEgLSBjb250cm9sUHJvcC5Gb250IS5Gb250U2l6ZSEgLSAyNyArICdweCcNCiAgICAgICAgICAgICAgICAgICAgOiBjb250cm9sUHJvcC5IZWlnaHQhIC0gY29udHJvbFByb3AuRm9udCEuRm9udFNpemUhIC0gMjUgKyAncHgnDQogICAgICAgICAgICAgICAgICA6IGNvbnRyb2xQcm9wLlRhYk9yaWVudGF0aW9uID09PSAxDQogICAgICAgICAgICAgICAgICAgID8gYCR7Y29udHJvbFByb3AuSGVpZ2h0ISAtIDMwfXB4YA0KICAgICAgICAgICAgICAgICAgICA6IGAke2NvbnRyb2xQcm9wLkhlaWdodCEgLSA0NH1weGANCiAgICAgICAgICAgIDogYCR7Y29udHJvbFByb3AuSGVpZ2h0ISAtIDEwfXB4YA0KICAgICAgICAgICAgOiBjb250cm9sUHJvcC5UYWJPcmllbnRhdGlvbiA9PT0gMCB8fCBjb250cm9sUHJvcC5UYWJPcmllbnRhdGlvbiA9PT0gMQ0KICAgICAgICAgICAgICA/IGNvbnRyb2xQcm9wLk11bHRpUm93DQogICAgICAgICAgICAgICAgPyAoY29udHJvbFByb3AuSGVpZ2h0ISAtDQogICAgICAgICAgICAgICAgdGhpcy50b3BWYWx1ZSArIDUpICsgJ3B4Jw0KICAgICAgICAgICAgICAgIDogY29udHJvbFByb3AuVGFiRml4ZWRIZWlnaHQhID4gMA0KICAgICAgICAgICAgICAgICAgPyBjb250cm9sUHJvcC5UYWJPcmllbnRhdGlvbiA9PT0gMA0KICAgICAgICAgICAgICAgICAgICA/IGNvbnRyb2xQcm9wLkhlaWdodCEgLSBjb250cm9sUHJvcC5UYWJGaXhlZEhlaWdodCEgLSAxMCArICdweCcNCiAgICAgICAgICAgICAgICAgICAgOiBjb250cm9sUHJvcC5IZWlnaHQhIC0gY29udHJvbFByb3AuVGFiRml4ZWRIZWlnaHQhIC0gNSArICdweCcNCiAgICAgICAgICAgICAgICAgIDogY29udHJvbFByb3AuVGFiRml4ZWRIZWlnaHQhID09PSAwDQogICAgICAgICAgICAgICAgICAgID8gY29udHJvbFByb3AuRm9udCEuRm9udFNpemUhID09PSA3Mg0KICAgICAgICAgICAgICAgICAgICAgID8gY29udHJvbFByb3AuSGVpZ2h0ISAtIGNvbnRyb2xQcm9wLkZvbnQhLkZvbnRTaXplISAtIDE4ICsgJ3B4Jw0KICAgICAgICAgICAgICAgICAgICAgIDogY29udHJvbFByb3AuSGVpZ2h0ISAtIGNvbnRyb2xQcm9wLkZvbnQhLkZvbnRTaXplISAtIDE2ICsgJ3B4Jw0KICAgICAgICAgICAgICAgICAgICA6IGNvbnRyb2xQcm9wLlRhYk9yaWVudGF0aW9uID09PSAxDQogICAgICAgICAgICAgICAgICAgICAgPyBgJHtjb250cm9sUHJvcC5IZWlnaHQhIC0gMjF9cHhgDQogICAgICAgICAgICAgICAgICAgICAgOiBgJHtjb250cm9sUHJvcC5IZWlnaHQhIC0gMzV9cHhgDQogICAgICAgICAgICAgIDogYCR7Y29udHJvbFByb3AuSGVpZ2h0ISAtIDF9cHhgDQogICAgICAgICAgOiBgJHtjb250cm9sUHJvcC5IZWlnaHQhIC0gMX1weGAsDQogICAgICB3aWR0aDoNCiAgICAgICAgY29udHJvbFByb3AuU3R5bGUgIT09IDINCiAgICAgICAgICA/IGNvbnRyb2xQcm9wLlN0eWxlID09PSAxID8gY29udHJvbFByb3AuVGFiT3JpZW50YXRpb24gPT09IDAgfHwgY29udHJvbFByb3AuVGFiT3JpZW50YXRpb24gPT09IDEgPyBgJHtjb250cm9sUHJvcC5XaWR0aCEgLSA5fXB4YCA6IGNvbnRyb2xQcm9wLlRhYkZpeGVkV2lkdGghID4gMCA/IGNvbnRyb2xQcm9wLldpZHRoISAtIGNvbnRyb2xQcm9wLlRhYkZpeGVkV2lkdGghIC0gMTYgKyAncHgnIDogY29udHJvbFByb3AuVGFiRml4ZWRXaWR0aCEgPT09IDAgPyBjb250cm9sUHJvcC5UYWJPcmllbnRhdGlvbiA9PT0gMiB8fCBjb250cm9sUHJvcC5UYWJPcmllbnRhdGlvbiA9PT0gMyA/IGAke2NvbnRyb2xQcm9wLldpZHRoISAtIHRoaXMudGVtcFdpZHRoIC0gMTl9cHhgIDogY29udHJvbFByb3AuV2lkdGghIC0gY29udHJvbFByb3AuRm9udCEuRm9udFNpemUhIC0gMjYgKyAncHgnIDogJ2NhbGMoMTAwJSAtIDUwcHgpJw0KICAgICAgICAgICAgOiBjb250cm9sUHJvcC5UYWJPcmllbnRhdGlvbiA9PT0gMCB8fCBjb250cm9sUHJvcC5UYWJPcmllbnRhdGlvbiA9PT0gMQ0KICAgICAgICAgICAgICA/IGAke2NvbnRyb2xQcm9wLldpZHRoISAtIDN9cHhgDQogICAgICAgICAgICAgIDogY29udHJvbFByb3AuVGFiRml4ZWRXaWR0aCEgPiAwDQogICAgICAgICAgICAgICAgPyBjb250cm9sUHJvcC5UYWJPcmllbnRhdGlvbiA9PT0gMyA/IChjb250cm9sUHJvcC5XaWR0aCEgLSB0aGlzLndpZHRoVmFsdWUpICsgJ3B4JyA6IGNvbnRyb2xQcm9wLldpZHRoISAtIGNvbnRyb2xQcm9wLlRhYkZpeGVkV2lkdGghIC0gMTAgKyAncHgnDQogICAgICAgICAgICAgICAgOiBjb250cm9sUHJvcC5UYWJGaXhlZFdpZHRoISA9PT0gMA0KICAgICAgICAgICAgICAgICAgPyBjb250cm9sUHJvcC5UYWJPcmllbnRhdGlvbiA9PT0gMiB8fA0KICAgICAgICAgICAgICBjb250cm9sUHJvcC5UYWJPcmllbnRhdGlvbiA9PT0gMw0KICAgICAgICAgICAgICAgICAgICA/IGNvbnRyb2xQcm9wLk11bHRpUm93ID8gKGNvbnRyb2xQcm9wLldpZHRoISAtIHRoaXMud2lkdGhWYWx1ZSkgKyAncHgnIDogYCR7Y29udHJvbFByb3AuV2lkdGghIC0gdGhpcy50ZW1wV2lkdGggLSAxM31weGANCiAgICAgICAgICAgICAgICAgICAgOiBjb250cm9sUHJvcC5XaWR0aCEgLSBjb250cm9sUHJvcC5Gb250IS5Gb250U2l6ZSEgLSAyMCArICdweCcNCiAgICAgICAgICAgICAgICAgIDogJ2NhbGMoMTAwJSAtIDQ0cHgpJw0KICAgICAgICAgIDogYCR7Y29udHJvbFByb3AuV2lkdGghIC0gM31weGAsDQogICAgICBsZWZ0Og0KICAgICAgICBjb250cm9sUHJvcC5TdHlsZSAhPT0gMg0KICAgICAgICAgID8gY29udHJvbFByb3AuU3R5bGUgPT09IDEgPyBjb250cm9sUHJvcC5UYWJPcmllbnRhdGlvbiA9PT0gMg0KICAgICAgICAgICAgPyBjb250cm9sUHJvcC5NdWx0aVJvdyA/IHRoaXMud2lkdGhWYWx1ZSArICdweCcgOiBjb250cm9sUHJvcC5UYWJGaXhlZFdpZHRoISA+IDANCiAgICAgICAgICAgICAgPyBjb250cm9sUHJvcC5UYWJGaXhlZFdpZHRoISArIDEzICsgJ3B4Jw0KICAgICAgICAgICAgICA6IGNvbnRyb2xQcm9wLlRhYkZpeGVkV2lkdGghID09PSAwDQogICAgICAgICAgICAgICAgPyBjb250cm9sUHJvcC5UYWJPcmllbnRhdGlvbiA9PT0gMiB8fA0KICAgICAgICAgICAgICAgIGNvbnRyb2xQcm9wLlRhYk9yaWVudGF0aW9uID09PSAzDQogICAgICAgICAgICAgICAgICA/IGAke3RoaXMudGVtcFdpZHRoICsgMTN9cHhgDQogICAgICAgICAgICAgICAgICA6IGNvbnRyb2xQcm9wLkZvbnQhLkZvbnRTaXplISArIDIzICsgJ3B4Jw0KICAgICAgICAgICAgICAgIDogJzQzcHgnDQogICAgICAgICAgICA6ICczcHgnDQogICAgICAgICAgICA6IGNvbnRyb2xQcm9wLlRhYk9yaWVudGF0aW9uID09PSAyDQogICAgICAgICAgICAgID8gY29udHJvbFByb3AuTXVsdGlSb3cgPyB0aGlzLndpZHRoVmFsdWUgKyAncHgnIDogY29udHJvbFByb3AuVGFiRml4ZWRXaWR0aCEgPiAwDQogICAgICAgICAgICAgICAgPyBjb250cm9sUHJvcC5UYWJGaXhlZFdpZHRoISArIDEyICsgJ3B4Jw0KICAgICAgICAgICAgICAgIDogY29udHJvbFByb3AuVGFiRml4ZWRXaWR0aCEgPT09IDANCiAgICAgICAgICAgICAgICAgID8gY29udHJvbFByb3AuVGFiT3JpZW50YXRpb24gPT09IDIgfHwNCiAgICAgICAgICAgICAgICBjb250cm9sUHJvcC5UYWJPcmllbnRhdGlvbiA9PT0gMw0KICAgICAgICAgICAgICAgICAgICA/IGAke3RoaXMudGVtcFdpZHRoICsgMTJ9cHhgDQogICAgICAgICAgICAgICAgICAgIDogY29udHJvbFByb3AuRm9udCEuRm9udFNpemUhICsgMjAgKyAncHgnDQogICAgICAgICAgICAgICAgICA6ICc0MHB4Jw0KICAgICAgICAgICAgICA6ICcwcHgnDQogICAgICAgICAgOiAnMHB4JywNCiAgICAgIHBhZGRpbmc6IGNvbnRyb2xQcm9wLk11bHRpUm93ID8gJzBweCcgOiAnMHB4JywNCiAgICAgIGJveFNoYWRvdzoNCiAgICAgICAgY29udHJvbFByb3AuVGFiT3JpZW50YXRpb24gPT09IDAgPyAnMXB4IDBweCBncmF5JyA6ICcxcHggMXB4IGdyYXknDQogICAgfQ0KICB9DQogIC8qKg0KICAgKiBAZGVzY3JpcHRpb24gUmV0dXJucyBzdHJpbmcgdmFsdWUgZm9yIENTUyBiYWNrZ3JvdW5kIHN0eWxlIGZvciBkb3R0ZWQgcGF0dGVuDQogICAqIEBmdW5jdGlvbiBnZXRTYW1wbGVEb3RQYXR0ZXJuDQogICAqLw0KICBwcm90ZWN0ZWQgZ2V0IGdldFNhbXBsZURvdFBhdHRlcm4gKCkgew0KICAgIGNvbnN0IGRvdFNpemUgPSAxMw0KICAgIGNvbnN0IGRvdFNwYWNlID0gOQ0KICAgIHJldHVybiB7DQogICAgICBiYWNrZ3JvdW5kUG9zaXRpb246IGAke2RvdFNpemV9cHggJHtkb3RTaXplfXB4YCwNCiAgICAgIGJhY2tncm91bmRJbWFnZTogYHJhZGlhbC1ncmFkaWVudCgke3RoaXMucHJvcGVydGllcy5Gb3JlQ29sb3J9IDExJSwgdHJhbnNwYXJlbnQgMTAlKWAsDQogICAgICBiYWNrZ3JvdW5kU2l6ZTogYCR7ZG90U3BhY2V9cHggJHtkb3RTcGFjZX1weGANCiAgICB9DQogIH0NCg0KICAvKioNCiAgICogQGRlc2NyaXB0aW9uIGdldFBvc2l0aW9uIHJldHVybnMgc3RyaW5nIHZhbHVlIGZyb20NCiAgICogY29udHJvbFByb3BlcnRpZXMucGljdHVyZVBvc2l0aW9uUHJvcA0KICAgKiBAZnVuY3Rpb24gZ2V0UG9zaXRpb24NCiAgICogQHJldHVybnMgc3RyaW5nIHZhbHVlDQogICAqLw0KICBwcm90ZWN0ZWQgZ2V0IGdldFBvc2l0aW9uICgpIHsNCiAgICBpZiAodGhpcy5zZWxlY3RlZFBhZ2VEYXRhKSB7DQogICAgICBjb25zdCBwaWN0dXJlID0gdGhpcy5zZWxlY3RlZFBhZ2VEYXRhLnByb3BlcnRpZXMuUGljdHVyZSENCiAgICAgIGNvbnN0IHBpY3R1cmVBbGlnbm1lbnQgPSB0aGlzLnNlbGVjdGVkUGFnZURhdGEucHJvcGVydGllcw0KICAgICAgICAuUGljdHVyZUFsaWdubWVudCENCiAgICAgIGNvbnN0IHBpY3R1cmVTaXplTW9kZSA9IHRoaXMuc2VsZWN0ZWRQYWdlRGF0YS5wcm9wZXJ0aWVzLlBpY3R1cmVTaXplTW9kZSENCiAgICAgIHJldHVybiBjb250cm9sUHJvcGVydGllcy5nZXRQb3NpdGlvblByb3AoDQogICAgICAgIHBpY3R1cmUsDQogICAgICAgIHBpY3R1cmVBbGlnbm1lbnQsDQogICAgICAgIHBpY3R1cmVTaXplTW9kZQ0KICAgICAgKQ0KICAgIH0gZWxzZSB7DQogICAgICByZXR1cm4gJycNCiAgICB9DQogIH0NCg0KICAvKioNCiAgICogQGRlc2NyaXB0aW9uIGdldFNpemVNb2RlIHJldHVybnMgc3RyaW5nIHZhbHVlIGZyb20NCiAgICogY29udHJvbFByb3BlcnRpZXMucGljdHVyZVNpemVNb2RlUHJvcA0KICAgKiBAZnVuY3Rpb24gZ2V0U2l6ZU1vZGUNCiAgICogQHJldHVybnMgc3RyaW5nIHZhbHVlDQogICAqLw0KICBwcm90ZWN0ZWQgZ2V0IGdldFNpemVNb2RlICgpOiBzdHJpbmcgew0KICAgIGlmICh0aGlzLnNlbGVjdGVkUGFnZURhdGEpIHsNCiAgICAgIGNvbnN0IGluZGV4OiBudW1iZXIgPSB0aGlzLnNlbGVjdGVkUGFnZURhdGEucHJvcGVydGllcy5QaWN0dXJlU2l6ZU1vZGUhDQogICAgICByZXR1cm4gY29udHJvbFByb3BlcnRpZXMuZ2V0U2l6ZU1vZGVQcm9wKGluZGV4KQ0KICAgIH0gZWxzZSB7DQogICAgICByZXR1cm4gJycNCiAgICB9DQogIH0NCg0KICAvKioNCiAgICogQGRlc2NyaXB0aW9uIGdldFNjcm9sbEJhclBhZ2UgcmV0dXJucyBwcm9wRGF0YSBiYXNlZCBvbiBrZWVwU2Nyb2xsQmFyIGFuZCBzY3JvbGxCYXIgdmFsdWVzDQogICAqIEBmdW5jdGlvbiBnZXRTY3JvbGxCYXJQYWdlDQogICAqLw0KICBnZXQgZ2V0U2Nyb2xsQmFyUGFnZSAoKSB7DQogICAgaWYgKHRoaXMuc2VsZWN0ZWRQYWdlRGF0YSkgew0KICAgICAgY29uc3Qga2VlcFNjcm9sbEJhcjogbnVtYmVyID0gdGhpcy5zZWxlY3RlZFBhZ2VEYXRhLnByb3BlcnRpZXMNCiAgICAgICAgLktlZXBTY3JvbGxCYXJzVmlzaWJsZSENCiAgICAgIGNvbnN0IHNjcm9sbEJhcjogbnVtYmVyID0gdGhpcy5zZWxlY3RlZFBhZ2VEYXRhLnByb3BlcnRpZXMuU2Nyb2xsQmFycyENCiAgICAgIHJldHVybiBjb250cm9sUHJvcGVydGllcy5zZXRTY3JvbGxCYXJQcm9wKGtlZXBTY3JvbGxCYXIsIHNjcm9sbEJhcikNCiAgICB9IGVsc2Ugew0KICAgICAgcmV0dXJuICcnDQogICAgfQ0KICB9DQoNCiAgLyoqDQogICAqIEBkZXNjcmlwdGlvbiByZXR1cm5zIHRoZSBzZWxlY3RlZCBwYWdlDQogICAqIGR5bmFtaWNhbGx5IGJhc2VkIG9uIHRoZSBzZWxlY3RlZFBhZ2VJRA0KICAgKiBAZnVuY3Rpb24gc2VsZWN0ZWRQYWdlRGF0YQ0KICAgKg0KICAgKi8NCiAgZ2V0IHNlbGVjdGVkUGFnZURhdGEgKCkgew0KICAgIGlmICh0aGlzLnNlbGVjdGVkUGFnZUlEKSB7DQogICAgICByZXR1cm4gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVt0aGlzLnNlbGVjdGVkUGFnZUlEXQ0KICAgIH0gZWxzZSB7DQogICAgICByZXR1cm4gJycNCiAgICB9DQogIH0NCg0KICB1cGRhdGVNdWx0aVJvd2ZvckxlZnRBbmRSaWdodCAoKSB7DQogICAgaWYgKHRoaXMucHJvcGVydGllcy5NdWx0aVJvdykgew0KICAgICAgdGhpcy5yb3dzQ291bnQgPSAnJw0KICAgICAgaWYgKHRoaXMucHJvcGVydGllcy5UYWJPcmllbnRhdGlvbiA9PT0gMiB8fCB0aGlzLnByb3BlcnRpZXMuVGFiT3JpZW50YXRpb24gPT09IDMpIHsNCiAgICAgICAgY29uc3QgdG90YWxIZWlnaHQgPSB0aGlzLnByb3BlcnRpZXMuSGVpZ2h0IQ0KICAgICAgICB0aGlzLndpZHRoVmFsdWUgPSB0aGlzLnNjcm9sbGluZy5jbGllbnRXaWR0aA0KICAgICAgICBjb25zdCBrID0gdGhpcy5wcm9wZXJ0aWVzLlZhbHVlDQogICAgICAgIGxldCBzdW0gPSAwDQogICAgICAgIGxldCBjb3VudCA9IHRoaXMuc2Nyb2xsaW5nLmNoaWxkcmVuLmxlbmd0aA0KICAgICAgICBjb25zdCBhID0gdGhpcy5zY3JvbGxpbmcuY2hpbGRyZW5bMF0uY2hpbGRyZW5bMF0uY2hpbGRyZW5bMV0uY2xpZW50SGVpZ2h0ICsgNSArICdweCcNCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnNjcm9sbGluZy5jaGlsZHJlbi5sZW5ndGg7IGkrKykgew0KICAgICAgICAgIHN1bSArPSAodGhpcy5zY3JvbGxpbmcuY2hpbGRyZW5baV0uY2hpbGRyZW5bMF0uY2hpbGRyZW5bMV0uY2xpZW50SGVpZ2h0ICsgNSkNCiAgICAgICAgfQ0KICAgICAgICBpZiAodG90YWxIZWlnaHQgPCBzdW0pIHsNCiAgICAgICAgICBjb3VudCA9IHRvdGFsSGVpZ2h0IC8gKHRoaXMuc2Nyb2xsaW5nLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzFdLmNsaWVudEhlaWdodCArIDUpDQogICAgICAgIH0NCiAgICAgICAgaWYgKGNvdW50IDwgdGhpcy5zY3JvbGxpbmcuY2hpbGRyZW4ubGVuZ3RoKSB7DQogICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBNYXRoLnRydW5jKGNvdW50KTsgaisrKSB7DQogICAgICAgICAgICB0aGlzLnJvd3NDb3VudCA9IHRoaXMucm93c0NvdW50ICsgKHBhcnNlSW50KGEpICsgNSArICdweCcpICsgJyAnDQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgTWF0aC50cnVuYyhjb3VudCk7IGorKykgew0KICAgICAgICAgICAgaWYgKGogPT09IGspIHsNCiAgICAgICAgICAgICAgdGhpcy5yb3dzQ291bnQgPSB0aGlzLnJvd3NDb3VudCArIChwYXJzZUludChhKSArIDUgKyAncHgnKSArICcgJw0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgdGhpcy5yb3dzQ291bnQgPSB0aGlzLnJvd3NDb3VudCArIGEgKyAnICcNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogIH0NCg0KICAvKioNCiAgICogQGRlc2NyaXB0aW9uIHdhdGNoZXMgY2hhbmdlcyBpbiBwcm9wQ29udHJvbERhdGEgdG8gc2V0IGF1dG9zZXQgd2hlbiB0cnVlDQogICAqIEBmdW5jdGlvbiBpc1Njcm9sbFVzZWQNCiAgICogQHBhcmFtIG9sZFZhbCBwcmV2aW91cyBwcm9wQ29udHJvbERhdGEgZGF0YQ0KICAgKiBAcGFyYW0gbmV3VmFsICBuZXcvY2hhbmdlZCBwcm9wQ29udHJvbERhdGEgZGF0YQ0KICAgKi8NCiAgQFdhdGNoKCdwcm9wZXJ0aWVzLldpZHRoJykNCiAgaXNTY3JvbGxVc2VkIChuZXdWYWw6IG51bWJlciwgb2xkVmFsOiBudW1iZXIpIHsNCiAgICB0aGlzLnNjcm9sbERpc2FibGVkVmFsaWRhdGUoKQ0KICAgIGlmICh0aGlzLnByb3BlcnRpZXMuTXVsdGlSb3cpIHsNCiAgICAgIHRoaXMudXBkYXRlTXVsdGlSb3dmb3JMZWZ0QW5kUmlnaHQoKQ0KICAgICAgdGhpcy53aWR0aFZhbHVlID0gdGhpcy5zY3JvbGxpbmcuY2xpZW50V2lkdGgNCiAgICAgIGlmICh0aGlzLnNjcm9sbGluZykgew0KICAgICAgICBWdWUubmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgIHRoaXMudG9wVmFsdWUgPSB0aGlzLnNjcm9sbGluZy5vZmZzZXRIZWlnaHQNCiAgICAgICAgICB0aGlzLndpZHRoVmFsdWUgPSB0aGlzLnNjcm9sbGluZy5jbGllbnRXaWR0aA0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgICAgY29uc3QgaW5pdGlhbExlbmd0aCA9IHRoaXMuY29udHJvbHMubGVuZ3RoIQ0KICAgICAgY29uc3QgbGVuID0gKHRoaXMudGVtcFdpZHRoICsgMTIpICogaW5pdGlhbExlbmd0aA0KICAgICAgaWYgKGxlbiAtIHRoaXMucHJvcGVydGllcy5XaWR0aCEgPj0gMCkgew0KICAgICAgICBpZiAodGhpcy5tdWx0aVJvd0NvdW50IDw9IHRoaXMuY29udHJvbHMubGVuZ3RoISkgew0KICAgICAgICAgIGNvbnN0IGEgPSBNYXRoLmNlaWwobGVuIC8gdGhpcy5wcm9wZXJ0aWVzLldpZHRoISkNCiAgICAgICAgICB0aGlzLm11bHRpUm93Q291bnQgPSBhDQogICAgICAgICAgaWYgKHRoaXMucHJvcGVydGllcy5XaWR0aCEgPD0gKHRoaXMudGVtcFdpZHRoICsgMTIpICogMikgew0KICAgICAgICAgICAgdGhpcy5tdWx0aVJvd0NvdW50ID0gYSArIDINCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSBpZiAobmV3VmFsID4gb2xkVmFsKSB7DQogICAgICAgICAgdGhpcy5tdWx0aVJvd0NvdW50ID0gdGhpcy5jb250cm9scy5sZW5ndGghDQogICAgICAgICAgY29uc3QgYSA9IE1hdGguY2VpbChsZW4gLyB0aGlzLnByb3BlcnRpZXMuV2lkdGghKQ0KICAgICAgICAgIHRoaXMubXVsdGlSb3dDb3VudCA9IGENCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5tdWx0aVJvd0NvdW50ID0gMQ0KICAgICAgfQ0KICAgIH0gZWxzZSB7DQogICAgICB0aGlzLnNjcm9sbEJ1dHRvblZlcmlmeSgpDQogICAgfQ0KICB9DQoNCiAgQFdhdGNoKCd0ZW1wV2lkdGgnKQ0KICB0ZW1wV2lkdGhWYWxpZGF0ZSAoKSB7DQogICAgaWYgKHRoaXMudGVtcFdpZHRoIDwgMzApIHsNCiAgICAgIHRoaXMudGVtcFdpZHRoID0gMzANCiAgICB9DQogIH0NCg0KICBAV2F0Y2goJ3Byb3BlcnRpZXMuVGFiT3JpZW50YXRpb24nKQ0KICBvcmllbnRWYWxpZGF0ZSAoKSB7DQogICAgdGhpcy5zY3JvbGxCdXR0b25WZXJpZnkoKQ0KICAgIHRoaXMuc2Nyb2xsRGlzYWJsZWRWYWxpZGF0ZSgpDQogICAgdGhpcy51cGRhdGVNdWx0aVJvd2ZvckxlZnRBbmRSaWdodCgpDQogICAgdGhpcy53aWR0aFZhbHVlID0gdGhpcy5zY3JvbGxpbmcuY2xpZW50V2lkdGgNCiAgICBpZiAodGhpcy5zY3JvbGxpbmcpIHsNCiAgICAgIFZ1ZS5uZXh0VGljaygoKSA9PiB7DQogICAgICAgIHRoaXMudG9wVmFsdWUgPSB0aGlzLnNjcm9sbGluZy5vZmZzZXRIZWlnaHQhDQogICAgICAgIHRoaXMud2lkdGhWYWx1ZSA9IHRoaXMuc2Nyb2xsaW5nLmNsaWVudFdpZHRoDQogICAgICB9KQ0KICAgIH0NCiAgfQ0KDQogIEBXYXRjaCgncHJvcGVydGllcy5IZWlnaHQnKQ0KICBoZWlnaHRWYWxpZGF0ZSAoKSB7DQogICAgdGhpcy5zY3JvbGxCdXR0b25WZXJpZnkoKQ0KICAgIHRoaXMuc2Nyb2xsRGlzYWJsZWRWYWxpZGF0ZSgpDQogICAgdGhpcy51cGRhdGVNdWx0aVJvd2ZvckxlZnRBbmRSaWdodCgpDQogICAgaWYgKHRoaXMuc2Nyb2xsaW5nKSB7DQogICAgICBWdWUubmV4dFRpY2soKCkgPT4gew0KICAgICAgICB0aGlzLnRvcFZhbHVlID0gdGhpcy5zY3JvbGxpbmcub2Zmc2V0SGVpZ2h0IQ0KICAgICAgICB0aGlzLndpZHRoVmFsdWUgPSB0aGlzLnNjcm9sbGluZy5jbGllbnRXaWR0aA0KICAgICAgfSkNCiAgICB9DQogIH0NCg0KICBAV2F0Y2goJ3Byb3BlcnRpZXMuVGFiRml4ZWRXaWR0aCcpDQogIHRhYkZpeGVkV2lkdGhWYWxpZGF0ZSAoKSB7DQogICAgdGhpcy5zY3JvbGxCdXR0b25WZXJpZnkoKQ0KICAgIHRoaXMuc2Nyb2xsRGlzYWJsZWRWYWxpZGF0ZSgpDQogICAgdGhpcy51cGRhdGVNdWx0aVJvd2ZvckxlZnRBbmRSaWdodCgpDQogICAgaWYgKHRoaXMuc2Nyb2xsaW5nKSB7DQogICAgICBWdWUubmV4dFRpY2soKCkgPT4gew0KICAgICAgICB0aGlzLnVwZGF0ZURhdGFNb2RlbCh7IHByb3BlcnR5TmFtZTogJ0hlaWdodCcsIHZhbHVlOiB0aGlzLnByb3BlcnRpZXMuSGVpZ2h0ISArIDEgfSkNCiAgICAgICAgdGhpcy51cGRhdGVEYXRhTW9kZWwoeyBwcm9wZXJ0eU5hbWU6ICdIZWlnaHQnLCB2YWx1ZTogdGhpcy5wcm9wZXJ0aWVzLkhlaWdodCEgLSAxIH0pDQogICAgICAgIHRoaXMudG9wVmFsdWUgPSB0aGlzLnNjcm9sbGluZy5vZmZzZXRIZWlnaHQhDQogICAgICAgIHRoaXMud2lkdGhWYWx1ZSA9IHRoaXMuc2Nyb2xsaW5nLmNsaWVudFdpZHRoDQogICAgICB9KQ0KICAgIH0NCiAgfQ0KDQogIEBXYXRjaCgncHJvcGVydGllcy5UYWJGaXhlZEhlaWdodCcpDQogIHRhYkZpeGVkSGVpZ2h0VmFsaWRhdGUgKCkgew0KICAgIHRoaXMuc2Nyb2xsQnV0dG9uVmVyaWZ5KCkNCiAgICB0aGlzLnNjcm9sbERpc2FibGVkVmFsaWRhdGUoKQ0KICAgIHRoaXMudXBkYXRlTXVsdGlSb3dmb3JMZWZ0QW5kUmlnaHQoKQ0KICAgIGlmICh0aGlzLnNjcm9sbGluZykgew0KICAgICAgVnVlLm5leHRUaWNrKCgpID0+IHsNCiAgICAgICAgdGhpcy51cGRhdGVEYXRhTW9kZWwoeyBwcm9wZXJ0eU5hbWU6ICdIZWlnaHQnLCB2YWx1ZTogdGhpcy5wcm9wZXJ0aWVzLkhlaWdodCEgKyAxIH0pDQogICAgICAgIHRoaXMudXBkYXRlRGF0YU1vZGVsKHsgcHJvcGVydHlOYW1lOiAnSGVpZ2h0JywgdmFsdWU6IHRoaXMucHJvcGVydGllcy5IZWlnaHQhIC0gMSB9KQ0KICAgICAgICB0aGlzLnRvcFZhbHVlID0gdGhpcy5zY3JvbGxpbmcub2Zmc2V0SGVpZ2h0IQ0KICAgICAgICB0aGlzLndpZHRoVmFsdWUgPSB0aGlzLnNjcm9sbGluZy5jbGllbnRXaWR0aA0KICAgICAgfSkNCiAgICB9DQogIH0NCg0KICBAV2F0Y2goJ3Byb3BlcnRpZXMuTXVsdGlSb3cnKQ0KICBtdWx0aVJvd1ZhbGlkYXRlICgpIHsNCiAgICB0aGlzLnVwZGF0ZU11bHRpUm93Zm9yTGVmdEFuZFJpZ2h0KCkNCiAgICBpZiAodGhpcy5zY3JvbGxpbmcpIHsNCiAgICAgIFZ1ZS5uZXh0VGljaygoKSA9PiB7DQogICAgICAgIHRoaXMudG9wVmFsdWUgPSB0aGlzLnNjcm9sbGluZy5vZmZzZXRIZWlnaHQhDQogICAgICAgIHRoaXMud2lkdGhWYWx1ZSA9IHRoaXMuc2Nyb2xsaW5nLmNsaWVudFdpZHRoDQogICAgICB9KQ0KICAgIH0NCiAgfQ0KDQogIC8qKg0KICAgKiBAZGVzY3JpcHRpb24gd2F0Y2hlcyBjaGFuZ2VzIGluIEZvbnRTaXplIG9mIEZvbnQNCiAgICogQGZ1bmN0aW9uIGNoZWNrRm9udFZhbHVlDQogICAqIEBwYXJhbSBvbGRWYWwgcHJldmlvdXMgcHJvcGVydGllcyBkYXRhDQogICAqIEBwYXJhbSBuZXdWYWwgIG5ldy9jaGFuZ2VkIHByb3BlcnRpZXMgZGF0YQ0KICAgKi8NCiAgQFdhdGNoKCdwcm9wZXJ0aWVzLkZvbnQuRm9udFNpemUnKQ0KICBjaGVja0ZvbnRWYWx1ZSAobmV3VmFsOiBudW1iZXIsIG9sZFZhbDogbnVtYmVyKSB7DQogICAgdGhpcy5jYWxjdWxhdGVXaWR0aEhlaWdodCgpDQogICAgdGhpcy5zY3JvbGxCdXR0b25WZXJpZnkoKQ0KICAgIHRoaXMuc2Nyb2xsRGlzYWJsZWRWYWxpZGF0ZSgpDQogICAgdGhpcy51cGRhdGVNdWx0aVJvd2ZvckxlZnRBbmRSaWdodCgpDQogICAgaWYgKHRoaXMuc2Nyb2xsaW5nKSB7DQogICAgICBWdWUubmV4dFRpY2soKCkgPT4gew0KICAgICAgICB0aGlzLnVwZGF0ZURhdGFNb2RlbCh7IHByb3BlcnR5TmFtZTogJ0hlaWdodCcsIHZhbHVlOiB0aGlzLnByb3BlcnRpZXMuSGVpZ2h0ISArIDEgfSkNCiAgICAgICAgdGhpcy51cGRhdGVEYXRhTW9kZWwoeyBwcm9wZXJ0eU5hbWU6ICdIZWlnaHQnLCB2YWx1ZTogdGhpcy5wcm9wZXJ0aWVzLkhlaWdodCEgLSAxIH0pDQogICAgICAgIHRoaXMudG9wVmFsdWUgPSB0aGlzLnNjcm9sbGluZy5vZmZzZXRIZWlnaHQhDQogICAgICAgIHRoaXMud2lkdGhWYWx1ZSA9IHRoaXMuc2Nyb2xsaW5nLmNsaWVudFdpZHRoDQogICAgICB9KQ0KICAgIH0NCiAgfQ0KDQogIEBXYXRjaCgndG9wVmFsdWUnKQ0KICB0b3BWYWx1ZVZhbGlkYXRlICgpIHsNCiAgICB0aGlzLnRvcFZhbHVlID0gdGhpcy5zY3JvbGxpbmcub2Zmc2V0SGVpZ2h0DQogIH0NCg0KICAvKioNCiAgICogQGRlc2NyaXB0aW9uIHdhdGNoZXMgY2hhbmdlcyBpbiBzZWxlY3RlZFBhZ2VEYXRhIHRvIHNldCB0aGUgY2FwdGlvbg0KICAgKiBAZnVuY3Rpb24gY2FwdGlvblZhbHVlDQogICAqIEBwYXJhbSBvbGRWYWwgcHJldmlvdXMgc2VsZWN0ZWRQYWdlRGF0YSBkYXRhDQogICAqIEBwYXJhbSBuZXdWYWwgIG5ldy9jaGFuZ2VkIHNlbGVjdGVkUGFnZURhdGEgZGF0YQ0KICAgKi8NCiAgQFdhdGNoKCdzZWxlY3RlZFBhZ2VEYXRhLnByb3BlcnRpZXMuQ2FwdGlvbicpDQogIGNhcHRpb25WYWx1ZSAobmV3VmFsOiBzdHJpbmcsIG9sZFZhbDogc3RyaW5nKSB7DQogICAgdGhpcy5zZXRTY3JvbGxMZWZ0KCkNCiAgICBpZiAobmV3VmFsID09PSAnJykgew0KICAgICAgdGhpcy50ZW1wV2lkdGggPSAzMA0KICAgIH0NCiAgICB0aGlzLmNhbGN1bGF0ZVdpZHRoSGVpZ2h0KCkNCiAgICB0aGlzLnNjcm9sbEJ1dHRvblZlcmlmeSgpDQogICAgdGhpcy5zY3JvbGxEaXNhYmxlZFZhbGlkYXRlKCkNCiAgICBpZiAodGhpcy5zY3JvbGxpbmcpIHsNCiAgICAgIFZ1ZS5uZXh0VGljaygoKSA9PiB7DQogICAgICAgIHRoaXMudXBkYXRlRGF0YU1vZGVsKHsgcHJvcGVydHlOYW1lOiAnSGVpZ2h0JywgdmFsdWU6IHRoaXMucHJvcGVydGllcy5IZWlnaHQhICsgMSB9KQ0KICAgICAgICB0aGlzLnVwZGF0ZURhdGFNb2RlbCh7IHByb3BlcnR5TmFtZTogJ0hlaWdodCcsIHZhbHVlOiB0aGlzLnByb3BlcnRpZXMuSGVpZ2h0ISAtIDEgfSkNCiAgICAgICAgdGhpcy50b3BWYWx1ZSA9IHRoaXMuc2Nyb2xsaW5nLm9mZnNldEhlaWdodCENCiAgICAgICAgdGhpcy53aWR0aFZhbHVlID0gdGhpcy5zY3JvbGxpbmcuY2xpZW50V2lkdGgNCiAgICAgIH0pDQogICAgfQ0KICB9DQoNCiAgc2V0U2Nyb2xsTGVmdCAoKSB7DQogICAgaWYgKHRoaXMuc2Nyb2xsaW5nKSB7DQogICAgICBsZXQgdG90YWxTaWJsaW5nV2lkdGggPSAwDQogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucHJvcGVydGllcy5WYWx1ZSE7IGkrKykgew0KICAgICAgICBjb25zdCBhID0gdGhpcy5zY3JvbGxpbmcuY2hpbGRyZW5baV0gYXMgSFRNTERpdkVsZW1lbnQNCiAgICAgICAgdG90YWxTaWJsaW5nV2lkdGggKz0gYS5jbGllbnRXaWR0aA0KICAgICAgfQ0KICAgICAgdGhpcy5zY3JvbGxpbmcuc2Nyb2xsTGVmdCA9IHRvdGFsU2libGluZ1dpZHRoDQogICAgfQ0KICB9DQoNCiAgY2FsY3VsYXRlV2lkdGhIZWlnaHQgKCkgew0KICAgIGNvbnN0IHRoYXQgPSB0aGlzDQogICAgaWYgKHRoaXMuY29udHJvbFRhYnNSZWYpIHsNCiAgICAgIGNvbnN0IGRpdkVsZW1lbnQgPSB0aGlzLmNvbnRyb2xUYWJzUmVmDQogICAgICBsZXQgdGVtcFdpZHRoID0gMA0KICAgICAgbGV0IHRlbXBIZWlnaHQgPSAwDQogICAgICBsZXQgbWF4V2lkdGggPSAwDQogICAgICBWdWUubmV4dFRpY2soZnVuY3Rpb24gKCkgew0KICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRpdkVsZW1lbnQubGVuZ3RoOyBpKyspIHsNCiAgICAgICAgICBjb25zdCBlbGUgPSBkaXZFbGVtZW50W2ldLmNoaWxkcmVuWzBdLmNoaWxkcmVuWzFdDQogICAgICAgICAgICAuY2hpbGRyZW5bMF0gYXMgSFRNTElucHV0RWxlbWVudA0KICAgICAgICAgIGlmIChlbGUub2Zmc2V0V2lkdGggPiBtYXhXaWR0aCkgew0KICAgICAgICAgICAgbWF4V2lkdGggPSBlbGUub2Zmc2V0V2lkdGgNCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKG1heFdpZHRoID4gMzApIHsNCiAgICAgICAgICAgIHRlbXBXaWR0aCA9IG1heFdpZHRoDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRlbXBXaWR0aCA9IDMwDQogICAgICAgICAgfQ0KICAgICAgICAgIGlmIChlbGUub2Zmc2V0SGVpZ2h0ID4gdGVtcEhlaWdodCkgew0KICAgICAgICAgICAgdGVtcEhlaWdodCA9IGVsZS5vZmZzZXRIZWlnaHQNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgdGhhdC50ZW1wV2lkdGggPSB0ZW1wV2lkdGgNCiAgICAgICAgdGhhdC50ZW1wSGVpZ2h0ID0gdGVtcEhlaWdodA0KICAgICAgfSkNCiAgICB9DQogIH0NCiAgbW91bnRlZCAoKSB7DQogICAgdGhpcy5zY3JvbGxCdXR0b25WZXJpZnkoKQ0KICAgIHRoaXMuc2Nyb2xsTGVmdFRvcCh0aGlzLmRhdGEpDQogICAgdGhpcy5zZWxlY3RlZFBhZ2VJRCA9IHRoaXMuY29udHJvbHNbMF0NCiAgICB0aGlzLmNhbGN1bGF0ZVdpZHRoSGVpZ2h0KCkNCiAgICAvLyB0aGlzLmZvY3VzUGFnZSgpDQogIH0NCiAgZHJhZ1NlbGVjdG9yQ29udHJvbCAoZXZlbnQ6IE1vdXNlRXZlbnQpIHsNCiAgICB0aGlzLnNlbGVjdGVkQ29udHJvbEFycmF5ID0gW10NCiAgICBpZiAoDQogICAgICB0aGlzLnNlbGVjdGVkUGFnZURhdGEgJiYNCiAgICAgIHRoaXMuY29udHJvbHMubGVuZ3RoID4gMCAmJg0KICAgICAgdGhpcy5jb250cm9scy5pbmNsdWRlcyh0aGlzLnNlbGVjdGVkUGFnZUlEKQ0KICAgICkgew0KICAgICAgdGhpcy5zZWxlY3RlZEFyZWFTdHlsZSA9IHRoaXMuY29udGFpbmVyUmVmLmRyYWdTZWxlY3Rvci5zZWxlY3RBcmVhU3R5bGUNCiAgICAgIHRoaXMuY2FsU2VsZWN0ZWRBcmVhU3R5bGUoZXZlbnQsIHRoaXMuc2VsZWN0ZWRQYWdlRGF0YSkNCiAgICB9DQogIH0NCiAgZGVBY3RDb250cm9sIChldmVudDogTW91c2VFdmVudCkgew0KICAgIHRoaXMubXVsdGlQYWdlTW91c2VEb3duKGV2ZW50KQ0KICB9DQoNCiAgbXVsdGlQYWdlTW91c2VEb3duIChlOiBNb3VzZUV2ZW50KSB7DQogICAgdGhpcy5zZWxlY3RlZEl0ZW0oZSkNCiAgICBpZiAodGhpcy5zZWxNdWx0aXBsZUN0cmwgPT09IGZhbHNlICYmIHRoaXMuYWN0aXZhdGVDdHJsID09PSBmYWxzZSkgew0KICAgICAgY29uc3Qgc2VsQ29udGFpbmVyID0gdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uY29udGFpbmVyWzBdDQogICAgICBjb25zdCBzZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkDQogICAgICBpZiAodGhpcy5jb250cm9scy5sZW5ndGggPiAwICYmIHNlbGVjdGVkLmxlbmd0aCA9PT0gMSkgew0KICAgICAgICB0aGlzLnNlbGVjdENvbnRyb2woew0KICAgICAgICAgIHVzZXJGb3JtSWQ6IHRoaXMudXNlckZvcm1JZCwNCiAgICAgICAgICBzZWxlY3Q6IHsNCiAgICAgICAgICAgIGNvbnRhaW5lcjogdGhpcy5nZXRDb250YWluZXJMaXN0KHRoaXMuc2VsZWN0ZWRQYWdlSUQpLA0KICAgICAgICAgICAgc2VsZWN0ZWQ6IFt0aGlzLnNlbGVjdGVkUGFnZUlEXQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICAgIGlmIChzZWxDb250YWluZXIgPT09IHRoaXMuY29udHJvbElkKSB7DQogICAgICAgIGlmICh0aGlzLnNlbE11bHRpcGxlQ3RybCA9PT0gZmFsc2UgJiYgdGhpcy5hY3RpdmF0ZUN0cmwgPT09IGZhbHNlKSB7DQogICAgICAgICAgdGhpcy5zZWxlY3RDb250cm9sKHsNCiAgICAgICAgICAgIHVzZXJGb3JtSWQ6IHRoaXMudXNlckZvcm1JZCwNCiAgICAgICAgICAgIHNlbGVjdDogew0KICAgICAgICAgICAgICBjb250YWluZXI6IHRoaXMuZ2V0Q29udGFpbmVyTGlzdCh0aGlzLnNlbGVjdGVkUGFnZUlEKSwNCiAgICAgICAgICAgICAgc2VsZWN0ZWQ6IFt0aGlzLnNlbGVjdGVkUGFnZUlEXQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogIH0NCiAgc2hvd0NvbnRleHRNZW51ICgNCiAgICBlOiBNb3VzZUV2ZW50LA0KICAgIHBhcmVudElEOiBzdHJpbmcsDQogICAgY29udHJvbElEOiBzdHJpbmcsDQogICAgdHlwZTogc3RyaW5nLA0KICAgIG1vZGU6IGJvb2xlYW4NCiAgKSB7DQogICAgZS5wcmV2ZW50RGVmYXVsdCgpDQogICAgY29uc3Qgc2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5zZWxlY3RlZA0KICAgIGlmIChzZWxlY3RlZC5sZW5ndGggPT09IDEgJiYgc2VsZWN0ZWRbMF0gPT09IHRoaXMuY29udHJvbElkICYmIHRoaXMuY29udHJvbHMubGVuZ3RoID4gMCkgew0KICAgICAgdGhpcy5jaGFuZ2VTZWxlY3QodGhpcy5jb250cm9sc1swXSkNCiAgICB9DQogICAgRXZlbnRCdXMuJGVtaXQoJ2NvbnRleHRNZW51RGlzcGxheScsIGV2ZW50LCBwYXJlbnRJRCwgY29udHJvbElELCB0eXBlLCBtb2RlKQ0KICB9DQogIGhhbmRsZUtleURvd24gKGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7DQogICAgRXZlbnRCdXMuJGVtaXQoJ2hhbmRsZUtleURvd24nLCBldmVudCwgdGhpcy5zZWxlY3RlZFBhZ2VJRCkNCiAgfQ0KICBjaGFuZ2VTZWxlY3QgKGNvbnRyb2w6IHN0cmluZykgew0KICAgIHRoaXMuc2VsZWN0Q29udHJvbCh7DQogICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsDQogICAgICBzZWxlY3Q6IHsNCiAgICAgICAgY29udGFpbmVyOiB0aGlzLmdldENvbnRhaW5lckxpc3QoY29udHJvbCksDQogICAgICAgIHNlbGVjdGVkOiBbY29udHJvbF0NCiAgICAgIH0NCiAgICB9KQ0KICB9DQogIGhhbmRsZUNvbnRleHRNZW51IChlOiBNb3VzZUV2ZW50KSB7DQogICAgRXZlbnRCdXMuJGVtaXQoJ2VkaXRNb2RlQ29udGV4dE1lbnUnLCBlLCB0aGlzLmNvbnRyb2xJZCwgdGhpcy5kYXRhLCB0aGlzLmlzRWRpdE1vZGUsIHRoaXMudXBkYXRlZFZhbHVlKQ0KICB9DQogIGRlbGV0ZU11bHRpUGFnZSAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpIHsNCiAgICBpZiAodGhpcy5jb250cm9sSWQgPT09IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkWzBdKSB7DQogICAgICB0aGlzLmRlbGV0ZUl0ZW0oZXZlbnQpDQogICAgfSBlbHNlIHsNCiAgICAgIHRoaXMuaGFuZGxlS2V5RG93bihldmVudCkNCiAgICB9DQogIH0NCiAgdXBkYXRlU2Nyb2xsaW5nTGVmdFRvcCAoZTogTW91c2VFdmVudCkgew0KICAgIGNvbnN0IHJlZk5hbWUgPSB0aGlzLmNvbnRlbnRSZWYNCiAgICB0aGlzLnVwZGF0ZUNvbnRyb2woew0KICAgICAgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLA0KICAgICAgY29udHJvbElkOiB0aGlzLnNlbGVjdGVkUGFnZUlELA0KICAgICAgcHJvcGVydHlOYW1lOiAnU2Nyb2xsTGVmdCcsDQogICAgICB2YWx1ZTogcmVmTmFtZS5zY3JvbGxMZWZ0DQogICAgfSkNCiAgICB0aGlzLnVwZGF0ZUNvbnRyb2woew0KICAgICAgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLA0KICAgICAgY29udHJvbElkOiB0aGlzLnNlbGVjdGVkUGFnZUlELA0KICAgICAgcHJvcGVydHlOYW1lOiAnU2Nyb2xsVG9wJywNCiAgICAgIHZhbHVlOiByZWZOYW1lLnNjcm9sbFRvcA0KICAgIH0pDQogIH0NCiAgc2VsZWN0TXVsdGlwbGVDdHJsIChldmVudDogS2V5Ym9hcmRFdmVudCwgdmFsOiBib29sZWFuKSB7DQogICAgaWYgKGV2ZW50LmtleSA9PT0gJ0NvbnRyb2wnICYmIGV2ZW50LmtleUNvZGUgPT09IDE3KSB7DQogICAgICB0aGlzLnNlbE11bHRpcGxlQ3RybCA9IHZhbA0KICAgICAgRXZlbnRCdXMuJGVtaXQoJ3NlbGVjdE11bHRpcGxlQ3RybCcsIHZhbCkNCiAgICB9IGVsc2UgaWYgKGV2ZW50LmtleSA9PT0gJ1NoaWZ0JyAmJiBldmVudC5rZXlDb2RlID09PSAxNikgew0KICAgICAgdGhpcy5hY3RpdmF0ZUN0cmwgPSB2YWwNCiAgICAgIEV2ZW50QnVzLiRlbWl0KCdhY3RNdWx0aXBsZUN0cmwnLCB2YWwpDQogICAgfQ0KICB9DQoNCiAgY3JlYXRlZCAoKSB7DQogICAgRXZlbnRCdXMuJG9uKCd1cGRhdGVNdWx0aVBhZ2VWYWx1ZScsIHRoaXMudXBkYXRlVmFsdWUpDQogICAgRXZlbnRCdXMuJG9uKCdmb2N1c1RhYlN0cmlwJywgKCkgPT4gew0KICAgICAgdGhpcy5mb2N1c1BhZ2UoKQ0KICAgIH0pDQogIH0NCiAgZGVzdHJveWVkICgpIHsNCiAgICBFdmVudEJ1cy4kb2ZmKCd1cGRhdGVNdWx0aVBhZ2VWYWx1ZScpDQogICAgRXZlbnRCdXMuJG9mZignZm9jdXNUYWJTdHJpcCcpDQogIH0NCiAgdXBkYXRlVmFsdWUgKCkgew0KICAgIHsNCiAgICAgIGNvbnN0IHVzZXJEYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXQ0KICAgICAgbGV0IHNlbGVjdGVkUGFnZSA9IC0xDQogICAgICBpZiAodGhpcy5jb250cm9scy5sZW5ndGggPiAwKSB7DQogICAgICAgIHNlbGVjdGVkUGFnZSA9IHRoaXMuY29udHJvbHMuZmluZEluZGV4KA0KICAgICAgICAgICh2YWwpID0+IHRoaXMucHJvcGVydGllcy5WYWx1ZSA9PT0gdXNlckRhdGFbdmFsXS5wcm9wZXJ0aWVzLkluZGV4DQogICAgICAgICkNCiAgICAgIH0NCiAgICAgIGlmICh0aGlzLmRhdGEuY29udHJvbHMubGVuZ3RoID4gMCAmJiBzZWxlY3RlZFBhZ2UgIT09IC0xKSB7DQogICAgICAgIHRoaXMuc2VsZWN0ZWRQYWdlSUQgPSB0aGlzLmNvbnRyb2xzW3NlbGVjdGVkUGFnZV0NCiAgICAgICAgdGhpcy5jaGFuZ2VTZWxlY3QodGhpcy5jb250cm9sc1tzZWxlY3RlZFBhZ2VdKQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy5jaGFuZ2VTZWxlY3QodGhpcy5jb250cm9sSWQpDQogICAgICB9DQogICAgfQ0KICB9DQogIGRlbGV0ZU11bHRpUGFnZUNvbnRyb2wgKGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7DQogICAgY29uc3QgdXNlckRhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdDQogICAgaWYgKA0KICAgICAgdGhpcy5zZWxlY3RlZFBhZ2VJRCAmJg0KICAgICAgdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVt0aGlzLnNlbGVjdGVkUGFnZUlEXS5jb250cm9scy5sZW5ndGggPD0NCiAgICAgICAgMA0KICAgICkgew0KICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCkNCiAgICAgIHRoaXMuZGVsZXRlSXRlbShldmVudCkNCiAgICB9DQogIH0NCg0KICBAV2F0Y2goJ3Byb3BlcnRpZXMuVmFsdWUnKQ0KICB2YWx1ZVZhbGlkYXRlICgpIHsNCiAgICB0aGlzLmZvY3VzUGFnZSgpDQogICAgdGhpcy51cGRhdGVNdWx0aVJvd2ZvckxlZnRBbmRSaWdodCgpDQogICAgbGV0IHN1bSA9IDANCiAgICBpZiAodGhpcy5zY3JvbGxpbmcpIHsNCiAgICAgIFZ1ZS5uZXh0VGljaygoKSA9PiB7DQogICAgICAgIHRoaXMudG9wVmFsdWUgPSB0aGlzLnNjcm9sbGluZy5vZmZzZXRIZWlnaHQhDQogICAgICAgIHRoaXMud2lkdGhWYWx1ZSA9IHRoaXMuc2Nyb2xsaW5nLmNsaWVudFdpZHRoDQogICAgICB9KQ0KICAgIH0NCiAgICBWdWUubmV4dFRpY2soKCkgPT4gew0KICAgICAgaWYgKHRoaXMucHJvcGVydGllcy5UYWJPcmllbnRhdGlvbiA9PT0gMCB8fCB0aGlzLnByb3BlcnRpZXMuVGFiT3JpZW50YXRpb24gPT09IDEpIHsNCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnByb3BlcnRpZXMuVmFsdWUhOyBpKyspIHsNCiAgICAgICAgICBzdW0gKz0gdGhpcy5jb250cm9sVGFic1JlZltpXS5jbGllbnRXaWR0aA0KICAgICAgICB9DQogICAgICAgIGlmICh0aGlzLnByb3BlcnRpZXMuV2lkdGghIC0gdGhpcy5zY3JvbGxpbmcub2Zmc2V0V2lkdGggPiBzdW0pIHsNCiAgICAgICAgICB0aGlzLnNjcm9sbGluZy5zY3JvbGxMZWZ0ID0gc3VtDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgY29uc3QgdmFsdWVBc051bWJlciA9IHRoaXMucHJvcGVydGllcy5WYWx1ZSEgYXMgbnVtYmVyDQogICAgICAgICAgaWYgKHN1bSA+IHRoaXMuY29udHJvbFRhYnNSZWZbdmFsdWVBc051bWJlcl0uY2xpZW50V2lkdGgpIHsNCiAgICAgICAgICAgIGNvbnN0IHNMID0gc3VtIC0gdGhpcy5jb250cm9sVGFic1JlZlt2YWx1ZUFzTnVtYmVyXS5jbGllbnRXaWR0aA0KICAgICAgICAgICAgdGhpcy5zY3JvbGxpbmcuc2Nyb2xsTGVmdCA9IHNMDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMuc2Nyb2xsaW5nLnNjcm9sbExlZnQgPSBzdW0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgaWYgKHRoaXMuc2Nyb2xsaW5nKSB7DQogICAgICAgICAgY29uc3QgcmlnaHRCdXR0b24gPSB0aGlzLmJ1dHRvblN0eWxlUmVmLmNoaWxkcmVuWzFdIGFzIEhUTUxCdXR0b25FbGVtZW50DQogICAgICAgICAgY29uc3QgbGVmdEJ1dHRvbiA9IHRoaXMuYnV0dG9uU3R5bGVSZWYuY2hpbGRyZW5bMF0gYXMgSFRNTEJ1dHRvbkVsZW1lbnQNCiAgICAgICAgICBpZiAodGhpcy5zY3JvbGxpbmcuc2Nyb2xsTGVmdCA+PSAodGhpcy5zY3JvbGxpbmcuc2Nyb2xsV2lkdGggLSB0aGlzLnNjcm9sbGluZy5jbGllbnRXaWR0aCAtIDMwKSkgew0KICAgICAgICAgICAgcmlnaHRCdXR0b24uc3R5bGUub3BhY2l0eSA9ICcwLjQnDQogICAgICAgICAgICBsZWZ0QnV0dG9uLnN0eWxlLm9wYWNpdHkgPSAnMScNCiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc2Nyb2xsaW5nLnNjcm9sbExlZnQgPT09IDApIHsNCiAgICAgICAgICAgIGxlZnRCdXR0b24uc3R5bGUub3BhY2l0eSA9ICcwLjQnDQogICAgICAgICAgICByaWdodEJ1dHRvbi5zdHlsZS5vcGFjaXR5ID0gJzEnDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGxlZnRCdXR0b24uc3R5bGUub3BhY2l0eSA9ICcxJw0KICAgICAgICAgICAgcmlnaHRCdXR0b24uc3R5bGUub3BhY2l0eSA9ICcxJw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnByb3BlcnRpZXMuVmFsdWUhOyBpKyspIHsNCiAgICAgICAgICBzdW0gKz0gdGhpcy5jb250cm9sVGFic1JlZltpXS5jbGllbnRIZWlnaHQNCiAgICAgICAgfQ0KICAgICAgICBpZiAodGhpcy5wcm9wZXJ0aWVzLkhlaWdodCEgLSB0aGlzLnNjcm9sbGluZy5vZmZzZXRIZWlnaHQgPiBzdW0pIHsNCiAgICAgICAgICB0aGlzLnNjcm9sbGluZy5zY3JvbGxUb3AgPSBzdW0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBjb25zdCB2YWx1ZUFzTnVtYmVyID0gdGhpcy5wcm9wZXJ0aWVzLlZhbHVlISBhcyBudW1iZXINCiAgICAgICAgICBpZiAoc3VtID4gdGhpcy5jb250cm9sVGFic1JlZlt2YWx1ZUFzTnVtYmVyXS5jbGllbnRIZWlnaHQpIHsNCiAgICAgICAgICAgIGNvbnN0IHNMID0gc3VtIC0gdGhpcy5jb250cm9sVGFic1JlZlt2YWx1ZUFzTnVtYmVyXS5jbGllbnRIZWlnaHQNCiAgICAgICAgICAgIHRoaXMuc2Nyb2xsaW5nLnNjcm9sbFRvcCA9IHNMDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMuc2Nyb2xsaW5nLnNjcm9sbFRvcCA9IHN1bQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAodGhpcy5zY3JvbGxpbmcpIHsNCiAgICAgICAgICBjb25zdCByaWdodEJ1dHRvbiA9IHRoaXMuYnV0dG9uU3R5bGVSZWYuY2hpbGRyZW5bMV0gYXMgSFRNTEJ1dHRvbkVsZW1lbnQNCiAgICAgICAgICBjb25zdCBsZWZ0QnV0dG9uID0gdGhpcy5idXR0b25TdHlsZVJlZi5jaGlsZHJlblswXSBhcyBIVE1MQnV0dG9uRWxlbWVudA0KICAgICAgICAgIGlmICh0aGlzLnNjcm9sbGluZy5zY3JvbGxUb3AgPj0gKHRoaXMuc2Nyb2xsaW5nLnNjcm9sbEhlaWdodCAtIHRoaXMuc2Nyb2xsaW5nLmNsaWVudEhlaWdodCkpIHsNCiAgICAgICAgICAgIHJpZ2h0QnV0dG9uLnN0eWxlLm9wYWNpdHkgPSAnMC40Jw0KICAgICAgICAgICAgbGVmdEJ1dHRvbi5zdHlsZS5vcGFjaXR5ID0gJzEnDQogICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnNjcm9sbGluZy5zY3JvbGxUb3AgPT09IDApIHsNCiAgICAgICAgICAgIGxlZnRCdXR0b24uc3R5bGUub3BhY2l0eSA9ICcwLjQnDQogICAgICAgICAgICByaWdodEJ1dHRvbi5zdHlsZS5vcGFjaXR5ID0gJzEnDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGxlZnRCdXR0b24uc3R5bGUub3BhY2l0eSA9ICcxJw0KICAgICAgICAgICAgcmlnaHRCdXR0b24uc3R5bGUub3BhY2l0eSA9ICcxJw0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgdGhpcy5mb2N1c1BhZ2UoKQ0KICAgIH0pDQogIH0NCiAgYWRkQ29udGFpbmVyQ29udHJvbCAoZXZlbnQ6IE1vdXNlRXZlbnQpIHsNCiAgICBpZiAoIXRoaXMuaXNFZGl0TW9kZSkgew0KICAgICAgdGhpcy5zZWxlY3RlZEl0ZW0oZXZlbnQpDQogICAgfSBlbHNlIHsNCiAgICAgIHRoaXMuYWRkQ29udHJvbE9iaihldmVudCwgdGhpcy5zZWxlY3RlZFBhZ2VJRCkNCiAgICB9DQogIH0NCiAgZ2V0IGdldFBpY3R1cmUgKCkgew0KICAgIGlmICh0aGlzLnNlbGVjdGVkUGFnZURhdGEpIHsNCiAgICAgIHJldHVybiBgdXJsKCR7dGhpcy5zZWxlY3RlZFBhZ2VEYXRhLnByb3BlcnRpZXMhLlBpY3R1cmUhfSlgDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/FormDesigner/components/atoms/FDMultiPage","sourcesContent":["<template>\r\n  <div>\r\n    <div\r\n      class=\"outer-page\"\r\n      :style=\"pageStyleObj\"\r\n      :title=\"properties.ControlTipText\"\r\n      @mousedown=\"multiPageMouseDown\"\r\n      @contextmenu.stop=\"handleContextMenu\"\r\n      @keydown.delete.stop.exact=\"deleteMultiPage\"\r\n      @keyup.stop=\"selectMultipleCtrl($event, false)\"\r\n      :tabindex=\"properties.TabIndex\"\r\n    >\r\n      <div\r\n        class=\"pages\"\r\n        :style=\"styleTabsObj\"\r\n        :title=\"properties.ControlTipText\"\r\n        v-if=\"controls.length > 0\"\r\n      >\r\n        <div class=\"move\" ref=\"scrolling\" :style=\"styleMoveObj\">\r\n          <div\r\n            ref=\"controlTabsRef\"\r\n            class=\"page\"\r\n            v-for=\"(value, key) in controls\"\r\n            :key=\"key\"\r\n            :style=\"getTabStyle\"\r\n          >\r\n            <FDControlTabs\r\n              @setValue=\"setValue\"\r\n              @isChecked=\"isChecked\"\r\n              :setFontStyle=\"setFontStyle\"\r\n              @tempStretch=\"tempStretch\"\r\n              @deleteMultiPageControl=\"\r\n                (event) => {\r\n                  deleteMultiPageControl(event);\r\n                }\r\n              \"\r\n              :data=\"data\"\r\n              :pageValue=\"value\"\r\n              :indexValue=\"key\"\r\n              :pageData=\"pageData(value).properties\"\r\n              :isRunMode=\"isRunMode\"\r\n              :isEditMode=\"isEditMode\"\r\n              :isItalic=\"isItalic\"\r\n              :tempStretch=\"tempStretch\"\r\n              :tempWeight=\"tempWeight\"\r\n              :tempWidth=\"tempWidth\"\r\n              ref=\"controlTab\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div\r\n          class=\"content\"\r\n          :style=\"styleContentObj\"\r\n          ref=\"contentRef\"\r\n          :title=\"properties.ControlTipText\"\r\n        >\r\n          <div\r\n            v-if=\"controls.includes(selectedPageID)\"\r\n            :style=\"containerDivStyle\"\r\n            :title=\"properties.ControlTipText\"\r\n            :tabindex=\"properties.TabIndex\"\r\n            @keydown.delete.exact=\"deleteMultiPageControl\"\r\n            @keydown.ctrl.exact.stop=\"selectMultipleCtrl($event, true)\"\r\n            @keydown.ctrl.stop=\"handleKeyDown\"\r\n            @keydown.enter.exact=\"setContentEditable($event, true)\"\r\n            @keydown.shift.exact.stop=\"selectMultipleCtrl($event, true)\"\r\n            @contextmenu.stop=\"\r\n              showContextMenu($event, selectedPageID, selectedPageID, 'container', isEditMode)\r\n            \"\r\n          >\r\n            <Container\r\n              :userFormId=\"userFormId\"\r\n              :controlId=\"selectedPageID\"\r\n              :containerId=\"selectedPageID\"\r\n              :isEditMode=\"isEditMode\"\r\n              :getScrollBarX=\"getScrollBarPage.overflowX\"\r\n              :getScrollBarY=\"getScrollBarPage.overflowY\"\r\n              :title=\"properties.ControlTipText\"\r\n              :width=\"properties.Width\"\r\n              :height=\"properties.Height\"\r\n              :getSampleDotPattern=\"getSampleDotPattern\"\r\n              ref=\"containerRef\"\r\n              :createBackgroundString=\"getPicture\"\r\n              :getSizeMode=\"getSizeMode\"\r\n              :getRepeatData=\"getRepeatData\"\r\n              :getPosition=\"getPosition\"\r\n             @deActiveControl=\"deActControl\"\r\n             @dragSelectorControl=\"dragSelectorControl\"\r\n             @addControlObj=\"addContainerControl\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div></div>\r\n        <div :style=\"getScrollButtonStyleObj\" ref=\"buttonStyleRef\">\r\n          <button class=\"left-button\" @click=\"leftmove\"></button>\r\n          <button class=\"right-button\" @click=\"rightmove\"></button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Mixins, Prop, Ref, Watch } from 'vue-property-decorator'\r\nimport { State, Action } from 'vuex-class'\r\nimport FdContainerVue from '@/api/abstract/FormDesigner/FdContainerVue'\r\nimport { controlProperties } from '@/FormDesigner/controls-properties'\r\nimport ContextMenu from '../FDContextMenu/index.vue'\r\nimport { tabsContextMenu } from '../../../models/tabsContextMenu'\r\nimport Vue from 'vue'\r\nimport FDControlTabs from '@/FormDesigner/components/atoms/FDControlTabs/index.vue'\r\nimport Container from '@/FormDesigner/components/organisms/FDContainer/index.vue'\r\nimport { EventBus } from '@/FormDesigner/event-bus'\r\n\r\n@Component({\r\n  name: 'FDMultiPage',\r\n  components: {\r\n    ContextMenu,\r\n    FDControlTabs,\r\n    Container: () =>\r\n      import('@/FormDesigner/components/organisms/FDContainer/index.vue')\r\n  }\r\n})\r\nexport default class FDMultiPage extends Mixins(FdContainerVue) {\r\n  @State((state) => state.fd.userformData) userformData!: userformData;\r\n  @Prop({ required: true, type: String }) public userFormId!: string;\r\n  @Ref('scrolling') scrolling: HTMLDivElement;\r\n  @Ref('contentRef') contentRef: HTMLDivElement;\r\n  @Ref('containerRef') readonly containerRef!: Container;\r\n  @Ref('multipage') multipage: HTMLDivElement;\r\n  @Ref('controlTabsRef') controlTabsRef: HTMLDivElement[];\r\n  @Ref('controlTab') controlTab: FDControlTabs[];\r\n  @Ref('buttonStyleRef') buttonStyleRef: HTMLDivElement;\r\n\r\n  viewMenu: boolean = false;\r\n  top: string = '0px';\r\n  left: string = '0px';\r\n  contextMenuValue: Array<IcontextMenu> = tabsContextMenu;\r\n  updatedValue: number = 0;\r\n  selectedPageID: string = '';\r\n  multiPageContextMenu: boolean = false;\r\n  tempWidth: number = 0;\r\n  tempHeight: number = 0;\r\n  multiRowCount: number = 1;\r\n  isScrollVisible = false;\r\n  topValue: number = 0;\r\n  widthValue: number = 40;\r\n  rowsCount: string = '';\r\n\r\n  /**\r\n   * @description sets scrollbar left and top position\r\n   * @function scrollLeftTop\r\n   * @param controlData propControlData passed as input\r\n   */\r\n  scrollLeftTop (controlData: controlData) {\r\n    if (this.selectedPageData) {\r\n      const scrollLeft: number = controlData!.properties.ScrollLeft!\r\n      const scrollTop: number = controlData!.properties.ScrollTop!\r\n      if (scrollLeft > 0) {\r\n        (this.contentRef as IScrollRef).scrollLeft = scrollLeft\r\n      }\r\n      if (scrollTop > 0) {\r\n        (this.contentRef as IScrollRef).scrollTop = scrollTop\r\n      }\r\n    }\r\n  }\r\n  focusPage () {\r\n    if (typeof this.properties.Value === 'number' && this.controls.length > 0) {\r\n      const value: number = this.properties.Value as number;\r\n      (this.controlTab[value].$el.children[1] as HTMLSpanElement).focus()\r\n    } else {\r\n      (this.$el.children[0] as HTMLDivElement).focus()\r\n    }\r\n  }\r\n  closeContextMenu () {\r\n    this.multiPageContextMenu = false\r\n    this.focusPage()\r\n  }\r\n  /**\r\n   * @description takes a single page value based on the value of the control\r\n   * @function pageData\r\n   *\r\n   */\r\n  pageData (value: string): controlData {\r\n    return this.userformData[this.userFormId][value]\r\n  }\r\n\r\n  get outerDivStyleObj () {\r\n    return {\r\n      width: `${this.properties.Width!}px`,\r\n      height: `${this.properties.Height!}px`\r\n    }\r\n  }\r\n  /**\r\n   * @description style object is passed to :style attribute in div tag\r\n   * dynamically changing the styles of the component based on data\r\n   * @function pageStyleObj\r\n   *\r\n   */\r\n  get pageStyleObj () {\r\n    const controlProp = this.properties\r\n    let display = ''\r\n    if (this.isRunMode) {\r\n      display = controlProp.Visible ? 'inline-block' : 'none'\r\n    } else {\r\n      display = 'inline-block'\r\n    }\r\n    return {\r\n      left: `${controlProp.Left}px`,\r\n      width: `${controlProp.Width}px`,\r\n      height: `${controlProp.Height}px`,\r\n      top: `${controlProp.Top}px`,\r\n      backgroundColor: controlProp.BackColor,\r\n      display: display,\r\n      borderLeft: '2px solid whitesmoke',\r\n      borderBottom: controlProp.TabOrientation === 0 ? '1px solid gray' : ''\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @description style object is passed to :style attribute in div tag\r\n   * dynamically changing the styles of the component based on data\r\n   * @function styleTabsObj\r\n   *\r\n   */\r\n  protected get styleTabsObj (): Partial<CSSStyleDeclaration> {\r\n    const controlProp = this.properties\r\n    return {\r\n      overflow: 'hidden',\r\n      display: 'flex',\r\n      justifyContent: controlProp.TabOrientation === 3 ? 'flex-end' : '',\r\n      height: `${controlProp.Height!}px`\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @description style object is passed to :style attribute in div tag\r\n   * dynamically changing the styles of the component based on data\r\n   * @function styleMoveObj\r\n   *\r\n   */\r\n  protected get styleMoveObj (): Partial<CSSStyleDeclaration> {\r\n    const controlProp = this.properties\r\n    return {\r\n      alignSelf: controlProp.TabOrientation === 1 ? 'flex-end' : '',\r\n      float: controlProp.TabOrientation === 3 ? 'right' : '',\r\n      whiteSpace: controlProp.MultiRow === true ? 'break-spaces' : 'nowrap',\r\n      zIndex: controlProp.MultiRow === true ? '100' : '',\r\n      direction: (controlProp.MultiRow && controlProp.TabOrientation === 3) ? 'rtl' : 'ltr',\r\n      display: controlProp.Style === 2 ? 'none' : (controlProp.MultiRow && controlProp.TabOrientation === 2) || (controlProp.MultiRow && controlProp.TabOrientation === 3) ? 'grid' : 'inline-block',\r\n      gridAutoFlow: (controlProp.MultiRow && controlProp.TabOrientation === 2) || (controlProp.MultiRow && controlProp.TabOrientation === 3) ? 'column' : '',\r\n      gridTemplateRows: (controlProp.MultiRow && controlProp.TabOrientation === 2) || (controlProp.MultiRow && controlProp.TabOrientation === 3) ? this.rowsCount : '',\r\n      height:\r\n        controlProp.TabOrientation === 2 || controlProp.TabOrientation === 3\r\n          ? this.isScrollVisible\r\n            ? `${controlProp.Height! - 54}px`\r\n            : `${controlProp.Height}px`\r\n          : 'fit-content',\r\n      width:\r\n        controlProp.TabOrientation === 2 || controlProp.TabOrientation === 3\r\n          ? ''\r\n          : !this.isScrollVisible\r\n            ? `${controlProp.Width}px`\r\n            : `${controlProp.Width! - 60}px`,\r\n      overflow: 'hidden',\r\n      gridAutoColumns: (controlProp.MultiRow && controlProp.TabOrientation === 2) || (controlProp.MultiRow && controlProp.TabOrientation === 3) ? 'max-content' : ''\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @description style object is passed to :style attribute in div tag\r\n   * dynamically changing the styles of the component based on data\r\n   * @function containerDivStyle\r\n   *\r\n   */\r\n  get containerDivStyle () {\r\n    if (this.selectedPageData) {\r\n      let zoomVal = this.selectedPageData\r\n        ? this.selectedPageData.properties.Zoom! / 100\r\n        : ''\r\n      return {\r\n        width: '100%',\r\n        height: '100%',\r\n        position: 'relative'\r\n        // zoom: zoomVal + ''\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * @description style object is passed to :style attribute in button tags\r\n   * dynamically changing the styles of the component based on data\r\n   * @function getScrollButtonStyleObj\r\n   *\r\n   */\r\n  protected get getScrollButtonStyleObj (): Partial<CSSStyleDeclaration> {\r\n    const controlProp = this.properties\r\n    const tabsLength =\r\n      this.properties.TabFixedWidth! > 0\r\n        ? this.controls.length * this.properties.TabFixedWidth! +\r\n          10 * this.controls!.length\r\n        : this.properties.Font!.FontSize! < 36\r\n          ? this.properties.Font!.FontSize! * 3.5 * this.controls!.length\r\n          : this.properties.Font!.FontSize! * 2.3 * this.controls!.length\r\n    const tabsHeight =\r\n      this.properties.TabFixedHeight! > 0\r\n        ? this.controls.length * this.properties.TabFixedHeight! +\r\n          this.properties.Font!.FontSize! * this.controls!.length\r\n        : this.properties.Font!.FontSize! * 2.3 * this.controls!.length\r\n    return {\r\n      position: 'absolute',\r\n      zIndex: '3',\r\n      marginTop:\r\n        controlProp.TabOrientation === 2 || controlProp.TabOrientation === 3\r\n          ? `${controlProp.Height! - 30}px`\r\n          : controlProp.TabOrientation === 1\r\n            ? `${controlProp.Height! - 22}px`\r\n            : '0px',\r\n      transform:\r\n        controlProp.TabOrientation === 2\r\n          ? 'rotate(90deg)'\r\n          : this.transformScrollButtonStyle,\r\n      display: !this.properties.MultiRow\r\n        ? this.isScrollVisible\r\n          ? 'block'\r\n          : 'none'\r\n        : 'none',\r\n      right:\r\n        controlProp.TabOrientation === 3\r\n          ? '-14px'\r\n          : controlProp.TabOrientation === 2\r\n            ? `${controlProp.Width! - 40}px`\r\n            : '0px',\r\n      top: '0px'\r\n    }\r\n  }\r\n\r\n  scrollDisabledValidate () {\r\n    if (this.properties.TabOrientation === 0 || this.properties.TabOrientation === 1) {\r\n      if (this.scrolling) {\r\n        const rightButton = this.buttonStyleRef.children[1] as HTMLButtonElement\r\n        const leftButton = this.buttonStyleRef.children[0] as HTMLButtonElement\r\n        if (this.scrolling.scrollLeft >= (this.scrolling.scrollWidth - this.scrolling.clientWidth - 30)) {\r\n          rightButton.style.opacity = '0.4'\r\n          leftButton.style.opacity = '1'\r\n        } else if (this.scrolling.scrollLeft === 0) {\r\n          leftButton.style.opacity = '0.4'\r\n          rightButton.style.opacity = '1'\r\n        } else {\r\n          leftButton.style.opacity = '1'\r\n          rightButton.style.opacity = '1'\r\n        }\r\n      }\r\n    } else {\r\n      if (this.scrolling) {\r\n        const rightButton = this.buttonStyleRef.children[1] as HTMLButtonElement\r\n        const leftButton = this.buttonStyleRef.children[0] as HTMLButtonElement\r\n        if (this.scrolling.scrollTop >= (this.scrolling.scrollHeight - this.scrolling.clientHeight)) {\r\n          rightButton.style.opacity = '0.4'\r\n          leftButton.style.opacity = '1'\r\n        } else if (this.scrolling.scrollTop === 0) {\r\n          leftButton.style.opacity = '0.4'\r\n          rightButton.style.opacity = '1'\r\n        } else {\r\n          leftButton.style.opacity = '1'\r\n          rightButton.style.opacity = '1'\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  scrollButtonVerify () {\r\n    let sum = 0\r\n    Vue.nextTick(() => {\r\n      this.isScrollVisible = false\r\n      if (\r\n        this.properties.TabOrientation === 0 ||\r\n        this.properties.TabOrientation === 1\r\n      ) {\r\n        if (this.scrolling && !this.properties.MultiRow) {\r\n          for (let i = 0; i < this.scrolling.children.length; i++) {\r\n            const a = this.scrolling.children[i] as HTMLDivElement\r\n            sum += a.offsetWidth\r\n          }\r\n          const tabsLength = sum\r\n          if (tabsLength > this.properties.Width!) {\r\n            this.isScrollVisible = true\r\n          } else {\r\n            this.isScrollVisible = false\r\n          }\r\n        }\r\n      } else {\r\n        if (this.scrolling && !this.properties.MultiRow) {\r\n          for (let i = 0; i < this.scrolling.children.length; i++) {\r\n            const a = this.scrolling.children[i] as HTMLDivElement\r\n            sum += a.offsetHeight\r\n          }\r\n          const tabsHeight = sum\r\n          if (tabsHeight > this.properties.Height!) {\r\n            this.isScrollVisible = true\r\n          } else {\r\n            this.isScrollVisible = false\r\n          }\r\n        }\r\n      }\r\n      this.setScrollLeft()\r\n      this.scrollDisabledValidate()\r\n      this.updateMultiRowforLeftAndRight()\r\n    })\r\n  }\r\n\r\n  /**\r\n   * @description takes the index Value and pageValue and set the Value property\r\n   * @function isChecked\r\n   *\r\n   */\r\n  isChecked (value: selectedTab) {\r\n    if (this.isEditMode) {\r\n      this.updatedValue = value.indexValue\r\n      this.selectedPageID = value.pageValue\r\n      this.updateDataModel({ propertyName: 'Value', value: value.indexValue })\r\n      this.selectControl({\r\n        userFormId: this.userFormId,\r\n        select: {\r\n          container: this.getContainerList(this.selectedPageID),\r\n          selected: [this.selectedPageID]\r\n        }\r\n      })\r\n      this.focusPage()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @description takes the ref of the div and determines the scrollLeft and scrollTop\r\n   * @function leftmove\r\n   *\r\n   */\r\n  leftmove () {\r\n    const scrollRef = this.scrolling\r\n    if (\r\n      this.properties.TabOrientation === 0 ||\r\n      this.properties.TabOrientation === 1\r\n    ) {\r\n      scrollRef.scrollLeft! -= 50\r\n      if (this.scrolling) {\r\n        const rightButton = this.buttonStyleRef.children[1] as HTMLButtonElement\r\n        const leftButton = this.buttonStyleRef.children[0] as HTMLButtonElement\r\n        if (this.scrolling.scrollLeft >= (this.scrolling.scrollWidth - this.scrolling.clientWidth)) {\r\n          rightButton.style.opacity = '0.4'\r\n          leftButton.style.opacity = '1'\r\n        } else if (this.scrolling.scrollLeft === 0) {\r\n          leftButton.style.opacity = '0.4'\r\n          rightButton.style.opacity = '1'\r\n        } else {\r\n          leftButton.style.opacity = '1'\r\n          rightButton.style.opacity = '1'\r\n        }\r\n      }\r\n    } else {\r\n      scrollRef.scrollTop! -= 50\r\n      if (this.scrolling) {\r\n        const rightButton = this.buttonStyleRef.children[1] as HTMLButtonElement\r\n        const leftButton = this.buttonStyleRef.children[0] as HTMLButtonElement\r\n        if (this.scrolling.scrollTop >= (this.scrolling.scrollHeight - this.scrolling.clientHeight)) {\r\n          rightButton.style.opacity = '0.4'\r\n          leftButton.style.opacity = '1'\r\n        } else if (this.scrolling.scrollTop === 0) {\r\n          leftButton.style.opacity = '0.4'\r\n          rightButton.style.opacity = '1'\r\n        } else {\r\n          leftButton.style.opacity = '1'\r\n          rightButton.style.opacity = '1'\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @description takes the ref of the div and determines the scrollLeft and scrollTop\r\n   * @function rightmove\r\n   *\r\n   */\r\n  rightmove () {\r\n    const scrollRef = this.scrolling\r\n    let tempScrollTop = scrollRef.scrollTop!\r\n    if (\r\n      this.properties.TabOrientation === 0 ||\r\n      this.properties.TabOrientation === 1\r\n    ) {\r\n      scrollRef.scrollLeft! += 50\r\n      if (this.scrolling) {\r\n        const rightButton = this.buttonStyleRef.children[1] as HTMLButtonElement\r\n        const leftButton = this.buttonStyleRef.children[0] as HTMLButtonElement\r\n        if (this.scrolling.scrollLeft >= (this.scrolling.scrollWidth - this.scrolling.clientWidth - 1)) {\r\n          rightButton.style.opacity = '0.4'\r\n          leftButton.style.opacity = '1'\r\n        } else if (this.scrolling.scrollLeft === 0) {\r\n          leftButton.style.opacity = '0.4'\r\n          rightButton.style.opacity = '1'\r\n        } else {\r\n          leftButton.style.opacity = '1'\r\n          rightButton.style.opacity = '1'\r\n        }\r\n      }\r\n    } else {\r\n      tempScrollTop += 50\r\n      scrollRef.scrollTop = tempScrollTop\r\n      if (this.scrolling) {\r\n        const rightButton = this.buttonStyleRef.children[1] as HTMLButtonElement\r\n        const leftButton = this.buttonStyleRef.children[0] as HTMLButtonElement\r\n        if (this.scrolling.scrollTop >= (this.scrolling.scrollHeight - this.scrolling.clientHeight - 1)) {\r\n          rightButton.style.opacity = '0.4'\r\n          leftButton.style.opacity = '1'\r\n        } else if (this.scrolling.scrollTop === 0) {\r\n          leftButton.style.opacity = '0.4'\r\n          rightButton.style.opacity = '1'\r\n        } else {\r\n          leftButton.style.opacity = '1'\r\n          rightButton.style.opacity = '1'\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @description takes the index Value and sets the Value property\r\n   * @function setValue\r\n   *\r\n   */\r\n  setValue (value: number) {\r\n    this.updatedValue = value\r\n    this.updateDataModel({ propertyName: 'Value', value: value })\r\n    return true\r\n  }\r\n  /**\r\n   * @description style object is passed to :style attribute in div tag\r\n   * dynamically changing the styles of the component based on data\r\n   * @function getTabStyle\r\n   *\r\n   */\r\n  protected get getTabStyle (): Partial<CSSStyleDeclaration> {\r\n    const controlProp = this.properties\r\n    return {\r\n      display:\r\n        controlProp.TabOrientation === 0 || controlProp.TabOrientation === 1\r\n          ? 'inline-block'\r\n          : 'block',\r\n      cursor:\r\n        controlProp.MousePointer !== 0 || controlProp.MouseIcon !== ''\r\n          ? this.getMouseCursorData\r\n          : 'default'\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @description getRepeat returns string value from\r\n   * controlProperties.extraDataRepeatProp\r\n   * @function getRepeat\r\n   */\r\n  protected get getRepeatData (): string {\r\n    if (this.selectedPageData) {\r\n      const picture = this.selectedPageData.properties.Picture!\r\n      const pictureTiling = this.selectedPageData.properties.PictureTiling!\r\n      const pictureSizeMode = this.selectedPageData.properties.PictureSizeMode!\r\n      return controlProperties.getRepeatDataProp(\r\n        picture,\r\n        pictureTiling,\r\n        pictureSizeMode\r\n      )\r\n    } else {\r\n      return ''\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @description style object is passed to :style attribute in div tag\r\n   * dynamically changing the styles of the component based on data\r\n   * @function styleContentObj\r\n   *\r\n   */\r\n  protected get styleContentObj (): Partial<CSSStyleDeclaration> {\r\n    const controlProp = this.properties\r\n    if (this.scrolling) {\r\n      Vue.nextTick(() => {\r\n        this.topValue = this.scrolling.offsetHeight!\r\n        this.widthValue = this.scrolling.clientWidth\r\n      })\r\n    }\r\n    return {\r\n      position: 'absolute',\r\n      display:\r\n      controlProp.MultiRow ? 'block' : controlProp.Height! < controlProp.TabFixedHeight!\r\n        ? 'none'\r\n        : controlProp.Width! < controlProp.TabFixedWidth!\r\n          ? 'none'\r\n          : controlProp.Width! < 30 || controlProp.Height! < 30\r\n            ? 'none'\r\n            : controlProp.TabOrientation === 3 ? controlProp.Width! < (this.widthValue + 12) ? 'none' : 'block' : 'block',\r\n      top:\r\n        controlProp.Style !== 2\r\n          ? controlProp.Style === 1\r\n            ? controlProp.TabOrientation === 0\r\n              ? controlProp.MultiRow\r\n                ? this.topValue + 'px'\r\n                : controlProp.TabFixedHeight! > 0\r\n                  ? controlProp.TabFixedHeight! + 13 + 'px'\r\n                  : controlProp.TabFixedHeight! === 0\r\n                    ? this.tempHeight + 19 + 'px'\r\n                    : '36px'\r\n              : '3px'\r\n            : controlProp.TabOrientation === 0\r\n              ? controlProp.MultiRow\r\n                ? this.topValue + 'px'\r\n                : controlProp.TabFixedHeight! > 0\r\n                  ? controlProp.TabFixedHeight! + 10 + 'px'\r\n                  : controlProp.TabFixedHeight! === 0\r\n                    ? this.tempHeight + 16 + 'px'\r\n                    : '33px'\r\n              : '0px'\r\n          : '0px',\r\n      height:\r\n        controlProp.Style !== 2\r\n          ? controlProp.Style === 1 ? controlProp.TabOrientation === 0 || controlProp.TabOrientation === 1\r\n            ? controlProp.MultiRow\r\n              ? (controlProp.Height! -\r\n                this.topValue + 5) + 'px'\r\n              : controlProp.TabFixedHeight! > 0\r\n                ? controlProp.TabOrientation === 0\r\n                  ? controlProp.Height! - controlProp.TabFixedHeight! - 19 + 'px'\r\n                  : controlProp.Height! - controlProp.TabFixedHeight! - 14 + 'px'\r\n                : controlProp.TabFixedHeight! === 0\r\n                  ? controlProp.Font!.FontSize! === 72\r\n                    ? controlProp.Height! - controlProp.Font!.FontSize! - 27 + 'px'\r\n                    : controlProp.Height! - controlProp.Font!.FontSize! - 25 + 'px'\r\n                  : controlProp.TabOrientation === 1\r\n                    ? `${controlProp.Height! - 30}px`\r\n                    : `${controlProp.Height! - 44}px`\r\n            : `${controlProp.Height! - 10}px`\r\n            : controlProp.TabOrientation === 0 || controlProp.TabOrientation === 1\r\n              ? controlProp.MultiRow\r\n                ? (controlProp.Height! -\r\n                this.topValue + 5) + 'px'\r\n                : controlProp.TabFixedHeight! > 0\r\n                  ? controlProp.TabOrientation === 0\r\n                    ? controlProp.Height! - controlProp.TabFixedHeight! - 10 + 'px'\r\n                    : controlProp.Height! - controlProp.TabFixedHeight! - 5 + 'px'\r\n                  : controlProp.TabFixedHeight! === 0\r\n                    ? controlProp.Font!.FontSize! === 72\r\n                      ? controlProp.Height! - controlProp.Font!.FontSize! - 18 + 'px'\r\n                      : controlProp.Height! - controlProp.Font!.FontSize! - 16 + 'px'\r\n                    : controlProp.TabOrientation === 1\r\n                      ? `${controlProp.Height! - 21}px`\r\n                      : `${controlProp.Height! - 35}px`\r\n              : `${controlProp.Height! - 1}px`\r\n          : `${controlProp.Height! - 1}px`,\r\n      width:\r\n        controlProp.Style !== 2\r\n          ? controlProp.Style === 1 ? controlProp.TabOrientation === 0 || controlProp.TabOrientation === 1 ? `${controlProp.Width! - 9}px` : controlProp.TabFixedWidth! > 0 ? controlProp.Width! - controlProp.TabFixedWidth! - 16 + 'px' : controlProp.TabFixedWidth! === 0 ? controlProp.TabOrientation === 2 || controlProp.TabOrientation === 3 ? `${controlProp.Width! - this.tempWidth - 19}px` : controlProp.Width! - controlProp.Font!.FontSize! - 26 + 'px' : 'calc(100% - 50px)'\r\n            : controlProp.TabOrientation === 0 || controlProp.TabOrientation === 1\r\n              ? `${controlProp.Width! - 3}px`\r\n              : controlProp.TabFixedWidth! > 0\r\n                ? controlProp.TabOrientation === 3 ? (controlProp.Width! - this.widthValue) + 'px' : controlProp.Width! - controlProp.TabFixedWidth! - 10 + 'px'\r\n                : controlProp.TabFixedWidth! === 0\r\n                  ? controlProp.TabOrientation === 2 ||\r\n              controlProp.TabOrientation === 3\r\n                    ? controlProp.MultiRow ? (controlProp.Width! - this.widthValue) + 'px' : `${controlProp.Width! - this.tempWidth - 13}px`\r\n                    : controlProp.Width! - controlProp.Font!.FontSize! - 20 + 'px'\r\n                  : 'calc(100% - 44px)'\r\n          : `${controlProp.Width! - 3}px`,\r\n      left:\r\n        controlProp.Style !== 2\r\n          ? controlProp.Style === 1 ? controlProp.TabOrientation === 2\r\n            ? controlProp.MultiRow ? this.widthValue + 'px' : controlProp.TabFixedWidth! > 0\r\n              ? controlProp.TabFixedWidth! + 13 + 'px'\r\n              : controlProp.TabFixedWidth! === 0\r\n                ? controlProp.TabOrientation === 2 ||\r\n                controlProp.TabOrientation === 3\r\n                  ? `${this.tempWidth + 13}px`\r\n                  : controlProp.Font!.FontSize! + 23 + 'px'\r\n                : '43px'\r\n            : '3px'\r\n            : controlProp.TabOrientation === 2\r\n              ? controlProp.MultiRow ? this.widthValue + 'px' : controlProp.TabFixedWidth! > 0\r\n                ? controlProp.TabFixedWidth! + 12 + 'px'\r\n                : controlProp.TabFixedWidth! === 0\r\n                  ? controlProp.TabOrientation === 2 ||\r\n                controlProp.TabOrientation === 3\r\n                    ? `${this.tempWidth + 12}px`\r\n                    : controlProp.Font!.FontSize! + 20 + 'px'\r\n                  : '40px'\r\n              : '0px'\r\n          : '0px',\r\n      padding: controlProp.MultiRow ? '0px' : '0px',\r\n      boxShadow:\r\n        controlProp.TabOrientation === 0 ? '1px 0px gray' : '1px 1px gray'\r\n    }\r\n  }\r\n  /**\r\n   * @description Returns string value for CSS background style for dotted patten\r\n   * @function getSampleDotPattern\r\n   */\r\n  protected get getSampleDotPattern () {\r\n    const dotSize = 13\r\n    const dotSpace = 9\r\n    return {\r\n      backgroundPosition: `${dotSize}px ${dotSize}px`,\r\n      backgroundImage: `radial-gradient(${this.properties.ForeColor} 11%, transparent 10%)`,\r\n      backgroundSize: `${dotSpace}px ${dotSpace}px`\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @description getPosition returns string value from\r\n   * controlProperties.picturePositionProp\r\n   * @function getPosition\r\n   * @returns string value\r\n   */\r\n  protected get getPosition () {\r\n    if (this.selectedPageData) {\r\n      const picture = this.selectedPageData.properties.Picture!\r\n      const pictureAlignment = this.selectedPageData.properties\r\n        .PictureAlignment!\r\n      const pictureSizeMode = this.selectedPageData.properties.PictureSizeMode!\r\n      return controlProperties.getPositionProp(\r\n        picture,\r\n        pictureAlignment,\r\n        pictureSizeMode\r\n      )\r\n    } else {\r\n      return ''\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @description getSizeMode returns string value from\r\n   * controlProperties.pictureSizeModeProp\r\n   * @function getSizeMode\r\n   * @returns string value\r\n   */\r\n  protected get getSizeMode (): string {\r\n    if (this.selectedPageData) {\r\n      const index: number = this.selectedPageData.properties.PictureSizeMode!\r\n      return controlProperties.getSizeModeProp(index)\r\n    } else {\r\n      return ''\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @description getScrollBarPage returns propData based on keepScrollBar and scrollBar values\r\n   * @function getScrollBarPage\r\n   */\r\n  get getScrollBarPage () {\r\n    if (this.selectedPageData) {\r\n      const keepScrollBar: number = this.selectedPageData.properties\r\n        .KeepScrollBarsVisible!\r\n      const scrollBar: number = this.selectedPageData.properties.ScrollBars!\r\n      return controlProperties.setScrollBarProp(keepScrollBar, scrollBar)\r\n    } else {\r\n      return ''\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @description returns the selected page\r\n   * dynamically based on the selectedPageID\r\n   * @function selectedPageData\r\n   *\r\n   */\r\n  get selectedPageData () {\r\n    if (this.selectedPageID) {\r\n      return this.userformData[this.userFormId][this.selectedPageID]\r\n    } else {\r\n      return ''\r\n    }\r\n  }\r\n\r\n  updateMultiRowforLeftAndRight () {\r\n    if (this.properties.MultiRow) {\r\n      this.rowsCount = ''\r\n      if (this.properties.TabOrientation === 2 || this.properties.TabOrientation === 3) {\r\n        const totalHeight = this.properties.Height!\r\n        this.widthValue = this.scrolling.clientWidth\r\n        const k = this.properties.Value\r\n        let sum = 0\r\n        let count = this.scrolling.children.length\r\n        const a = this.scrolling.children[0].children[0].children[1].clientHeight + 5 + 'px'\r\n        for (let i = 0; i < this.scrolling.children.length; i++) {\r\n          sum += (this.scrolling.children[i].children[0].children[1].clientHeight + 5)\r\n        }\r\n        if (totalHeight < sum) {\r\n          count = totalHeight / (this.scrolling.children[0].children[0].children[1].clientHeight + 5)\r\n        }\r\n        if (count < this.scrolling.children.length) {\r\n          for (let j = 0; j < Math.trunc(count); j++) {\r\n            this.rowsCount = this.rowsCount + (parseInt(a) + 5 + 'px') + ' '\r\n          }\r\n        } else {\r\n          for (let j = 0; j < Math.trunc(count); j++) {\r\n            if (j === k) {\r\n              this.rowsCount = this.rowsCount + (parseInt(a) + 5 + 'px') + ' '\r\n            } else {\r\n              this.rowsCount = this.rowsCount + a + ' '\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @description watches changes in propControlData to set autoset when true\r\n   * @function isScrollUsed\r\n   * @param oldVal previous propControlData data\r\n   * @param newVal  new/changed propControlData data\r\n   */\r\n  @Watch('properties.Width')\r\n  isScrollUsed (newVal: number, oldVal: number) {\r\n    this.scrollDisabledValidate()\r\n    if (this.properties.MultiRow) {\r\n      this.updateMultiRowforLeftAndRight()\r\n      this.widthValue = this.scrolling.clientWidth\r\n      if (this.scrolling) {\r\n        Vue.nextTick(() => {\r\n          this.topValue = this.scrolling.offsetHeight\r\n          this.widthValue = this.scrolling.clientWidth\r\n        })\r\n      }\r\n      const initialLength = this.controls.length!\r\n      const len = (this.tempWidth + 12) * initialLength\r\n      if (len - this.properties.Width! >= 0) {\r\n        if (this.multiRowCount <= this.controls.length!) {\r\n          const a = Math.ceil(len / this.properties.Width!)\r\n          this.multiRowCount = a\r\n          if (this.properties.Width! <= (this.tempWidth + 12) * 2) {\r\n            this.multiRowCount = a + 2\r\n          }\r\n        } else if (newVal > oldVal) {\r\n          this.multiRowCount = this.controls.length!\r\n          const a = Math.ceil(len / this.properties.Width!)\r\n          this.multiRowCount = a\r\n        }\r\n      } else {\r\n        this.multiRowCount = 1\r\n      }\r\n    } else {\r\n      this.scrollButtonVerify()\r\n    }\r\n  }\r\n\r\n  @Watch('tempWidth')\r\n  tempWidthValidate () {\r\n    if (this.tempWidth < 30) {\r\n      this.tempWidth = 30\r\n    }\r\n  }\r\n\r\n  @Watch('properties.TabOrientation')\r\n  orientValidate () {\r\n    this.scrollButtonVerify()\r\n    this.scrollDisabledValidate()\r\n    this.updateMultiRowforLeftAndRight()\r\n    this.widthValue = this.scrolling.clientWidth\r\n    if (this.scrolling) {\r\n      Vue.nextTick(() => {\r\n        this.topValue = this.scrolling.offsetHeight!\r\n        this.widthValue = this.scrolling.clientWidth\r\n      })\r\n    }\r\n  }\r\n\r\n  @Watch('properties.Height')\r\n  heightValidate () {\r\n    this.scrollButtonVerify()\r\n    this.scrollDisabledValidate()\r\n    this.updateMultiRowforLeftAndRight()\r\n    if (this.scrolling) {\r\n      Vue.nextTick(() => {\r\n        this.topValue = this.scrolling.offsetHeight!\r\n        this.widthValue = this.scrolling.clientWidth\r\n      })\r\n    }\r\n  }\r\n\r\n  @Watch('properties.TabFixedWidth')\r\n  tabFixedWidthValidate () {\r\n    this.scrollButtonVerify()\r\n    this.scrollDisabledValidate()\r\n    this.updateMultiRowforLeftAndRight()\r\n    if (this.scrolling) {\r\n      Vue.nextTick(() => {\r\n        this.updateDataModel({ propertyName: 'Height', value: this.properties.Height! + 1 })\r\n        this.updateDataModel({ propertyName: 'Height', value: this.properties.Height! - 1 })\r\n        this.topValue = this.scrolling.offsetHeight!\r\n        this.widthValue = this.scrolling.clientWidth\r\n      })\r\n    }\r\n  }\r\n\r\n  @Watch('properties.TabFixedHeight')\r\n  tabFixedHeightValidate () {\r\n    this.scrollButtonVerify()\r\n    this.scrollDisabledValidate()\r\n    this.updateMultiRowforLeftAndRight()\r\n    if (this.scrolling) {\r\n      Vue.nextTick(() => {\r\n        this.updateDataModel({ propertyName: 'Height', value: this.properties.Height! + 1 })\r\n        this.updateDataModel({ propertyName: 'Height', value: this.properties.Height! - 1 })\r\n        this.topValue = this.scrolling.offsetHeight!\r\n        this.widthValue = this.scrolling.clientWidth\r\n      })\r\n    }\r\n  }\r\n\r\n  @Watch('properties.MultiRow')\r\n  multiRowValidate () {\r\n    this.updateMultiRowforLeftAndRight()\r\n    if (this.scrolling) {\r\n      Vue.nextTick(() => {\r\n        this.topValue = this.scrolling.offsetHeight!\r\n        this.widthValue = this.scrolling.clientWidth\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @description watches changes in FontSize of Font\r\n   * @function checkFontValue\r\n   * @param oldVal previous properties data\r\n   * @param newVal  new/changed properties data\r\n   */\r\n  @Watch('properties.Font.FontSize')\r\n  checkFontValue (newVal: number, oldVal: number) {\r\n    this.calculateWidthHeight()\r\n    this.scrollButtonVerify()\r\n    this.scrollDisabledValidate()\r\n    this.updateMultiRowforLeftAndRight()\r\n    if (this.scrolling) {\r\n      Vue.nextTick(() => {\r\n        this.updateDataModel({ propertyName: 'Height', value: this.properties.Height! + 1 })\r\n        this.updateDataModel({ propertyName: 'Height', value: this.properties.Height! - 1 })\r\n        this.topValue = this.scrolling.offsetHeight!\r\n        this.widthValue = this.scrolling.clientWidth\r\n      })\r\n    }\r\n  }\r\n\r\n  @Watch('topValue')\r\n  topValueValidate () {\r\n    this.topValue = this.scrolling.offsetHeight\r\n  }\r\n\r\n  /**\r\n   * @description watches changes in selectedPageData to set the caption\r\n   * @function captionValue\r\n   * @param oldVal previous selectedPageData data\r\n   * @param newVal  new/changed selectedPageData data\r\n   */\r\n  @Watch('selectedPageData.properties.Caption')\r\n  captionValue (newVal: string, oldVal: string) {\r\n    this.setScrollLeft()\r\n    if (newVal === '') {\r\n      this.tempWidth = 30\r\n    }\r\n    this.calculateWidthHeight()\r\n    this.scrollButtonVerify()\r\n    this.scrollDisabledValidate()\r\n    if (this.scrolling) {\r\n      Vue.nextTick(() => {\r\n        this.updateDataModel({ propertyName: 'Height', value: this.properties.Height! + 1 })\r\n        this.updateDataModel({ propertyName: 'Height', value: this.properties.Height! - 1 })\r\n        this.topValue = this.scrolling.offsetHeight!\r\n        this.widthValue = this.scrolling.clientWidth\r\n      })\r\n    }\r\n  }\r\n\r\n  setScrollLeft () {\r\n    if (this.scrolling) {\r\n      let totalSiblingWidth = 0\r\n      for (let i = 0; i < this.properties.Value!; i++) {\r\n        const a = this.scrolling.children[i] as HTMLDivElement\r\n        totalSiblingWidth += a.clientWidth\r\n      }\r\n      this.scrolling.scrollLeft = totalSiblingWidth\r\n    }\r\n  }\r\n\r\n  calculateWidthHeight () {\r\n    const that = this\r\n    if (this.controlTabsRef) {\r\n      const divElement = this.controlTabsRef\r\n      let tempWidth = 0\r\n      let tempHeight = 0\r\n      let maxWidth = 0\r\n      Vue.nextTick(function () {\r\n        for (let i = 0; i < divElement.length; i++) {\r\n          const ele = divElement[i].children[0].children[1]\r\n            .children[0] as HTMLInputElement\r\n          if (ele.offsetWidth > maxWidth) {\r\n            maxWidth = ele.offsetWidth\r\n          }\r\n          if (maxWidth > 30) {\r\n            tempWidth = maxWidth\r\n          } else {\r\n            tempWidth = 30\r\n          }\r\n          if (ele.offsetHeight > tempHeight) {\r\n            tempHeight = ele.offsetHeight\r\n          }\r\n        }\r\n        that.tempWidth = tempWidth\r\n        that.tempHeight = tempHeight\r\n      })\r\n    }\r\n  }\r\n  mounted () {\r\n    this.scrollButtonVerify()\r\n    this.scrollLeftTop(this.data)\r\n    this.selectedPageID = this.controls[0]\r\n    this.calculateWidthHeight()\r\n    // this.focusPage()\r\n  }\r\n  dragSelectorControl (event: MouseEvent) {\r\n    this.selectedControlArray = []\r\n    if (\r\n      this.selectedPageData &&\r\n      this.controls.length > 0 &&\r\n      this.controls.includes(this.selectedPageID)\r\n    ) {\r\n      this.selectedAreaStyle = this.containerRef.dragSelector.selectAreaStyle\r\n      this.calSelectedAreaStyle(event, this.selectedPageData)\r\n    }\r\n  }\r\n  deActControl (event: MouseEvent) {\r\n    this.multiPageMouseDown(event)\r\n  }\r\n\r\n  multiPageMouseDown (e: MouseEvent) {\r\n    this.selectedItem(e)\r\n    if (this.selMultipleCtrl === false && this.activateCtrl === false) {\r\n      const selContainer = this.selectedControls[this.userFormId].container[0]\r\n      const selected = this.selectedControls[this.userFormId].selected\r\n      if (this.controls.length > 0 && selected.length === 1) {\r\n        this.selectControl({\r\n          userFormId: this.userFormId,\r\n          select: {\r\n            container: this.getContainerList(this.selectedPageID),\r\n            selected: [this.selectedPageID]\r\n          }\r\n        })\r\n      }\r\n      if (selContainer === this.controlId) {\r\n        if (this.selMultipleCtrl === false && this.activateCtrl === false) {\r\n          this.selectControl({\r\n            userFormId: this.userFormId,\r\n            select: {\r\n              container: this.getContainerList(this.selectedPageID),\r\n              selected: [this.selectedPageID]\r\n            }\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n  showContextMenu (\r\n    e: MouseEvent,\r\n    parentID: string,\r\n    controlID: string,\r\n    type: string,\r\n    mode: boolean\r\n  ) {\r\n    e.preventDefault()\r\n    const selected = this.selectedControls[this.userFormId].selected\r\n    if (selected.length === 1 && selected[0] === this.controlId && this.controls.length > 0) {\r\n      this.changeSelect(this.controls[0])\r\n    }\r\n    EventBus.$emit('contextMenuDisplay', event, parentID, controlID, type, mode)\r\n  }\r\n  handleKeyDown (event: KeyboardEvent) {\r\n    EventBus.$emit('handleKeyDown', event, this.selectedPageID)\r\n  }\r\n  changeSelect (control: string) {\r\n    this.selectControl({\r\n      userFormId: this.userFormId,\r\n      select: {\r\n        container: this.getContainerList(control),\r\n        selected: [control]\r\n      }\r\n    })\r\n  }\r\n  handleContextMenu (e: MouseEvent) {\r\n    EventBus.$emit('editModeContextMenu', e, this.controlId, this.data, this.isEditMode, this.updatedValue)\r\n  }\r\n  deleteMultiPage (event: KeyboardEvent) {\r\n    if (this.controlId === this.selectedControls[this.userFormId].selected[0]) {\r\n      this.deleteItem(event)\r\n    } else {\r\n      this.handleKeyDown(event)\r\n    }\r\n  }\r\n  updateScrollingLeftTop (e: MouseEvent) {\r\n    const refName = this.contentRef\r\n    this.updateControl({\r\n      userFormId: this.userFormId,\r\n      controlId: this.selectedPageID,\r\n      propertyName: 'ScrollLeft',\r\n      value: refName.scrollLeft\r\n    })\r\n    this.updateControl({\r\n      userFormId: this.userFormId,\r\n      controlId: this.selectedPageID,\r\n      propertyName: 'ScrollTop',\r\n      value: refName.scrollTop\r\n    })\r\n  }\r\n  selectMultipleCtrl (event: KeyboardEvent, val: boolean) {\r\n    if (event.key === 'Control' && event.keyCode === 17) {\r\n      this.selMultipleCtrl = val\r\n      EventBus.$emit('selectMultipleCtrl', val)\r\n    } else if (event.key === 'Shift' && event.keyCode === 16) {\r\n      this.activateCtrl = val\r\n      EventBus.$emit('actMultipleCtrl', val)\r\n    }\r\n  }\r\n\r\n  created () {\r\n    EventBus.$on('updateMultiPageValue', this.updateValue)\r\n    EventBus.$on('focusTabStrip', () => {\r\n      this.focusPage()\r\n    })\r\n  }\r\n  destroyed () {\r\n    EventBus.$off('updateMultiPageValue')\r\n    EventBus.$off('focusTabStrip')\r\n  }\r\n  updateValue () {\r\n    {\r\n      const userData = this.userformData[this.userFormId]\r\n      let selectedPage = -1\r\n      if (this.controls.length > 0) {\r\n        selectedPage = this.controls.findIndex(\r\n          (val) => this.properties.Value === userData[val].properties.Index\r\n        )\r\n      }\r\n      if (this.data.controls.length > 0 && selectedPage !== -1) {\r\n        this.selectedPageID = this.controls[selectedPage]\r\n        this.changeSelect(this.controls[selectedPage])\r\n      } else {\r\n        this.changeSelect(this.controlId)\r\n      }\r\n    }\r\n  }\r\n  deleteMultiPageControl (event: KeyboardEvent) {\r\n    const userData = this.userformData[this.userFormId]\r\n    if (\r\n      this.selectedPageID &&\r\n      this.userformData[this.userFormId][this.selectedPageID].controls.length <=\r\n        0\r\n    ) {\r\n      event.stopPropagation()\r\n      this.deleteItem(event)\r\n    }\r\n  }\r\n\r\n  @Watch('properties.Value')\r\n  valueValidate () {\r\n    this.focusPage()\r\n    this.updateMultiRowforLeftAndRight()\r\n    let sum = 0\r\n    if (this.scrolling) {\r\n      Vue.nextTick(() => {\r\n        this.topValue = this.scrolling.offsetHeight!\r\n        this.widthValue = this.scrolling.clientWidth\r\n      })\r\n    }\r\n    Vue.nextTick(() => {\r\n      if (this.properties.TabOrientation === 0 || this.properties.TabOrientation === 1) {\r\n        for (let i = 0; i < this.properties.Value!; i++) {\r\n          sum += this.controlTabsRef[i].clientWidth\r\n        }\r\n        if (this.properties.Width! - this.scrolling.offsetWidth > sum) {\r\n          this.scrolling.scrollLeft = sum\r\n        } else {\r\n          const valueAsNumber = this.properties.Value! as number\r\n          if (sum > this.controlTabsRef[valueAsNumber].clientWidth) {\r\n            const sL = sum - this.controlTabsRef[valueAsNumber].clientWidth\r\n            this.scrolling.scrollLeft = sL\r\n          } else {\r\n            this.scrolling.scrollLeft = sum\r\n          }\r\n        }\r\n        if (this.scrolling) {\r\n          const rightButton = this.buttonStyleRef.children[1] as HTMLButtonElement\r\n          const leftButton = this.buttonStyleRef.children[0] as HTMLButtonElement\r\n          if (this.scrolling.scrollLeft >= (this.scrolling.scrollWidth - this.scrolling.clientWidth - 30)) {\r\n            rightButton.style.opacity = '0.4'\r\n            leftButton.style.opacity = '1'\r\n          } else if (this.scrolling.scrollLeft === 0) {\r\n            leftButton.style.opacity = '0.4'\r\n            rightButton.style.opacity = '1'\r\n          } else {\r\n            leftButton.style.opacity = '1'\r\n            rightButton.style.opacity = '1'\r\n          }\r\n        }\r\n      } else {\r\n        for (let i = 0; i < this.properties.Value!; i++) {\r\n          sum += this.controlTabsRef[i].clientHeight\r\n        }\r\n        if (this.properties.Height! - this.scrolling.offsetHeight > sum) {\r\n          this.scrolling.scrollTop = sum\r\n        } else {\r\n          const valueAsNumber = this.properties.Value! as number\r\n          if (sum > this.controlTabsRef[valueAsNumber].clientHeight) {\r\n            const sL = sum - this.controlTabsRef[valueAsNumber].clientHeight\r\n            this.scrolling.scrollTop = sL\r\n          } else {\r\n            this.scrolling.scrollTop = sum\r\n          }\r\n        }\r\n        if (this.scrolling) {\r\n          const rightButton = this.buttonStyleRef.children[1] as HTMLButtonElement\r\n          const leftButton = this.buttonStyleRef.children[0] as HTMLButtonElement\r\n          if (this.scrolling.scrollTop >= (this.scrolling.scrollHeight - this.scrolling.clientHeight)) {\r\n            rightButton.style.opacity = '0.4'\r\n            leftButton.style.opacity = '1'\r\n          } else if (this.scrolling.scrollTop === 0) {\r\n            leftButton.style.opacity = '0.4'\r\n            rightButton.style.opacity = '1'\r\n          } else {\r\n            leftButton.style.opacity = '1'\r\n            rightButton.style.opacity = '1'\r\n          }\r\n        }\r\n      }\r\n      this.focusPage()\r\n    })\r\n  }\r\n  addContainerControl (event: MouseEvent) {\r\n    if (!this.isEditMode) {\r\n      this.selectedItem(event)\r\n    } else {\r\n      this.addControlObj(event, this.selectedPageID)\r\n    }\r\n  }\r\n  get getPicture () {\r\n    if (this.selectedPageData) {\r\n      return `url(${this.selectedPageData.properties!.Picture!})`\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.outer-page {\r\n  background-color: rgb(238, 238, 238);\r\n  overflow-y: hidden;\r\n  overflow-x: hidden;\r\n  box-sizing: border-box;\r\n  width: 0px;\r\n  height: 0px;\r\n  left: 0px;\r\n  top: 0px;\r\n  cursor: default;\r\n  position: sticky;\r\n}\r\n.pages {\r\n  /* display: grid; */\r\n  margin: 0;\r\n  /* width: calc(100%);\r\n  height: calc(100%); */\r\n  white-space: nowrap;\r\n  overflow-x: hidden;\r\n  overflow-y: hidden;\r\n}\r\n.left-button {\r\n  position: relative;\r\n  outline: none;\r\n  background-image: url(\"../../../../assets/left-arrow-img.png\");\r\n  background-size: 30%;\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n  border: 2px solid white;\r\n  border-right-color: gray;\r\n  border-bottom-color: gray;\r\n  top: 3px;\r\n  right: 15px;\r\n  width: 22px;\r\n  height: 18px;\r\n  padding: 0;\r\n  margin: 0;\r\n  overflow: hidden;\r\n  z-index: 5;\r\n}\r\n.right-button {\r\n  position: relative;\r\n  outline: none;\r\n  background-image: url(\"../../../../assets/right-arrow-img.png\");\r\n  background-size: 30%;\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n  border: 2px solid white;\r\n  border-right-color: gray;\r\n  border-bottom-color: gray;\r\n  top: 3px;\r\n  right: 15px;\r\n  width: 22px;\r\n  height: 18px;\r\n  padding: 0;\r\n  margin: 0;\r\n  overflow: hidden;\r\n  z-index: 5;\r\n}\r\n.move {\r\n  display: grid;\r\n}\r\n.page {\r\n  vertical-align: top;\r\n  z-index: 1;\r\n  overflow: hidden;\r\n}\r\n.scroll-page {\r\n  z-index: 2;\r\n}\r\n.page label {\r\n  border: 0.1px solid white;\r\n  background-color: rgb(238, 238, 238);\r\n  /* display: inline-block; */\r\n  padding: 5px 5px 5px 5px;\r\n  margin: 0;\r\n  cursor: pointer;\r\n  position: relative;\r\n  top: 0px;\r\n}\r\n.page [type=\"radio\"] {\r\n  display: none;\r\n}\r\n::-webkit-scrollbar.move {\r\n  display: none;\r\n  width: 0;\r\n  height: 1em;\r\n  background-color: rgb(238, 238, 238);\r\n}\r\n::-webkit-scrollbar.content {\r\n  width: 0;\r\n  height: 1em;\r\n  background-color: rgb(238, 238, 238);\r\n}\r\n\r\n::-webkit-scrollbar-button {\r\n  background: rgb(238, 238, 238);\r\n  height: 20px;\r\n  border: 1px solid lightgray;\r\n  border-right-color: gray;\r\n  border-bottom-color: gray;\r\n}\r\n\r\n/* Up */\r\n::-webkit-scrollbar-button:single-button:horizontal:decrement {\r\n  background-image: url(\"../../../../assets/triangle-up-img.png\");\r\n  transform: rotate(90deg);\r\n  background-size: 10px;\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n  /* border-color: lightgrey; */\r\n}\r\n\r\n/* Down */\r\n::-webkit-scrollbar-button:single-button:horizontal:increment {\r\n  background-image: url(\"../../../../assets/triangle-down-img.png\");\r\n  background-size: 10px;\r\n  background-position: center;\r\n  background-repeat: no-repeat;\r\n  /* border-color: lightgrey; */\r\n}\r\n\r\n::-webkit-scrollbar-track-piece {\r\n  width: 0px;\r\n}\r\n\r\n::-webkit-scrollbar-thumb {\r\n  background-color: darkgrey;\r\n  outline: 1px solid slategrey;\r\n  height: 5px;\r\n}\r\n\r\n.page .content {\r\n  position: absolute;\r\n  white-space: normal;\r\n  top: 23px;\r\n  left: 0px;\r\n  /* background: rgb(238, 238, 238); */\r\n  background-color: white;\r\n  background-size: 9px 10px;\r\n  background-image: radial-gradient(\r\n    circle,\r\n    rgb(0, 0, 0) 0.5px,\r\n    rgba(0, 0, 0, 0) 0.2px\r\n  );\r\n  height: 100px;\r\n  right: 0;\r\n  bottom: 0;\r\n  padding: 20px;\r\n  padding-right: 10px;\r\n  width: calc(100% - 35px);\r\n  height: calc(100% - 89px);\r\n  border: 0.1px solid white;\r\n  box-shadow: 2px 1px gray;\r\n}\r\n\r\n.page [type=\"radio\"]:checked ~ label ~ .content {\r\n  z-index: 1;\r\n}\r\n.content {\r\n  overflow: auto;\r\n}\r\n.spanClass {\r\n  text-decoration: underline;\r\n  text-underline-position: under;\r\n}\r\n:focus {\r\n  outline: none;\r\n}\r\n</style>\r\n"]}]}