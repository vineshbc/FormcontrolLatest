{"remainingRequest":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mobiotics/Projects/hancom/FormcontrolLatest/src/FormDesigner/components/organisms/FDHeader/index.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/src/FormDesigner/components/organisms/FDHeader/index.vue","mtime":1612197584000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCmltcG9ydCB7IENvbXBvbmVudCwgVnVlIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcicNCmltcG9ydCB7IFN0YXRlLCBBY3Rpb24gfSBmcm9tICd2dWV4LWNsYXNzJw0KaW1wb3J0IHsNCiAgSWFkZFVzZXJmb3JtLA0KICBJdXBkYXRlQ29udHJvbEV4dHJhRGF0YQ0KfSBmcm9tICdAL3N0b3JlTW9kdWxlcy9mZC9hY3Rpb25zJw0KaW1wb3J0IHsgQ29udHJvbFByb3BlcnR5RGF0YSB9IGZyb20gJ0AvRm9ybURlc2lnbmVyL21vZGVscy9Db250cm9sc1RhYmxlUHJvcGVydGllcy9Db250cm9sUHJvcGVydHlEYXRhJw0KaW1wb3J0IEN1dExvZ28gZnJvbSAnLi4vLi4vLi4vLi4vYXNzZXRzL2N1dC5zdmcnDQppbXBvcnQgRmlsZVNhdmVMb2dvIGZyb20gJy4uLy4uLy4uLy4uL2Fzc2V0cy9maWxlLXNhdmUuc3ZnJw0KaW1wb3J0IENvcHlMb2dvIGZyb20gJy4uLy4uLy4uLy4uL2Fzc2V0cy9jb3B5LnN2ZycNCmltcG9ydCBQYXN0ZUxvZ28gZnJvbSAnLi4vLi4vLi4vLi4vYXNzZXRzL3Bhc3RlLnN2ZycNCmltcG9ydCBGaW5kTG9nbyBmcm9tICcuLi8uLi8uLi8uLi9hc3NldHMvZmluZC5zdmcnDQppbXBvcnQgVW5kb0xvZ28gZnJvbSAnLi4vLi4vLi4vLi4vYXNzZXRzL3VuZG8uc3ZnJw0KaW1wb3J0IFJlZG9Mb2dvIGZyb20gJy4uLy4uLy4uLy4uL2Fzc2V0cy9yZWRvLnN2ZycNCmltcG9ydCBEZXNpZ25Nb2RlTG9nbyBmcm9tICcuLi8uLi8uLi8uLi9hc3NldHMvZGVzaWduLW1vZGUuc3ZnJw0KaW1wb3J0IFBqRXhwbG9yZXJMb2dvIGZyb20gJy4uLy4uLy4uLy4uL2Fzc2V0cy9wai1leHBsb3Jlci5zdmcnDQppbXBvcnQgUGpQcm9wZXJ0eUxvZ28gZnJvbSAnLi4vLi4vLi4vLi4vYXNzZXRzL3BqLXByb3BlcnR5LnN2ZycNCmltcG9ydCBPYmpCcm93c2VyTG9nbyBmcm9tICcuLi8uLi8uLi8uLi9hc3NldHMvb2JqLWJyb3dzZXIuc3ZnJw0KaW1wb3J0IFRvb2xCb3hMb2dvIGZyb20gJy4uLy4uLy4uLy4uL2Fzc2V0cy90b29sLWJveC5zdmcnDQppbXBvcnQgVXNlckZvcm1Mb2dvIGZyb20gJy4uLy4uLy4uLy4uL2Fzc2V0cy91c2VyLWZyb20uc3ZnJw0KaW1wb3J0IEhlbHBMb2dvIGZyb20gJy4uLy4uLy4uLy4uL2Fzc2V0cy9oZWxwLnN2ZycNCmltcG9ydCBDb2RlTG9nbyBmcm9tICcuLi8uLi8uLi8uLi9hc3NldHMvdmlldy1jb2RlLnN2ZycNCmltcG9ydCBPYmplY3RMb2dvIGZyb20gJy4uLy4uLy4uLy4uL2Fzc2V0cy92aWV3LW9iamVjdC5zdmcnDQppbXBvcnQgRkRTVkdJbWFnZSBmcm9tICdAL0Zvcm1EZXNpZ25lci9jb21wb25lbnRzL2F0b21zL0ZEU1ZHSW1hZ2UvaW5kZXgudnVlJw0KaW1wb3J0IHsgRXZlbnRCdXMgfSBmcm9tICdAL0Zvcm1EZXNpZ25lci9ldmVudC1idXMnDQppbXBvcnQgRkRDb21tb25NZXRob2QgZnJvbSAnQC9hcGkvYWJzdHJhY3QvRm9ybURlc2lnbmVyL0ZEQ29tbW9uTWV0aG9kJw0KDQpAQ29tcG9uZW50KHsNCiAgbmFtZTogJ0hlYWRlcicsDQogIGNvbXBvbmVudHM6IHsNCiAgICBGaWxlU2F2ZUxvZ28sDQogICAgQ3V0TG9nbywNCiAgICBDb3B5TG9nbywNCiAgICBQYXN0ZUxvZ28sDQogICAgRmluZExvZ28sDQogICAgVW5kb0xvZ28sDQogICAgUmVkb0xvZ28sDQogICAgRGVzaWduTW9kZUxvZ28sDQogICAgUGpFeHBsb3JlckxvZ28sDQogICAgUGpQcm9wZXJ0eUxvZ28sDQogICAgT2JqQnJvd3NlckxvZ28sDQogICAgVG9vbEJveExvZ28sDQogICAgVXNlckZvcm1Mb2dvLA0KICAgIENvZGVMb2dvLA0KICAgIE9iamVjdExvZ28sDQogICAgSGVscExvZ28sDQogICAgRkRTVkdJbWFnZQ0KICB9DQp9KQ0KZXhwb3J0IGRlZmF1bHQgY2xhc3MgSGVhZGVyIGV4dGVuZHMgRkRDb21tb25NZXRob2Qgew0KICBkaXNwbGF5U3ViTWVudTogYm9vbGVhbiA9IGZhbHNlOw0KICBAQWN0aW9uKCdmZC9hZGRVc2VyZm9ybScpIGFkZENvbnRyb2whOiAocGF5bG9hZDogSWFkZFVzZXJmb3JtKSA9PiB2b2lkOw0KICBAQWN0aW9uKCdmZC9jaGFuZ2VSdW5Nb2RlJykgY2hhbmdlUnVuTW9kZSE6IChwYXlsb2FkOiBib29sZWFuKSA9PiB2b2lkOw0KDQogIEBTdGF0ZSgoc3RhdGUpID0+IHN0YXRlLmZkLnNlbGVjdGVkQ29udHJvbHMpDQogIHNlbGVjdGVkQ29udHJvbHMhOiBmZFN0YXRlWydzZWxlY3RlZENvbnRyb2xzJ107DQogIEBTdGF0ZSgoc3RhdGUpID0+IHN0YXRlLmZkLnVzZXJmb3JtRGF0YSkgdXNlcmZvcm1EYXRhITogdXNlcmZvcm1EYXRhOw0KICBAU3RhdGUoKHN0YXRlKSA9PiBzdGF0ZS5mZC5pc1J1bk1vZGUpIGlzUnVuTW9kZSE6IGJvb2xlYW47DQogIEBBY3Rpb24oJ2ZkL3VwZGF0ZUNvbnRyb2xFeHRyYURhdGEnKSB1cGRhdGVDb250cm9sRXh0cmFEYXRhITogKA0KICAgIHBheWxvYWQ6IEl1cGRhdGVDb250cm9sRXh0cmFEYXRhDQogICkgPT4gdm9pZDsNCiAgcHJvcENvbnRyb2xEYXRhID0ge307DQogIHVzZXJGb3JtSWQgPSAnSURfVVNFUkZPUk0xJzsNCiAgZ3JpZFNpemU6IG51bWJlciA9IDkNCiAgaW5zZXJ0VXNlckZvcm0gKCkgew0KICAgIHRoaXMucHJvcENvbnRyb2xEYXRhID0gdGhpcy51c2VyZm9ybURhdGENCiAgICBjb25zdCB1c2VyZm9ybSA9IG5ldyBDb250cm9sUHJvcGVydHlEYXRhKCkNCiAgICBjb25zdCB1c2VyRm9ybUlkID0gYElEX1VTRVJGT1JNJHsNCiAgICAgIE9iamVjdC5rZXlzKHRoaXMudXNlcmZvcm1EYXRhKS5sZW5ndGggKyAxDQogICAgfWANCiAgICBjb25zdCBOYW1lID0gYFVzZXJGb3JtJHtPYmplY3Qua2V5cyh0aGlzLnVzZXJmb3JtRGF0YSkubGVuZ3RoICsgMX1gDQogICAgY29uc3QgQ2FwdGlvbiA9IGBVc2VyRm9ybSR7T2JqZWN0LmtleXModGhpcy51c2VyZm9ybURhdGEpLmxlbmd0aCArIDF9YA0KICAgIGNvbnN0IElEID0gT2JqZWN0LmtleXModGhpcy51c2VyZm9ybURhdGEpLmxlbmd0aCArIDENCiAgICB0aGlzLmFkZENvbnRyb2woew0KICAgICAgdGFyZ2V0OiB0aGlzLA0KICAgICAga2V5OiB1c2VyRm9ybUlkLA0KICAgICAgdmFsdWU6IHsNCiAgICAgICAgcHJvcGVydGllczogew0KICAgICAgICAgIC4uLnVzZXJmb3JtLmRhdGEuVXNlckZvcm0sDQogICAgICAgICAgTmFtZTogTmFtZSwNCiAgICAgICAgICBJRDogSUQsDQogICAgICAgICAgQ2FwdGlvbjogQ2FwdGlvbg0KICAgICAgICB9LA0KICAgICAgICBjb250cm9sczogW10sDQogICAgICAgIGV4dHJhRGF0YXM6IHsgZGlzcGxheTogJ25vbmUnIH0sDQogICAgICAgIHR5cGU6ICdVc2VyZm9ybScNCiAgICAgIH0NCiAgICB9KQ0KICB9DQogIHN1Yk1lbnVEaXNwbGF5ICgpIHsNCiAgICB0aGlzLmRpc3BsYXlTdWJNZW51ID0gIXRoaXMuZGlzcGxheVN1Yk1lbnUNCiAgfQ0KICBjbGlja0NoYW5nZU1vZGUgKCkgew0KICAgIHRoaXMuY2hhbmdlUnVuTW9kZSghdGhpcy5pc1J1bk1vZGUpDQogIH0NCiAgbWFrZUVxdWFsICh0eXBlOiBrZXlvZiBjb250cm9sUHJvcGVydGllcykgew0KICAgIGNvbnN0IHVzckZybURhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdDQogICAgY29uc3QgY3RybFNlbCA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkDQogICAgY29uc3QgY3RybENvbnRhaW5lciA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLmNvbnRhaW5lclswXQ0KICAgIGNvbnN0IGNvbnRyb2xzID0gdXNyRnJtRGF0YVtjdHJsQ29udGFpbmVyXS5jb250cm9scw0KICAgIGxldCBkaXZzdHlsZTogQXJyYXk8SUdyb3VwU3R5bGU+ID0gW10NCiAgICBsZXQgZ2V0R3JvdXBJbmRleCA9IC0xDQogICAgRXZlbnRCdXMuJGVtaXQoJ2dldEdyb3VwU2l6ZScsIChkaXZzdGF5bGVBcnJheTogQXJyYXk8SUdyb3VwU3R5bGU+KSA9PiB7DQogICAgICBkaXZzdHlsZSA9IGRpdnN0YXlsZUFycmF5DQogICAgfSkNCiAgICBpZiAoY3RybFNlbFswXS5zdGFydHNXaXRoKCdncm91cCcpKSB7DQogICAgICBnZXRHcm91cEluZGV4ID0gZGl2c3R5bGUuZmluZEluZGV4KCh2YWwpID0+IHZhbC5ncm91cE5hbWUgPT09IGN0cmxTZWxbMF0pDQogICAgfQ0KICAgIGxldCBwcm9wVmFsdWUgPSAwDQogICAgY29uc3QgbGVmdEFycmF5OiBzdHJpbmdbXSA9IFtdDQogICAgY29uc3QgcmlnaHRBcnJheTogc3RyaW5nW10gPSBbXQ0KICAgIGZvciAobGV0IGluZGV4ID0gMTsgaW5kZXggPCBjdHJsU2VsLmxlbmd0aDsgaW5kZXgrKykgew0KICAgICAgY29uc3Qgc2VsTGVmdCA9IGN0cmxTZWxbMF0uc3RhcnRzV2l0aCgnZ3JvdXAnKQ0KICAgICAgICA/IHBhcnNlSW50KGRpdnN0eWxlW2dldEdyb3VwSW5kZXhdLmxlZnQhKQ0KICAgICAgICA6IHVzckZybURhdGFbY3RybFNlbFswXV0ucHJvcGVydGllcy5MZWZ0DQogICAgICBjb25zdCBzZWxUb3AgPSBjdHJsU2VsWzBdLnN0YXJ0c1dpdGgoJ2dyb3VwJykNCiAgICAgICAgPyBwYXJzZUludChkaXZzdHlsZVtnZXRHcm91cEluZGV4XS50b3AhKQ0KICAgICAgICA6IHVzckZybURhdGFbY3RybFNlbFswXV0ucHJvcGVydGllcy5Ub3ANCiAgICAgIGlmICghY3RybFNlbFtpbmRleF0uc3RhcnRzV2l0aCgnZ3JvdXAnKSkgew0KICAgICAgICBjb25zdCBjdHJsUHJvcCA9IHVzckZybURhdGFbY3RybFNlbFtpbmRleF1dLnByb3BlcnRpZXMNCiAgICAgICAgaWYgKHR5cGUgPT09ICdMZWZ0Jykgew0KICAgICAgICAgIGlmIChjdHJsUHJvcC5MZWZ0ISA8PSBzZWxMZWZ0ISkgew0KICAgICAgICAgICAgbGVmdEFycmF5LnB1c2goY3RybFNlbFtpbmRleF0pDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHJpZ2h0QXJyYXkucHVzaChjdHJsU2VsW2luZGV4XSkNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ1RvcCcpIHsNCiAgICAgICAgICBpZiAoY3RybFByb3AuVG9wISA8PSBzZWxUb3AhKSB7DQogICAgICAgICAgICBsZWZ0QXJyYXkucHVzaChjdHJsU2VsW2luZGV4XSkNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcmlnaHRBcnJheS5wdXNoKGN0cmxTZWxbaW5kZXhdKQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ2dldEdyb3VwU2l6ZScsIChkaXZzdGF5bGVBcnJheTogQXJyYXk8SUdyb3VwU3R5bGU+KSA9PiB7DQogICAgICAgICAgZGl2c3R5bGUgPSBkaXZzdGF5bGVBcnJheQ0KICAgICAgICB9KQ0KICAgICAgICBjb25zdCBnZXRJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCgNCiAgICAgICAgICAodmFsKSA9PiB2YWwuZ3JvdXBOYW1lID09PSBjdHJsU2VsW2luZGV4XQ0KICAgICAgICApDQogICAgICAgIGNvbnN0IGdyb3VwTGVmdCA9IHBhcnNlSW50KGRpdnN0eWxlW2dldEluZGV4XS5sZWZ0ISkNCiAgICAgICAgY29uc3QgZ3JvdXBUb3AgPSBwYXJzZUludChkaXZzdHlsZVtnZXRJbmRleF0udG9wISkNCiAgICAgICAgY29uc3QgZ3JvdXBDb25yb2wgPSB0aGlzLmdldEdyb3VwQ29udHJvbChjdHJsU2VsW2luZGV4XSkNCiAgICAgICAgaWYgKHR5cGUgPT09ICdMZWZ0Jykgew0KICAgICAgICAgIGlmIChncm91cExlZnQgPD0gc2VsTGVmdCEpIHsNCiAgICAgICAgICAgIGZvciAobGV0IGN0cmwgb2YgZ3JvdXBDb25yb2wpIHsNCiAgICAgICAgICAgICAgY29uc3QgcHJvcCA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY3RybF0ucHJvcGVydGllcw0KICAgICAgICAgICAgICBpZiAoTWF0aC5mbG9vcihwcm9wLkxlZnQhKSA9PT0gZ3JvdXBMZWZ0KSB7DQogICAgICAgICAgICAgICAgbGVmdEFycmF5LnB1c2goY3RybCkNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBmb3IgKGxldCBjdHJsIG9mIGdyb3VwQ29ucm9sKSB7DQogICAgICAgICAgICAgIGNvbnN0IHByb3AgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2N0cmxdLnByb3BlcnRpZXMNCiAgICAgICAgICAgICAgaWYgKE1hdGguZmxvb3IocHJvcC5MZWZ0ISkgPT09IGdyb3VwTGVmdCkgew0KICAgICAgICAgICAgICAgIHJpZ2h0QXJyYXkucHVzaChjdHJsKQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdUb3AnKSB7DQogICAgICAgICAgaWYgKGdyb3VwVG9wIDw9IHNlbFRvcCEpIHsNCiAgICAgICAgICAgIGZvciAobGV0IGN0cmwgb2YgZ3JvdXBDb25yb2wpIHsNCiAgICAgICAgICAgICAgY29uc3QgcHJvcCA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY3RybF0ucHJvcGVydGllcw0KICAgICAgICAgICAgICBpZiAoTWF0aC5mbG9vcihwcm9wLlRvcCEpID09PSBncm91cFRvcCkgew0KICAgICAgICAgICAgICAgIGxlZnRBcnJheS5wdXNoKGN0cmwpDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgZm9yIChsZXQgY3RybCBvZiBncm91cENvbnJvbCkgew0KICAgICAgICAgICAgICBjb25zdCBwcm9wID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtjdHJsXS5wcm9wZXJ0aWVzDQogICAgICAgICAgICAgIGlmIChNYXRoLmZsb29yKHByb3AuVG9wISkgPT09IGdyb3VwVG9wKSB7DQogICAgICAgICAgICAgICAgcmlnaHRBcnJheS5wdXNoKGN0cmwpDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogICAgaWYgKGN0cmxTZWxbMF0uc3RhcnRzV2l0aCgnZ3JvdXAnKSkgew0KICAgICAgY29uc3QgZ2V0SW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgoDQogICAgICAgICh2YWwpID0+IHZhbC5ncm91cE5hbWUgPT09IGN0cmxTZWxbMF0NCiAgICAgICkNCiAgICAgIGNvbnN0IGdyb3VwTGVmdCA9IHBhcnNlSW50KGRpdnN0eWxlW2dldEluZGV4XS5sZWZ0ISkNCiAgICAgIGNvbnN0IGdyb3VwVG9wID0gcGFyc2VJbnQoZGl2c3R5bGVbZ2V0SW5kZXhdLnRvcCEpDQogICAgICBjb25zdCBncm91cENvbnJvbCA9IHRoaXMuZ2V0R3JvdXBDb250cm9sKGN0cmxTZWxbMF0pDQogICAgICBpZiAodHlwZSA9PT0gJ0xlZnQnKSB7DQogICAgICAgIGZvciAobGV0IGN0cmwgb2YgZ3JvdXBDb25yb2wpIHsNCiAgICAgICAgICBjb25zdCBwcm9wID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtjdHJsXS5wcm9wZXJ0aWVzDQogICAgICAgICAgaWYgKE1hdGguZmxvb3IocHJvcC5MZWZ0ISkgPT09IGdyb3VwTGVmdCkgew0KICAgICAgICAgICAgbGVmdEFycmF5LnB1c2goY3RybCkNCiAgICAgICAgICAgIHJpZ2h0QXJyYXkucHVzaChjdHJsKQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnVG9wJykgew0KICAgICAgICBmb3IgKGxldCBjdHJsIG9mIGdyb3VwQ29ucm9sKSB7DQogICAgICAgICAgY29uc3QgcHJvcCA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY3RybF0ucHJvcGVydGllcw0KICAgICAgICAgIGlmIChNYXRoLmZsb29yKHByb3AuVG9wISkgPT09IGdyb3VwVG9wKSB7DQogICAgICAgICAgICBsZWZ0QXJyYXkucHVzaChjdHJsKQ0KICAgICAgICAgICAgcmlnaHRBcnJheS5wdXNoKGN0cmwpDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSBlbHNlIHsNCiAgICAgIGxlZnRBcnJheS51bnNoaWZ0KGN0cmxTZWxbMF0pDQogICAgICByaWdodEFycmF5LnB1c2goY3RybFNlbFswXSkNCiAgICB9DQogICAgaWYgKHR5cGUgPT09ICdMZWZ0Jykgew0KICAgICAgbGVmdEFycmF5LnNvcnQoKGEsIGIpID0+IHsNCiAgICAgICAgcmV0dXJuIHVzckZybURhdGFbYV0ucHJvcGVydGllcy5MZWZ0ISAtIHVzckZybURhdGFbYl0ucHJvcGVydGllcy5MZWZ0IQ0KICAgICAgfSkNCiAgICAgIHJpZ2h0QXJyYXkuc29ydCgoYSwgYikgPT4gew0KICAgICAgICByZXR1cm4gdXNyRnJtRGF0YVthXS5wcm9wZXJ0aWVzLkxlZnQhIC0gdXNyRnJtRGF0YVtiXS5wcm9wZXJ0aWVzLkxlZnQhDQogICAgICB9KQ0KICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ1RvcCcpIHsNCiAgICAgIGxlZnRBcnJheS5zb3J0KChhLCBiKSA9PiB7DQogICAgICAgIHJldHVybiB1c3JGcm1EYXRhW2FdLnByb3BlcnRpZXMuVG9wISAtIHVzckZybURhdGFbYl0ucHJvcGVydGllcy5Ub3AhDQogICAgICB9KQ0KICAgICAgcmlnaHRBcnJheS5zb3J0KChhLCBiKSA9PiB7DQogICAgICAgIHJldHVybiB1c3JGcm1EYXRhW2FdLnByb3BlcnRpZXMuVG9wISAtIHVzckZybURhdGFbYl0ucHJvcGVydGllcy5Ub3AhDQogICAgICB9KQ0KICAgIH0NCiAgICBsZXQgbGVmdENvbnRyb2wgPSB7IC4uLnVzckZybURhdGFbbGVmdEFycmF5WzBdXS5wcm9wZXJ0aWVzIH0NCiAgICBpZiAobGVmdENvbnRyb2wuR3JvdXBJRCAhPT0gJycpIHsNCiAgICAgIGNvbnN0IGdyb3VwSW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgoDQogICAgICAgICh2YWwpID0+IHZhbC5ncm91cE5hbWUgPT09IGxlZnRDb250cm9sLkdyb3VwSUQNCiAgICAgICkNCiAgICAgIGNvbnN0IGdyb3VwU2l6ZSA9IGRpdnN0eWxlW2dyb3VwSW5kZXhdDQogICAgICBsZWZ0Q29udHJvbCA9IHsNCiAgICAgICAgLi4ubGVmdENvbnRyb2wsDQogICAgICAgIFdpZHRoOiBwYXJzZUludChkaXZzdHlsZVtncm91cEluZGV4XS53aWR0aCEpLA0KICAgICAgICBIZWlnaHQ6IHBhcnNlSW50KGRpdnN0eWxlW2dyb3VwSW5kZXhdLmhlaWdodCEpLA0KICAgICAgICBMZWZ0OiBwYXJzZUludChkaXZzdHlsZVtncm91cEluZGV4XS5sZWZ0ISksDQogICAgICAgIFRvcDogcGFyc2VJbnQoZGl2c3R5bGVbZ3JvdXBJbmRleF0udG9wISkNCiAgICAgIH0NCiAgICB9DQogICAgbGV0IHJpZ2h0Q29udHJvbCA9IHsNCiAgICAgIC4uLnVzckZybURhdGFbcmlnaHRBcnJheVtyaWdodEFycmF5Lmxlbmd0aCAtIDFdXS5wcm9wZXJ0aWVzDQogICAgfQ0KICAgIGlmIChyaWdodENvbnRyb2wuR3JvdXBJRCAhPT0gJycpIHsNCiAgICAgIGNvbnN0IGdyb3VwSW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgoDQogICAgICAgICh2YWwpID0+IHZhbC5ncm91cE5hbWUgPT09IHJpZ2h0Q29udHJvbC5Hcm91cElEDQogICAgICApDQogICAgICBjb25zdCBncm91cFNpemUgPSBkaXZzdHlsZVtncm91cEluZGV4XQ0KICAgICAgcmlnaHRDb250cm9sID0gew0KICAgICAgICAuLi5sZWZ0Q29udHJvbCwNCiAgICAgICAgV2lkdGg6IHBhcnNlSW50KGRpdnN0eWxlW2dyb3VwSW5kZXhdLndpZHRoISksDQogICAgICAgIEhlaWdodDogcGFyc2VJbnQoZGl2c3R5bGVbZ3JvdXBJbmRleF0uaGVpZ2h0ISksDQogICAgICAgIExlZnQ6IHBhcnNlSW50KGRpdnN0eWxlW2dyb3VwSW5kZXhdLmxlZnQhKSwNCiAgICAgICAgVG9wOiBwYXJzZUludChkaXZzdHlsZVtncm91cEluZGV4XS50b3AhKQ0KICAgICAgfQ0KICAgIH0NCiAgICBsZXQgdG90YWxTaXplID0gMA0KICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBjdHJsU2VsLmxlbmd0aDsgaW5kZXgrKykgew0KICAgICAgaWYgKHR5cGUgPT09ICdMZWZ0Jykgew0KICAgICAgICBpZiAoIWN0cmxTZWxbaW5kZXhdLnN0YXJ0c1dpdGgoJ2dyb3VwJykpIHsNCiAgICAgICAgICBjb25zdCBjdHJsUHJvcCA9IHVzckZybURhdGFbY3RybFNlbFtpbmRleF1dLnByb3BlcnRpZXMNCiAgICAgICAgICB0b3RhbFNpemUgPSB0b3RhbFNpemUgKyBjdHJsUHJvcC5XaWR0aCENCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBjb25zdCBncm91cEluZGV4ID0gZGl2c3R5bGUuZmluZEluZGV4KA0KICAgICAgICAgICAgKHZhbCkgPT4gdmFsLmdyb3VwTmFtZSA9PT0gY3RybFNlbFtpbmRleF0NCiAgICAgICAgICApDQogICAgICAgICAgdG90YWxTaXplID0gdG90YWxTaXplICsgcGFyc2VJbnQoZGl2c3R5bGVbZ3JvdXBJbmRleF0ud2lkdGghKQ0KICAgICAgICB9DQogICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdUb3AnKSB7DQogICAgICAgIGlmICghY3RybFNlbFtpbmRleF0uc3RhcnRzV2l0aCgnZ3JvdXAnKSkgew0KICAgICAgICAgIGNvbnN0IGN0cmxQcm9wID0gdXNyRnJtRGF0YVtjdHJsU2VsW2luZGV4XV0ucHJvcGVydGllcw0KICAgICAgICAgIHRvdGFsU2l6ZSA9IHRvdGFsU2l6ZSArIGN0cmxQcm9wLkhlaWdodCENCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBjb25zdCBncm91cEluZGV4ID0gZGl2c3R5bGUuZmluZEluZGV4KA0KICAgICAgICAgICAgKHZhbCkgPT4gdmFsLmdyb3VwTmFtZSA9PT0gY3RybFNlbFtpbmRleF0NCiAgICAgICAgICApDQogICAgICAgICAgdG90YWxTaXplID0gdG90YWxTaXplICsgcGFyc2VJbnQoZGl2c3R5bGVbZ3JvdXBJbmRleF0uaGVpZ2h0ISkNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgICBsZXQgZGlmZnJlbmNlID0gMA0KICAgIGlmICh0eXBlID09PSAnTGVmdCcpIHsNCiAgICAgIGRpZmZyZW5jZSA9DQogICAgICAgIChyaWdodENvbnRyb2wuTGVmdCEgKw0KICAgICAgICAgIHJpZ2h0Q29udHJvbC5XaWR0aCEgLQ0KICAgICAgICAgIGxlZnRDb250cm9sLkxlZnQhIC0NCiAgICAgICAgICB0b3RhbFNpemUpIC8NCiAgICAgICAgKGN0cmxTZWwubGVuZ3RoIC0gMSkNCiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdUb3AnKSB7DQogICAgICBkaWZmcmVuY2UgPQ0KICAgICAgICAocmlnaHRDb250cm9sLlRvcCEgKw0KICAgICAgICAgIHJpZ2h0Q29udHJvbC5IZWlnaHQhIC0NCiAgICAgICAgICBsZWZ0Q29udHJvbC5Ub3AhIC0NCiAgICAgICAgICB0b3RhbFNpemUpIC8NCiAgICAgICAgKGN0cmxTZWwubGVuZ3RoIC0gMSkNCiAgICB9DQogICAgY29uc3QgdW5pcXVlID0gKCkgPT4gew0KICAgICAgdmFyIGEgPSBsZWZ0QXJyYXkuY29uY2F0KHJpZ2h0QXJyYXkpDQogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGEubGVuZ3RoOyArK2kpIHsNCiAgICAgICAgZm9yICh2YXIgaiA9IGkgKyAxOyBqIDwgYS5sZW5ndGg7ICsraikgew0KICAgICAgICAgIGlmIChhW2ldID09PSBhW2pdKSB7DQogICAgICAgICAgICBhLnNwbGljZShqLS0sIDEpDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgICByZXR1cm4gYQ0KICAgIH0NCiAgICBjb25zdCBjb21iaW5lQXJyYXkgPSB1bmlxdWUoKQ0KICAgIGZvciAobGV0IGluZGV4ID0gMTsgaW5kZXggPCBjb21iaW5lQXJyYXkubGVuZ3RoIC0gMTsgaW5kZXgrKykgew0KICAgICAgY29uc3QgcHJldkN0cmxQcm9wID0gdXNyRnJtRGF0YVtjb21iaW5lQXJyYXlbaW5kZXggLSAxXV0ucHJvcGVydGllcw0KICAgICAgY29uc3QgY3RybFByb3AgPSB1c3JGcm1EYXRhW2NvbWJpbmVBcnJheVtpbmRleF1dLnByb3BlcnRpZXMNCiAgICAgIGxldCBwcmV2SW5kZXggPSAtMQ0KICAgICAgY29uc3QgY29udHJvbFByb3BJbmRleCA9IC0xDQogICAgICBpZiAodHlwZSA9PT0gJ0xlZnQnKSB7DQogICAgICAgIGlmIChwcmV2Q3RybFByb3AuR3JvdXBJRCA9PT0gJycgJiYgY3RybFByb3AuR3JvdXBJRCA9PT0gJycpIHsNCiAgICAgICAgICBwcm9wVmFsdWUgPSBwcmV2Q3RybFByb3AuTGVmdCEgKyBwcmV2Q3RybFByb3AuV2lkdGghICsgZGlmZnJlbmNlDQogICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkodHlwZSwgcHJvcFZhbHVlLCBjb21iaW5lQXJyYXlbaW5kZXhdKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGlmIChwcmV2Q3RybFByb3AuR3JvdXBJRCAhPT0gJycpIHsNCiAgICAgICAgICAgIHByZXZJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCgNCiAgICAgICAgICAgICAgKHZhbCkgPT4gdmFsLmdyb3VwTmFtZSA9PT0gcHJldkN0cmxQcm9wLkdyb3VwSUQNCiAgICAgICAgICAgICkNCiAgICAgICAgICAgIHByb3BWYWx1ZSA9DQogICAgICAgICAgICAgIHBhcnNlSW50KGRpdnN0eWxlW3ByZXZJbmRleF0ubGVmdCEpICsNCiAgICAgICAgICAgICAgcGFyc2VJbnQoZGl2c3R5bGVbcHJldkluZGV4XS53aWR0aCEpICsNCiAgICAgICAgICAgICAgZGlmZnJlbmNlDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHByb3BWYWx1ZSA9IHByZXZDdHJsUHJvcC5MZWZ0ISArIHByZXZDdHJsUHJvcC5XaWR0aCEgKyBkaWZmcmVuY2UNCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKGN0cmxQcm9wLkdyb3VwSUQgIT09ICcnKSB7DQogICAgICAgICAgICBjb25zdCBnZXRJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCgNCiAgICAgICAgICAgICAgKHZhbCkgPT4gdmFsLmdyb3VwTmFtZSA9PT0gY3RybFByb3AuR3JvdXBJRA0KICAgICAgICAgICAgKQ0KICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3VwZGFzdGVHcm91cFNpemUnLCB0eXBlLCBwcm9wVmFsdWUsIGdldEluZGV4KQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSh0eXBlLCBwcm9wVmFsdWUsIGNvbWJpbmVBcnJheVtpbmRleF0pDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICBpZiAodHlwZSA9PT0gJ1RvcCcpIHsNCiAgICAgICAgICBpZiAocHJldkN0cmxQcm9wLkdyb3VwSUQgPT09ICcnICYmIGN0cmxQcm9wLkdyb3VwSUQgPT09ICcnKSB7DQogICAgICAgICAgICBwcm9wVmFsdWUgPSBwcmV2Q3RybFByb3AuVG9wISArIHByZXZDdHJsUHJvcC5IZWlnaHQhICsgZGlmZnJlbmNlDQogICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSh0eXBlLCBwcm9wVmFsdWUsIGNvbWJpbmVBcnJheVtpbmRleF0pDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGlmIChwcmV2Q3RybFByb3AuR3JvdXBJRCAhPT0gJycpIHsNCiAgICAgICAgICAgICAgcHJldkluZGV4ID0gZGl2c3R5bGUuZmluZEluZGV4KA0KICAgICAgICAgICAgICAgICh2YWwpID0+IHZhbC5ncm91cE5hbWUgPT09IHByZXZDdHJsUHJvcC5Hcm91cElEDQogICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgcHJvcFZhbHVlID0NCiAgICAgICAgICAgICAgICBwYXJzZUludChkaXZzdHlsZVtwcmV2SW5kZXhdLnRvcCEpICsNCiAgICAgICAgICAgICAgICBwYXJzZUludChkaXZzdHlsZVtwcmV2SW5kZXhdLmhlaWdodCEpICsNCiAgICAgICAgICAgICAgICBkaWZmcmVuY2UNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHByb3BWYWx1ZSA9IHByZXZDdHJsUHJvcC5Ub3AhICsgcHJldkN0cmxQcm9wLkhlaWdodCEgKyBkaWZmcmVuY2UNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGlmIChjdHJsUHJvcC5Hcm91cElEICE9PSAnJykgew0KICAgICAgICAgICAgICBjb25zdCBnZXRJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCgNCiAgICAgICAgICAgICAgICAodmFsKSA9PiB2YWwuZ3JvdXBOYW1lID09PSBjdHJsUHJvcC5Hcm91cElEDQogICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3VwZGFzdGVHcm91cFNpemUnLCB0eXBlLCBwcm9wVmFsdWUsIGdldEluZGV4KQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkodHlwZSwgcHJvcFZhbHVlLCBjb21iaW5lQXJyYXlbaW5kZXhdKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfQ0KICBicmluZ0Zyb250ICgpIHsNCiAgICBjb25zdCB1c2VyRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF0NCiAgICBjb25zdCBoaWdoUHJvckNvbnRyb2w6IHN0cmluZ1tdID0gW10NCiAgICBjb25zdCBsb3dQcm9yQ29udHJvbDogc3RyaW5nW10gPSBbXQ0KICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuZ2V0Q29udGFpbmVyTGlzdCh0aGlzLmdldFNlbGVjdGVkQ29udHJvbHNEYXRhcyFbMF0pWzBdDQogICAgY29uc3QgY29udGFpbmVyQ29udHJvbHMgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2NvbnRhaW5lcl0uY29udHJvbHMNCiAgICBmb3IgKGNvbnN0IGluZGV4IGluIGNvbnRhaW5lckNvbnRyb2xzKSB7DQogICAgICBjb25zdCBjbnRybERhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2NvbnRhaW5lckNvbnRyb2xzW2luZGV4XV0NCiAgICAgIGlmIChjbnRybERhdGEudHlwZSA9PT0gJ011bHRpUGFnZScgfHwgY250cmxEYXRhLnR5cGUgPT09ICdGcmFtZScgfHwgY250cmxEYXRhLnR5cGUgPT09ICdMaXN0Qm94Jykgew0KICAgICAgICBoaWdoUHJvckNvbnRyb2wucHVzaChjb250YWluZXJDb250cm9sc1tpbmRleF0pDQogICAgICB9IGVsc2Ugew0KICAgICAgICBsb3dQcm9yQ29udHJvbC5wdXNoKGNvbnRhaW5lckNvbnRyb2xzW2luZGV4XSkNCiAgICAgIH0NCiAgICB9DQogICAgbG93UHJvckNvbnRyb2wuc29ydCgoYSwgYikgPT4gew0KICAgICAgcmV0dXJuIHVzZXJEYXRhW2FdLmV4dHJhRGF0YXMhLnpJbmRleCEgLSB1c2VyRGF0YVtiXS5leHRyYURhdGFzIS56SW5kZXghDQogICAgfSkNCiAgICBsZXQgZ2V0TG93UHJvcEhpZ2hlc3RJbmRleDogc3RyaW5nID0gbG93UHJvckNvbnRyb2xbbG93UHJvckNvbnRyb2wubGVuZ3RoIC0gMV0NCiAgICBoaWdoUHJvckNvbnRyb2wuc29ydCgoYSwgYikgPT4gew0KICAgICAgcmV0dXJuIHVzZXJEYXRhW2FdLmV4dHJhRGF0YXMhLnpJbmRleCEgLSB1c2VyRGF0YVtiXS5leHRyYURhdGFzIS56SW5kZXghDQogICAgfSkNCiAgICBsZXQgZ2V0SGlnaFByb3BIaWdoZXN0SW5kZXggPSBoaWdoUHJvckNvbnRyb2xbaGlnaFByb3JDb250cm9sLmxlbmd0aCAtIDFdDQogICAgY29uc3QgbG93U2VyaWVzQ29udHJvbDogc3RyaW5nW10gPSBbXQ0KICAgIGNvbnN0IGhpZ2hTZXJpZXNDb250cm9sOiBzdHJpbmdbXSA9IFtdDQogICAgY29uc3QgZ2V0U2VsQ29udHJvbCA9IFsuLi50aGlzLmdldFNlbGVjdGVkQ29udHJvbHNEYXRhcyFdDQogICAgZ2V0U2VsQ29udHJvbC5zb3J0KChhLCBiKSA9PiB7DQogICAgICByZXR1cm4gdXNlckRhdGFbYV0uZXh0cmFEYXRhcyEuekluZGV4ISAtIHVzZXJEYXRhW2JdLmV4dHJhRGF0YXMhLnpJbmRleCENCiAgICB9KQ0KICAgIGZvciAoY29uc3Qgc2VsQ29udHJvbCBvZiBnZXRTZWxDb250cm9sKSB7DQogICAgICBpZiAobG93UHJvckNvbnRyb2wuaW5jbHVkZXMoc2VsQ29udHJvbCkpIHsNCiAgICAgICAgbG93U2VyaWVzQ29udHJvbC5wdXNoKHNlbENvbnRyb2wpDQogICAgICB9IGVsc2Ugew0KICAgICAgICBoaWdoU2VyaWVzQ29udHJvbC5wdXNoKHNlbENvbnRyb2wpDQogICAgICB9DQogICAgfQ0KICAgIGNvbnN0IHNldExvd1Byb3BIaWdoSW5kZXggPSAoY29udHJvbDogc3RyaW5nKSA9PiB7DQogICAgICBpZiAobG93U2VyaWVzQ29udHJvbC5sZW5ndGggPiAwICYmIGxvd1Nlcmllc0NvbnRyb2wuaW5jbHVkZXMoY29udHJvbCkpIHsNCiAgICAgICAgbG93U2VyaWVzQ29udHJvbC5wb3AoKQ0KICAgICAgICBjb25zdCBJbmRleCA9IGxvd1Byb3JDb250cm9sLmZpbmRJbmRleCh2YWwgPT4gdXNlckRhdGFbZ2V0TG93UHJvcEhpZ2hlc3RJbmRleCFdLmV4dHJhRGF0YXMhLnpJbmRleCEgLSAxID09PSB1c2VyRGF0YVt2YWxdLmV4dHJhRGF0YXMhLnpJbmRleCkNCiAgICAgICAgZ2V0TG93UHJvcEhpZ2hlc3RJbmRleCA9IEluZGV4ICE9PSAtMSA/IGxvd1Byb3JDb250cm9sW0luZGV4XSA6ICcnDQogICAgICAgIGlmIChJbmRleCAhPT0gLTEpIHsNCiAgICAgICAgICBzZXRMb3dQcm9wSGlnaEluZGV4KGdldExvd1Byb3BIaWdoZXN0SW5kZXgpDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogICAgc2V0TG93UHJvcEhpZ2hJbmRleChnZXRMb3dQcm9wSGlnaGVzdEluZGV4KQ0KICAgIGxvd1Nlcmllc0NvbnRyb2wuc29ydCgoYSwgYikgPT4gew0KICAgICAgcmV0dXJuIHVzZXJEYXRhW2FdLmV4dHJhRGF0YXMhLnpJbmRleCEgLSB1c2VyRGF0YVtiXS5leHRyYURhdGFzIS56SW5kZXghDQogICAgfSkNCiAgICBpZiAobG93U2VyaWVzQ29udHJvbC5sZW5ndGggPiAwKSB7DQogICAgICBjb25zdCBsb3dlc3RaSW5kZXggPSB1c2VyRGF0YVtsb3dTZXJpZXNDb250cm9sWzBdXS5leHRyYURhdGFzIS56SW5kZXghDQogICAgICBsZXQgbmV4dFNlcmllczogc3RyaW5nW10gPSBbXQ0KICAgICAgbGV0IGNvdW50ID0gbG93U2VyaWVzQ29udHJvbC5sZW5ndGggLSAxDQogICAgICBjb25zdCBkaWZmID0gdXNlckRhdGFbZ2V0TG93UHJvcEhpZ2hlc3RJbmRleF0uZXh0cmFEYXRhcyEuekluZGV4ISAtIHVzZXJEYXRhW2xvd1Nlcmllc0NvbnRyb2xbbG93U2VyaWVzQ29udHJvbC5sZW5ndGggLSAxXV0uZXh0cmFEYXRhcyEuekluZGV4IQ0KICAgICAgZm9yIChjb25zdCBjdHJsIG9mIGxvd1Nlcmllc0NvbnRyb2wpIHsNCiAgICAgICAgY29uc3QgbmV4dENvbnRyb2wgPSBsb3dTZXJpZXNDb250cm9sLmZpbmRJbmRleCh2YWwgPT4gJ3pJbmRleCcgaW4gdXNlckRhdGFbdmFsXS5leHRyYURhdGFzISAmJiAodXNlckRhdGFbY3RybF0uZXh0cmFEYXRhcyEuekluZGV4ISArIDEgPT09IHVzZXJEYXRhW3ZhbF0uZXh0cmFEYXRhcyEuekluZGV4ISkpDQogICAgICAgIGlmIChuZXh0Q29udHJvbCAhPT0gLTEpIHsNCiAgICAgICAgICBuZXh0U2VyaWVzLnB1c2goY3RybCkNCiAgICAgICAgICBjb3VudCA9IGNvdW50IC0gMQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGNvbnN0IGRpZmZlcmVuY2UgPSB1c2VyRGF0YVtnZXRMb3dQcm9wSGlnaGVzdEluZGV4XS5leHRyYURhdGFzIS56SW5kZXghIC0gY291bnQNCiAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXMoY3RybCwgJ3pJbmRleCcsIGRpZmZlcmVuY2UpDQogICAgICAgICAgaWYgKG5leHRTZXJpZXMubGVuZ3RoID4gMCkgew0KICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXh0U2VyaWVzLmxlbmd0aDsgaSsrKSB7DQogICAgICAgICAgICAgIGNvbnN0IGRpZmYgPSB1c2VyRGF0YVtjdHJsXS5leHRyYURhdGFzIS56SW5kZXghIC0gKG5leHRTZXJpZXMubGVuZ3RoIC0gaSkNCiAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKG5leHRTZXJpZXNbaV0sICd6SW5kZXgnLCBkaWZmKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgbmV4dFNlcmllcyA9IFtdDQogICAgICAgICAgfQ0KICAgICAgICAgIGNvdW50ID0gY291bnQgLSAxDQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGxldCBjb3VudGVyID0gMA0KICAgICAgZm9yIChjb25zdCBjdHJsIG9mIGxvd1Byb3JDb250cm9sKSB7DQogICAgICAgIGlmICghdGhpcy5nZXRTZWxlY3RlZENvbnRyb2xzRGF0YXMhLmluY2x1ZGVzKGN0cmwpKSB7DQogICAgICAgICAgY291bnRlciA9IGNvdW50ZXIgKyAxDQogICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKGN0cmwsICd6SW5kZXgnLCBjb3VudGVyKQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KDQogICAgY29uc3Qgc2V0SGlnaFByb3BIaWdoSW5kZXggPSAoY29udHJvbDogc3RyaW5nKSA9PiB7DQogICAgICBpZiAoaGlnaFNlcmllc0NvbnRyb2wubGVuZ3RoID4gMCAmJiBoaWdoU2VyaWVzQ29udHJvbC5pbmNsdWRlcyhjb250cm9sKSkgew0KICAgICAgICBoaWdoU2VyaWVzQ29udHJvbC5wb3AoKQ0KICAgICAgICBjb25zdCBJbmRleCA9IGhpZ2hQcm9yQ29udHJvbC5maW5kSW5kZXgodmFsID0+IHVzZXJEYXRhW2dldEhpZ2hQcm9wSGlnaGVzdEluZGV4IV0uZXh0cmFEYXRhcyEuekluZGV4ISAtIDEgPT09IHVzZXJEYXRhW3ZhbF0uZXh0cmFEYXRhcyEuekluZGV4KQ0KICAgICAgICBnZXRIaWdoUHJvcEhpZ2hlc3RJbmRleCA9IEluZGV4ICE9PSAtMSA/IGhpZ2hQcm9yQ29udHJvbFtJbmRleF0gOiAnJw0KICAgICAgICBpZiAoSW5kZXggIT09IC0xKSB7DQogICAgICAgICAgc2V0SGlnaFByb3BIaWdoSW5kZXgoZ2V0SGlnaFByb3BIaWdoZXN0SW5kZXgpDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogICAgc2V0SGlnaFByb3BIaWdoSW5kZXgoZ2V0SGlnaFByb3BIaWdoZXN0SW5kZXgpDQogICAgaGlnaFNlcmllc0NvbnRyb2wuc29ydCgoYSwgYikgPT4gew0KICAgICAgcmV0dXJuIHVzZXJEYXRhW2FdLmV4dHJhRGF0YXMhLnpJbmRleCEgLSB1c2VyRGF0YVtiXS5leHRyYURhdGFzIS56SW5kZXghDQogICAgfSkNCiAgICBpZiAoaGlnaFNlcmllc0NvbnRyb2wubGVuZ3RoID4gMCkgew0KICAgICAgY29uc3QgaGlnaGVzdFpJbmRleCA9IHVzZXJEYXRhW2hpZ2hTZXJpZXNDb250cm9sWzBdXS5leHRyYURhdGFzIS56SW5kZXghDQogICAgICBsZXQgbmV4dFNlcmllczogc3RyaW5nW10gPSBbXQ0KICAgICAgbGV0IGNvdW50ID0gaGlnaFNlcmllc0NvbnRyb2wubGVuZ3RoIC0gMQ0KICAgICAgY29uc3QgZGlmZiA9IHVzZXJEYXRhW2dldEhpZ2hQcm9wSGlnaGVzdEluZGV4XS5leHRyYURhdGFzIS56SW5kZXghIC0gdXNlckRhdGFbaGlnaFNlcmllc0NvbnRyb2xbaGlnaFNlcmllc0NvbnRyb2wubGVuZ3RoIC0gMV1dLmV4dHJhRGF0YXMhLnpJbmRleCENCiAgICAgIGZvciAoY29uc3QgY3RybCBvZiBoaWdoU2VyaWVzQ29udHJvbCkgew0KICAgICAgICBjb25zdCBuZXh0Q29udHJvbCA9IGhpZ2hTZXJpZXNDb250cm9sLmZpbmRJbmRleCh2YWwgPT4gJ3pJbmRleCcgaW4gdXNlckRhdGFbdmFsXS5leHRyYURhdGFzISAmJiAodXNlckRhdGFbY3RybF0uZXh0cmFEYXRhcyEuekluZGV4ISArIDEgPT09IHVzZXJEYXRhW3ZhbF0uZXh0cmFEYXRhcyEuekluZGV4ISkpDQogICAgICAgIGlmIChuZXh0Q29udHJvbCAhPT0gLTEpIHsNCiAgICAgICAgICBuZXh0U2VyaWVzLnB1c2goY3RybCkNCiAgICAgICAgICBjb3VudCA9IGNvdW50IC0gMQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGNvbnN0IGRpZmZlcmVuY2UgPSB1c2VyRGF0YVtnZXRIaWdoUHJvcEhpZ2hlc3RJbmRleF0uZXh0cmFEYXRhcyEuekluZGV4ISAtIGNvdW50DQogICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKGN0cmwsICd6SW5kZXgnLCBkaWZmZXJlbmNlKQ0KICAgICAgICAgIGlmIChuZXh0U2VyaWVzLmxlbmd0aCA+IDApIHsNCiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbmV4dFNlcmllcy5sZW5ndGg7IGkrKykgew0KICAgICAgICAgICAgICBjb25zdCBkaWZmID0gdXNlckRhdGFbY3RybF0uZXh0cmFEYXRhcyEuekluZGV4ISAtIChuZXh0U2VyaWVzLmxlbmd0aCAtIGkpDQogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhuZXh0U2VyaWVzW2ldLCAnekluZGV4JywgZGlmZikNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG5leHRTZXJpZXMgPSBbXQ0KICAgICAgICAgIH0NCiAgICAgICAgICBjb3VudCA9IGNvdW50IC0gMQ0KICAgICAgICB9DQogICAgICB9DQogICAgICBsZXQgY291bnRlciA9IDANCiAgICAgIGZvciAoY29uc3QgY3RybCBvZiBoaWdoUHJvckNvbnRyb2wpIHsNCiAgICAgICAgaWYgKCF0aGlzLmdldFNlbGVjdGVkQ29udHJvbHNEYXRhcyEuaW5jbHVkZXMoY3RybCkpIHsNCiAgICAgICAgICBjb3VudGVyID0gY291bnRlciArIDENCiAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXMoY3RybCwgJ3pJbmRleCcsIGNvdW50ZXIpDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogIH0NCiAgc2VuZEJhY2sgKCkgew0KICAgIGNvbnN0IHVzZXJEYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXQ0KICAgIGNvbnN0IGhpZ2hQcm9yQ29udHJvbDogc3RyaW5nW10gPSBbXQ0KICAgIGNvbnN0IGxvd1Byb3JDb250cm9sOiBzdHJpbmdbXSA9IFtdDQogICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5nZXRDb250YWluZXJMaXN0KHRoaXMuZ2V0U2VsZWN0ZWRDb250cm9sc0RhdGFzIVswXSlbMF0NCiAgICBjb25zdCBjb250YWluZXJDb250cm9scyA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY29udGFpbmVyXS5jb250cm9scw0KICAgIGZvciAoY29uc3QgaW5kZXggaW4gY29udGFpbmVyQ29udHJvbHMpIHsNCiAgICAgIGNvbnN0IGNudHJsRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY29udGFpbmVyQ29udHJvbHNbaW5kZXhdXQ0KICAgICAgaWYgKGNudHJsRGF0YS50eXBlID09PSAnTXVsdGlQYWdlJyB8fCBjbnRybERhdGEudHlwZSA9PT0gJ0ZyYW1lJyB8fCBjbnRybERhdGEudHlwZSA9PT0gJ0xpc3RCb3gnKSB7DQogICAgICAgIGhpZ2hQcm9yQ29udHJvbC5wdXNoKGNvbnRhaW5lckNvbnRyb2xzW2luZGV4XSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGxvd1Byb3JDb250cm9sLnB1c2goY29udGFpbmVyQ29udHJvbHNbaW5kZXhdKQ0KICAgICAgfQ0KICAgIH0NCiAgICBsb3dQcm9yQ29udHJvbC5zb3J0KChhLCBiKSA9PiB7DQogICAgICByZXR1cm4gdXNlckRhdGFbYl0uZXh0cmFEYXRhcyEuekluZGV4ISAtIHVzZXJEYXRhW2FdLmV4dHJhRGF0YXMhLnpJbmRleCENCiAgICB9KQ0KICAgIGxldCBnZXRMb3dQcm9wSGlnaGVzdEluZGV4OiBzdHJpbmcgPSBsb3dQcm9yQ29udHJvbFtsb3dQcm9yQ29udHJvbC5sZW5ndGggLSAxXQ0KICAgIGhpZ2hQcm9yQ29udHJvbC5zb3J0KChhLCBiKSA9PiB7DQogICAgICByZXR1cm4gdXNlckRhdGFbYl0uZXh0cmFEYXRhcyEuekluZGV4ISAtIHVzZXJEYXRhW2FdLmV4dHJhRGF0YXMhLnpJbmRleCENCiAgICB9KQ0KICAgIGxldCBnZXRIaWdoUHJvcEhpZ2hlc3RJbmRleCA9IGhpZ2hQcm9yQ29udHJvbFtoaWdoUHJvckNvbnRyb2wubGVuZ3RoIC0gMV0NCiAgICBjb25zdCBsb3dTZXJpZXNDb250cm9sOiBzdHJpbmdbXSA9IFtdDQogICAgY29uc3QgaGlnaFNlcmllc0NvbnRyb2w6IHN0cmluZ1tdID0gW10NCiAgICBjb25zdCBnZXRTZWxDb250cm9sID0gWy4uLnRoaXMuZ2V0U2VsZWN0ZWRDb250cm9sc0RhdGFzIV0NCiAgICBnZXRTZWxDb250cm9sLnNvcnQoKGEsIGIpID0+IHsNCiAgICAgIHJldHVybiB1c2VyRGF0YVthXS5leHRyYURhdGFzIS56SW5kZXghIC0gdXNlckRhdGFbYl0uZXh0cmFEYXRhcyEuekluZGV4IQ0KICAgIH0pDQogICAgZm9yIChjb25zdCBzZWxDb250cm9sIG9mIGdldFNlbENvbnRyb2wpIHsNCiAgICAgIGlmIChsb3dQcm9yQ29udHJvbC5pbmNsdWRlcyhzZWxDb250cm9sKSkgew0KICAgICAgICBsb3dTZXJpZXNDb250cm9sLnB1c2goc2VsQ29udHJvbCkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGhpZ2hTZXJpZXNDb250cm9sLnB1c2goc2VsQ29udHJvbCkNCiAgICAgIH0NCiAgICB9DQogICAgY29uc3Qgc2V0TG93UHJvcEhpZ2hJbmRleCA9IChjb250cm9sOiBzdHJpbmcpID0+IHsNCiAgICAgIGlmIChsb3dTZXJpZXNDb250cm9sLmxlbmd0aCA+IDAgJiYgbG93U2VyaWVzQ29udHJvbC5pbmNsdWRlcyhjb250cm9sKSkgew0KICAgICAgICBsb3dTZXJpZXNDb250cm9sLnBvcCgpDQogICAgICAgIGNvbnN0IEluZGV4ID0gbG93UHJvckNvbnRyb2wuZmluZEluZGV4KHZhbCA9PiB1c2VyRGF0YVtnZXRMb3dQcm9wSGlnaGVzdEluZGV4IV0uZXh0cmFEYXRhcyEuekluZGV4ISArIDEgPT09IHVzZXJEYXRhW3ZhbF0uZXh0cmFEYXRhcyEuekluZGV4KQ0KICAgICAgICBnZXRMb3dQcm9wSGlnaGVzdEluZGV4ID0gSW5kZXggIT09IC0xID8gbG93UHJvckNvbnRyb2xbSW5kZXhdIDogJycNCiAgICAgICAgaWYgKEluZGV4ICE9PSAtMSkgew0KICAgICAgICAgIHNldExvd1Byb3BIaWdoSW5kZXgoZ2V0TG93UHJvcEhpZ2hlc3RJbmRleCkNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgICBzZXRMb3dQcm9wSGlnaEluZGV4KGdldExvd1Byb3BIaWdoZXN0SW5kZXgpDQogICAgaWYgKGxvd1Nlcmllc0NvbnRyb2wubGVuZ3RoID4gMCkgew0KICAgICAgbG93U2VyaWVzQ29udHJvbC5zb3J0KChhLCBiKSA9PiB7DQogICAgICAgIHJldHVybiB1c2VyRGF0YVthXS5leHRyYURhdGFzIS56SW5kZXghIC0gdXNlckRhdGFbYl0uZXh0cmFEYXRhcyEuekluZGV4IQ0KICAgICAgfSkNCiAgICAgIGxldCBjb3VudCA9IHVzZXJEYXRhW2dldExvd1Byb3BIaWdoZXN0SW5kZXhdLmV4dHJhRGF0YXMhLnpJbmRleCENCiAgICAgIGZvciAoY29uc3QgY3RybCBvZiBsb3dTZXJpZXNDb250cm9sKSB7DQogICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhjdHJsLCAnekluZGV4JywgY291bnQpDQogICAgICAgIGNvdW50ID0gY291bnQgKyAxDQogICAgICB9DQogICAgICBsZXQgY291bnRlciA9IHVzZXJEYXRhW2xvd1Nlcmllc0NvbnRyb2xbbG93U2VyaWVzQ29udHJvbC5sZW5ndGggLSAxXV0uZXh0cmFEYXRhcyEuekluZGV4IQ0KICAgICAgZm9yIChsZXQgaSA9IGxvd1Byb3JDb250cm9sLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7DQogICAgICAgIGlmICghdGhpcy5nZXRTZWxlY3RlZENvbnRyb2xzRGF0YXMhLmluY2x1ZGVzKGxvd1Byb3JDb250cm9sW2ldKSkgew0KICAgICAgICAgIGNvdW50ZXIgPSBjb3VudGVyICsgMQ0KICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhsb3dQcm9yQ29udHJvbFtpXSwgJ3pJbmRleCcsIGNvdW50ZXIpDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQoNCiAgICBjb25zdCBzZXRIaWdoUHJvcEhpZ2hJbmRleCA9IChjb250cm9sOiBzdHJpbmcpID0+IHsNCiAgICAgIGlmIChoaWdoU2VyaWVzQ29udHJvbC5sZW5ndGggPiAwICYmIGhpZ2hTZXJpZXNDb250cm9sLmluY2x1ZGVzKGNvbnRyb2wpKSB7DQogICAgICAgIGhpZ2hTZXJpZXNDb250cm9sLnNoaWZ0KCkNCiAgICAgICAgY29uc3QgSW5kZXggPSBoaWdoUHJvckNvbnRyb2wuZmluZEluZGV4KHZhbCA9PiB1c2VyRGF0YVtnZXRIaWdoUHJvcEhpZ2hlc3RJbmRleCFdLmV4dHJhRGF0YXMhLnpJbmRleCEgKyAxID09PSB1c2VyRGF0YVt2YWxdLmV4dHJhRGF0YXMhLnpJbmRleCkNCiAgICAgICAgZ2V0SGlnaFByb3BIaWdoZXN0SW5kZXggPSBJbmRleCAhPT0gLTEgPyBoaWdoUHJvckNvbnRyb2xbSW5kZXhdIDogJycNCiAgICAgICAgaWYgKEluZGV4ICE9PSAtMSkgew0KICAgICAgICAgIHNldEhpZ2hQcm9wSGlnaEluZGV4KGdldEhpZ2hQcm9wSGlnaGVzdEluZGV4KQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICAgIHNldEhpZ2hQcm9wSGlnaEluZGV4KGdldEhpZ2hQcm9wSGlnaGVzdEluZGV4KQ0KICAgIGlmIChoaWdoU2VyaWVzQ29udHJvbC5sZW5ndGggPiAwKSB7DQogICAgICBoaWdoU2VyaWVzQ29udHJvbC5zb3J0KChhLCBiKSA9PiB7DQogICAgICAgIHJldHVybiB1c2VyRGF0YVthXS5leHRyYURhdGFzIS56SW5kZXghIC0gdXNlckRhdGFbYl0uZXh0cmFEYXRhcyEuekluZGV4IQ0KICAgICAgfSkNCiAgICAgIGxldCBjb3VudCA9IHVzZXJEYXRhW2dldEhpZ2hQcm9wSGlnaGVzdEluZGV4XS5leHRyYURhdGFzIS56SW5kZXghDQogICAgICBmb3IgKGNvbnN0IGN0cmwgb2YgaGlnaFNlcmllc0NvbnRyb2wpIHsNCiAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKGN0cmwsICd6SW5kZXgnLCBjb3VudCkNCiAgICAgICAgY291bnQgPSBjb3VudCArIDENCiAgICAgIH0NCiAgICAgIGxldCBjb3VudGVyID0gdXNlckRhdGFbaGlnaFNlcmllc0NvbnRyb2xbaGlnaFNlcmllc0NvbnRyb2wubGVuZ3RoIC0gMV1dLmV4dHJhRGF0YXMhLnpJbmRleCENCiAgICAgIGZvciAobGV0IGkgPSBoaWdoUHJvckNvbnRyb2wubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsNCiAgICAgICAgaWYgKCF0aGlzLmdldFNlbGVjdGVkQ29udHJvbHNEYXRhcyEuaW5jbHVkZXMoaGlnaFByb3JDb250cm9sW2ldKSkgew0KICAgICAgICAgIGNvdW50ZXIgPSBjb3VudGVyICsgMQ0KICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhoaWdoUHJvckNvbnRyb2xbaV0sICd6SW5kZXgnLCBjb3VudGVyKQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICB9DQogIGdyb3VwQ29udHJvbCAoKSB7DQogICAgRXZlbnRCdXMuJGVtaXQoJ2dyb3VwQ29udHJvbCcsICdncm91cCcpDQogIH0NCiAgdW5Hcm91cENvbnRyb2wgKCkgew0KICAgIEV2ZW50QnVzLiRlbWl0KCdncm91cENvbnRyb2wnLCAndW5ncm91cCcpDQogIH0NCiAgc2l6ZVRvRml0ICgpIHsNCiAgICBjb25zdCB1c3JGcm1EYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXQ0KICAgIGNvbnN0IGN0cmxTZWwgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5zZWxlY3RlZA0KICAgIGNvbnN0IHNpemVUb0ZpdEFycjogc3RyaW5nW10gPSBbXQ0KICAgIGNvbnN0IHNpemVUb0ZpdFZhbDogYm9vbGVhbltdID0gW10NCiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgY3RybFNlbC5sZW5ndGg7IGluZGV4KyspIHsNCiAgICAgIGlmICghY3RybFNlbFtpbmRleF0uc3RhcnRzV2l0aCgnZ3JvdXAnKSkgew0KICAgICAgICBjb25zdCBjb250cm9scHJvcCA9IHVzckZybURhdGFbY3RybFNlbFtpbmRleF1dLnByb3BlcnRpZXMNCiAgICAgICAgaWYgKCdBdXRvU2l6ZScgaW4gY29udHJvbHByb3ApIHsNCiAgICAgICAgICBzaXplVG9GaXRBcnIucHVzaChjdHJsU2VsW2luZGV4XSkNCiAgICAgICAgICBzaXplVG9GaXRWYWwucHVzaChjb250cm9scHJvcC5BdXRvU2l6ZSEpDQogICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkoJ0F1dG9TaXplJywgdHJ1ZSwgY3RybFNlbFtpbmRleF0pDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogICAgc2V0VGltZW91dCgoKSA9PiB7DQogICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgc2l6ZVRvRml0QXJyLmxlbmd0aDsgaW5kZXgrKykgew0KICAgICAgICBpZiAoIXNpemVUb0ZpdEFycltpbmRleF0uc3RhcnRzV2l0aCgnZ3JvdXAnKSkgew0KICAgICAgICAgIGNvbnN0IGNvbnRyb2xwcm9wID0gdXNyRnJtRGF0YVtzaXplVG9GaXRBcnJbaW5kZXhdXS5wcm9wZXJ0aWVzDQogICAgICAgICAgaWYgKCdBdXRvU2l6ZScgaW4gY29udHJvbHByb3ApIHsNCiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KA0KICAgICAgICAgICAgICAnQXV0b1NpemUnLA0KICAgICAgICAgICAgICBzaXplVG9GaXRWYWxbaW5kZXhdLA0KICAgICAgICAgICAgICBzaXplVG9GaXRBcnJbaW5kZXhdDQogICAgICAgICAgICApDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfSwgMTAwKQ0KICB9DQogIGNvbnZlcnRUb0dyaWRTaXplICh2YWw6IG51bWJlcikgew0KICAgIGNvbnN0IGdyaWRTaXplID0gOQ0KICAgIHJldHVybiBNYXRoLnJvdW5kKHZhbCAvIGdyaWRTaXplKSAqIGdyaWRTaXplDQogIH0NCiAgc2l6ZVRvR3JpZCAoKSB7DQogICAgbGV0IGRpdnN0eWxlOiBBcnJheTxJR3JvdXBTdHlsZT4gPSBbXQ0KICAgIGNvbnN0IHVzckZybURhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdDQogICAgY29uc3QgY3RybFNlbCA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkDQogICAgbGV0IGN0cmxDb250YWluZXIgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5jb250YWluZXJbMF0NCiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgY3RybFNlbC5sZW5ndGg7IGluZGV4KyspIHsNCiAgICAgIGlmICghY3RybFNlbFtpbmRleF0uc3RhcnRzV2l0aCgnZ3JvdXAnKSkgew0KICAgICAgICBjb25zdCBjb250cm9scHJvcCA9IHVzckZybURhdGFbY3RybFNlbFtpbmRleF1dLnByb3BlcnRpZXMNCiAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkoDQogICAgICAgICAgJ0xlZnQnLA0KICAgICAgICAgIHRoaXMuY29udmVydFRvR3JpZFNpemUoY29udHJvbHByb3AuTGVmdCEpLA0KICAgICAgICAgIGN0cmxTZWxbaW5kZXhdDQogICAgICAgICkNCiAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkoDQogICAgICAgICAgJ1RvcCcsDQogICAgICAgICAgdGhpcy5jb252ZXJ0VG9HcmlkU2l6ZShjb250cm9scHJvcC5Ub3AhKSwNCiAgICAgICAgICBjdHJsU2VsW2luZGV4XQ0KICAgICAgICApDQogICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KA0KICAgICAgICAgICdXaWR0aCcsDQogICAgICAgICAgdGhpcy5jb252ZXJ0VG9HcmlkU2l6ZShjb250cm9scHJvcC5XaWR0aCEpLA0KICAgICAgICAgIGN0cmxTZWxbaW5kZXhdDQogICAgICAgICkNCiAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkoDQogICAgICAgICAgJ0hlaWdodCcsDQogICAgICAgICAgdGhpcy5jb252ZXJ0VG9HcmlkU2l6ZShjb250cm9scHJvcC5IZWlnaHQhKSwNCiAgICAgICAgICBjdHJsU2VsW2luZGV4XQ0KICAgICAgICApDQogICAgICB9IGVsc2Ugew0KICAgICAgICBFdmVudEJ1cy4kZW1pdCgnZ2V0R3JvdXBTaXplJywgKGRpdnN0YXlsZUFycmF5OiBBcnJheTxJR3JvdXBTdHlsZT4pID0+IHsNCiAgICAgICAgICBkaXZzdHlsZSA9IGRpdnN0YXlsZUFycmF5DQogICAgICAgIH0pDQogICAgICAgIGNvbnN0IGdldEluZGV4ID0gZGl2c3R5bGUuZmluZEluZGV4KA0KICAgICAgICAgICh2YWwpID0+IHZhbC5ncm91cE5hbWUgPT09IGN0cmxTZWxbaW5kZXhdDQogICAgICAgICkNCiAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3VwZGFzdGVHcm91cFNpemUnLCAnR3JvdXBJRCcsIDAsIGdldEluZGV4KQ0KICAgICAgfQ0KICAgIH0NCiAgfQ0KICBpbmNEZWNzcGFjaW5nICh0eXBlOiBrZXlvZiBjb250cm9sUHJvcGVydGllcywgdmFsdWU6IG51bWJlcikgew0KICAgIGNvbnN0IHVzckZybURhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdDQogICAgY29uc3QgY3RybFNlbCA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkDQogICAgY29uc3QgY3RybENvbnRhaW5lciA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLmNvbnRhaW5lclswXQ0KICAgIGNvbnN0IGNvbnRyb2xzID0gdXNyRnJtRGF0YVtjdHJsQ29udGFpbmVyXS5jb250cm9scw0KICAgIGxldCBkaXZzdHlsZTogQXJyYXk8SUdyb3VwU3R5bGU+ID0gW10NCiAgICBsZXQgZ2V0R3JvdXBJbmRleCA9IC0xDQogICAgaWYgKGN0cmxTZWxbMF0uc3RhcnRzV2l0aCgnZ3JvdXAnKSkgew0KICAgICAgRXZlbnRCdXMuJGVtaXQoJ2dldEdyb3VwU2l6ZScsIChkaXZzdGF5bGVBcnJheTogQXJyYXk8SUdyb3VwU3R5bGU+KSA9PiB7DQogICAgICAgIGRpdnN0eWxlID0gZGl2c3RheWxlQXJyYXkNCiAgICAgIH0pDQogICAgICBnZXRHcm91cEluZGV4ID0gZGl2c3R5bGUuZmluZEluZGV4KCh2YWwpID0+IHZhbC5ncm91cE5hbWUgPT09IGN0cmxTZWxbMF0pDQogICAgfQ0KICAgIGNvbnN0IGxlZnRBcnJheTogc3RyaW5nW10gPSBbXQ0KICAgIGNvbnN0IHJpZ2h0QXJyYXk6IHN0cmluZ1tdID0gW10NCiAgICBmb3IgKGxldCBpbmRleCA9IDE7IGluZGV4IDwgY3RybFNlbC5sZW5ndGg7IGluZGV4KyspIHsNCiAgICAgIGNvbnN0IHNlbExlZnQgPSBjdHJsU2VsWzBdLnN0YXJ0c1dpdGgoJ2dyb3VwJykNCiAgICAgICAgPyBwYXJzZUludChkaXZzdHlsZVtnZXRHcm91cEluZGV4XS5sZWZ0ISkNCiAgICAgICAgOiB1c3JGcm1EYXRhW2N0cmxTZWxbMF1dLnByb3BlcnRpZXMuTGVmdA0KICAgICAgY29uc3Qgc2VsVG9wID0gY3RybFNlbFswXS5zdGFydHNXaXRoKCdncm91cCcpDQogICAgICAgID8gcGFyc2VJbnQoZGl2c3R5bGVbZ2V0R3JvdXBJbmRleF0udG9wISkNCiAgICAgICAgOiB1c3JGcm1EYXRhW2N0cmxTZWxbMF1dLnByb3BlcnRpZXMuVG9wDQogICAgICBpZiAoIWN0cmxTZWxbaW5kZXhdLnN0YXJ0c1dpdGgoJ2dyb3VwJykpIHsNCiAgICAgICAgY29uc3QgY3RybFByb3AgPSB1c3JGcm1EYXRhW2N0cmxTZWxbaW5kZXhdXS5wcm9wZXJ0aWVzDQogICAgICAgIGlmICh0eXBlID09PSAnTGVmdCcpIHsNCiAgICAgICAgICBpZiAoY3RybFByb3AuTGVmdCEgPD0gc2VsTGVmdCEpIHsNCiAgICAgICAgICAgIGxlZnRBcnJheS5wdXNoKGN0cmxTZWxbaW5kZXhdKQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICByaWdodEFycmF5LnB1c2goY3RybFNlbFtpbmRleF0pDQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdUb3AnKSB7DQogICAgICAgICAgaWYgKGN0cmxQcm9wLlRvcCEgPD0gc2VsVG9wISkgew0KICAgICAgICAgICAgbGVmdEFycmF5LnB1c2goY3RybFNlbFtpbmRleF0pDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHJpZ2h0QXJyYXkucHVzaChjdHJsU2VsW2luZGV4XSkNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIEV2ZW50QnVzLiRlbWl0KCdnZXRHcm91cFNpemUnLCAoZGl2c3RheWxlQXJyYXk6IEFycmF5PElHcm91cFN0eWxlPikgPT4gew0KICAgICAgICAgIGRpdnN0eWxlID0gZGl2c3RheWxlQXJyYXkNCiAgICAgICAgfSkNCiAgICAgICAgY29uc3QgZ2V0SW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgoDQogICAgICAgICAgKHZhbCkgPT4gdmFsLmdyb3VwTmFtZSA9PT0gY3RybFNlbFtpbmRleF0NCiAgICAgICAgKQ0KICAgICAgICBjb25zdCBncm91cExlZnQgPSBwYXJzZUludChkaXZzdHlsZVtnZXRJbmRleF0ubGVmdCEpDQogICAgICAgIGNvbnN0IGdyb3VwVG9wID0gcGFyc2VJbnQoZGl2c3R5bGVbZ2V0SW5kZXhdLnRvcCEpDQogICAgICAgIGNvbnN0IGdyb3VwQ29ucm9sID0gdGhpcy5nZXRHcm91cENvbnRyb2woY3RybFNlbFtpbmRleF0pDQogICAgICAgIGlmICh0eXBlID09PSAnTGVmdCcpIHsNCiAgICAgICAgICBpZiAoZ3JvdXBMZWZ0IDw9IHNlbExlZnQhKSB7DQogICAgICAgICAgICBmb3IgKGxldCBjdHJsIG9mIGdyb3VwQ29ucm9sKSB7DQogICAgICAgICAgICAgIGNvbnN0IHByb3AgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2N0cmxdLnByb3BlcnRpZXMNCiAgICAgICAgICAgICAgaWYgKE1hdGguZmxvb3IocHJvcC5MZWZ0ISkgPT09IGdyb3VwTGVmdCkgew0KICAgICAgICAgICAgICAgIGxlZnRBcnJheS5wdXNoKGN0cmwpDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgZm9yIChsZXQgY3RybCBvZiBncm91cENvbnJvbCkgew0KICAgICAgICAgICAgICBjb25zdCBwcm9wID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtjdHJsXS5wcm9wZXJ0aWVzDQogICAgICAgICAgICAgIGlmIChNYXRoLmZsb29yKHByb3AuTGVmdCEpID09PSBncm91cExlZnQpIHsNCiAgICAgICAgICAgICAgICByaWdodEFycmF5LnB1c2goY3RybCkNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnVG9wJykgew0KICAgICAgICAgIGlmIChncm91cFRvcCA8PSBzZWxUb3AhKSB7DQogICAgICAgICAgICBmb3IgKGxldCBjdHJsIG9mIGdyb3VwQ29ucm9sKSB7DQogICAgICAgICAgICAgIGNvbnN0IHByb3AgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2N0cmxdLnByb3BlcnRpZXMNCiAgICAgICAgICAgICAgaWYgKE1hdGguZmxvb3IocHJvcC5Ub3AhKSA9PT0gZ3JvdXBUb3ApIHsNCiAgICAgICAgICAgICAgICBsZWZ0QXJyYXkucHVzaChjdHJsKQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGZvciAobGV0IGN0cmwgb2YgZ3JvdXBDb25yb2wpIHsNCiAgICAgICAgICAgICAgY29uc3QgcHJvcCA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY3RybF0ucHJvcGVydGllcw0KICAgICAgICAgICAgICBpZiAoTWF0aC5mbG9vcihwcm9wLlRvcCEpID09PSBncm91cFRvcCkgew0KICAgICAgICAgICAgICAgIHJpZ2h0QXJyYXkucHVzaChjdHJsKQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICAgIGlmIChjdHJsU2VsWzBdLnN0YXJ0c1dpdGgoJ2dyb3VwJykpIHsNCiAgICAgIGNvbnN0IGdldEluZGV4ID0gZGl2c3R5bGUuZmluZEluZGV4KA0KICAgICAgICAodmFsKSA9PiB2YWwuZ3JvdXBOYW1lID09PSBjdHJsU2VsWzBdDQogICAgICApDQogICAgICBjb25zdCBncm91cExlZnQgPSBwYXJzZUludChkaXZzdHlsZVtnZXRJbmRleF0ubGVmdCEpDQogICAgICBjb25zdCBncm91cFRvcCA9IHBhcnNlSW50KGRpdnN0eWxlW2dldEluZGV4XS50b3AhKQ0KICAgICAgY29uc3QgZ3JvdXBDb25yb2wgPSB0aGlzLmdldEdyb3VwQ29udHJvbChjdHJsU2VsWzBdKQ0KICAgICAgaWYgKHR5cGUgPT09ICdMZWZ0Jykgew0KICAgICAgICBmb3IgKGxldCBjdHJsIG9mIGdyb3VwQ29ucm9sKSB7DQogICAgICAgICAgY29uc3QgcHJvcCA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY3RybF0ucHJvcGVydGllcw0KICAgICAgICAgIGlmIChNYXRoLmZsb29yKHByb3AuTGVmdCEpID09PSBncm91cExlZnQpIHsNCiAgICAgICAgICAgIGxlZnRBcnJheS5wdXNoKGN0cmwpDQogICAgICAgICAgICByaWdodEFycmF5LnB1c2goY3RybCkNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ1RvcCcpIHsNCiAgICAgICAgZm9yIChsZXQgY3RybCBvZiBncm91cENvbnJvbCkgew0KICAgICAgICAgIGNvbnN0IHByb3AgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2N0cmxdLnByb3BlcnRpZXMNCiAgICAgICAgICBpZiAoTWF0aC5mbG9vcihwcm9wLlRvcCEpID09PSBncm91cFRvcCkgew0KICAgICAgICAgICAgbGVmdEFycmF5LnB1c2goY3RybCkNCiAgICAgICAgICAgIHJpZ2h0QXJyYXkucHVzaChjdHJsKQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0gZWxzZSB7DQogICAgICBsZWZ0QXJyYXkudW5zaGlmdChjdHJsU2VsWzBdKQ0KICAgICAgcmlnaHRBcnJheS5wdXNoKGN0cmxTZWxbMF0pDQogICAgfQ0KICAgIGlmICh0eXBlID09PSAnTGVmdCcpIHsNCiAgICAgIGxlZnRBcnJheS5zb3J0KChhLCBiKSA9PiB7DQogICAgICAgIHJldHVybiB1c3JGcm1EYXRhW2JdLnByb3BlcnRpZXMuTGVmdCEgLSB1c3JGcm1EYXRhW2FdLnByb3BlcnRpZXMuTGVmdCENCiAgICAgIH0pDQogICAgICByaWdodEFycmF5LnNvcnQoKGEsIGIpID0+IHsNCiAgICAgICAgcmV0dXJuIHVzckZybURhdGFbYV0ucHJvcGVydGllcy5MZWZ0ISAtIHVzckZybURhdGFbYl0ucHJvcGVydGllcy5MZWZ0IQ0KICAgICAgfSkNCiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdUb3AnKSB7DQogICAgICBsZWZ0QXJyYXkuc29ydCgoYSwgYikgPT4gew0KICAgICAgICByZXR1cm4gdXNyRnJtRGF0YVtiXS5wcm9wZXJ0aWVzLlRvcCEgLSB1c3JGcm1EYXRhW2FdLnByb3BlcnRpZXMuVG9wIQ0KICAgICAgfSkNCiAgICAgIHJpZ2h0QXJyYXkuc29ydCgoYSwgYikgPT4gew0KICAgICAgICByZXR1cm4gdXNyRnJtRGF0YVthXS5wcm9wZXJ0aWVzLlRvcCEgLSB1c3JGcm1EYXRhW2JdLnByb3BlcnRpZXMuVG9wIQ0KICAgICAgfSkNCiAgICB9DQogICAgY29uc3QgZ3JvdXBJbmRleDogbnVtYmVyID0gZGl2c3R5bGUuZmluZEluZGV4KA0KICAgICAgKHZhbCkgPT4gdmFsLmdyb3VwTmFtZSA9PT0gY3RybFNlbFswXQ0KICAgICkNCiAgICBjb25zdCBpc0dyb3VwID0gY3RybFNlbFswXS5zdGFydHNXaXRoKCdncm91cCcpDQogICAgY29uc3QgY3RybFByb3AgPSAhaXNHcm91cCAmJiB1c3JGcm1EYXRhW2N0cmxTZWxbMF1dLnByb3BlcnRpZXMNCiAgICBjb25zdCBuZXdPYmplY3QgPSB7DQogICAgICBMZWZ0Og0KICAgICAgICBpc0dyb3VwICYmIGdyb3VwSW5kZXggIT09IC0xDQogICAgICAgICAgPyBwYXJzZUludChkaXZzdHlsZVtncm91cEluZGV4XS5sZWZ0ISkNCiAgICAgICAgICA6IGN0cmxQcm9wDQogICAgICAgICAgICA/IGN0cmxQcm9wLkxlZnQhDQogICAgICAgICAgICA6IDAsDQogICAgICBUb3A6DQogICAgICAgIGlzR3JvdXAgJiYgZ3JvdXBJbmRleCAhPT0gLTENCiAgICAgICAgICA/IHBhcnNlSW50KGRpdnN0eWxlW2dyb3VwSW5kZXhdLnRvcCEpDQogICAgICAgICAgOiBjdHJsUHJvcA0KICAgICAgICAgICAgPyBjdHJsUHJvcC5Ub3AhDQogICAgICAgICAgICA6IDAsDQogICAgICBXaWR0aDoNCiAgICAgICAgaXNHcm91cCAmJiBncm91cEluZGV4ICE9PSAtMQ0KICAgICAgICAgID8gcGFyc2VJbnQoZGl2c3R5bGVbZ3JvdXBJbmRleF0ud2lkdGghKQ0KICAgICAgICAgIDogY3RybFByb3ANCiAgICAgICAgICAgID8gY3RybFByb3AuV2lkdGghDQogICAgICAgICAgICA6IDAsDQogICAgICBIZWlnaHQ6DQogICAgICAgIGlzR3JvdXAgJiYgZ3JvdXBJbmRleCAhPT0gLTENCiAgICAgICAgICA/IHBhcnNlSW50KGRpdnN0eWxlW2dyb3VwSW5kZXhdLmhlaWdodCEpDQogICAgICAgICAgOiBjdHJsUHJvcA0KICAgICAgICAgICAgPyBjdHJsUHJvcC5IZWlnaHQhDQogICAgICAgICAgICA6IDANCiAgICB9DQogICAgbGV0IGluY0RlY1ZhbHVlID0gMA0KICAgIGxldCBwcm9wVmFsdWUgPSAwDQogICAgZm9yIChsZXQgaW5kZXggPSAxOyBpbmRleCA8IGxlZnRBcnJheS5sZW5ndGg7IGluZGV4KyspIHsNCiAgICAgIGNvbnN0IGN0cmxQcm9wID0gdXNyRnJtRGF0YVtsZWZ0QXJyYXlbaW5kZXhdXS5wcm9wZXJ0aWVzDQogICAgICBsZXQgcHJldkluZGV4ID0gLTENCiAgICAgIGxldCBjb250cm9sUHJvcEluZGV4ID0gLTENCiAgICAgIGlmICh0eXBlID09PSAnTGVmdCcpIHsNCiAgICAgICAgaWYgKGN0cmxQcm9wLkdyb3VwSUQgPT09ICcnKSB7DQogICAgICAgICAgcHJvcFZhbHVlID0gcHJvcFZhbHVlICsgdmFsdWUNCiAgICAgICAgICBpbmNEZWNWYWx1ZSA9IGN0cmxQcm9wLkxlZnQhIC0gcHJvcFZhbHVlDQogICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkodHlwZSwgdGhpcy5jb252ZXJ0VG9HcmlkU2l6ZShpbmNEZWNWYWx1ZSksIGxlZnRBcnJheVtpbmRleF0pDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgaWYgKGN0cmxQcm9wLkdyb3VwSUQgIT09ICcnKSB7DQogICAgICAgICAgICBjb250cm9sUHJvcEluZGV4ID0gZGl2c3R5bGUuZmluZEluZGV4KCh2YWwpID0+IHZhbC5ncm91cE5hbWUgPT09IGN0cmxQcm9wLkdyb3VwSUQpDQogICAgICAgICAgICBsZXQgaW5jRGVjVmFsdWUgPSAwDQogICAgICAgICAgICBwcm9wVmFsdWUgPSBwcm9wVmFsdWUgKyB2YWx1ZQ0KICAgICAgICAgICAgaW5jRGVjVmFsdWUgPSBwYXJzZUludChkaXZzdHlsZVtjb250cm9sUHJvcEluZGV4XS5sZWZ0ISkgLSBwcm9wVmFsdWUNCiAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KA0KICAgICAgICAgICAgICAndXBkYXN0ZUdyb3VwU2l6ZScsDQogICAgICAgICAgICAgIHR5cGUsDQogICAgICAgICAgICAgIHRoaXMuY29udmVydFRvR3JpZFNpemUoaW5jRGVjVmFsdWUpLA0KICAgICAgICAgICAgICBjb250cm9sUHJvcEluZGV4DQogICAgICAgICAgICApDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdUb3AnKSB7DQogICAgICAgIGlmIChjdHJsUHJvcC5Hcm91cElEID09PSAnJykgew0KICAgICAgICAgIHByb3BWYWx1ZSA9IHByb3BWYWx1ZSArIHZhbHVlDQogICAgICAgICAgaW5jRGVjVmFsdWUgPSBjdHJsUHJvcC5Ub3AhIC0gcHJvcFZhbHVlDQogICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkodHlwZSwgdGhpcy5jb252ZXJ0VG9HcmlkU2l6ZShpbmNEZWNWYWx1ZSksIGxlZnRBcnJheVtpbmRleF0pDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgaWYgKGN0cmxQcm9wLkdyb3VwSUQgIT09ICcnKSB7DQogICAgICAgICAgICBjb250cm9sUHJvcEluZGV4ID0gZGl2c3R5bGUuZmluZEluZGV4KCh2YWwpID0+IHZhbC5ncm91cE5hbWUgPT09IGN0cmxQcm9wLkdyb3VwSUQpDQogICAgICAgICAgICBsZXQgaW5jRGVjVmFsdWUgPSAwDQogICAgICAgICAgICBwcm9wVmFsdWUgPSBwcm9wVmFsdWUgKyB2YWx1ZQ0KICAgICAgICAgICAgaW5jRGVjVmFsdWUgPSBwYXJzZUludChkaXZzdHlsZVtjb250cm9sUHJvcEluZGV4XS50b3AhKSAtIHByb3BWYWx1ZQ0KICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoDQogICAgICAgICAgICAgICd1cGRhc3RlR3JvdXBTaXplJywNCiAgICAgICAgICAgICAgdHlwZSwNCiAgICAgICAgICAgICAgdGhpcy5jb252ZXJ0VG9HcmlkU2l6ZShpbmNEZWNWYWx1ZSksDQogICAgICAgICAgICAgIGNvbnRyb2xQcm9wSW5kZXgNCiAgICAgICAgICAgICkNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogICAgcHJvcFZhbHVlID0gMA0KICAgIGZvciAobGV0IGluZGV4ID0gMTsgaW5kZXggPCByaWdodEFycmF5Lmxlbmd0aDsgaW5kZXgrKykgew0KICAgICAgY29uc3QgY3RybFByb3AgPSB1c3JGcm1EYXRhW3JpZ2h0QXJyYXlbaW5kZXhdXS5wcm9wZXJ0aWVzDQogICAgICBsZXQgcHJldkluZGV4ID0gLTENCiAgICAgIGxldCBjb250cm9sUHJvcEluZGV4ID0gLTENCiAgICAgIGlmICh0eXBlID09PSAnTGVmdCcpIHsNCiAgICAgICAgaWYgKGN0cmxQcm9wLkdyb3VwSUQgPT09ICcnKSB7DQogICAgICAgICAgcHJvcFZhbHVlID0gcHJvcFZhbHVlICsgdmFsdWUNCiAgICAgICAgICBpbmNEZWNWYWx1ZSA9IGN0cmxQcm9wLkxlZnQhICsgcHJvcFZhbHVlDQogICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkodHlwZSwgdGhpcy5jb252ZXJ0VG9HcmlkU2l6ZShpbmNEZWNWYWx1ZSksIHJpZ2h0QXJyYXlbaW5kZXhdKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGlmIChjdHJsUHJvcC5Hcm91cElEICE9PSAnJykgew0KICAgICAgICAgICAgY29udHJvbFByb3BJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCgodmFsKSA9PiB2YWwuZ3JvdXBOYW1lID09PSBjdHJsUHJvcC5Hcm91cElEKQ0KICAgICAgICAgICAgcHJvcFZhbHVlID0gcHJvcFZhbHVlICsgdmFsdWUNCiAgICAgICAgICAgIGluY0RlY1ZhbHVlID0gcGFyc2VJbnQoZGl2c3R5bGVbY29udHJvbFByb3BJbmRleF0ubGVmdCEpICsgcHJvcFZhbHVlDQogICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgNCiAgICAgICAgICAgICAgJ3VwZGFzdGVHcm91cFNpemUnLA0KICAgICAgICAgICAgICB0eXBlLA0KICAgICAgICAgICAgICB0aGlzLmNvbnZlcnRUb0dyaWRTaXplKGluY0RlY1ZhbHVlKSwNCiAgICAgICAgICAgICAgY29udHJvbFByb3BJbmRleA0KICAgICAgICAgICAgKQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnVG9wJykgew0KICAgICAgICBpZiAoY3RybFByb3AuR3JvdXBJRCA9PT0gJycpIHsNCiAgICAgICAgICBsZXQgaW5jRGVjVmFsdWUgPSAwDQogICAgICAgICAgcHJvcFZhbHVlID0gcHJvcFZhbHVlICsgdmFsdWUNCiAgICAgICAgICBpbmNEZWNWYWx1ZSA9IGN0cmxQcm9wLlRvcCEgKyBwcm9wVmFsdWUNCiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSh0eXBlLCB0aGlzLmNvbnZlcnRUb0dyaWRTaXplKGluY0RlY1ZhbHVlKSwgcmlnaHRBcnJheVtpbmRleF0pDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgaWYgKGN0cmxQcm9wLkdyb3VwSUQgIT09ICcnKSB7DQogICAgICAgICAgICBjb250cm9sUHJvcEluZGV4ID0gZGl2c3R5bGUuZmluZEluZGV4KCh2YWwpID0+IHZhbC5ncm91cE5hbWUgPT09IGN0cmxQcm9wLkdyb3VwSUQpDQogICAgICAgICAgICBsZXQgaW5jRGVjVmFsdWUgPSAwDQogICAgICAgICAgICBwcm9wVmFsdWUgPSBwcm9wVmFsdWUgKyB2YWx1ZQ0KICAgICAgICAgICAgaW5jRGVjVmFsdWUgPSBwYXJzZUludChkaXZzdHlsZVtjb250cm9sUHJvcEluZGV4XS50b3AhKSArIHByb3BWYWx1ZQ0KICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoDQogICAgICAgICAgICAgICd1cGRhc3RlR3JvdXBTaXplJywNCiAgICAgICAgICAgICAgdHlwZSwNCiAgICAgICAgICAgICAgdGhpcy5jb252ZXJ0VG9HcmlkU2l6ZShpbmNEZWNWYWx1ZSksDQogICAgICAgICAgICAgIGNvbnRyb2xQcm9wSW5kZXgNCiAgICAgICAgICAgICkNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogIH0NCiAgZ2V0R3JvdXBDb250cm9sIChncm91cE5hbWU6IHN0cmluZykgew0KICAgIGNvbnN0IGN0cmxDb250YWluZXIgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5jb250YWluZXJbMF0NCiAgICBjb25zdCB1c3JGcm1EYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXQ0KICAgIGNvbnN0IGNvbnRyb2xzID0gW10NCiAgICBmb3IgKGNvbnN0IGNvbnRyb2wgb2YgdXNyRnJtRGF0YVtjdHJsQ29udGFpbmVyXS5jb250cm9scykgew0KICAgICAgaWYgKHVzckZybURhdGFbY29udHJvbF0ucHJvcGVydGllcy5Hcm91cElEID09PSBncm91cE5hbWUpIHsNCiAgICAgICAgY29udHJvbHMucHVzaChjb250cm9sKQ0KICAgICAgfQ0KICAgIH0NCiAgICByZXR1cm4gY29udHJvbHMNCiAgfQ0KICByZW1vdmVTcGFjZSAodHlwZToga2V5b2YgY29udHJvbFByb3BlcnRpZXMpIHsNCiAgICBjb25zdCB1c3JGcm1EYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXQ0KICAgIGNvbnN0IGN0cmxTZWwgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5zZWxlY3RlZA0KICAgIGNvbnN0IGN0cmxDb250YWluZXIgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5jb250YWluZXJbMF0NCiAgICBjb25zdCBjb250cm9scyA9IHVzckZybURhdGFbY3RybENvbnRhaW5lcl0uY29udHJvbHMNCiAgICBsZXQgZGl2c3R5bGU6IEFycmF5PElHcm91cFN0eWxlPiA9IFtdDQogICAgbGV0IGdldEdyb3VwSW5kZXggPSAtMQ0KICAgIGlmIChjdHJsU2VsWzBdLnN0YXJ0c1dpdGgoJ2dyb3VwJykpIHsNCiAgICAgIEV2ZW50QnVzLiRlbWl0KCdnZXRHcm91cFNpemUnLCAoZGl2c3RheWxlQXJyYXk6IEFycmF5PElHcm91cFN0eWxlPikgPT4gew0KICAgICAgICBkaXZzdHlsZSA9IGRpdnN0YXlsZUFycmF5DQogICAgICB9KQ0KICAgICAgZ2V0R3JvdXBJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCgodmFsKSA9PiB2YWwuZ3JvdXBOYW1lID09PSBjdHJsU2VsWzBdKQ0KICAgIH0NCiAgICBsZXQgcHJvcFZhbHVlID0gMA0KICAgIGNvbnN0IGxlZnRBcnJheTogc3RyaW5nW10gPSBbXQ0KICAgIGNvbnN0IHJpZ2h0QXJyYXk6IHN0cmluZ1tdID0gW10NCiAgICBmb3IgKGxldCBpbmRleCA9IDE7IGluZGV4IDwgY3RybFNlbC5sZW5ndGg7IGluZGV4KyspIHsNCiAgICAgIGNvbnN0IHNlbExlZnQgPSBjdHJsU2VsWzBdLnN0YXJ0c1dpdGgoJ2dyb3VwJykNCiAgICAgICAgPyBwYXJzZUludChkaXZzdHlsZVtnZXRHcm91cEluZGV4XS5sZWZ0ISkNCiAgICAgICAgOiB1c3JGcm1EYXRhW2N0cmxTZWxbMF1dLnByb3BlcnRpZXMuTGVmdA0KICAgICAgY29uc3Qgc2VsVG9wID0gY3RybFNlbFswXS5zdGFydHNXaXRoKCdncm91cCcpDQogICAgICAgID8gcGFyc2VJbnQoZGl2c3R5bGVbZ2V0R3JvdXBJbmRleF0udG9wISkNCiAgICAgICAgOiB1c3JGcm1EYXRhW2N0cmxTZWxbMF1dLnByb3BlcnRpZXMuVG9wDQogICAgICBpZiAoIWN0cmxTZWxbaW5kZXhdLnN0YXJ0c1dpdGgoJ2dyb3VwJykpIHsNCiAgICAgICAgY29uc3QgY3RybFByb3AgPSB1c3JGcm1EYXRhW2N0cmxTZWxbaW5kZXhdXS5wcm9wZXJ0aWVzDQogICAgICAgIGlmICh0eXBlID09PSAnTGVmdCcpIHsNCiAgICAgICAgICBpZiAoY3RybFByb3AuTGVmdCEgPD0gc2VsTGVmdCEpIHsNCiAgICAgICAgICAgIGxlZnRBcnJheS5wdXNoKGN0cmxTZWxbaW5kZXhdKQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICByaWdodEFycmF5LnB1c2goY3RybFNlbFtpbmRleF0pDQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdUb3AnKSB7DQogICAgICAgICAgaWYgKGN0cmxQcm9wLlRvcCEgPD0gc2VsVG9wISkgew0KICAgICAgICAgICAgbGVmdEFycmF5LnB1c2goY3RybFNlbFtpbmRleF0pDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHJpZ2h0QXJyYXkucHVzaChjdHJsU2VsW2luZGV4XSkNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSB7DQogICAgICAgIEV2ZW50QnVzLiRlbWl0KCdnZXRHcm91cFNpemUnLCAoZGl2c3RheWxlQXJyYXk6IEFycmF5PElHcm91cFN0eWxlPikgPT4gew0KICAgICAgICAgIGRpdnN0eWxlID0gZGl2c3RheWxlQXJyYXkNCiAgICAgICAgfSkNCiAgICAgICAgY29uc3QgZ2V0SW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgoDQogICAgICAgICAgKHZhbCkgPT4gdmFsLmdyb3VwTmFtZSA9PT0gY3RybFNlbFtpbmRleF0NCiAgICAgICAgKQ0KICAgICAgICBjb25zdCBncm91cExlZnQgPSBwYXJzZUludChkaXZzdHlsZVtnZXRJbmRleF0ubGVmdCEpDQogICAgICAgIGNvbnN0IGdyb3VwVG9wID0gcGFyc2VJbnQoZGl2c3R5bGVbZ2V0SW5kZXhdLnRvcCEpDQogICAgICAgIGNvbnN0IGdyb3VwQ29ucm9sID0gdGhpcy5nZXRHcm91cENvbnRyb2woY3RybFNlbFtpbmRleF0pDQogICAgICAgIGlmICh0eXBlID09PSAnTGVmdCcpIHsNCiAgICAgICAgICBpZiAoZ3JvdXBMZWZ0IDw9IHNlbExlZnQhKSB7DQogICAgICAgICAgICBmb3IgKGxldCBjdHJsIG9mIGdyb3VwQ29ucm9sKSB7DQogICAgICAgICAgICAgIGNvbnN0IHByb3AgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2N0cmxdLnByb3BlcnRpZXMNCiAgICAgICAgICAgICAgaWYgKE1hdGguZmxvb3IocHJvcC5MZWZ0ISkgPT09IGdyb3VwTGVmdCkgew0KICAgICAgICAgICAgICAgIGxlZnRBcnJheS5wdXNoKGN0cmwpDQogICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgZm9yIChsZXQgY3RybCBvZiBncm91cENvbnJvbCkgew0KICAgICAgICAgICAgICBjb25zdCBwcm9wID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtjdHJsXS5wcm9wZXJ0aWVzDQogICAgICAgICAgICAgIGlmIChNYXRoLmZsb29yKHByb3AuTGVmdCEpID09PSBncm91cExlZnQpIHsNCiAgICAgICAgICAgICAgICByaWdodEFycmF5LnB1c2goY3RybCkNCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnVG9wJykgew0KICAgICAgICAgIGlmIChncm91cFRvcCA8PSBzZWxUb3AhKSB7DQogICAgICAgICAgICBmb3IgKGxldCBjdHJsIG9mIGdyb3VwQ29ucm9sKSB7DQogICAgICAgICAgICAgIGNvbnN0IHByb3AgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2N0cmxdLnByb3BlcnRpZXMNCiAgICAgICAgICAgICAgaWYgKE1hdGguZmxvb3IocHJvcC5Ub3AhKSA9PT0gZ3JvdXBUb3ApIHsNCiAgICAgICAgICAgICAgICBsZWZ0QXJyYXkucHVzaChjdHJsKQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGZvciAobGV0IGN0cmwgb2YgZ3JvdXBDb25yb2wpIHsNCiAgICAgICAgICAgICAgY29uc3QgcHJvcCA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY3RybF0ucHJvcGVydGllcw0KICAgICAgICAgICAgICBpZiAoTWF0aC5mbG9vcihwcm9wLlRvcCEpID09PSBncm91cFRvcCkgew0KICAgICAgICAgICAgICAgIHJpZ2h0QXJyYXkucHVzaChjdHJsKQ0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICAgIGlmIChjdHJsU2VsWzBdLnN0YXJ0c1dpdGgoJ2dyb3VwJykpIHsNCiAgICAgIGNvbnN0IGdldEluZGV4ID0gZGl2c3R5bGUuZmluZEluZGV4KA0KICAgICAgICAodmFsKSA9PiB2YWwuZ3JvdXBOYW1lID09PSBjdHJsU2VsWzBdDQogICAgICApDQogICAgICBjb25zdCBncm91cExlZnQgPSBwYXJzZUludChkaXZzdHlsZVtnZXRJbmRleF0ubGVmdCEpDQogICAgICBjb25zdCBncm91cFRvcCA9IHBhcnNlSW50KGRpdnN0eWxlW2dldEluZGV4XS50b3AhKQ0KICAgICAgY29uc3QgZ3JvdXBDb25yb2wgPSB0aGlzLmdldEdyb3VwQ29udHJvbChjdHJsU2VsWzBdKQ0KICAgICAgaWYgKHR5cGUgPT09ICdMZWZ0Jykgew0KICAgICAgICBmb3IgKGxldCBjdHJsIG9mIGdyb3VwQ29ucm9sKSB7DQogICAgICAgICAgY29uc3QgcHJvcCA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY3RybF0ucHJvcGVydGllcw0KICAgICAgICAgIGlmIChNYXRoLmZsb29yKHByb3AuTGVmdCEpID09PSBncm91cExlZnQpIHsNCiAgICAgICAgICAgIGxlZnRBcnJheS5wdXNoKGN0cmwpDQogICAgICAgICAgICByaWdodEFycmF5LnB1c2goY3RybCkNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ1RvcCcpIHsNCiAgICAgICAgZm9yIChsZXQgY3RybCBvZiBncm91cENvbnJvbCkgew0KICAgICAgICAgIGNvbnN0IHByb3AgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2N0cmxdLnByb3BlcnRpZXMNCiAgICAgICAgICBpZiAoTWF0aC5mbG9vcihwcm9wLlRvcCEpID09PSBncm91cFRvcCkgew0KICAgICAgICAgICAgbGVmdEFycmF5LnB1c2goY3RybCkNCiAgICAgICAgICAgIHJpZ2h0QXJyYXkucHVzaChjdHJsKQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0gZWxzZSB7DQogICAgICBsZWZ0QXJyYXkudW5zaGlmdChjdHJsU2VsWzBdKQ0KICAgICAgcmlnaHRBcnJheS5wdXNoKGN0cmxTZWxbMF0pDQogICAgfQ0KICAgIGlmICh0eXBlID09PSAnTGVmdCcpIHsNCiAgICAgIGxlZnRBcnJheS5zb3J0KChhLCBiKSA9PiB7DQogICAgICAgIHJldHVybiB1c3JGcm1EYXRhW2JdLnByb3BlcnRpZXMuTGVmdCEgLSB1c3JGcm1EYXRhW2FdLnByb3BlcnRpZXMuTGVmdCENCiAgICAgIH0pDQogICAgICByaWdodEFycmF5LnNvcnQoKGEsIGIpID0+IHsNCiAgICAgICAgcmV0dXJuIHVzckZybURhdGFbYV0ucHJvcGVydGllcy5MZWZ0ISAtIHVzckZybURhdGFbYl0ucHJvcGVydGllcy5MZWZ0IQ0KICAgICAgfSkNCiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdUb3AnKSB7DQogICAgICBsZWZ0QXJyYXkuc29ydCgoYSwgYikgPT4gew0KICAgICAgICByZXR1cm4gdXNyRnJtRGF0YVtiXS5wcm9wZXJ0aWVzLlRvcCEgLSB1c3JGcm1EYXRhW2FdLnByb3BlcnRpZXMuVG9wIQ0KICAgICAgfSkNCiAgICAgIHJpZ2h0QXJyYXkuc29ydCgoYSwgYikgPT4gew0KICAgICAgICByZXR1cm4gdXNyRnJtRGF0YVthXS5wcm9wZXJ0aWVzLlRvcCEgLSB1c3JGcm1EYXRhW2JdLnByb3BlcnRpZXMuVG9wIQ0KICAgICAgfSkNCiAgICB9DQogICAgZm9yIChsZXQgaW5kZXggPSAxOyBpbmRleCA8IGxlZnRBcnJheS5sZW5ndGg7IGluZGV4KyspIHsNCiAgICAgIGNvbnN0IHByZXZDdHJsUHJvcCA9IHVzckZybURhdGFbbGVmdEFycmF5W2luZGV4IC0gMV1dLnByb3BlcnRpZXMNCiAgICAgIGNvbnN0IGN0cmxQcm9wID0gdXNyRnJtRGF0YVtsZWZ0QXJyYXlbaW5kZXhdXS5wcm9wZXJ0aWVzDQogICAgICBsZXQgcHJldkluZGV4ID0gLTENCiAgICAgIGxldCBjb250cm9sUHJvcEluZGV4ID0gLTENCiAgICAgIGlmICh0eXBlID09PSAnTGVmdCcpIHsNCiAgICAgICAgaWYgKHByZXZDdHJsUHJvcC5Hcm91cElEID09PSAnJyAmJiBjdHJsUHJvcC5Hcm91cElEID09PSAnJykgew0KICAgICAgICAgIHByb3BWYWx1ZSA9IHByZXZDdHJsUHJvcC5MZWZ0ISAtIGN0cmxQcm9wLldpZHRoIQ0KICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KHR5cGUsIHByb3BWYWx1ZSwgbGVmdEFycmF5W2luZGV4XSkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBpZiAocHJldkN0cmxQcm9wLkdyb3VwSUQgIT09ICcnKSB7DQogICAgICAgICAgICBpZiAoY3RybFByb3AuR3JvdXBJRCA9PT0gJycpIHsNCiAgICAgICAgICAgICAgcHJldkluZGV4ID0gZGl2c3R5bGUuZmluZEluZGV4KA0KICAgICAgICAgICAgICAgICh2YWwpID0+IHZhbC5ncm91cE5hbWUgPT09IHByZXZDdHJsUHJvcC5Hcm91cElEDQogICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgcHJvcFZhbHVlID0gcGFyc2VJbnQoZGl2c3R5bGVbcHJldkluZGV4XS5sZWZ0ISkgLSBjdHJsUHJvcC5XaWR0aCENCiAgICAgICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkodHlwZSwgcHJvcFZhbHVlLCBsZWZ0QXJyYXlbaW5kZXhdKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoY3RybFByb3AuR3JvdXBJRCAhPT0gJycpIHsNCiAgICAgICAgICAgIGNvbnRyb2xQcm9wSW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgoDQogICAgICAgICAgICAgICh2YWwpID0+IHZhbC5ncm91cE5hbWUgPT09IGN0cmxQcm9wLkdyb3VwSUQNCiAgICAgICAgICAgICkNCiAgICAgICAgICAgIGlmIChwcmV2Q3RybFByb3AuR3JvdXBJRCA9PT0gJycpIHsNCiAgICAgICAgICAgICAgcHJvcFZhbHVlID0NCiAgICAgICAgICAgICAgICBwcmV2Q3RybFByb3AuTGVmdCEgLQ0KICAgICAgICAgICAgICAgIHBhcnNlSW50KGRpdnN0eWxlW2NvbnRyb2xQcm9wSW5kZXhdLndpZHRoISkNCiAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgIHByZXZJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCgNCiAgICAgICAgICAgICAgICAodmFsKSA9PiB2YWwuZ3JvdXBOYW1lID09PSBwcmV2Q3RybFByb3AuR3JvdXBJRA0KICAgICAgICAgICAgICApDQogICAgICAgICAgICAgIHByb3BWYWx1ZSA9DQogICAgICAgICAgICAgICAgcGFyc2VJbnQoZGl2c3R5bGVbcHJldkluZGV4XS5sZWZ0ISkgLQ0KICAgICAgICAgICAgICAgIHBhcnNlSW50KGRpdnN0eWxlW2NvbnRyb2xQcm9wSW5kZXhdLndpZHRoISkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIEV2ZW50QnVzLiRlbWl0KA0KICAgICAgICAgICAgICAndXBkYXN0ZUdyb3VwU2l6ZScsDQogICAgICAgICAgICAgIHR5cGUsDQogICAgICAgICAgICAgIHByb3BWYWx1ZSwNCiAgICAgICAgICAgICAgY29udHJvbFByb3BJbmRleA0KICAgICAgICAgICAgKQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnVG9wJykgew0KICAgICAgICBpZiAocHJldkN0cmxQcm9wLkdyb3VwSUQgPT09ICcnICYmIGN0cmxQcm9wLkdyb3VwSUQgPT09ICcnKSB7DQogICAgICAgICAgcHJvcFZhbHVlID0gcHJldkN0cmxQcm9wLlRvcCEgLSBjdHJsUHJvcC5IZWlnaHQhDQogICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkodHlwZSwgcHJvcFZhbHVlLCBsZWZ0QXJyYXlbaW5kZXhdKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGlmIChwcmV2Q3RybFByb3AuR3JvdXBJRCAhPT0gJycpIHsNCiAgICAgICAgICAgIGlmIChjdHJsUHJvcC5Hcm91cElEID09PSAnJykgew0KICAgICAgICAgICAgICBwcmV2SW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgoDQogICAgICAgICAgICAgICAgKHZhbCkgPT4gdmFsLmdyb3VwTmFtZSA9PT0gcHJldkN0cmxQcm9wLkdyb3VwSUQNCiAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICBwcm9wVmFsdWUgPSBwYXJzZUludChkaXZzdHlsZVtwcmV2SW5kZXhdLnRvcCEpIC0gY3RybFByb3AuSGVpZ2h0IQ0KICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSh0eXBlLCBwcm9wVmFsdWUsIGxlZnRBcnJheVtpbmRleF0pDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIGlmIChjdHJsUHJvcC5Hcm91cElEICE9PSAnJykgew0KICAgICAgICAgICAgY29udHJvbFByb3BJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCgNCiAgICAgICAgICAgICAgKHZhbCkgPT4gdmFsLmdyb3VwTmFtZSA9PT0gY3RybFByb3AuR3JvdXBJRA0KICAgICAgICAgICAgKQ0KICAgICAgICAgICAgaWYgKHByZXZDdHJsUHJvcC5Hcm91cElEID09PSAnJykgew0KICAgICAgICAgICAgICBwcm9wVmFsdWUgPQ0KICAgICAgICAgICAgICAgIHByZXZDdHJsUHJvcC5Ub3AhIC0NCiAgICAgICAgICAgICAgICBwYXJzZUludChkaXZzdHlsZVtjb250cm9sUHJvcEluZGV4XS5oZWlnaHQhKQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgcHJldkluZGV4ID0gZGl2c3R5bGUuZmluZEluZGV4KA0KICAgICAgICAgICAgICAgICh2YWwpID0+IHZhbC5ncm91cE5hbWUgPT09IHByZXZDdHJsUHJvcC5Hcm91cElEDQogICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgcHJvcFZhbHVlID0NCiAgICAgICAgICAgICAgICBwYXJzZUludChkaXZzdHlsZVtwcmV2SW5kZXhdLnRvcCEpIC0NCiAgICAgICAgICAgICAgICBwYXJzZUludChkaXZzdHlsZVtjb250cm9sUHJvcEluZGV4XS5oZWlnaHQhKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoDQogICAgICAgICAgICAgICd1cGRhc3RlR3JvdXBTaXplJywNCiAgICAgICAgICAgICAgdHlwZSwNCiAgICAgICAgICAgICAgcHJvcFZhbHVlLA0KICAgICAgICAgICAgICBjb250cm9sUHJvcEluZGV4DQogICAgICAgICAgICApDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICAgIGZvciAobGV0IGluZGV4ID0gMTsgaW5kZXggPCByaWdodEFycmF5Lmxlbmd0aDsgaW5kZXgrKykgew0KICAgICAgY29uc3QgcHJldkN0cmxQcm9wID0gdXNyRnJtRGF0YVtyaWdodEFycmF5W2luZGV4IC0gMV1dLnByb3BlcnRpZXMNCiAgICAgIGNvbnN0IGN0cmxQcm9wID0gdXNyRnJtRGF0YVtyaWdodEFycmF5W2luZGV4XV0ucHJvcGVydGllcw0KICAgICAgbGV0IHByZXZJbmRleCA9IC0xDQogICAgICBjb25zdCBjb250cm9sUHJvcEluZGV4ID0gLTENCiAgICAgIGlmICh0eXBlID09PSAnTGVmdCcpIHsNCiAgICAgICAgaWYgKHByZXZDdHJsUHJvcC5Hcm91cElEID09PSAnJyAmJiBjdHJsUHJvcC5Hcm91cElEID09PSAnJykgew0KICAgICAgICAgIHByb3BWYWx1ZSA9IHByZXZDdHJsUHJvcC5MZWZ0ISArIHByZXZDdHJsUHJvcC5XaWR0aCENCiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSh0eXBlLCBwcm9wVmFsdWUsIHJpZ2h0QXJyYXlbaW5kZXhdKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGlmIChwcmV2Q3RybFByb3AuR3JvdXBJRCAhPT0gJycpIHsNCiAgICAgICAgICAgIHByZXZJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCgNCiAgICAgICAgICAgICAgKHZhbCkgPT4gdmFsLmdyb3VwTmFtZSA9PT0gcHJldkN0cmxQcm9wLkdyb3VwSUQNCiAgICAgICAgICAgICkNCiAgICAgICAgICAgIHByb3BWYWx1ZSA9DQogICAgICAgICAgICAgIHBhcnNlSW50KGRpdnN0eWxlW3ByZXZJbmRleF0ubGVmdCEpICsNCiAgICAgICAgICAgICAgcGFyc2VJbnQoZGl2c3R5bGVbcHJldkluZGV4XS53aWR0aCEpDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHByb3BWYWx1ZSA9IHByZXZDdHJsUHJvcC5MZWZ0ISArIHByZXZDdHJsUHJvcC5XaWR0aCENCiAgICAgICAgICB9DQogICAgICAgICAgaWYgKGN0cmxQcm9wLkdyb3VwSUQgIT09ICcnKSB7DQogICAgICAgICAgICBjb25zdCBnZXRJbmRleCA9IGRpdnN0eWxlLmZpbmRJbmRleCgNCiAgICAgICAgICAgICAgKHZhbCkgPT4gdmFsLmdyb3VwTmFtZSA9PT0gY3RybFByb3AuR3JvdXBJRA0KICAgICAgICAgICAgKQ0KICAgICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3VwZGFzdGVHcm91cFNpemUnLCB0eXBlLCBwcm9wVmFsdWUsIGdldEluZGV4KQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSh0eXBlLCBwcm9wVmFsdWUsIHJpZ2h0QXJyYXlbaW5kZXhdKQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnVG9wJykgew0KICAgICAgICBpZiAocHJldkN0cmxQcm9wLkdyb3VwSUQgPT09ICcnICYmIGN0cmxQcm9wLkdyb3VwSUQgPT09ICcnKSB7DQogICAgICAgICAgcHJvcFZhbHVlID0gcHJldkN0cmxQcm9wLlRvcCEgKyBwcmV2Q3RybFByb3AuSGVpZ2h0IQ0KICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KHR5cGUsIHByb3BWYWx1ZSwgcmlnaHRBcnJheVtpbmRleF0pDQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgaWYgKHByZXZDdHJsUHJvcC5Hcm91cElEICE9PSAnJykgew0KICAgICAgICAgICAgcHJldkluZGV4ID0gZGl2c3R5bGUuZmluZEluZGV4KA0KICAgICAgICAgICAgICAodmFsKSA9PiB2YWwuZ3JvdXBOYW1lID09PSBwcmV2Q3RybFByb3AuR3JvdXBJRA0KICAgICAgICAgICAgKQ0KICAgICAgICAgICAgcHJvcFZhbHVlID0NCiAgICAgICAgICAgICAgcGFyc2VJbnQoZGl2c3R5bGVbcHJldkluZGV4XS50b3AhKSArDQogICAgICAgICAgICAgIHBhcnNlSW50KGRpdnN0eWxlW3ByZXZJbmRleF0uaGVpZ2h0ISkNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgcHJvcFZhbHVlID0gcHJldkN0cmxQcm9wLlRvcCEgKyBwcmV2Q3RybFByb3AuSGVpZ2h0IQ0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoY3RybFByb3AuR3JvdXBJRCAhPT0gJycpIHsNCiAgICAgICAgICAgIGNvbnN0IGdldEluZGV4ID0gZGl2c3R5bGUuZmluZEluZGV4KA0KICAgICAgICAgICAgICAodmFsKSA9PiB2YWwuZ3JvdXBOYW1lID09PSBjdHJsUHJvcC5Hcm91cElEDQogICAgICAgICAgICApDQogICAgICAgICAgICBFdmVudEJ1cy4kZW1pdCgndXBkYXN0ZUdyb3VwU2l6ZScsIHR5cGUsIHByb3BWYWx1ZSwgZ2V0SW5kZXgpDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KHR5cGUsIHByb3BWYWx1ZSwgcmlnaHRBcnJheVtpbmRleF0pDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICB9DQogIHVwZGF0ZVByb3BWYWwgKHByb3BOYW1lOiBzdHJpbmcsIHByb3BWYWx1ZTogbnVtYmVyKSB7DQogICAgY29uc3QgY3RybFNlbCA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkDQogICAgY29uc3QgdXNyRnJtRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF0NCiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgY3RybFNlbC5sZW5ndGg7IGluZGV4KyspIHsNCiAgICAgIGlmICghY3RybFNlbFtpbmRleF0uc3RhcnRzV2l0aCgnZ3JvdXAnKSkgew0KICAgICAgICBjb25zdCBjdXJQcm9wID0gdXNyRnJtRGF0YVtjdHJsU2VsW2luZGV4XV0ucHJvcGVydGllcw0KICAgICAgICBpZiAocHJvcE5hbWUgPT09ICdzZWxDZW50ZXInKSB7DQogICAgICAgICAgY29uc3QgY3VyQ2VudGVyID0gY3VyUHJvcC5XaWR0aCEgLyAyDQogICAgICAgICAgY29uc3QgdmFsdWUgPSBwcm9wVmFsdWUgLSBjdXJDZW50ZXINCiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSgnTGVmdCcsIHZhbHVlLCBjdHJsU2VsW2luZGV4XSkNCiAgICAgICAgfQ0KICAgICAgICBpZiAocHJvcE5hbWUgPT09ICdzZWxNaWRkbGUnKSB7DQogICAgICAgICAgY29uc3QgY3VyTWlkZGxlID0gY3VyUHJvcC5IZWlnaHQhIC8gMg0KICAgICAgICAgIGNvbnN0IHZhbHVlID0gcHJvcFZhbHVlIC0gY3VyTWlkZGxlDQogICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkoJ1RvcCcsIHZhbHVlLCBjdHJsU2VsW2luZGV4XSkNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgbGV0IGRpdnN0eWxlOiBBcnJheTxJR3JvdXBTdHlsZT4gPSBbXQ0KICAgICAgICBFdmVudEJ1cy4kZW1pdCgnZ2V0R3JvdXBTaXplJywgKGRpdnN0YXlsZUFycmF5OiBBcnJheTxJR3JvdXBTdHlsZT4pID0+IHsNCiAgICAgICAgICBkaXZzdHlsZSA9IGRpdnN0YXlsZUFycmF5DQogICAgICAgIH0pDQogICAgICAgIGNvbnN0IGdyb3VwSW5kZXggPSBkaXZzdHlsZS5maW5kSW5kZXgoDQogICAgICAgICAgKHZhbCkgPT4gdmFsLmdyb3VwTmFtZSA9PT0gY3RybFNlbFtpbmRleF0NCiAgICAgICAgKQ0KICAgICAgICBjb25zdCBjdXJQcm9wID0gZGl2c3R5bGVbZ3JvdXBJbmRleF0NCiAgICAgICAgY29uc3QgbGVmdCA9IHBhcnNlSW50KGN1clByb3AubGVmdCEpDQogICAgICAgIGNvbnN0IHRvcCA9IHBhcnNlSW50KGN1clByb3AudG9wISkNCiAgICAgICAgY29uc3Qgd2lkdGggPSBwYXJzZUludChjdXJQcm9wLndpZHRoISkNCiAgICAgICAgY29uc3QgaGVpZ2h0ID0gcGFyc2VJbnQoY3VyUHJvcC5oZWlnaHQhKQ0KICAgICAgICBsZXQgdmFsdWUgPSAtMQ0KICAgICAgICBpZiAocHJvcE5hbWUgPT09ICdzZWxDZW50ZXInKSB7DQogICAgICAgICAgdmFsdWUgPSBwcm9wVmFsdWUgLSB3aWR0aCEgLyAyDQogICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3VwZGFzdGVHcm91cFNpemUnLCAnTGVmdCcsIHZhbHVlLCBncm91cEluZGV4KQ0KICAgICAgICB9DQogICAgICAgIGlmIChwcm9wTmFtZSA9PT0gJ3NlbE1pZGRsZScpIHsNCiAgICAgICAgICB2YWx1ZSA9IHByb3BWYWx1ZSAtIGhlaWdodCEgLyAyDQogICAgICAgICAgRXZlbnRCdXMuJGVtaXQoJ3VwZGFzdGVHcm91cFNpemUnLCAnVG9wJywgdmFsdWUsIGdyb3VwSW5kZXgpDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogIH0NCiAgY2VudHJlSW5Gb3JtICh2YWx1ZTogc3RyaW5nKSB7DQogICAgbGV0IGRpdnN0eWxlOiBBcnJheTxJR3JvdXBTdHlsZT4gPSBbXQ0KICAgIGNvbnN0IG1haW5Db250YWluZXIgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5jb250YWluZXJbMF0NCiAgICBjb25zdCB1c3JGcm1EYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXQ0KICAgIGNvbnN0IGN0cmxQcm9wID0gdXNyRnJtRGF0YVttYWluQ29udGFpbmVyXS5wcm9wZXJ0aWVzDQogICAgaWYgKHZhbHVlID09PSAnaG9yaXpvbnRhbCcpIHsNCiAgICAgIGNvbnN0IHNlbENlbnRlciA9IGN0cmxQcm9wLkxlZnQhICsgY3RybFByb3AuV2lkdGghIC8gMg0KICAgICAgdGhpcy51cGRhdGVQcm9wVmFsKCdzZWxDZW50ZXInLCBzZWxDZW50ZXIpDQogICAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gJ3ZlcnRpY2FsJykgew0KICAgICAgY29uc3Qgc2VsTWlkZGxlID0gY3RybFByb3AuVG9wISArIGN0cmxQcm9wLkhlaWdodCEgLyAyDQogICAgICB0aGlzLnVwZGF0ZVByb3BWYWwoJ3NlbE1pZGRsZScsIHNlbE1pZGRsZSkNCiAgICB9DQogIH0NCiAgYXJyYW5nZUJ1dHRvbiAodHlwZTogc3RyaW5nKSB7DQogICAgY29uc3QgdXNyRnJtRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF0NCiAgICBjb25zdCBjdHJsU2VsID0gdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uc2VsZWN0ZWQNCiAgICBsZXQgY3RybENvbnRhaW5lciA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLmNvbnRhaW5lclswXQ0KICAgIGN0cmxDb250YWluZXIgPQ0KICAgICAgdXNyRnJtRGF0YVtjdHJsQ29udGFpbmVyXS50eXBlID09PSAnUGFnZScNCiAgICAgICAgPyB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5jb250YWluZXJbMV0NCiAgICAgICAgOiBjdHJsQ29udGFpbmVyDQogICAgY29uc3QgYnV0dG9uQXJyYXkgPSBbXQ0KICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBjdHJsU2VsLmxlbmd0aDsgaW5kZXgrKykgew0KICAgICAgaWYgKCFjdHJsU2VsW2luZGV4XS5zdGFydHNXaXRoKCdncm91cCcpKSB7DQogICAgICAgIGNvbnN0IGNvbnRyb2xwcm9wID0gdXNyRnJtRGF0YVtjdHJsU2VsW2luZGV4XV0NCiAgICAgICAgaWYgKGNvbnRyb2xwcm9wLnR5cGUgPT09ICdDb21tYW5kQnV0dG9uJykgew0KICAgICAgICAgIGJ1dHRvbkFycmF5LnB1c2goY3RybFNlbFtpbmRleF0pDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogICAgaWYgKHR5cGUgPT09ICdib3R0b20nKSB7DQogICAgICBidXR0b25BcnJheS5zb3J0KChhLCBiKSA9PiB7DQogICAgICAgIHJldHVybiB1c3JGcm1EYXRhW2FdLnByb3BlcnRpZXMuTGVmdCEgLSB1c3JGcm1EYXRhW2JdLnByb3BlcnRpZXMuTGVmdCENCiAgICAgIH0pDQogICAgfSBlbHNlIGlmICh0eXBlID09PSAncmlnaHQnKSB7DQogICAgICBidXR0b25BcnJheS5zb3J0KChhLCBiKSA9PiB7DQogICAgICAgIHJldHVybiB1c3JGcm1EYXRhW2FdLnByb3BlcnRpZXMuVG9wISAtIHVzckZybURhdGFbYl0ucHJvcGVydGllcy5Ub3AhDQogICAgICB9KQ0KICAgIH0NCiAgICBjb25zdCBjb250YWluZXJQcm9wID0gdXNyRnJtRGF0YVtjdHJsQ29udGFpbmVyXS5wcm9wZXJ0aWVzDQogICAgbGV0IHZhbHVlOiBudW1iZXIgPSAwDQogICAgY29uc3QgY29udGFpbmVySGVpZ2h0ID0gKHVzckZybURhdGFbY3RybENvbnRhaW5lcl0udHlwZSA9PT0gJ1VzZXJmb3JtJykNCiAgICAgID8gNDcgOiB1c3JGcm1EYXRhW2N0cmxDb250YWluZXJdLnR5cGUgPT09ICdGcmFtZScgPyAyNw0KICAgICAgICA6IHVzckZybURhdGFbY3RybENvbnRhaW5lcl0udHlwZSA9PT0gJ011bHRpUGFnZScgPyA0MCA6IDANCiAgICBjb25zdCBjb250YWluZXJXaWR0aCA9IDIwDQogICAgaWYgKHR5cGUgPT09ICdib3R0b20nKSB7DQogICAgICB2YWx1ZSA9IChjb250YWluZXJQcm9wLkhlaWdodCEgLSBjb250YWluZXJIZWlnaHQpIC0gdXNyRnJtRGF0YVtidXR0b25BcnJheVswXV0ucHJvcGVydGllcy5IZWlnaHQhDQogICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSgnVG9wJywgdmFsdWUsIGJ1dHRvbkFycmF5WzBdKQ0KICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkoJ0xlZnQnLCAzMCwgYnV0dG9uQXJyYXlbMF0pDQogICAgfSBlbHNlIGlmICh0eXBlID09PSAncmlnaHQnKSB7DQogICAgICB2YWx1ZSA9IChjb250YWluZXJQcm9wLldpZHRoISAtIGNvbnRhaW5lcldpZHRoKSAtIHVzckZybURhdGFbYnV0dG9uQXJyYXlbMF1dLnByb3BlcnRpZXMuV2lkdGghDQogICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSgnTGVmdCcsIHZhbHVlLCBidXR0b25BcnJheVswXSkNCiAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KCdUb3AnLCAyMCwgYnV0dG9uQXJyYXlbMF0pDQogICAgfQ0KDQogICAgZm9yIChsZXQgaW5kZXggPSAxOyBpbmRleCA8IGJ1dHRvbkFycmF5Lmxlbmd0aDsgaW5kZXgrKykgew0KICAgICAgY29uc3QgcHJldkN0cmxQcm9wID0gdXNyRnJtRGF0YVtidXR0b25BcnJheVtpbmRleCAtIDFdXS5wcm9wZXJ0aWVzDQogICAgICBjb25zdCBjdHJsUHJvcCA9IHVzckZybURhdGFbYnV0dG9uQXJyYXlbaW5kZXhdXS5wcm9wZXJ0aWVzDQogICAgICBpZiAodHlwZSA9PT0gJ2JvdHRvbScpIHsNCiAgICAgICAgbGV0IHByb3BWYWx1ZSA9IHByZXZDdHJsUHJvcC5MZWZ0ISArIHByZXZDdHJsUHJvcC5XaWR0aCEgKyAxMA0KICAgICAgICB2YWx1ZSA9DQogICAgICAgICAgKGNvbnRhaW5lclByb3AuSGVpZ2h0ISAtIGNvbnRhaW5lckhlaWdodCkgLQ0KICAgICAgICAgIHVzckZybURhdGFbYnV0dG9uQXJyYXlbaW5kZXhdXS5wcm9wZXJ0aWVzLkhlaWdodCENCiAgICAgICAgaWYgKHByb3BWYWx1ZSArIGN0cmxQcm9wLldpZHRoISA8PSBjb250YWluZXJQcm9wLldpZHRoISAtIGNvbnRhaW5lcldpZHRoKSB7DQogICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkoJ0xlZnQnLCBwcm9wVmFsdWUsIGJ1dHRvbkFycmF5W2luZGV4XSkNCiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSgnVG9wJywgdmFsdWUsIGJ1dHRvbkFycmF5W2luZGV4XSkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBwcm9wVmFsdWUgPSBjb250YWluZXJQcm9wLldpZHRoISAtIGNvbnRhaW5lcldpZHRoIC0gY3RybFByb3AuV2lkdGghDQogICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkoJ0xlZnQnLCBwcm9wVmFsdWUsIGJ1dHRvbkFycmF5W2luZGV4XSkNCiAgICAgICAgICB0aGlzLnVwZGF0ZUNvbnRyb2xQcm9wZXJ0eSgnVG9wJywgdmFsdWUsIGJ1dHRvbkFycmF5W2luZGV4XSkNCiAgICAgICAgfQ0KICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAncmlnaHQnKSB7DQogICAgICAgIGxldCBwcm9wVmFsdWUgPSBwcmV2Q3RybFByb3AuVG9wISArIHByZXZDdHJsUHJvcC5IZWlnaHQhICsgMTANCiAgICAgICAgdmFsdWUgPQ0KICAgICAgICAgIChjb250YWluZXJQcm9wLldpZHRoISAtIGNvbnRhaW5lcldpZHRoKSAtDQogICAgICAgICAgdXNyRnJtRGF0YVtidXR0b25BcnJheVtpbmRleF1dLnByb3BlcnRpZXMuV2lkdGghDQogICAgICAgIGlmIChwcm9wVmFsdWUgKyBjdHJsUHJvcC5IZWlnaHQhIDw9IGNvbnRhaW5lclByb3AuSGVpZ2h0ISAtIChjb250YWluZXJIZWlnaHQpKSB7DQogICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkoJ1RvcCcsIHByb3BWYWx1ZSwgYnV0dG9uQXJyYXlbaW5kZXhdKQ0KICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KCdMZWZ0JywgdmFsdWUsIGJ1dHRvbkFycmF5W2luZGV4XSkNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICBwcm9wVmFsdWUgPSBjb250YWluZXJQcm9wLkhlaWdodCEgLSBjb250YWluZXJIZWlnaHQgLSBjdHJsUHJvcC5IZWlnaHQhDQogICAgICAgICAgdGhpcy51cGRhdGVDb250cm9sUHJvcGVydHkoJ1RvcCcsIHByb3BWYWx1ZSwgYnV0dG9uQXJyYXlbaW5kZXhdKQ0KICAgICAgICAgIHRoaXMudXBkYXRlQ29udHJvbFByb3BlcnR5KCdMZWZ0JywgdmFsdWUsIGJ1dHRvbkFycmF5W2luZGV4XSkNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfQ0KICB1cGRhdGVDb250cm9sUHJvcGVydHkgKA0KICAgIHByb3BlcnR5TmFtZToga2V5b2YgY29udHJvbFByb3BlcnRpZXMsDQogICAgcHJvcGVydHlWYWx1ZTogYW55LA0KICAgIGNvbnRyb2xJZDogc3RyaW5nDQogICkgew0KICAgIHRoaXMudXBkYXRlQ29udHJvbCh7DQogICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsDQogICAgICBjb250cm9sSWQ6IGNvbnRyb2xJZCwNCiAgICAgIHByb3BlcnR5TmFtZTogcHJvcGVydHlOYW1lLA0KICAgICAgdmFsdWU6IHByb3BlcnR5VmFsdWUNCiAgICB9KQ0KICB9DQogIGdldGRpc2FibGVTdHlsZSAoaWQ6IHN0cmluZykgew0KICAgIGxldCBkaXNhYmxlZDogYm9vbGVhbiA9IHRydWUNCiAgICBjb25zdCBzZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkDQogICAgY29uc3Qgc2VsQ29udGFpbmVyID0gdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uY29udGFpbmVyDQogICAgY29uc3QgdXNlckRhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdDQogICAgaWYgKGlkID09PSAndW5Hcm91cCcpIHsNCiAgICAgIGxldCBncm91cElkOiBib29sZWFuID0gZmFsc2UNCiAgICAgIGNvbnN0IHNlbGVjdGVkR3JvdXBBcnJheSA9IHNlbGVjdGVkLmZpbHRlcigNCiAgICAgICAgKHZhbDogc3RyaW5nKSA9PiB2YWwuc3RhcnRzV2l0aCgnZ3JvdXAnKSAmJiB2YWwNCiAgICAgICkNCiAgICAgIGlmIChzZWxlY3RlZEdyb3VwQXJyYXkubGVuZ3RoID09PSAxICYmIHNlbGVjdGVkLmxlbmd0aCA9PT0gMSkgew0KICAgICAgICBkaXNhYmxlZCA9IGZhbHNlDQogICAgICB9DQogICAgfQ0KICAgIGlmIChpZCA9PT0gJ2dyb3VwJykgew0KICAgICAgZGlzYWJsZWQgPSBzZWxlY3RlZC5sZW5ndGggPD0gMQ0KICAgIH0NCiAgICBpZiAoaWQgPT09ICdzaXplVG9HcmlkJyB8fCBpZCA9PT0gJ2NlbnRyZUluRm9ybScpIHsNCiAgICAgIGRpc2FibGVkID0gIShzZWxlY3RlZC5sZW5ndGggPj0gMSAmJiBzZWxlY3RlZFswXSAhPT0gc2VsQ29udGFpbmVyWzBdKQ0KICAgIH0NCiAgICBpZiAoaWQgPT09ICdzaXplVG9GaXQnKSB7DQogICAgICBjb25zdCBzZWxTZWxlY3RlZCA9IFtdDQogICAgICBmb3IgKGNvbnN0IGNvbnRyb2wgb2YgdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uc2VsZWN0ZWQpIHsNCiAgICAgICAgaWYgKCFjb250cm9sLnN0YXJ0c1dpdGgoJ2dyb3VwJykpIHsNCiAgICAgICAgICBjb25zdCB0eXBlID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtjb250cm9sXS50eXBlDQogICAgICAgICAgaWYgKHR5cGUgIT09ICdNdWx0aVBhZ2UnICYmIHR5cGUgIT09ICdGcmFtZScgJiYgdHlwZSAhPT0gJ0xpc3RCb3gnICYmIHR5cGUgIT09ICdQYWdlJyAmJiB0eXBlICE9PSAnVGFiU3RyaXAnICYmIHR5cGUgIT09ICdVc2VyZm9ybScpIHsNCiAgICAgICAgICAgIHNlbFNlbGVjdGVkLnB1c2goY29udHJvbCkNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIGRpc2FibGVkID0gIShzZWxTZWxlY3RlZC5sZW5ndGggPj0gMSkNCiAgICB9DQogICAgaWYgKGlkID09PSAnb3JkZXInKSB7DQogICAgICBkaXNhYmxlZCA9ICEoc2VsZWN0ZWQubGVuZ3RoID49IDEgJiYgdXNlckRhdGFbc2VsQ29udGFpbmVyWzBdXS5jb250cm9scy5sZW5ndGggPj0gMikNCiAgICB9DQogICAgaWYgKGlkID09PSAnbWFrZUVxdWFsJykgew0KICAgICAgZGlzYWJsZWQgPSAhKHNlbGVjdGVkLmxlbmd0aCA+PSAzKQ0KICAgIH0NCiAgICBpZiAoaWQgPT09ICdpbmNEZWNzcGFjaW5nJyB8fCBpZCA9PT0gJ3JlbW92ZVNwYWNlJykgew0KICAgICAgZGlzYWJsZWQgPSAhKHNlbGVjdGVkLmxlbmd0aCA+PSAyKQ0KICAgIH0NCiAgICBpZiAoaWQgPT09ICdhcnJhbmdlQnV0dG9uJykgew0KICAgICAgY29uc3QgYnV0dG9uQXJyYXkgPSBbXQ0KICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHNlbGVjdGVkLmxlbmd0aDsgaW5kZXgrKykgew0KICAgICAgICBpZiAoIXNlbGVjdGVkW2luZGV4XS5zdGFydHNXaXRoKCdncm91cCcpKSB7DQogICAgICAgICAgY29uc3QgY29udHJvbHByb3AgPSB1c2VyRGF0YVtzZWxlY3RlZFtpbmRleF1dDQogICAgICAgICAgaWYgKGNvbnRyb2xwcm9wLnR5cGUgPT09ICdDb21tYW5kQnV0dG9uJykgew0KICAgICAgICAgICAgYnV0dG9uQXJyYXkucHVzaChzZWxlY3RlZFtpbmRleF0pDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9DQogICAgICBkaXNhYmxlZCA9ICEoYnV0dG9uQXJyYXkubGVuZ3RoID49IDEpDQogICAgfQ0KICAgIHJldHVybiBkaXNhYmxlZA0KICB9DQogIGJyaW5nRm9yd2FyZCAoKSB7DQogICAgY29uc3QgdXNlckRhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdDQogICAgY29uc3QgaGlnaFByb3JDb250cm9sID0gW10NCiAgICBjb25zdCBsb3dQcm9yQ29udHJvbCA9IFtdDQogICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5nZXRDb250YWluZXJMaXN0KHRoaXMuZ2V0U2VsZWN0ZWRDb250cm9sc0RhdGFzIVswXSlbMF0NCiAgICBjb25zdCBjb250YWluZXJDb250cm9scyA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY29udGFpbmVyXS5jb250cm9scw0KICAgIGZvciAoY29uc3QgaW5kZXggaW4gY29udGFpbmVyQ29udHJvbHMpIHsNCiAgICAgIGNvbnN0IGNudHJsRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY29udGFpbmVyQ29udHJvbHNbaW5kZXhdXQ0KICAgICAgaWYgKGNudHJsRGF0YS50eXBlID09PSAnTXVsdGlQYWdlJyB8fCBjbnRybERhdGEudHlwZSA9PT0gJ0ZyYW1lJyB8fCBjbnRybERhdGEudHlwZSA9PT0gJ0xpc3RCb3gnKSB7DQogICAgICAgIGhpZ2hQcm9yQ29udHJvbC5wdXNoKGNvbnRhaW5lckNvbnRyb2xzW2luZGV4XSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIGxvd1Byb3JDb250cm9sLnB1c2goY29udGFpbmVyQ29udHJvbHNbaW5kZXhdKQ0KICAgICAgfQ0KICAgIH0NCiAgICBsZXQgbmV4dFNlbGN0ZWRTZXJpZXM6IHN0cmluZ1tdID0gW10NCiAgICBsZXQgbmV4dEhpZ2hDb250cm9sU2VyaWVzOiBzdHJpbmdbXSA9IFtdDQogICAgY29uc3QgZ2V0U2VsQ29udHJvbCA9IFsuLi50aGlzLmdldFNlbGVjdGVkQ29udHJvbHNEYXRhcyFdDQogICAgZ2V0U2VsQ29udHJvbC5zb3J0KChhLCBiKSA9PiB7DQogICAgICByZXR1cm4gdXNlckRhdGFbYV0uZXh0cmFEYXRhcyEuekluZGV4ISAtIHVzZXJEYXRhW2JdLmV4dHJhRGF0YXMhLnpJbmRleCENCiAgICB9KQ0KICAgIGZvciAoY29uc3Qgc2VsQ29udHJvbCBvZiBnZXRTZWxDb250cm9sISkgew0KICAgICAgY29uc3QgdHlwZSA9IHVzZXJEYXRhW3NlbENvbnRyb2xdLnR5cGUNCiAgICAgIGNvbnN0IHRlbXBaSW5kZXggPSB1c2VyRGF0YVtzZWxDb250cm9sXS5leHRyYURhdGFzIS56SW5kZXghDQogICAgICBjb25zdCBjb250cm9sSW5kZXggPSBPYmplY3Qua2V5cyh1c2VyRGF0YSkuZmluZEluZGV4KCh2YWw6IHN0cmluZywgaW5kZXg6IG51bWJlcikgPT4gew0KICAgICAgICByZXR1cm4gJ3pJbmRleCcgaW4gdXNlckRhdGFbdmFsXS5leHRyYURhdGFzISAmJiAodXNlckRhdGFbdmFsXS5leHRyYURhdGFzIS56SW5kZXggPT09IHRlbXBaSW5kZXggKyAxKQ0KICAgICAgfSkNCiAgICAgIGNvbnN0IG5leHRTZWxlY3RlZENvbnRyb2wgPSBjb250cm9sSW5kZXggIT09IC0xID8gT2JqZWN0LmtleXModXNlckRhdGEpW2NvbnRyb2xJbmRleF0gOiAnJw0KICAgICAgY29uc3QgbmV4dENvbnRyb2xUeXBlID0gdXNlckRhdGFbbmV4dFNlbGVjdGVkQ29udHJvbF0udHlwZQ0KICAgICAgaWYgKG5leHRTZWxlY3RlZENvbnRyb2wgIT09ICcnICYmICFoaWdoUHJvckNvbnRyb2wuaW5jbHVkZXMobmV4dFNlbGVjdGVkQ29udHJvbCkpIHsNCiAgICAgICAgaWYgKGdldFNlbENvbnRyb2whLmluY2x1ZGVzKG5leHRTZWxlY3RlZENvbnRyb2wpKSB7DQogICAgICAgICAgaWYgKCFuZXh0U2VsY3RlZFNlcmllcy5pbmNsdWRlcyhzZWxDb250cm9sKSkgew0KICAgICAgICAgICAgbmV4dFNlbGN0ZWRTZXJpZXMucHVzaChzZWxDb250cm9sKQ0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoIW5leHRTZWxjdGVkU2VyaWVzLmluY2x1ZGVzKG5leHRTZWxlY3RlZENvbnRyb2wpKSB7DQogICAgICAgICAgICBuZXh0U2VsY3RlZFNlcmllcy5wdXNoKG5leHRTZWxlY3RlZENvbnRyb2wpDQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhuZXh0U2VsY3RlZFNlcmllcykubGVuZ3RoICE9PSAwKSB7DQogICAgICAgICAgICBjb25zdCB0ZW1wRXhjaGFnZUluZGV4ID0gdXNlckRhdGFbbmV4dFNlbGN0ZWRTZXJpZXNbMF1dLmV4dHJhRGF0YXMhLnpJbmRleCENCiAgICAgICAgICAgIGNvbnN0IHN3YXBUYWJJbmRleCA9IHVzZXJEYXRhW25leHRTZWxlY3RlZENvbnRyb2xdLmV4dHJhRGF0YXMhLnpJbmRleCENCiAgICAgICAgICAgIGlmIChzd2FwVGFiSW5kZXggPD0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5sZW5ndGggLyogJiYgc3dhcFRhYkluZGV4ID4gMCAqLykgew0KICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHMuZmluZEluZGV4KA0KICAgICAgICAgICAgICAgICh2YWwpID0+IHVzZXJEYXRhW3ZhbF0uZXh0cmFEYXRhcyEuekluZGV4ID09PSBzd2FwVGFiSW5kZXgNCiAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXModXNlckRhdGFbY29udGFpbmVyXS5jb250cm9sc1tpbmRleF0sICd6SW5kZXgnLCB0ZW1wRXhjaGFnZUluZGV4KQ0KICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXMobmV4dFNlbGN0ZWRTZXJpZXNbMF0sICd6SW5kZXgnLCBzd2FwVGFiSW5kZXggLSAobmV4dFNlbGN0ZWRTZXJpZXMhLmxlbmd0aCAtIDEpKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZm9yIChsZXQgaiA9IDE7IGogPCBuZXh0U2VsY3RlZFNlcmllcy5sZW5ndGg7IGorKykgew0KICAgICAgICAgICAgICBjb25zdCB1cGRhdGVJbmRleCA9IHVzZXJEYXRhW25leHRTZWxjdGVkU2VyaWVzW2pdXS5leHRyYURhdGFzIS56SW5kZXghICsgMQ0KICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXMobmV4dFNlbGN0ZWRTZXJpZXNbal0sICd6SW5kZXgnLCB1cGRhdGVJbmRleCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG5leHRTZWxjdGVkU2VyaWVzID0gW10NCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgY29uc3Qgc3dhcFRhYkluZGV4ID0gdXNlckRhdGFbbmV4dFNlbGVjdGVkQ29udHJvbF0uZXh0cmFEYXRhcyEuekluZGV4IQ0KICAgICAgICAgICAgaWYgKHN3YXBUYWJJbmRleCA8PSB1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzLmxlbmd0aCAvKiAmJiBzd2FwVGFiSW5kZXggPiAwICovKSB7DQogICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5maW5kSW5kZXgoDQogICAgICAgICAgICAgICAgKHZhbCkgPT4gdXNlckRhdGFbdmFsXS5leHRyYURhdGFzIS56SW5kZXggPT09IHN3YXBUYWJJbmRleA0KICAgICAgICAgICAgICApDQogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhzZWxDb250cm9sLCAnekluZGV4Jywgc3dhcFRhYkluZGV4KQ0KICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXMobmV4dFNlbGVjdGVkQ29udHJvbCwgJ3pJbmRleCcsIHRlbXBaSW5kZXgpDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9IGVsc2Ugew0KICAgICAgICBpZiAoZ2V0U2VsQ29udHJvbCEuaW5jbHVkZXMobmV4dFNlbGVjdGVkQ29udHJvbCkgJiYgKHR5cGUgPT09ICdGcmFtZScgfHwgdHlwZSA9PT0gJ011bHRpUGFnZScgfHwgdHlwZSA9PT0gJ0xpc3RCb3gnKSkgew0KICAgICAgICAgIGlmICghbmV4dEhpZ2hDb250cm9sU2VyaWVzLmluY2x1ZGVzKHNlbENvbnRyb2wpKSB7DQogICAgICAgICAgICBuZXh0SGlnaENvbnRyb2xTZXJpZXMucHVzaChzZWxDb250cm9sKQ0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoIW5leHRIaWdoQ29udHJvbFNlcmllcy5pbmNsdWRlcyhuZXh0U2VsZWN0ZWRDb250cm9sKSkgew0KICAgICAgICAgICAgbmV4dEhpZ2hDb250cm9sU2VyaWVzLnB1c2gobmV4dFNlbGVjdGVkQ29udHJvbCkNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ0ZyYW1lJyB8fCB0eXBlID09PSAnTXVsdGlQYWdlJyB8fCB0eXBlID09PSAnTGlzdEJveCcpIHsNCiAgICAgICAgICBpZiAoT2JqZWN0LmtleXMobmV4dEhpZ2hDb250cm9sU2VyaWVzKS5sZW5ndGggIT09IDApIHsNCiAgICAgICAgICAgIGNvbnN0IHRlbXBFeGNoYWdlSW5kZXggPSB1c2VyRGF0YVtuZXh0SGlnaENvbnRyb2xTZXJpZXNbMF1dLmV4dHJhRGF0YXMhLnpJbmRleCENCiAgICAgICAgICAgIGNvbnN0IHN3YXBUYWJJbmRleCA9IHVzZXJEYXRhW25leHRTZWxlY3RlZENvbnRyb2xdLmV4dHJhRGF0YXMhLnpJbmRleCENCiAgICAgICAgICAgIGlmIChzd2FwVGFiSW5kZXggPD0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5sZW5ndGgpIHsNCiAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSB1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzLmZpbmRJbmRleCgNCiAgICAgICAgICAgICAgICAodmFsKSA9PiB1c2VyRGF0YVt2YWxdLmV4dHJhRGF0YXMhLnpJbmRleCA9PT0gc3dhcFRhYkluZGV4DQogICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHNbaW5kZXhdLCAnekluZGV4JywgdGVtcEV4Y2hhZ2VJbmRleCkNCiAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKG5leHRIaWdoQ29udHJvbFNlcmllc1swXSwgJ3pJbmRleCcsIHN3YXBUYWJJbmRleCAtIChuZXh0SGlnaENvbnRyb2xTZXJpZXMhLmxlbmd0aCAtIDEpKQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZm9yIChsZXQgaiA9IDE7IGogPCBuZXh0SGlnaENvbnRyb2xTZXJpZXMubGVuZ3RoOyBqKyspIHsNCiAgICAgICAgICAgICAgY29uc3QgdXBkYXRlSW5kZXggPSB1c2VyRGF0YVtuZXh0SGlnaENvbnRyb2xTZXJpZXNbal1dLmV4dHJhRGF0YXMhLnpJbmRleCEgKyAxDQogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhuZXh0SGlnaENvbnRyb2xTZXJpZXNbal0sICd6SW5kZXgnLCB1cGRhdGVJbmRleCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG5leHRIaWdoQ29udHJvbFNlcmllcyA9IFtdDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIGNvbnN0IHN3YXBUYWJJbmRleCA9IHVzZXJEYXRhW25leHRTZWxlY3RlZENvbnRyb2xdLmV4dHJhRGF0YXMhLnpJbmRleCENCiAgICAgICAgICAgIGlmIChzd2FwVGFiSW5kZXggPD0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5sZW5ndGggLyogJiYgc3dhcFRhYkluZGV4ID4gMCAqLykgew0KICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHMuZmluZEluZGV4KA0KICAgICAgICAgICAgICAgICh2YWwpID0+IHVzZXJEYXRhW3ZhbF0uZXh0cmFEYXRhcyEuekluZGV4ID09PSBzd2FwVGFiSW5kZXgNCiAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXMoc2VsQ29udHJvbCwgJ3pJbmRleCcsIHN3YXBUYWJJbmRleCkNCiAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKG5leHRTZWxlY3RlZENvbnRyb2wsICd6SW5kZXgnLCB0ZW1wWkluZGV4KQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgfQ0KICBzZW5kQmFja3dhcmQgKCkgew0KICAgIGNvbnN0IHVzZXJEYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXQ0KICAgIGNvbnN0IGhpZ2hQcm9yQ29udHJvbCA9IFtdDQogICAgY29uc3QgbG93UHJvckNvbnRyb2wgPSBbXQ0KICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuZ2V0Q29udGFpbmVyTGlzdCh0aGlzLmdldFNlbGVjdGVkQ29udHJvbHNEYXRhcyFbMF0pWzBdDQogICAgY29uc3QgY29udGFpbmVyQ29udHJvbHMgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2NvbnRhaW5lcl0uY29udHJvbHMNCiAgICBmb3IgKGNvbnN0IGluZGV4IGluIGNvbnRhaW5lckNvbnRyb2xzKSB7DQogICAgICBjb25zdCBjbnRybERhdGEgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2NvbnRhaW5lckNvbnRyb2xzW2luZGV4XV0NCiAgICAgIGlmIChjbnRybERhdGEudHlwZSA9PT0gJ011bHRpUGFnZScgfHwgY250cmxEYXRhLnR5cGUgPT09ICdGcmFtZScgfHwgY250cmxEYXRhLnR5cGUgPT09ICdMaXN0Qm94Jykgew0KICAgICAgICBoaWdoUHJvckNvbnRyb2wucHVzaChjb250YWluZXJDb250cm9sc1tpbmRleF0pDQogICAgICB9IGVsc2Ugew0KICAgICAgICBsb3dQcm9yQ29udHJvbC5wdXNoKGNvbnRhaW5lckNvbnRyb2xzW2luZGV4XSkNCiAgICAgIH0NCiAgICB9DQogICAgbGV0IG5leHRTZWxjdGVkU2VyaWVzOiBzdHJpbmdbXSA9IFtdDQogICAgbGV0IG5leHRIaWdoQ29udHJvbFNlcmllczogc3RyaW5nW10gPSBbXQ0KICAgIGNvbnN0IGdldFNlbENvbnRyb2wgPSBbLi4udGhpcy5nZXRTZWxlY3RlZENvbnRyb2xzRGF0YXMhXQ0KICAgIGdldFNlbENvbnRyb2wuc29ydCgoYSwgYikgPT4gew0KICAgICAgcmV0dXJuIHVzZXJEYXRhW2FdLmV4dHJhRGF0YXMhLnpJbmRleCEgLSB1c2VyRGF0YVtiXS5leHRyYURhdGFzIS56SW5kZXghDQogICAgfSkNCiAgICBmb3IgKGNvbnN0IHNlbENvbnRyb2wgb2YgZ2V0U2VsQ29udHJvbCkgew0KICAgICAgY29uc3QgdHlwZSA9IHVzZXJEYXRhW3NlbENvbnRyb2xdLnR5cGUNCiAgICAgIGNvbnN0IHRlbXBaSW5kZXggPSB1c2VyRGF0YVtzZWxDb250cm9sXS5leHRyYURhdGFzIS56SW5kZXghDQogICAgICBjb25zdCBjb250cm9sSW5kZXggPSBPYmplY3Qua2V5cyh1c2VyRGF0YSkuZmluZEluZGV4KCh2YWw6IHN0cmluZywgaW5kZXg6IG51bWJlcikgPT4gew0KICAgICAgICByZXR1cm4gJ3pJbmRleCcgaW4gdXNlckRhdGFbdmFsXS5leHRyYURhdGFzISAmJiAodXNlckRhdGFbdmFsXS5leHRyYURhdGFzIS56SW5kZXggPT09IHRlbXBaSW5kZXggLSAxKQ0KICAgICAgfSkNCiAgICAgIGNvbnN0IG5leHRTZWxlY3RlZENvbnRyb2wgPSBjb250cm9sSW5kZXggIT09IC0xID8gT2JqZWN0LmtleXModXNlckRhdGEpW2NvbnRyb2xJbmRleF0gOiAnJw0KICAgICAgY29uc3QgbmV4dENvbnRyb2xUeXBlID0gdXNlckRhdGFbbmV4dFNlbGVjdGVkQ29udHJvbF0udHlwZQ0KICAgICAgaWYgKG5leHRTZWxlY3RlZENvbnRyb2wgIT09ICcnICYmICFoaWdoUHJvckNvbnRyb2wuaW5jbHVkZXMoc2VsQ29udHJvbCkpIHsNCiAgICAgICAgaWYgKGdldFNlbENvbnRyb2whLmluY2x1ZGVzKG5leHRTZWxlY3RlZENvbnRyb2wpKSB7DQogICAgICAgICAgaWYgKCFuZXh0U2VsY3RlZFNlcmllcy5pbmNsdWRlcyhzZWxDb250cm9sKSkgew0KICAgICAgICAgICAgbmV4dFNlbGN0ZWRTZXJpZXMucHVzaChzZWxDb250cm9sKQ0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoIW5leHRTZWxjdGVkU2VyaWVzLmluY2x1ZGVzKG5leHRTZWxlY3RlZENvbnRyb2wpKSB7DQogICAgICAgICAgICBuZXh0U2VsY3RlZFNlcmllcy5wdXNoKG5leHRTZWxlY3RlZENvbnRyb2wpDQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGlmIChPYmplY3Qua2V5cyhuZXh0U2VsY3RlZFNlcmllcykubGVuZ3RoICE9PSAwKSB7DQogICAgICAgICAgICBjb25zdCB0ZW1wRXhjaGFnZUluZGV4ID0gdXNlckRhdGFbbmV4dFNlbGN0ZWRTZXJpZXNbMF1dLmV4dHJhRGF0YXMhLnpJbmRleCENCiAgICAgICAgICAgIGNvbnN0IHN3YXBUYWJJbmRleCA9IHVzZXJEYXRhW25leHRTZWxlY3RlZENvbnRyb2xdLmV4dHJhRGF0YXMhLnpJbmRleCENCiAgICAgICAgICAgIGlmIChzd2FwVGFiSW5kZXggPD0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5sZW5ndGggJiYgc3dhcFRhYkluZGV4ID4gMCkgew0KICAgICAgICAgICAgICBjb25zdCBpbmRleCA9IHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHMuZmluZEluZGV4KA0KICAgICAgICAgICAgICAgICh2YWwpID0+IHVzZXJEYXRhW3ZhbF0uZXh0cmFEYXRhcyEuekluZGV4ID09PSBzd2FwVGFiSW5kZXgNCiAgICAgICAgICAgICAgKQ0KICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXModXNlckRhdGFbY29udGFpbmVyXS5jb250cm9sc1tpbmRleF0sICd6SW5kZXgnLCB0ZW1wRXhjaGFnZUluZGV4KQ0KICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXMobmV4dFNlbGN0ZWRTZXJpZXNbMF0sICd6SW5kZXgnLCAobmV4dFNlbGN0ZWRTZXJpZXMhLmxlbmd0aCArIDEpIC0gc3dhcFRhYkluZGV4KQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZm9yIChsZXQgaiA9IDE7IGogPCBuZXh0U2VsY3RlZFNlcmllcy5sZW5ndGg7IGorKykgew0KICAgICAgICAgICAgICBjb25zdCB1cGRhdGVJbmRleCA9IHVzZXJEYXRhW25leHRTZWxjdGVkU2VyaWVzW2pdXS5leHRyYURhdGFzIS56SW5kZXghIC0gMQ0KICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXMobmV4dFNlbGN0ZWRTZXJpZXNbal0sICd6SW5kZXgnLCB1cGRhdGVJbmRleCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIG5leHRTZWxjdGVkU2VyaWVzID0gW10NCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgY29uc3Qgc3dhcFRhYkluZGV4ID0gdXNlckRhdGFbbmV4dFNlbGVjdGVkQ29udHJvbF0uZXh0cmFEYXRhcyEuekluZGV4IQ0KICAgICAgICAgICAgaWYgKHN3YXBUYWJJbmRleCA8PSB1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzLmxlbmd0aCAmJiBzd2FwVGFiSW5kZXggPiAwKSB7DQogICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5maW5kSW5kZXgoDQogICAgICAgICAgICAgICAgKHZhbCkgPT4gdXNlckRhdGFbdmFsXS5leHRyYURhdGFzIS56SW5kZXggPT09IHN3YXBUYWJJbmRleA0KICAgICAgICAgICAgICApDQogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhzZWxDb250cm9sLCAnekluZGV4Jywgc3dhcFRhYkluZGV4KQ0KICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXMobmV4dFNlbGVjdGVkQ29udHJvbCwgJ3pJbmRleCcsIHRlbXBaSW5kZXgpDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICB9IGVsc2UgaWYgKCFsb3dQcm9yQ29udHJvbC5pbmNsdWRlcyhuZXh0U2VsZWN0ZWRDb250cm9sKSAmJiAodHlwZSA9PT0gJ0ZyYW1lJyB8fCB0eXBlID09PSAnTXVsdGlQYWdlJyB8fCB0eXBlID09PSAnTGlzdEJveCcpKSB7DQogICAgICAgIGlmIChnZXRTZWxDb250cm9sIS5pbmNsdWRlcyhuZXh0U2VsZWN0ZWRDb250cm9sKSkgew0KICAgICAgICAgIGlmICghbmV4dEhpZ2hDb250cm9sU2VyaWVzLmluY2x1ZGVzKHNlbENvbnRyb2wpKSB7DQogICAgICAgICAgICBuZXh0SGlnaENvbnRyb2xTZXJpZXMucHVzaChzZWxDb250cm9sKQ0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoIW5leHRIaWdoQ29udHJvbFNlcmllcy5pbmNsdWRlcyhuZXh0U2VsZWN0ZWRDb250cm9sKSkgew0KICAgICAgICAgICAgbmV4dEhpZ2hDb250cm9sU2VyaWVzLnB1c2gobmV4dFNlbGVjdGVkQ29udHJvbCkNCiAgICAgICAgICB9DQogICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgaWYgKE9iamVjdC5rZXlzKG5leHRIaWdoQ29udHJvbFNlcmllcykubGVuZ3RoICE9PSAwKSB7DQogICAgICAgICAgICBjb25zdCB0ZW1wRXhjaGFnZUluZGV4ID0gdXNlckRhdGFbbmV4dEhpZ2hDb250cm9sU2VyaWVzWzBdXS5leHRyYURhdGFzIS56SW5kZXghDQogICAgICAgICAgICBjb25zdCBzd2FwVGFiSW5kZXggPSB1c2VyRGF0YVtuZXh0U2VsZWN0ZWRDb250cm9sXS5leHRyYURhdGFzIS56SW5kZXghDQogICAgICAgICAgICBpZiAoc3dhcFRhYkluZGV4IDw9IHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHMubGVuZ3RoKSB7DQogICAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gdXNlckRhdGFbY29udGFpbmVyXS5jb250cm9scy5maW5kSW5kZXgoDQogICAgICAgICAgICAgICAgKHZhbCkgPT4gdXNlckRhdGFbdmFsXS5leHRyYURhdGFzIS56SW5kZXggPT09IHN3YXBUYWJJbmRleA0KICAgICAgICAgICAgICApDQogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyh1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzW2luZGV4XSwgJ3pJbmRleCcsIHRlbXBFeGNoYWdlSW5kZXgpDQogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhuZXh0SGlnaENvbnRyb2xTZXJpZXNbMF0sICd6SW5kZXgnLCAobmV4dEhpZ2hDb250cm9sU2VyaWVzIS5sZW5ndGggKyAxKSAtIHN3YXBUYWJJbmRleCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZvciAobGV0IGogPSAxOyBqIDwgbmV4dEhpZ2hDb250cm9sU2VyaWVzLmxlbmd0aDsgaisrKSB7DQogICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUluZGV4ID0gdXNlckRhdGFbbmV4dEhpZ2hDb250cm9sU2VyaWVzW2pdXS5leHRyYURhdGFzIS56SW5kZXghIC0gMQ0KICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUV4dHJhRGF0YXMobmV4dEhpZ2hDb250cm9sU2VyaWVzW2pdLCAnekluZGV4JywgdXBkYXRlSW5kZXgpDQogICAgICAgICAgICB9DQogICAgICAgICAgICBuZXh0SGlnaENvbnRyb2xTZXJpZXMgPSBbXQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBjb25zdCBzd2FwVGFiSW5kZXggPSB1c2VyRGF0YVtuZXh0U2VsZWN0ZWRDb250cm9sXS5leHRyYURhdGFzIS56SW5kZXghDQogICAgICAgICAgICBpZiAoc3dhcFRhYkluZGV4IDw9IHVzZXJEYXRhW2NvbnRhaW5lcl0uY29udHJvbHMubGVuZ3RoICYmIHN3YXBUYWJJbmRleCA+IDApIHsNCiAgICAgICAgICAgICAgY29uc3QgaW5kZXggPSB1c2VyRGF0YVtjb250YWluZXJdLmNvbnRyb2xzLmZpbmRJbmRleCgNCiAgICAgICAgICAgICAgICAodmFsKSA9PiB1c2VyRGF0YVt2YWxdLmV4dHJhRGF0YXMhLnpJbmRleCA9PT0gc3dhcFRhYkluZGV4DQogICAgICAgICAgICAgICkNCiAgICAgICAgICAgICAgdGhpcy51cGRhdGVFeHRyYURhdGFzKHNlbENvbnRyb2wsICd6SW5kZXgnLCBzd2FwVGFiSW5kZXgpDQogICAgICAgICAgICAgIHRoaXMudXBkYXRlRXh0cmFEYXRhcyhuZXh0U2VsZWN0ZWRDb250cm9sLCAnekluZGV4JywgdGVtcFpJbmRleCkNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0UA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/FormDesigner/components/organisms/FDHeader","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"firstrow\">\r\n      <div class=\"ui-titlebar\">\r\n        <div class=\"ui-titletext\">Visual Basic for Applications - Book1</div>\r\n        <div class=\"ui-titlecontrols\">\r\n          <!-- fixed svg issue -->\r\n          <button class=\"ui-btn minimize\">\r\n            <FDSVGImage name=\"minimize.svg\" />\r\n          </button>\r\n          <button class=\"ui-btn maximize\">\r\n            <FDSVGImage name=\"maximize.svg\" />\r\n          </button>\r\n          <button class=\"ui-btn close\">\r\n            <FDSVGImage name=\"close-button.svg\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"secondrow\">\r\n      <i class=\"material-icons material-float\">&#xe5d4;</i>\r\n      <div class=\"menu-bar\">\r\n        <ul>\r\n          <li><u>F</u>ile</li>\r\n          <li><u>E</u>dit</li>\r\n          <li @click=\"subMenuDisplay\">\r\n            <u>V</u>iew\r\n            <div class=\"sub-menu-1\" v-if=\"displaySubMenu === true\">\r\n              <ul class=\"sub-menu-ul\">\r\n                <li class=\"sub-menu-li\">\r\n                  <CodeLogo class=\"fa padding\" />\r\n                  <span><u>C</u>ode</span>\r\n                </li>\r\n                <li class=\"sub-menu-li\">\r\n                  <ObjectLogo class=\"fa padding\" />\r\n                  <span>O<u>b</u>ject</span>\r\n                </li>\r\n                <hr />\r\n                <li class=\"sub-menu-li\">\r\n                  <ObjBrowserLogo class=\"fa padding\" />\r\n                  <span><u>O</u>bject Browser</span>\r\n                </li>\r\n                <hr />\r\n                <li class=\"sub-menu-li\">\r\n                  <span></span>\r\n                  <span><u>I</u>mmediate Window</span>\r\n                </li>\r\n                <li class=\"sub-menu-li\">\r\n                  <span></span>\r\n                  <span>Local<u>s</u> Window</span>\r\n                </li>\r\n                <hr />\r\n                <li class=\"sub-menu-li\">\r\n                  <span></span>\r\n                  <span>Watc<u>h</u> Window</span>\r\n                </li>\r\n                <li class=\"sub-menu-li\">\r\n                  <span></span>\r\n                  <span>Call Stac<u>k</u></span>\r\n                </li>\r\n                <hr />\r\n                <li class=\"sub-menu-li\">\r\n                  <PjExplorerLogo class=\"fa padding\" />\r\n                  <span><u>P</u>roject Explorer</span>\r\n                </li>\r\n                <li class=\"sub-menu-li\">\r\n                  <PjPropertyLogo class=\"fa padding\" />\r\n                  <span>Properties <u>W</u>indow</span>\r\n                </li>\r\n                <hr />\r\n                <li class=\"sub-menu-li\">\r\n                  <ToolBoxLogo class=\"fa padding\" />\r\n                  <span>ToolBo<u>x</u></span>\r\n                </li>\r\n                <li class=\"sub-menu-li\">\r\n                  <span></span>\r\n                  <span>T<u>a</u>b Order</span>\r\n                </li>\r\n                <hr />\r\n                <li class=\"sub-menu-li\">\r\n                  <span></span>\r\n                  <span>Microscoft Excel</span>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </li>\r\n          <li @click=\"subMenuDisplay\">\r\n            <u>I</u>nsert\r\n            <div class=\"sub-menu-1\" v-if=\"displaySubMenu === true\">\r\n              <ul class=\"sub-menu-ul\">\r\n                <li class=\"sub-menu-li\">\r\n                  <span></span>\r\n                  <span><u>P</u>rocedure</span>\r\n                </li>\r\n                <li class=\"sub-menu-li\" @click=\"insertUserForm()\">\r\n                  <UserFormLogo class=\"fa padding\" />\r\n                  <span><u>U</u>serform</span>\r\n                </li>\r\n                <li class=\"sub-menu-li\">\r\n                  <span></span>\r\n                  <span><u>M</u>odule</span>\r\n                </li>\r\n                <li class=\"sub-menu-li\">\r\n                  <span></span>\r\n                  <span><u>C</u>lass Module</span>\r\n                </li>\r\n                <hr />\r\n                <li class=\"sub-menu-li\">\r\n                  <span></span>\r\n                  <span>F<u>i</u>le</span>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </li>\r\n          <li @click=\"subMenuDisplay\">\r\n            <u>F</u>ormat\r\n            <div class=\"sub-menu-1\" v-if=\"displaySubMenu === true\">\r\n              <ul class=\"sub-menu-ul\">\r\n                <li class=\"sub-menu-li\">\r\n                  <span></span>\r\n                  <span><u>A</u>lign</span>\r\n                </li>\r\n                <li class=\"sub-menu-li\">\r\n                  <UserFormLogo class=\"fa padding\" />\r\n                  <span><u>M</u>ake Same Size</span>\r\n                </li>\r\n                <hr />\r\n                <li\r\n                  class=\"sub-menu-li\"\r\n                  :style=\"{ opacity: getdisableStyle('sizeToFit') ? 0.5 : 1 }\"\r\n                  @click=\"getdisableStyle('sizeToFit') ? '' : sizeToFit()\"\r\n                >\r\n                  <span></span>\r\n                  <span>Size to <u>F</u>it</span>\r\n                </li>\r\n                <li class=\"sub-menu-li\"\r\n                 :style=\"{ opacity: getdisableStyle('sizeToGrid') ? 0.5 : 1 }\"\r\n                  @click=\"getdisableStyle('sizeToGrid') ? '' : sizeToGrid()\"\r\n                >\r\n                  <span></span>\r\n                  <span>Size to Gri<u>d</u></span>\r\n                </li>\r\n                <hr />\r\n                <li class=\"sub-menu-li\">\r\n                  <span></span>\r\n                  <span><u>H</u>orizontal Spacing</span>\r\n                </li>\r\n                <li class=\"sub-menu-li\"\r\n                :style=\"{ opacity: getdisableStyle('makeEqual') ? 0.5 : 1 }\"\r\n                @click=\"getdisableStyle('makeEqual') ? '' : makeEqual('Left')\"\r\n                >\r\n                  <span></span>\r\n                  <span>Make <u>E</u>qual</span>\r\n                </li>\r\n                <li class=\"sub-menu-li\"\r\n                :style=\"{ opacity: getdisableStyle('incDecspacing') ? 0.5 : 1 }\"\r\n                @click=\"getdisableStyle('incDecspacing') ? '' : incDecspacing('Left', gridSize)\"\r\n                >\r\n                  <span></span>\r\n                  <span><u>I</u>ncrease</span>\r\n                </li>\r\n                <li class=\"sub-menu-li\"\r\n                :style=\"{ opacity: getdisableStyle('incDecspacing') ? 0.5 : 1 }\"\r\n                @click=\"getdisableStyle('incDecspacing') ? '' : incDecspacing('Left', -gridSize)\"\r\n                >\r\n                  <span></span>\r\n                  <span><u>D</u>ecrease</span>\r\n                </li>\r\n                <li class=\"sub-menu-li\"\r\n                :style=\"{ opacity: getdisableStyle('removeSpace') ? 0.5 : 1 }\"\r\n                @click=\"getdisableStyle('removeSpace') ? '' : removeSpace('Left')\"\r\n                >\r\n                  <span></span>\r\n                  <span><u>R</u>emove</span>\r\n                </li>\r\n                <hr />\r\n                <li class=\"sub-menu-li\">\r\n                  <span></span>\r\n                  <span><u>V</u>ertical Spacing</span>\r\n                </li>\r\n                <li class=\"sub-menu-li\"\r\n                :style=\"{ opacity: getdisableStyle('makeEqual') ? 0.5 : 1 }\"\r\n                @click=\"getdisableStyle('makeEqual') ? '' : makeEqual('Top')\"\r\n                >\r\n                  <span></span>\r\n                  <span>Make <u>E</u>qual</span>\r\n                </li>\r\n                <li class=\"sub-menu-li\"\r\n                :style=\"{ opacity: getdisableStyle('incDecspacing') ? 0.5 : 1 }\"\r\n                @click=\"getdisableStyle('incDecspacing') ? '' : incDecspacing('Top', gridSize)\"\r\n                >\r\n                  <span></span>\r\n                  <span><u>I</u>ncrease</span>\r\n                </li>\r\n                <li class=\"sub-menu-li\"\r\n                :style=\"{ opacity: getdisableStyle('incDecspacing') ? 0.5 : 1 }\"\r\n                @click=\"getdisableStyle('incDecspacing') ? '' : incDecspacing('Top', -gridSize)\"\r\n                >\r\n                  <span></span>\r\n                  <span><u>D</u>ecrease</span>\r\n                </li>\r\n                <li class=\"sub-menu-li\"\r\n                :style=\"{ opacity: getdisableStyle('removeSpace') ? 0.5 : 1 }\"\r\n                @click=\"getdisableStyle('removeSpace') ? '' : removeSpace('Top')\"\r\n                >\r\n                  <span></span>\r\n                  <span><u>R</u>emove</span>\r\n                </li>\r\n                <hr />\r\n                <li class=\"sub-menu-li\">\r\n                  <span></span>\r\n                  <span><u>C</u>enter in Form</span>\r\n                </li>\r\n                <li class=\"sub-menu-li\"\r\n                :style=\"{ opacity: getdisableStyle('centreInForm') ? 0.5 : 1 }\"\r\n                @click=\"getdisableStyle('centreInForm') ? '' : centreInForm('horizontal')\"\r\n                >\r\n                  <span></span>\r\n                  <span><u>H</u>orizontally</span>\r\n                </li>\r\n                <li class=\"sub-menu-li\"\r\n                :style=\"{ opacity: getdisableStyle('centreInForm') ? 0.5 : 1 }\"\r\n                @click=\"getdisableStyle('centreInForm') ? '' : centreInForm('vertical')\"\r\n                >\r\n                  <span></span>\r\n                  <span><u>V</u>ertically</span>\r\n                </li>\r\n                <hr />\r\n                <li class=\"sub-menu-li\">\r\n                  <span></span>\r\n                  <span>A<u>r</u>range Buttons</span>\r\n                </li>\r\n                <li class=\"sub-menu-li\"\r\n                :style=\"{ opacity: getdisableStyle('arrangeButton') ? 0.5 : 1 }\"\r\n                @click=\"getdisableStyle('arrangeButton') ? '' : arrangeButton('right')\"\r\n                >\r\n                  <span></span>\r\n                  <span><u>R</u>ight</span>\r\n                </li>\r\n                <li class=\"sub-menu-li\"\r\n                :style=\"{ opacity: getdisableStyle('arrangeButton') ? 0.5 : 1 }\"\r\n                @click=\"getdisableStyle('arrangeButton') ? '' : arrangeButton('bottom')\"\r\n                >\r\n                  <span></span>\r\n                  <span><u>B</u>ottom</span>\r\n                </li>\r\n                <hr />\r\n                <li\r\n                  class=\"sub-menu-li\"\r\n                  :style=\"{ opacity: getdisableStyle('group') ? 0.5 : 1 }\"\r\n                  @click=\"getdisableStyle('group') ? '' : groupControl()\"\r\n                >\r\n                  <span></span>\r\n                  <span><u>G</u>roup</span>\r\n                </li>\r\n                <li\r\n                  class=\"sub-menu-li\"\r\n                  :style=\"{ opacity: getdisableStyle('unGroup') ? 0.5 : 1 }\"\r\n                  @click=\"getdisableStyle('unGroup') ? '' : unGroupControl()\"\r\n                >\r\n                  <span></span>\r\n                  <span><u>U</u>nGroup</span>\r\n                </li>\r\n                <hr />\r\n                <li class=\"sub-menu-li\">\r\n                  <span></span>\r\n                  <span><u>O</u>rder</span>\r\n                </li>\r\n                <li class=\"sub-menu-li\"\r\n                :style=\"{ opacity: getdisableStyle('order') ? 0.5 : 1 }\"\r\n                @click=\"getdisableStyle('order') ? '' : bringFront()\"\r\n                >\r\n                  <span></span>\r\n                  <span><u>B</u>ring to Front</span>\r\n                </li>\r\n                <li class=\"sub-menu-li\"\r\n                :style=\"{ opacity: getdisableStyle('order') ? 0.5 : 1 }\"\r\n                @click=\"getdisableStyle('order') ? '' : sendBack()\"\r\n                >\r\n                  <span></span>\r\n                  <span><u>S</u>end to Back</span>\r\n                </li>\r\n                <li class=\"sub-menu-li\"\r\n                :style=\"{ opacity: getdisableStyle('order') ? 0.5 : 1 }\"\r\n                @click=\"getdisableStyle('order') ? '' : bringForward()\"\r\n                >\r\n                  <span></span>\r\n                  <span><u>B</u>ring Forward</span>\r\n                </li>\r\n                <li class=\"sub-menu-li\"\r\n                :style=\"{ opacity: getdisableStyle('order') ? 0.5 : 1 }\"\r\n                @click=\"getdisableStyle('order') ? '' : sendBackward()\"\r\n                >\r\n                  <span></span>\r\n                  <span><u>S</u>end Backward</span>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </li>\r\n          <li><u>D</u>ebug</li>\r\n          <li @click=\"clickChangeMode\"><u>R</u>un</li>\r\n          <li><u>T</u>ools</li>\r\n          <li><u>A</u>dd-Ins</li>\r\n          <li><u>W</u>indow</li>\r\n          <li><u>H</u>elp</li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"thirdrow\">\r\n      <i class=\"material-icons\">&#xe5d4;</i>\r\n      <FileSaveLogo class=\"fa\" />\r\n      <CutLogo class=\"fa\" />\r\n      <CopyLogo class=\"fa\" />\r\n      <PasteLogo class=\"fa\" />\r\n      <FindLogo class=\"fa\" />\r\n      <UndoLogo class=\"fa\" />\r\n      <RedoLogo class=\"fa\" />\r\n      <DesignModeLogo class=\"fa\" />\r\n      <PjExplorerLogo class=\"fa\" />\r\n      <PjPropertyLogo class=\"fa\" />\r\n      <ObjBrowserLogo class=\"fa\" />\r\n      <ToolBoxLogo class=\"fa\" />\r\n      <HelpLogo class=\"fa\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Vue } from 'vue-property-decorator'\r\nimport { State, Action } from 'vuex-class'\r\nimport {\r\n  IaddUserform,\r\n  IupdateControlExtraData\r\n} from '@/storeModules/fd/actions'\r\nimport { ControlPropertyData } from '@/FormDesigner/models/ControlsTableProperties/ControlPropertyData'\r\nimport CutLogo from '../../../../assets/cut.svg'\r\nimport FileSaveLogo from '../../../../assets/file-save.svg'\r\nimport CopyLogo from '../../../../assets/copy.svg'\r\nimport PasteLogo from '../../../../assets/paste.svg'\r\nimport FindLogo from '../../../../assets/find.svg'\r\nimport UndoLogo from '../../../../assets/undo.svg'\r\nimport RedoLogo from '../../../../assets/redo.svg'\r\nimport DesignModeLogo from '../../../../assets/design-mode.svg'\r\nimport PjExplorerLogo from '../../../../assets/pj-explorer.svg'\r\nimport PjPropertyLogo from '../../../../assets/pj-property.svg'\r\nimport ObjBrowserLogo from '../../../../assets/obj-browser.svg'\r\nimport ToolBoxLogo from '../../../../assets/tool-box.svg'\r\nimport UserFormLogo from '../../../../assets/user-from.svg'\r\nimport HelpLogo from '../../../../assets/help.svg'\r\nimport CodeLogo from '../../../../assets/view-code.svg'\r\nimport ObjectLogo from '../../../../assets/view-object.svg'\r\nimport FDSVGImage from '@/FormDesigner/components/atoms/FDSVGImage/index.vue'\r\nimport { EventBus } from '@/FormDesigner/event-bus'\r\nimport FDCommonMethod from '@/api/abstract/FormDesigner/FDCommonMethod'\r\n\r\n@Component({\r\n  name: 'Header',\r\n  components: {\r\n    FileSaveLogo,\r\n    CutLogo,\r\n    CopyLogo,\r\n    PasteLogo,\r\n    FindLogo,\r\n    UndoLogo,\r\n    RedoLogo,\r\n    DesignModeLogo,\r\n    PjExplorerLogo,\r\n    PjPropertyLogo,\r\n    ObjBrowserLogo,\r\n    ToolBoxLogo,\r\n    UserFormLogo,\r\n    CodeLogo,\r\n    ObjectLogo,\r\n    HelpLogo,\r\n    FDSVGImage\r\n  }\r\n})\r\nexport default class Header extends FDCommonMethod {\r\n  displaySubMenu: boolean = false;\r\n  @Action('fd/addUserform') addControl!: (payload: IaddUserform) => void;\r\n  @Action('fd/changeRunMode') changeRunMode!: (payload: boolean) => void;\r\n\r\n  @State((state) => state.fd.selectedControls)\r\n  selectedControls!: fdState['selectedControls'];\r\n  @State((state) => state.fd.userformData) userformData!: userformData;\r\n  @State((state) => state.fd.isRunMode) isRunMode!: boolean;\r\n  @Action('fd/updateControlExtraData') updateControlExtraData!: (\r\n    payload: IupdateControlExtraData\r\n  ) => void;\r\n  propControlData = {};\r\n  userFormId = 'ID_USERFORM1';\r\n  gridSize: number = 9\r\n  insertUserForm () {\r\n    this.propControlData = this.userformData\r\n    const userform = new ControlPropertyData()\r\n    const userFormId = `ID_USERFORM${\r\n      Object.keys(this.userformData).length + 1\r\n    }`\r\n    const Name = `UserForm${Object.keys(this.userformData).length + 1}`\r\n    const Caption = `UserForm${Object.keys(this.userformData).length + 1}`\r\n    const ID = Object.keys(this.userformData).length + 1\r\n    this.addControl({\r\n      target: this,\r\n      key: userFormId,\r\n      value: {\r\n        properties: {\r\n          ...userform.data.UserForm,\r\n          Name: Name,\r\n          ID: ID,\r\n          Caption: Caption\r\n        },\r\n        controls: [],\r\n        extraDatas: { display: 'none' },\r\n        type: 'Userform'\r\n      }\r\n    })\r\n  }\r\n  subMenuDisplay () {\r\n    this.displaySubMenu = !this.displaySubMenu\r\n  }\r\n  clickChangeMode () {\r\n    this.changeRunMode(!this.isRunMode)\r\n  }\r\n  makeEqual (type: keyof controlProperties) {\r\n    const usrFrmData = this.userformData[this.userFormId]\r\n    const ctrlSel = this.selectedControls[this.userFormId].selected\r\n    const ctrlContainer = this.selectedControls[this.userFormId].container[0]\r\n    const controls = usrFrmData[ctrlContainer].controls\r\n    let divstyle: Array<IGroupStyle> = []\r\n    let getGroupIndex = -1\r\n    EventBus.$emit('getGroupSize', (divstayleArray: Array<IGroupStyle>) => {\r\n      divstyle = divstayleArray\r\n    })\r\n    if (ctrlSel[0].startsWith('group')) {\r\n      getGroupIndex = divstyle.findIndex((val) => val.groupName === ctrlSel[0])\r\n    }\r\n    let propValue = 0\r\n    const leftArray: string[] = []\r\n    const rightArray: string[] = []\r\n    for (let index = 1; index < ctrlSel.length; index++) {\r\n      const selLeft = ctrlSel[0].startsWith('group')\r\n        ? parseInt(divstyle[getGroupIndex].left!)\r\n        : usrFrmData[ctrlSel[0]].properties.Left\r\n      const selTop = ctrlSel[0].startsWith('group')\r\n        ? parseInt(divstyle[getGroupIndex].top!)\r\n        : usrFrmData[ctrlSel[0]].properties.Top\r\n      if (!ctrlSel[index].startsWith('group')) {\r\n        const ctrlProp = usrFrmData[ctrlSel[index]].properties\r\n        if (type === 'Left') {\r\n          if (ctrlProp.Left! <= selLeft!) {\r\n            leftArray.push(ctrlSel[index])\r\n          } else {\r\n            rightArray.push(ctrlSel[index])\r\n          }\r\n        } else if (type === 'Top') {\r\n          if (ctrlProp.Top! <= selTop!) {\r\n            leftArray.push(ctrlSel[index])\r\n          } else {\r\n            rightArray.push(ctrlSel[index])\r\n          }\r\n        }\r\n      } else {\r\n        EventBus.$emit('getGroupSize', (divstayleArray: Array<IGroupStyle>) => {\r\n          divstyle = divstayleArray\r\n        })\r\n        const getIndex = divstyle.findIndex(\r\n          (val) => val.groupName === ctrlSel[index]\r\n        )\r\n        const groupLeft = parseInt(divstyle[getIndex].left!)\r\n        const groupTop = parseInt(divstyle[getIndex].top!)\r\n        const groupConrol = this.getGroupControl(ctrlSel[index])\r\n        if (type === 'Left') {\r\n          if (groupLeft <= selLeft!) {\r\n            for (let ctrl of groupConrol) {\r\n              const prop = this.userformData[this.userFormId][ctrl].properties\r\n              if (Math.floor(prop.Left!) === groupLeft) {\r\n                leftArray.push(ctrl)\r\n              }\r\n            }\r\n          } else {\r\n            for (let ctrl of groupConrol) {\r\n              const prop = this.userformData[this.userFormId][ctrl].properties\r\n              if (Math.floor(prop.Left!) === groupLeft) {\r\n                rightArray.push(ctrl)\r\n              }\r\n            }\r\n          }\r\n        } else if (type === 'Top') {\r\n          if (groupTop <= selTop!) {\r\n            for (let ctrl of groupConrol) {\r\n              const prop = this.userformData[this.userFormId][ctrl].properties\r\n              if (Math.floor(prop.Top!) === groupTop) {\r\n                leftArray.push(ctrl)\r\n              }\r\n            }\r\n          } else {\r\n            for (let ctrl of groupConrol) {\r\n              const prop = this.userformData[this.userFormId][ctrl].properties\r\n              if (Math.floor(prop.Top!) === groupTop) {\r\n                rightArray.push(ctrl)\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (ctrlSel[0].startsWith('group')) {\r\n      const getIndex = divstyle.findIndex(\r\n        (val) => val.groupName === ctrlSel[0]\r\n      )\r\n      const groupLeft = parseInt(divstyle[getIndex].left!)\r\n      const groupTop = parseInt(divstyle[getIndex].top!)\r\n      const groupConrol = this.getGroupControl(ctrlSel[0])\r\n      if (type === 'Left') {\r\n        for (let ctrl of groupConrol) {\r\n          const prop = this.userformData[this.userFormId][ctrl].properties\r\n          if (Math.floor(prop.Left!) === groupLeft) {\r\n            leftArray.push(ctrl)\r\n            rightArray.push(ctrl)\r\n          }\r\n        }\r\n      } else if (type === 'Top') {\r\n        for (let ctrl of groupConrol) {\r\n          const prop = this.userformData[this.userFormId][ctrl].properties\r\n          if (Math.floor(prop.Top!) === groupTop) {\r\n            leftArray.push(ctrl)\r\n            rightArray.push(ctrl)\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      leftArray.unshift(ctrlSel[0])\r\n      rightArray.push(ctrlSel[0])\r\n    }\r\n    if (type === 'Left') {\r\n      leftArray.sort((a, b) => {\r\n        return usrFrmData[a].properties.Left! - usrFrmData[b].properties.Left!\r\n      })\r\n      rightArray.sort((a, b) => {\r\n        return usrFrmData[a].properties.Left! - usrFrmData[b].properties.Left!\r\n      })\r\n    } else if (type === 'Top') {\r\n      leftArray.sort((a, b) => {\r\n        return usrFrmData[a].properties.Top! - usrFrmData[b].properties.Top!\r\n      })\r\n      rightArray.sort((a, b) => {\r\n        return usrFrmData[a].properties.Top! - usrFrmData[b].properties.Top!\r\n      })\r\n    }\r\n    let leftControl = { ...usrFrmData[leftArray[0]].properties }\r\n    if (leftControl.GroupID !== '') {\r\n      const groupIndex = divstyle.findIndex(\r\n        (val) => val.groupName === leftControl.GroupID\r\n      )\r\n      const groupSize = divstyle[groupIndex]\r\n      leftControl = {\r\n        ...leftControl,\r\n        Width: parseInt(divstyle[groupIndex].width!),\r\n        Height: parseInt(divstyle[groupIndex].height!),\r\n        Left: parseInt(divstyle[groupIndex].left!),\r\n        Top: parseInt(divstyle[groupIndex].top!)\r\n      }\r\n    }\r\n    let rightControl = {\r\n      ...usrFrmData[rightArray[rightArray.length - 1]].properties\r\n    }\r\n    if (rightControl.GroupID !== '') {\r\n      const groupIndex = divstyle.findIndex(\r\n        (val) => val.groupName === rightControl.GroupID\r\n      )\r\n      const groupSize = divstyle[groupIndex]\r\n      rightControl = {\r\n        ...leftControl,\r\n        Width: parseInt(divstyle[groupIndex].width!),\r\n        Height: parseInt(divstyle[groupIndex].height!),\r\n        Left: parseInt(divstyle[groupIndex].left!),\r\n        Top: parseInt(divstyle[groupIndex].top!)\r\n      }\r\n    }\r\n    let totalSize = 0\r\n    for (let index = 0; index < ctrlSel.length; index++) {\r\n      if (type === 'Left') {\r\n        if (!ctrlSel[index].startsWith('group')) {\r\n          const ctrlProp = usrFrmData[ctrlSel[index]].properties\r\n          totalSize = totalSize + ctrlProp.Width!\r\n        } else {\r\n          const groupIndex = divstyle.findIndex(\r\n            (val) => val.groupName === ctrlSel[index]\r\n          )\r\n          totalSize = totalSize + parseInt(divstyle[groupIndex].width!)\r\n        }\r\n      } else if (type === 'Top') {\r\n        if (!ctrlSel[index].startsWith('group')) {\r\n          const ctrlProp = usrFrmData[ctrlSel[index]].properties\r\n          totalSize = totalSize + ctrlProp.Height!\r\n        } else {\r\n          const groupIndex = divstyle.findIndex(\r\n            (val) => val.groupName === ctrlSel[index]\r\n          )\r\n          totalSize = totalSize + parseInt(divstyle[groupIndex].height!)\r\n        }\r\n      }\r\n    }\r\n    let diffrence = 0\r\n    if (type === 'Left') {\r\n      diffrence =\r\n        (rightControl.Left! +\r\n          rightControl.Width! -\r\n          leftControl.Left! -\r\n          totalSize) /\r\n        (ctrlSel.length - 1)\r\n    } else if (type === 'Top') {\r\n      diffrence =\r\n        (rightControl.Top! +\r\n          rightControl.Height! -\r\n          leftControl.Top! -\r\n          totalSize) /\r\n        (ctrlSel.length - 1)\r\n    }\r\n    const unique = () => {\r\n      var a = leftArray.concat(rightArray)\r\n      for (var i = 0; i < a.length; ++i) {\r\n        for (var j = i + 1; j < a.length; ++j) {\r\n          if (a[i] === a[j]) {\r\n            a.splice(j--, 1)\r\n          }\r\n        }\r\n      }\r\n      return a\r\n    }\r\n    const combineArray = unique()\r\n    for (let index = 1; index < combineArray.length - 1; index++) {\r\n      const prevCtrlProp = usrFrmData[combineArray[index - 1]].properties\r\n      const ctrlProp = usrFrmData[combineArray[index]].properties\r\n      let prevIndex = -1\r\n      const controlPropIndex = -1\r\n      if (type === 'Left') {\r\n        if (prevCtrlProp.GroupID === '' && ctrlProp.GroupID === '') {\r\n          propValue = prevCtrlProp.Left! + prevCtrlProp.Width! + diffrence\r\n          this.updateControlProperty(type, propValue, combineArray[index])\r\n        } else {\r\n          if (prevCtrlProp.GroupID !== '') {\r\n            prevIndex = divstyle.findIndex(\r\n              (val) => val.groupName === prevCtrlProp.GroupID\r\n            )\r\n            propValue =\r\n              parseInt(divstyle[prevIndex].left!) +\r\n              parseInt(divstyle[prevIndex].width!) +\r\n              diffrence\r\n          } else {\r\n            propValue = prevCtrlProp.Left! + prevCtrlProp.Width! + diffrence\r\n          }\r\n          if (ctrlProp.GroupID !== '') {\r\n            const getIndex = divstyle.findIndex(\r\n              (val) => val.groupName === ctrlProp.GroupID\r\n            )\r\n            EventBus.$emit('updasteGroupSize', type, propValue, getIndex)\r\n          } else {\r\n            this.updateControlProperty(type, propValue, combineArray[index])\r\n          }\r\n        }\r\n      } else {\r\n        if (type === 'Top') {\r\n          if (prevCtrlProp.GroupID === '' && ctrlProp.GroupID === '') {\r\n            propValue = prevCtrlProp.Top! + prevCtrlProp.Height! + diffrence\r\n            this.updateControlProperty(type, propValue, combineArray[index])\r\n          } else {\r\n            if (prevCtrlProp.GroupID !== '') {\r\n              prevIndex = divstyle.findIndex(\r\n                (val) => val.groupName === prevCtrlProp.GroupID\r\n              )\r\n              propValue =\r\n                parseInt(divstyle[prevIndex].top!) +\r\n                parseInt(divstyle[prevIndex].height!) +\r\n                diffrence\r\n            } else {\r\n              propValue = prevCtrlProp.Top! + prevCtrlProp.Height! + diffrence\r\n            }\r\n            if (ctrlProp.GroupID !== '') {\r\n              const getIndex = divstyle.findIndex(\r\n                (val) => val.groupName === ctrlProp.GroupID\r\n              )\r\n              EventBus.$emit('updasteGroupSize', type, propValue, getIndex)\r\n            } else {\r\n              this.updateControlProperty(type, propValue, combineArray[index])\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  bringFront () {\r\n    const userData = this.userformData[this.userFormId]\r\n    const highProrControl: string[] = []\r\n    const lowProrControl: string[] = []\r\n    const container = this.getContainerList(this.getSelectedControlsDatas![0])[0]\r\n    const containerControls = this.userformData[this.userFormId][container].controls\r\n    for (const index in containerControls) {\r\n      const cntrlData = this.userformData[this.userFormId][containerControls[index]]\r\n      if (cntrlData.type === 'MultiPage' || cntrlData.type === 'Frame' || cntrlData.type === 'ListBox') {\r\n        highProrControl.push(containerControls[index])\r\n      } else {\r\n        lowProrControl.push(containerControls[index])\r\n      }\r\n    }\r\n    lowProrControl.sort((a, b) => {\r\n      return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\r\n    })\r\n    let getLowPropHighestIndex: string = lowProrControl[lowProrControl.length - 1]\r\n    highProrControl.sort((a, b) => {\r\n      return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\r\n    })\r\n    let getHighPropHighestIndex = highProrControl[highProrControl.length - 1]\r\n    const lowSeriesControl: string[] = []\r\n    const highSeriesControl: string[] = []\r\n    const getSelControl = [...this.getSelectedControlsDatas!]\r\n    getSelControl.sort((a, b) => {\r\n      return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\r\n    })\r\n    for (const selControl of getSelControl) {\r\n      if (lowProrControl.includes(selControl)) {\r\n        lowSeriesControl.push(selControl)\r\n      } else {\r\n        highSeriesControl.push(selControl)\r\n      }\r\n    }\r\n    const setLowPropHighIndex = (control: string) => {\r\n      if (lowSeriesControl.length > 0 && lowSeriesControl.includes(control)) {\r\n        lowSeriesControl.pop()\r\n        const Index = lowProrControl.findIndex(val => userData[getLowPropHighestIndex!].extraDatas!.zIndex! - 1 === userData[val].extraDatas!.zIndex)\r\n        getLowPropHighestIndex = Index !== -1 ? lowProrControl[Index] : ''\r\n        if (Index !== -1) {\r\n          setLowPropHighIndex(getLowPropHighestIndex)\r\n        }\r\n      }\r\n    }\r\n    setLowPropHighIndex(getLowPropHighestIndex)\r\n    lowSeriesControl.sort((a, b) => {\r\n      return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\r\n    })\r\n    if (lowSeriesControl.length > 0) {\r\n      const lowestZIndex = userData[lowSeriesControl[0]].extraDatas!.zIndex!\r\n      let nextSeries: string[] = []\r\n      let count = lowSeriesControl.length - 1\r\n      const diff = userData[getLowPropHighestIndex].extraDatas!.zIndex! - userData[lowSeriesControl[lowSeriesControl.length - 1]].extraDatas!.zIndex!\r\n      for (const ctrl of lowSeriesControl) {\r\n        const nextControl = lowSeriesControl.findIndex(val => 'zIndex' in userData[val].extraDatas! && (userData[ctrl].extraDatas!.zIndex! + 1 === userData[val].extraDatas!.zIndex!))\r\n        if (nextControl !== -1) {\r\n          nextSeries.push(ctrl)\r\n          count = count - 1\r\n        } else {\r\n          const difference = userData[getLowPropHighestIndex].extraDatas!.zIndex! - count\r\n          this.updateExtraDatas(ctrl, 'zIndex', difference)\r\n          if (nextSeries.length > 0) {\r\n            for (let i = 0; i < nextSeries.length; i++) {\r\n              const diff = userData[ctrl].extraDatas!.zIndex! - (nextSeries.length - i)\r\n              this.updateExtraDatas(nextSeries[i], 'zIndex', diff)\r\n            }\r\n            nextSeries = []\r\n          }\r\n          count = count - 1\r\n        }\r\n      }\r\n      let counter = 0\r\n      for (const ctrl of lowProrControl) {\r\n        if (!this.getSelectedControlsDatas!.includes(ctrl)) {\r\n          counter = counter + 1\r\n          this.updateExtraDatas(ctrl, 'zIndex', counter)\r\n        }\r\n      }\r\n    }\r\n\r\n    const setHighPropHighIndex = (control: string) => {\r\n      if (highSeriesControl.length > 0 && highSeriesControl.includes(control)) {\r\n        highSeriesControl.pop()\r\n        const Index = highProrControl.findIndex(val => userData[getHighPropHighestIndex!].extraDatas!.zIndex! - 1 === userData[val].extraDatas!.zIndex)\r\n        getHighPropHighestIndex = Index !== -1 ? highProrControl[Index] : ''\r\n        if (Index !== -1) {\r\n          setHighPropHighIndex(getHighPropHighestIndex)\r\n        }\r\n      }\r\n    }\r\n    setHighPropHighIndex(getHighPropHighestIndex)\r\n    highSeriesControl.sort((a, b) => {\r\n      return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\r\n    })\r\n    if (highSeriesControl.length > 0) {\r\n      const highestZIndex = userData[highSeriesControl[0]].extraDatas!.zIndex!\r\n      let nextSeries: string[] = []\r\n      let count = highSeriesControl.length - 1\r\n      const diff = userData[getHighPropHighestIndex].extraDatas!.zIndex! - userData[highSeriesControl[highSeriesControl.length - 1]].extraDatas!.zIndex!\r\n      for (const ctrl of highSeriesControl) {\r\n        const nextControl = highSeriesControl.findIndex(val => 'zIndex' in userData[val].extraDatas! && (userData[ctrl].extraDatas!.zIndex! + 1 === userData[val].extraDatas!.zIndex!))\r\n        if (nextControl !== -1) {\r\n          nextSeries.push(ctrl)\r\n          count = count - 1\r\n        } else {\r\n          const difference = userData[getHighPropHighestIndex].extraDatas!.zIndex! - count\r\n          this.updateExtraDatas(ctrl, 'zIndex', difference)\r\n          if (nextSeries.length > 0) {\r\n            for (let i = 0; i < nextSeries.length; i++) {\r\n              const diff = userData[ctrl].extraDatas!.zIndex! - (nextSeries.length - i)\r\n              this.updateExtraDatas(nextSeries[i], 'zIndex', diff)\r\n            }\r\n            nextSeries = []\r\n          }\r\n          count = count - 1\r\n        }\r\n      }\r\n      let counter = 0\r\n      for (const ctrl of highProrControl) {\r\n        if (!this.getSelectedControlsDatas!.includes(ctrl)) {\r\n          counter = counter + 1\r\n          this.updateExtraDatas(ctrl, 'zIndex', counter)\r\n        }\r\n      }\r\n    }\r\n  }\r\n  sendBack () {\r\n    const userData = this.userformData[this.userFormId]\r\n    const highProrControl: string[] = []\r\n    const lowProrControl: string[] = []\r\n    const container = this.getContainerList(this.getSelectedControlsDatas![0])[0]\r\n    const containerControls = this.userformData[this.userFormId][container].controls\r\n    for (const index in containerControls) {\r\n      const cntrlData = this.userformData[this.userFormId][containerControls[index]]\r\n      if (cntrlData.type === 'MultiPage' || cntrlData.type === 'Frame' || cntrlData.type === 'ListBox') {\r\n        highProrControl.push(containerControls[index])\r\n      } else {\r\n        lowProrControl.push(containerControls[index])\r\n      }\r\n    }\r\n    lowProrControl.sort((a, b) => {\r\n      return userData[b].extraDatas!.zIndex! - userData[a].extraDatas!.zIndex!\r\n    })\r\n    let getLowPropHighestIndex: string = lowProrControl[lowProrControl.length - 1]\r\n    highProrControl.sort((a, b) => {\r\n      return userData[b].extraDatas!.zIndex! - userData[a].extraDatas!.zIndex!\r\n    })\r\n    let getHighPropHighestIndex = highProrControl[highProrControl.length - 1]\r\n    const lowSeriesControl: string[] = []\r\n    const highSeriesControl: string[] = []\r\n    const getSelControl = [...this.getSelectedControlsDatas!]\r\n    getSelControl.sort((a, b) => {\r\n      return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\r\n    })\r\n    for (const selControl of getSelControl) {\r\n      if (lowProrControl.includes(selControl)) {\r\n        lowSeriesControl.push(selControl)\r\n      } else {\r\n        highSeriesControl.push(selControl)\r\n      }\r\n    }\r\n    const setLowPropHighIndex = (control: string) => {\r\n      if (lowSeriesControl.length > 0 && lowSeriesControl.includes(control)) {\r\n        lowSeriesControl.pop()\r\n        const Index = lowProrControl.findIndex(val => userData[getLowPropHighestIndex!].extraDatas!.zIndex! + 1 === userData[val].extraDatas!.zIndex)\r\n        getLowPropHighestIndex = Index !== -1 ? lowProrControl[Index] : ''\r\n        if (Index !== -1) {\r\n          setLowPropHighIndex(getLowPropHighestIndex)\r\n        }\r\n      }\r\n    }\r\n    setLowPropHighIndex(getLowPropHighestIndex)\r\n    if (lowSeriesControl.length > 0) {\r\n      lowSeriesControl.sort((a, b) => {\r\n        return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\r\n      })\r\n      let count = userData[getLowPropHighestIndex].extraDatas!.zIndex!\r\n      for (const ctrl of lowSeriesControl) {\r\n        this.updateExtraDatas(ctrl, 'zIndex', count)\r\n        count = count + 1\r\n      }\r\n      let counter = userData[lowSeriesControl[lowSeriesControl.length - 1]].extraDatas!.zIndex!\r\n      for (let i = lowProrControl.length - 1; i >= 0; i--) {\r\n        if (!this.getSelectedControlsDatas!.includes(lowProrControl[i])) {\r\n          counter = counter + 1\r\n          this.updateExtraDatas(lowProrControl[i], 'zIndex', counter)\r\n        }\r\n      }\r\n    }\r\n\r\n    const setHighPropHighIndex = (control: string) => {\r\n      if (highSeriesControl.length > 0 && highSeriesControl.includes(control)) {\r\n        highSeriesControl.shift()\r\n        const Index = highProrControl.findIndex(val => userData[getHighPropHighestIndex!].extraDatas!.zIndex! + 1 === userData[val].extraDatas!.zIndex)\r\n        getHighPropHighestIndex = Index !== -1 ? highProrControl[Index] : ''\r\n        if (Index !== -1) {\r\n          setHighPropHighIndex(getHighPropHighestIndex)\r\n        }\r\n      }\r\n    }\r\n    setHighPropHighIndex(getHighPropHighestIndex)\r\n    if (highSeriesControl.length > 0) {\r\n      highSeriesControl.sort((a, b) => {\r\n        return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\r\n      })\r\n      let count = userData[getHighPropHighestIndex].extraDatas!.zIndex!\r\n      for (const ctrl of highSeriesControl) {\r\n        this.updateExtraDatas(ctrl, 'zIndex', count)\r\n        count = count + 1\r\n      }\r\n      let counter = userData[highSeriesControl[highSeriesControl.length - 1]].extraDatas!.zIndex!\r\n      for (let i = highProrControl.length - 1; i >= 0; i--) {\r\n        if (!this.getSelectedControlsDatas!.includes(highProrControl[i])) {\r\n          counter = counter + 1\r\n          this.updateExtraDatas(highProrControl[i], 'zIndex', counter)\r\n        }\r\n      }\r\n    }\r\n  }\r\n  groupControl () {\r\n    EventBus.$emit('groupControl', 'group')\r\n  }\r\n  unGroupControl () {\r\n    EventBus.$emit('groupControl', 'ungroup')\r\n  }\r\n  sizeToFit () {\r\n    const usrFrmData = this.userformData[this.userFormId]\r\n    const ctrlSel = this.selectedControls[this.userFormId].selected\r\n    const sizeToFitArr: string[] = []\r\n    const sizeToFitVal: boolean[] = []\r\n    for (let index = 0; index < ctrlSel.length; index++) {\r\n      if (!ctrlSel[index].startsWith('group')) {\r\n        const controlprop = usrFrmData[ctrlSel[index]].properties\r\n        if ('AutoSize' in controlprop) {\r\n          sizeToFitArr.push(ctrlSel[index])\r\n          sizeToFitVal.push(controlprop.AutoSize!)\r\n          this.updateControlProperty('AutoSize', true, ctrlSel[index])\r\n        }\r\n      }\r\n    }\r\n    setTimeout(() => {\r\n      for (let index = 0; index < sizeToFitArr.length; index++) {\r\n        if (!sizeToFitArr[index].startsWith('group')) {\r\n          const controlprop = usrFrmData[sizeToFitArr[index]].properties\r\n          if ('AutoSize' in controlprop) {\r\n            this.updateControlProperty(\r\n              'AutoSize',\r\n              sizeToFitVal[index],\r\n              sizeToFitArr[index]\r\n            )\r\n          }\r\n        }\r\n      }\r\n    }, 100)\r\n  }\r\n  convertToGridSize (val: number) {\r\n    const gridSize = 9\r\n    return Math.round(val / gridSize) * gridSize\r\n  }\r\n  sizeToGrid () {\r\n    let divstyle: Array<IGroupStyle> = []\r\n    const usrFrmData = this.userformData[this.userFormId]\r\n    const ctrlSel = this.selectedControls[this.userFormId].selected\r\n    let ctrlContainer = this.selectedControls[this.userFormId].container[0]\r\n    for (let index = 0; index < ctrlSel.length; index++) {\r\n      if (!ctrlSel[index].startsWith('group')) {\r\n        const controlprop = usrFrmData[ctrlSel[index]].properties\r\n        this.updateControlProperty(\r\n          'Left',\r\n          this.convertToGridSize(controlprop.Left!),\r\n          ctrlSel[index]\r\n        )\r\n        this.updateControlProperty(\r\n          'Top',\r\n          this.convertToGridSize(controlprop.Top!),\r\n          ctrlSel[index]\r\n        )\r\n        this.updateControlProperty(\r\n          'Width',\r\n          this.convertToGridSize(controlprop.Width!),\r\n          ctrlSel[index]\r\n        )\r\n        this.updateControlProperty(\r\n          'Height',\r\n          this.convertToGridSize(controlprop.Height!),\r\n          ctrlSel[index]\r\n        )\r\n      } else {\r\n        EventBus.$emit('getGroupSize', (divstayleArray: Array<IGroupStyle>) => {\r\n          divstyle = divstayleArray\r\n        })\r\n        const getIndex = divstyle.findIndex(\r\n          (val) => val.groupName === ctrlSel[index]\r\n        )\r\n        EventBus.$emit('updasteGroupSize', 'GroupID', 0, getIndex)\r\n      }\r\n    }\r\n  }\r\n  incDecspacing (type: keyof controlProperties, value: number) {\r\n    const usrFrmData = this.userformData[this.userFormId]\r\n    const ctrlSel = this.selectedControls[this.userFormId].selected\r\n    const ctrlContainer = this.selectedControls[this.userFormId].container[0]\r\n    const controls = usrFrmData[ctrlContainer].controls\r\n    let divstyle: Array<IGroupStyle> = []\r\n    let getGroupIndex = -1\r\n    if (ctrlSel[0].startsWith('group')) {\r\n      EventBus.$emit('getGroupSize', (divstayleArray: Array<IGroupStyle>) => {\r\n        divstyle = divstayleArray\r\n      })\r\n      getGroupIndex = divstyle.findIndex((val) => val.groupName === ctrlSel[0])\r\n    }\r\n    const leftArray: string[] = []\r\n    const rightArray: string[] = []\r\n    for (let index = 1; index < ctrlSel.length; index++) {\r\n      const selLeft = ctrlSel[0].startsWith('group')\r\n        ? parseInt(divstyle[getGroupIndex].left!)\r\n        : usrFrmData[ctrlSel[0]].properties.Left\r\n      const selTop = ctrlSel[0].startsWith('group')\r\n        ? parseInt(divstyle[getGroupIndex].top!)\r\n        : usrFrmData[ctrlSel[0]].properties.Top\r\n      if (!ctrlSel[index].startsWith('group')) {\r\n        const ctrlProp = usrFrmData[ctrlSel[index]].properties\r\n        if (type === 'Left') {\r\n          if (ctrlProp.Left! <= selLeft!) {\r\n            leftArray.push(ctrlSel[index])\r\n          } else {\r\n            rightArray.push(ctrlSel[index])\r\n          }\r\n        } else if (type === 'Top') {\r\n          if (ctrlProp.Top! <= selTop!) {\r\n            leftArray.push(ctrlSel[index])\r\n          } else {\r\n            rightArray.push(ctrlSel[index])\r\n          }\r\n        }\r\n      } else {\r\n        EventBus.$emit('getGroupSize', (divstayleArray: Array<IGroupStyle>) => {\r\n          divstyle = divstayleArray\r\n        })\r\n        const getIndex = divstyle.findIndex(\r\n          (val) => val.groupName === ctrlSel[index]\r\n        )\r\n        const groupLeft = parseInt(divstyle[getIndex].left!)\r\n        const groupTop = parseInt(divstyle[getIndex].top!)\r\n        const groupConrol = this.getGroupControl(ctrlSel[index])\r\n        if (type === 'Left') {\r\n          if (groupLeft <= selLeft!) {\r\n            for (let ctrl of groupConrol) {\r\n              const prop = this.userformData[this.userFormId][ctrl].properties\r\n              if (Math.floor(prop.Left!) === groupLeft) {\r\n                leftArray.push(ctrl)\r\n              }\r\n            }\r\n          } else {\r\n            for (let ctrl of groupConrol) {\r\n              const prop = this.userformData[this.userFormId][ctrl].properties\r\n              if (Math.floor(prop.Left!) === groupLeft) {\r\n                rightArray.push(ctrl)\r\n              }\r\n            }\r\n          }\r\n        } else if (type === 'Top') {\r\n          if (groupTop <= selTop!) {\r\n            for (let ctrl of groupConrol) {\r\n              const prop = this.userformData[this.userFormId][ctrl].properties\r\n              if (Math.floor(prop.Top!) === groupTop) {\r\n                leftArray.push(ctrl)\r\n              }\r\n            }\r\n          } else {\r\n            for (let ctrl of groupConrol) {\r\n              const prop = this.userformData[this.userFormId][ctrl].properties\r\n              if (Math.floor(prop.Top!) === groupTop) {\r\n                rightArray.push(ctrl)\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (ctrlSel[0].startsWith('group')) {\r\n      const getIndex = divstyle.findIndex(\r\n        (val) => val.groupName === ctrlSel[0]\r\n      )\r\n      const groupLeft = parseInt(divstyle[getIndex].left!)\r\n      const groupTop = parseInt(divstyle[getIndex].top!)\r\n      const groupConrol = this.getGroupControl(ctrlSel[0])\r\n      if (type === 'Left') {\r\n        for (let ctrl of groupConrol) {\r\n          const prop = this.userformData[this.userFormId][ctrl].properties\r\n          if (Math.floor(prop.Left!) === groupLeft) {\r\n            leftArray.push(ctrl)\r\n            rightArray.push(ctrl)\r\n          }\r\n        }\r\n      } else if (type === 'Top') {\r\n        for (let ctrl of groupConrol) {\r\n          const prop = this.userformData[this.userFormId][ctrl].properties\r\n          if (Math.floor(prop.Top!) === groupTop) {\r\n            leftArray.push(ctrl)\r\n            rightArray.push(ctrl)\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      leftArray.unshift(ctrlSel[0])\r\n      rightArray.push(ctrlSel[0])\r\n    }\r\n    if (type === 'Left') {\r\n      leftArray.sort((a, b) => {\r\n        return usrFrmData[b].properties.Left! - usrFrmData[a].properties.Left!\r\n      })\r\n      rightArray.sort((a, b) => {\r\n        return usrFrmData[a].properties.Left! - usrFrmData[b].properties.Left!\r\n      })\r\n    } else if (type === 'Top') {\r\n      leftArray.sort((a, b) => {\r\n        return usrFrmData[b].properties.Top! - usrFrmData[a].properties.Top!\r\n      })\r\n      rightArray.sort((a, b) => {\r\n        return usrFrmData[a].properties.Top! - usrFrmData[b].properties.Top!\r\n      })\r\n    }\r\n    const groupIndex: number = divstyle.findIndex(\r\n      (val) => val.groupName === ctrlSel[0]\r\n    )\r\n    const isGroup = ctrlSel[0].startsWith('group')\r\n    const ctrlProp = !isGroup && usrFrmData[ctrlSel[0]].properties\r\n    const newObject = {\r\n      Left:\r\n        isGroup && groupIndex !== -1\r\n          ? parseInt(divstyle[groupIndex].left!)\r\n          : ctrlProp\r\n            ? ctrlProp.Left!\r\n            : 0,\r\n      Top:\r\n        isGroup && groupIndex !== -1\r\n          ? parseInt(divstyle[groupIndex].top!)\r\n          : ctrlProp\r\n            ? ctrlProp.Top!\r\n            : 0,\r\n      Width:\r\n        isGroup && groupIndex !== -1\r\n          ? parseInt(divstyle[groupIndex].width!)\r\n          : ctrlProp\r\n            ? ctrlProp.Width!\r\n            : 0,\r\n      Height:\r\n        isGroup && groupIndex !== -1\r\n          ? parseInt(divstyle[groupIndex].height!)\r\n          : ctrlProp\r\n            ? ctrlProp.Height!\r\n            : 0\r\n    }\r\n    let incDecValue = 0\r\n    let propValue = 0\r\n    for (let index = 1; index < leftArray.length; index++) {\r\n      const ctrlProp = usrFrmData[leftArray[index]].properties\r\n      let prevIndex = -1\r\n      let controlPropIndex = -1\r\n      if (type === 'Left') {\r\n        if (ctrlProp.GroupID === '') {\r\n          propValue = propValue + value\r\n          incDecValue = ctrlProp.Left! - propValue\r\n          this.updateControlProperty(type, this.convertToGridSize(incDecValue), leftArray[index])\r\n        } else {\r\n          if (ctrlProp.GroupID !== '') {\r\n            controlPropIndex = divstyle.findIndex((val) => val.groupName === ctrlProp.GroupID)\r\n            let incDecValue = 0\r\n            propValue = propValue + value\r\n            incDecValue = parseInt(divstyle[controlPropIndex].left!) - propValue\r\n            EventBus.$emit(\r\n              'updasteGroupSize',\r\n              type,\r\n              this.convertToGridSize(incDecValue),\r\n              controlPropIndex\r\n            )\r\n          }\r\n        }\r\n      } else if (type === 'Top') {\r\n        if (ctrlProp.GroupID === '') {\r\n          propValue = propValue + value\r\n          incDecValue = ctrlProp.Top! - propValue\r\n          this.updateControlProperty(type, this.convertToGridSize(incDecValue), leftArray[index])\r\n        } else {\r\n          if (ctrlProp.GroupID !== '') {\r\n            controlPropIndex = divstyle.findIndex((val) => val.groupName === ctrlProp.GroupID)\r\n            let incDecValue = 0\r\n            propValue = propValue + value\r\n            incDecValue = parseInt(divstyle[controlPropIndex].top!) - propValue\r\n            EventBus.$emit(\r\n              'updasteGroupSize',\r\n              type,\r\n              this.convertToGridSize(incDecValue),\r\n              controlPropIndex\r\n            )\r\n          }\r\n        }\r\n      }\r\n    }\r\n    propValue = 0\r\n    for (let index = 1; index < rightArray.length; index++) {\r\n      const ctrlProp = usrFrmData[rightArray[index]].properties\r\n      let prevIndex = -1\r\n      let controlPropIndex = -1\r\n      if (type === 'Left') {\r\n        if (ctrlProp.GroupID === '') {\r\n          propValue = propValue + value\r\n          incDecValue = ctrlProp.Left! + propValue\r\n          this.updateControlProperty(type, this.convertToGridSize(incDecValue), rightArray[index])\r\n        } else {\r\n          if (ctrlProp.GroupID !== '') {\r\n            controlPropIndex = divstyle.findIndex((val) => val.groupName === ctrlProp.GroupID)\r\n            propValue = propValue + value\r\n            incDecValue = parseInt(divstyle[controlPropIndex].left!) + propValue\r\n            EventBus.$emit(\r\n              'updasteGroupSize',\r\n              type,\r\n              this.convertToGridSize(incDecValue),\r\n              controlPropIndex\r\n            )\r\n          }\r\n        }\r\n      } else if (type === 'Top') {\r\n        if (ctrlProp.GroupID === '') {\r\n          let incDecValue = 0\r\n          propValue = propValue + value\r\n          incDecValue = ctrlProp.Top! + propValue\r\n          this.updateControlProperty(type, this.convertToGridSize(incDecValue), rightArray[index])\r\n        } else {\r\n          if (ctrlProp.GroupID !== '') {\r\n            controlPropIndex = divstyle.findIndex((val) => val.groupName === ctrlProp.GroupID)\r\n            let incDecValue = 0\r\n            propValue = propValue + value\r\n            incDecValue = parseInt(divstyle[controlPropIndex].top!) + propValue\r\n            EventBus.$emit(\r\n              'updasteGroupSize',\r\n              type,\r\n              this.convertToGridSize(incDecValue),\r\n              controlPropIndex\r\n            )\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  getGroupControl (groupName: string) {\r\n    const ctrlContainer = this.selectedControls[this.userFormId].container[0]\r\n    const usrFrmData = this.userformData[this.userFormId]\r\n    const controls = []\r\n    for (const control of usrFrmData[ctrlContainer].controls) {\r\n      if (usrFrmData[control].properties.GroupID === groupName) {\r\n        controls.push(control)\r\n      }\r\n    }\r\n    return controls\r\n  }\r\n  removeSpace (type: keyof controlProperties) {\r\n    const usrFrmData = this.userformData[this.userFormId]\r\n    const ctrlSel = this.selectedControls[this.userFormId].selected\r\n    const ctrlContainer = this.selectedControls[this.userFormId].container[0]\r\n    const controls = usrFrmData[ctrlContainer].controls\r\n    let divstyle: Array<IGroupStyle> = []\r\n    let getGroupIndex = -1\r\n    if (ctrlSel[0].startsWith('group')) {\r\n      EventBus.$emit('getGroupSize', (divstayleArray: Array<IGroupStyle>) => {\r\n        divstyle = divstayleArray\r\n      })\r\n      getGroupIndex = divstyle.findIndex((val) => val.groupName === ctrlSel[0])\r\n    }\r\n    let propValue = 0\r\n    const leftArray: string[] = []\r\n    const rightArray: string[] = []\r\n    for (let index = 1; index < ctrlSel.length; index++) {\r\n      const selLeft = ctrlSel[0].startsWith('group')\r\n        ? parseInt(divstyle[getGroupIndex].left!)\r\n        : usrFrmData[ctrlSel[0]].properties.Left\r\n      const selTop = ctrlSel[0].startsWith('group')\r\n        ? parseInt(divstyle[getGroupIndex].top!)\r\n        : usrFrmData[ctrlSel[0]].properties.Top\r\n      if (!ctrlSel[index].startsWith('group')) {\r\n        const ctrlProp = usrFrmData[ctrlSel[index]].properties\r\n        if (type === 'Left') {\r\n          if (ctrlProp.Left! <= selLeft!) {\r\n            leftArray.push(ctrlSel[index])\r\n          } else {\r\n            rightArray.push(ctrlSel[index])\r\n          }\r\n        } else if (type === 'Top') {\r\n          if (ctrlProp.Top! <= selTop!) {\r\n            leftArray.push(ctrlSel[index])\r\n          } else {\r\n            rightArray.push(ctrlSel[index])\r\n          }\r\n        }\r\n      } else {\r\n        EventBus.$emit('getGroupSize', (divstayleArray: Array<IGroupStyle>) => {\r\n          divstyle = divstayleArray\r\n        })\r\n        const getIndex = divstyle.findIndex(\r\n          (val) => val.groupName === ctrlSel[index]\r\n        )\r\n        const groupLeft = parseInt(divstyle[getIndex].left!)\r\n        const groupTop = parseInt(divstyle[getIndex].top!)\r\n        const groupConrol = this.getGroupControl(ctrlSel[index])\r\n        if (type === 'Left') {\r\n          if (groupLeft <= selLeft!) {\r\n            for (let ctrl of groupConrol) {\r\n              const prop = this.userformData[this.userFormId][ctrl].properties\r\n              if (Math.floor(prop.Left!) === groupLeft) {\r\n                leftArray.push(ctrl)\r\n              }\r\n            }\r\n          } else {\r\n            for (let ctrl of groupConrol) {\r\n              const prop = this.userformData[this.userFormId][ctrl].properties\r\n              if (Math.floor(prop.Left!) === groupLeft) {\r\n                rightArray.push(ctrl)\r\n              }\r\n            }\r\n          }\r\n        } else if (type === 'Top') {\r\n          if (groupTop <= selTop!) {\r\n            for (let ctrl of groupConrol) {\r\n              const prop = this.userformData[this.userFormId][ctrl].properties\r\n              if (Math.floor(prop.Top!) === groupTop) {\r\n                leftArray.push(ctrl)\r\n              }\r\n            }\r\n          } else {\r\n            for (let ctrl of groupConrol) {\r\n              const prop = this.userformData[this.userFormId][ctrl].properties\r\n              if (Math.floor(prop.Top!) === groupTop) {\r\n                rightArray.push(ctrl)\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    if (ctrlSel[0].startsWith('group')) {\r\n      const getIndex = divstyle.findIndex(\r\n        (val) => val.groupName === ctrlSel[0]\r\n      )\r\n      const groupLeft = parseInt(divstyle[getIndex].left!)\r\n      const groupTop = parseInt(divstyle[getIndex].top!)\r\n      const groupConrol = this.getGroupControl(ctrlSel[0])\r\n      if (type === 'Left') {\r\n        for (let ctrl of groupConrol) {\r\n          const prop = this.userformData[this.userFormId][ctrl].properties\r\n          if (Math.floor(prop.Left!) === groupLeft) {\r\n            leftArray.push(ctrl)\r\n            rightArray.push(ctrl)\r\n          }\r\n        }\r\n      } else if (type === 'Top') {\r\n        for (let ctrl of groupConrol) {\r\n          const prop = this.userformData[this.userFormId][ctrl].properties\r\n          if (Math.floor(prop.Top!) === groupTop) {\r\n            leftArray.push(ctrl)\r\n            rightArray.push(ctrl)\r\n          }\r\n        }\r\n      }\r\n    } else {\r\n      leftArray.unshift(ctrlSel[0])\r\n      rightArray.push(ctrlSel[0])\r\n    }\r\n    if (type === 'Left') {\r\n      leftArray.sort((a, b) => {\r\n        return usrFrmData[b].properties.Left! - usrFrmData[a].properties.Left!\r\n      })\r\n      rightArray.sort((a, b) => {\r\n        return usrFrmData[a].properties.Left! - usrFrmData[b].properties.Left!\r\n      })\r\n    } else if (type === 'Top') {\r\n      leftArray.sort((a, b) => {\r\n        return usrFrmData[b].properties.Top! - usrFrmData[a].properties.Top!\r\n      })\r\n      rightArray.sort((a, b) => {\r\n        return usrFrmData[a].properties.Top! - usrFrmData[b].properties.Top!\r\n      })\r\n    }\r\n    for (let index = 1; index < leftArray.length; index++) {\r\n      const prevCtrlProp = usrFrmData[leftArray[index - 1]].properties\r\n      const ctrlProp = usrFrmData[leftArray[index]].properties\r\n      let prevIndex = -1\r\n      let controlPropIndex = -1\r\n      if (type === 'Left') {\r\n        if (prevCtrlProp.GroupID === '' && ctrlProp.GroupID === '') {\r\n          propValue = prevCtrlProp.Left! - ctrlProp.Width!\r\n          this.updateControlProperty(type, propValue, leftArray[index])\r\n        } else {\r\n          if (prevCtrlProp.GroupID !== '') {\r\n            if (ctrlProp.GroupID === '') {\r\n              prevIndex = divstyle.findIndex(\r\n                (val) => val.groupName === prevCtrlProp.GroupID\r\n              )\r\n              propValue = parseInt(divstyle[prevIndex].left!) - ctrlProp.Width!\r\n              this.updateControlProperty(type, propValue, leftArray[index])\r\n            }\r\n          }\r\n          if (ctrlProp.GroupID !== '') {\r\n            controlPropIndex = divstyle.findIndex(\r\n              (val) => val.groupName === ctrlProp.GroupID\r\n            )\r\n            if (prevCtrlProp.GroupID === '') {\r\n              propValue =\r\n                prevCtrlProp.Left! -\r\n                parseInt(divstyle[controlPropIndex].width!)\r\n            } else {\r\n              prevIndex = divstyle.findIndex(\r\n                (val) => val.groupName === prevCtrlProp.GroupID\r\n              )\r\n              propValue =\r\n                parseInt(divstyle[prevIndex].left!) -\r\n                parseInt(divstyle[controlPropIndex].width!)\r\n            }\r\n            EventBus.$emit(\r\n              'updasteGroupSize',\r\n              type,\r\n              propValue,\r\n              controlPropIndex\r\n            )\r\n          }\r\n        }\r\n      } else if (type === 'Top') {\r\n        if (prevCtrlProp.GroupID === '' && ctrlProp.GroupID === '') {\r\n          propValue = prevCtrlProp.Top! - ctrlProp.Height!\r\n          this.updateControlProperty(type, propValue, leftArray[index])\r\n        } else {\r\n          if (prevCtrlProp.GroupID !== '') {\r\n            if (ctrlProp.GroupID === '') {\r\n              prevIndex = divstyle.findIndex(\r\n                (val) => val.groupName === prevCtrlProp.GroupID\r\n              )\r\n              propValue = parseInt(divstyle[prevIndex].top!) - ctrlProp.Height!\r\n              this.updateControlProperty(type, propValue, leftArray[index])\r\n            }\r\n          }\r\n          if (ctrlProp.GroupID !== '') {\r\n            controlPropIndex = divstyle.findIndex(\r\n              (val) => val.groupName === ctrlProp.GroupID\r\n            )\r\n            if (prevCtrlProp.GroupID === '') {\r\n              propValue =\r\n                prevCtrlProp.Top! -\r\n                parseInt(divstyle[controlPropIndex].height!)\r\n            } else {\r\n              prevIndex = divstyle.findIndex(\r\n                (val) => val.groupName === prevCtrlProp.GroupID\r\n              )\r\n              propValue =\r\n                parseInt(divstyle[prevIndex].top!) -\r\n                parseInt(divstyle[controlPropIndex].height!)\r\n            }\r\n            EventBus.$emit(\r\n              'updasteGroupSize',\r\n              type,\r\n              propValue,\r\n              controlPropIndex\r\n            )\r\n          }\r\n        }\r\n      }\r\n    }\r\n    for (let index = 1; index < rightArray.length; index++) {\r\n      const prevCtrlProp = usrFrmData[rightArray[index - 1]].properties\r\n      const ctrlProp = usrFrmData[rightArray[index]].properties\r\n      let prevIndex = -1\r\n      const controlPropIndex = -1\r\n      if (type === 'Left') {\r\n        if (prevCtrlProp.GroupID === '' && ctrlProp.GroupID === '') {\r\n          propValue = prevCtrlProp.Left! + prevCtrlProp.Width!\r\n          this.updateControlProperty(type, propValue, rightArray[index])\r\n        } else {\r\n          if (prevCtrlProp.GroupID !== '') {\r\n            prevIndex = divstyle.findIndex(\r\n              (val) => val.groupName === prevCtrlProp.GroupID\r\n            )\r\n            propValue =\r\n              parseInt(divstyle[prevIndex].left!) +\r\n              parseInt(divstyle[prevIndex].width!)\r\n          } else {\r\n            propValue = prevCtrlProp.Left! + prevCtrlProp.Width!\r\n          }\r\n          if (ctrlProp.GroupID !== '') {\r\n            const getIndex = divstyle.findIndex(\r\n              (val) => val.groupName === ctrlProp.GroupID\r\n            )\r\n            EventBus.$emit('updasteGroupSize', type, propValue, getIndex)\r\n          } else {\r\n            this.updateControlProperty(type, propValue, rightArray[index])\r\n          }\r\n        }\r\n      } else if (type === 'Top') {\r\n        if (prevCtrlProp.GroupID === '' && ctrlProp.GroupID === '') {\r\n          propValue = prevCtrlProp.Top! + prevCtrlProp.Height!\r\n          this.updateControlProperty(type, propValue, rightArray[index])\r\n        } else {\r\n          if (prevCtrlProp.GroupID !== '') {\r\n            prevIndex = divstyle.findIndex(\r\n              (val) => val.groupName === prevCtrlProp.GroupID\r\n            )\r\n            propValue =\r\n              parseInt(divstyle[prevIndex].top!) +\r\n              parseInt(divstyle[prevIndex].height!)\r\n          } else {\r\n            propValue = prevCtrlProp.Top! + prevCtrlProp.Height!\r\n          }\r\n          if (ctrlProp.GroupID !== '') {\r\n            const getIndex = divstyle.findIndex(\r\n              (val) => val.groupName === ctrlProp.GroupID\r\n            )\r\n            EventBus.$emit('updasteGroupSize', type, propValue, getIndex)\r\n          } else {\r\n            this.updateControlProperty(type, propValue, rightArray[index])\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  updatePropVal (propName: string, propValue: number) {\r\n    const ctrlSel = this.selectedControls[this.userFormId].selected\r\n    const usrFrmData = this.userformData[this.userFormId]\r\n    for (let index = 0; index < ctrlSel.length; index++) {\r\n      if (!ctrlSel[index].startsWith('group')) {\r\n        const curProp = usrFrmData[ctrlSel[index]].properties\r\n        if (propName === 'selCenter') {\r\n          const curCenter = curProp.Width! / 2\r\n          const value = propValue - curCenter\r\n          this.updateControlProperty('Left', value, ctrlSel[index])\r\n        }\r\n        if (propName === 'selMiddle') {\r\n          const curMiddle = curProp.Height! / 2\r\n          const value = propValue - curMiddle\r\n          this.updateControlProperty('Top', value, ctrlSel[index])\r\n        }\r\n      } else {\r\n        let divstyle: Array<IGroupStyle> = []\r\n        EventBus.$emit('getGroupSize', (divstayleArray: Array<IGroupStyle>) => {\r\n          divstyle = divstayleArray\r\n        })\r\n        const groupIndex = divstyle.findIndex(\r\n          (val) => val.groupName === ctrlSel[index]\r\n        )\r\n        const curProp = divstyle[groupIndex]\r\n        const left = parseInt(curProp.left!)\r\n        const top = parseInt(curProp.top!)\r\n        const width = parseInt(curProp.width!)\r\n        const height = parseInt(curProp.height!)\r\n        let value = -1\r\n        if (propName === 'selCenter') {\r\n          value = propValue - width! / 2\r\n          EventBus.$emit('updasteGroupSize', 'Left', value, groupIndex)\r\n        }\r\n        if (propName === 'selMiddle') {\r\n          value = propValue - height! / 2\r\n          EventBus.$emit('updasteGroupSize', 'Top', value, groupIndex)\r\n        }\r\n      }\r\n    }\r\n  }\r\n  centreInForm (value: string) {\r\n    let divstyle: Array<IGroupStyle> = []\r\n    const mainContainer = this.selectedControls[this.userFormId].container[0]\r\n    const usrFrmData = this.userformData[this.userFormId]\r\n    const ctrlProp = usrFrmData[mainContainer].properties\r\n    if (value === 'horizontal') {\r\n      const selCenter = ctrlProp.Left! + ctrlProp.Width! / 2\r\n      this.updatePropVal('selCenter', selCenter)\r\n    } else if (value === 'vertical') {\r\n      const selMiddle = ctrlProp.Top! + ctrlProp.Height! / 2\r\n      this.updatePropVal('selMiddle', selMiddle)\r\n    }\r\n  }\r\n  arrangeButton (type: string) {\r\n    const usrFrmData = this.userformData[this.userFormId]\r\n    const ctrlSel = this.selectedControls[this.userFormId].selected\r\n    let ctrlContainer = this.selectedControls[this.userFormId].container[0]\r\n    ctrlContainer =\r\n      usrFrmData[ctrlContainer].type === 'Page'\r\n        ? this.selectedControls[this.userFormId].container[1]\r\n        : ctrlContainer\r\n    const buttonArray = []\r\n    for (let index = 0; index < ctrlSel.length; index++) {\r\n      if (!ctrlSel[index].startsWith('group')) {\r\n        const controlprop = usrFrmData[ctrlSel[index]]\r\n        if (controlprop.type === 'CommandButton') {\r\n          buttonArray.push(ctrlSel[index])\r\n        }\r\n      }\r\n    }\r\n    if (type === 'bottom') {\r\n      buttonArray.sort((a, b) => {\r\n        return usrFrmData[a].properties.Left! - usrFrmData[b].properties.Left!\r\n      })\r\n    } else if (type === 'right') {\r\n      buttonArray.sort((a, b) => {\r\n        return usrFrmData[a].properties.Top! - usrFrmData[b].properties.Top!\r\n      })\r\n    }\r\n    const containerProp = usrFrmData[ctrlContainer].properties\r\n    let value: number = 0\r\n    const containerHeight = (usrFrmData[ctrlContainer].type === 'Userform')\r\n      ? 47 : usrFrmData[ctrlContainer].type === 'Frame' ? 27\r\n        : usrFrmData[ctrlContainer].type === 'MultiPage' ? 40 : 0\r\n    const containerWidth = 20\r\n    if (type === 'bottom') {\r\n      value = (containerProp.Height! - containerHeight) - usrFrmData[buttonArray[0]].properties.Height!\r\n      this.updateControlProperty('Top', value, buttonArray[0])\r\n      this.updateControlProperty('Left', 30, buttonArray[0])\r\n    } else if (type === 'right') {\r\n      value = (containerProp.Width! - containerWidth) - usrFrmData[buttonArray[0]].properties.Width!\r\n      this.updateControlProperty('Left', value, buttonArray[0])\r\n      this.updateControlProperty('Top', 20, buttonArray[0])\r\n    }\r\n\r\n    for (let index = 1; index < buttonArray.length; index++) {\r\n      const prevCtrlProp = usrFrmData[buttonArray[index - 1]].properties\r\n      const ctrlProp = usrFrmData[buttonArray[index]].properties\r\n      if (type === 'bottom') {\r\n        let propValue = prevCtrlProp.Left! + prevCtrlProp.Width! + 10\r\n        value =\r\n          (containerProp.Height! - containerHeight) -\r\n          usrFrmData[buttonArray[index]].properties.Height!\r\n        if (propValue + ctrlProp.Width! <= containerProp.Width! - containerWidth) {\r\n          this.updateControlProperty('Left', propValue, buttonArray[index])\r\n          this.updateControlProperty('Top', value, buttonArray[index])\r\n        } else {\r\n          propValue = containerProp.Width! - containerWidth - ctrlProp.Width!\r\n          this.updateControlProperty('Left', propValue, buttonArray[index])\r\n          this.updateControlProperty('Top', value, buttonArray[index])\r\n        }\r\n      } else if (type === 'right') {\r\n        let propValue = prevCtrlProp.Top! + prevCtrlProp.Height! + 10\r\n        value =\r\n          (containerProp.Width! - containerWidth) -\r\n          usrFrmData[buttonArray[index]].properties.Width!\r\n        if (propValue + ctrlProp.Height! <= containerProp.Height! - (containerHeight)) {\r\n          this.updateControlProperty('Top', propValue, buttonArray[index])\r\n          this.updateControlProperty('Left', value, buttonArray[index])\r\n        } else {\r\n          propValue = containerProp.Height! - containerHeight - ctrlProp.Height!\r\n          this.updateControlProperty('Top', propValue, buttonArray[index])\r\n          this.updateControlProperty('Left', value, buttonArray[index])\r\n        }\r\n      }\r\n    }\r\n  }\r\n  updateControlProperty (\r\n    propertyName: keyof controlProperties,\r\n    propertyValue: any,\r\n    controlId: string\r\n  ) {\r\n    this.updateControl({\r\n      userFormId: this.userFormId,\r\n      controlId: controlId,\r\n      propertyName: propertyName,\r\n      value: propertyValue\r\n    })\r\n  }\r\n  getdisableStyle (id: string) {\r\n    let disabled: boolean = true\r\n    const selected = this.selectedControls[this.userFormId].selected\r\n    const selContainer = this.selectedControls[this.userFormId].container\r\n    const userData = this.userformData[this.userFormId]\r\n    if (id === 'unGroup') {\r\n      let groupId: boolean = false\r\n      const selectedGroupArray = selected.filter(\r\n        (val: string) => val.startsWith('group') && val\r\n      )\r\n      if (selectedGroupArray.length === 1 && selected.length === 1) {\r\n        disabled = false\r\n      }\r\n    }\r\n    if (id === 'group') {\r\n      disabled = selected.length <= 1\r\n    }\r\n    if (id === 'sizeToGrid' || id === 'centreInForm') {\r\n      disabled = !(selected.length >= 1 && selected[0] !== selContainer[0])\r\n    }\r\n    if (id === 'sizeToFit') {\r\n      const selSelected = []\r\n      for (const control of this.selectedControls[this.userFormId].selected) {\r\n        if (!control.startsWith('group')) {\r\n          const type = this.userformData[this.userFormId][control].type\r\n          if (type !== 'MultiPage' && type !== 'Frame' && type !== 'ListBox' && type !== 'Page' && type !== 'TabStrip' && type !== 'Userform') {\r\n            selSelected.push(control)\r\n          }\r\n        }\r\n      }\r\n      disabled = !(selSelected.length >= 1)\r\n    }\r\n    if (id === 'order') {\r\n      disabled = !(selected.length >= 1 && userData[selContainer[0]].controls.length >= 2)\r\n    }\r\n    if (id === 'makeEqual') {\r\n      disabled = !(selected.length >= 3)\r\n    }\r\n    if (id === 'incDecspacing' || id === 'removeSpace') {\r\n      disabled = !(selected.length >= 2)\r\n    }\r\n    if (id === 'arrangeButton') {\r\n      const buttonArray = []\r\n      for (let index = 0; index < selected.length; index++) {\r\n        if (!selected[index].startsWith('group')) {\r\n          const controlprop = userData[selected[index]]\r\n          if (controlprop.type === 'CommandButton') {\r\n            buttonArray.push(selected[index])\r\n          }\r\n        }\r\n      }\r\n      disabled = !(buttonArray.length >= 1)\r\n    }\r\n    return disabled\r\n  }\r\n  bringForward () {\r\n    const userData = this.userformData[this.userFormId]\r\n    const highProrControl = []\r\n    const lowProrControl = []\r\n    const container = this.getContainerList(this.getSelectedControlsDatas![0])[0]\r\n    const containerControls = this.userformData[this.userFormId][container].controls\r\n    for (const index in containerControls) {\r\n      const cntrlData = this.userformData[this.userFormId][containerControls[index]]\r\n      if (cntrlData.type === 'MultiPage' || cntrlData.type === 'Frame' || cntrlData.type === 'ListBox') {\r\n        highProrControl.push(containerControls[index])\r\n      } else {\r\n        lowProrControl.push(containerControls[index])\r\n      }\r\n    }\r\n    let nextSelctedSeries: string[] = []\r\n    let nextHighControlSeries: string[] = []\r\n    const getSelControl = [...this.getSelectedControlsDatas!]\r\n    getSelControl.sort((a, b) => {\r\n      return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\r\n    })\r\n    for (const selControl of getSelControl!) {\r\n      const type = userData[selControl].type\r\n      const tempZIndex = userData[selControl].extraDatas!.zIndex!\r\n      const controlIndex = Object.keys(userData).findIndex((val: string, index: number) => {\r\n        return 'zIndex' in userData[val].extraDatas! && (userData[val].extraDatas!.zIndex === tempZIndex + 1)\r\n      })\r\n      const nextSelectedControl = controlIndex !== -1 ? Object.keys(userData)[controlIndex] : ''\r\n      const nextControlType = userData[nextSelectedControl].type\r\n      if (nextSelectedControl !== '' && !highProrControl.includes(nextSelectedControl)) {\r\n        if (getSelControl!.includes(nextSelectedControl)) {\r\n          if (!nextSelctedSeries.includes(selControl)) {\r\n            nextSelctedSeries.push(selControl)\r\n          }\r\n          if (!nextSelctedSeries.includes(nextSelectedControl)) {\r\n            nextSelctedSeries.push(nextSelectedControl)\r\n          }\r\n        } else {\r\n          if (Object.keys(nextSelctedSeries).length !== 0) {\r\n            const tempExchageIndex = userData[nextSelctedSeries[0]].extraDatas!.zIndex!\r\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\r\n            if (swapTabIndex <= userData[container].controls.length /* && swapTabIndex > 0 */) {\r\n              const index = userData[container].controls.findIndex(\r\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\r\n              )\r\n              this.updateExtraDatas(userData[container].controls[index], 'zIndex', tempExchageIndex)\r\n              this.updateExtraDatas(nextSelctedSeries[0], 'zIndex', swapTabIndex - (nextSelctedSeries!.length - 1))\r\n            }\r\n            for (let j = 1; j < nextSelctedSeries.length; j++) {\r\n              const updateIndex = userData[nextSelctedSeries[j]].extraDatas!.zIndex! + 1\r\n              this.updateExtraDatas(nextSelctedSeries[j], 'zIndex', updateIndex)\r\n            }\r\n            nextSelctedSeries = []\r\n          } else {\r\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\r\n            if (swapTabIndex <= userData[container].controls.length /* && swapTabIndex > 0 */) {\r\n              const index = userData[container].controls.findIndex(\r\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\r\n              )\r\n              this.updateExtraDatas(selControl, 'zIndex', swapTabIndex)\r\n              this.updateExtraDatas(nextSelectedControl, 'zIndex', tempZIndex)\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        if (getSelControl!.includes(nextSelectedControl) && (type === 'Frame' || type === 'MultiPage' || type === 'ListBox')) {\r\n          if (!nextHighControlSeries.includes(selControl)) {\r\n            nextHighControlSeries.push(selControl)\r\n          }\r\n          if (!nextHighControlSeries.includes(nextSelectedControl)) {\r\n            nextHighControlSeries.push(nextSelectedControl)\r\n          }\r\n        } else if (type === 'Frame' || type === 'MultiPage' || type === 'ListBox') {\r\n          if (Object.keys(nextHighControlSeries).length !== 0) {\r\n            const tempExchageIndex = userData[nextHighControlSeries[0]].extraDatas!.zIndex!\r\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\r\n            if (swapTabIndex <= userData[container].controls.length) {\r\n              const index = userData[container].controls.findIndex(\r\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\r\n              )\r\n              this.updateExtraDatas(userData[container].controls[index], 'zIndex', tempExchageIndex)\r\n              this.updateExtraDatas(nextHighControlSeries[0], 'zIndex', swapTabIndex - (nextHighControlSeries!.length - 1))\r\n            }\r\n            for (let j = 1; j < nextHighControlSeries.length; j++) {\r\n              const updateIndex = userData[nextHighControlSeries[j]].extraDatas!.zIndex! + 1\r\n              this.updateExtraDatas(nextHighControlSeries[j], 'zIndex', updateIndex)\r\n            }\r\n            nextHighControlSeries = []\r\n          } else {\r\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\r\n            if (swapTabIndex <= userData[container].controls.length /* && swapTabIndex > 0 */) {\r\n              const index = userData[container].controls.findIndex(\r\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\r\n              )\r\n              this.updateExtraDatas(selControl, 'zIndex', swapTabIndex)\r\n              this.updateExtraDatas(nextSelectedControl, 'zIndex', tempZIndex)\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  sendBackward () {\r\n    const userData = this.userformData[this.userFormId]\r\n    const highProrControl = []\r\n    const lowProrControl = []\r\n    const container = this.getContainerList(this.getSelectedControlsDatas![0])[0]\r\n    const containerControls = this.userformData[this.userFormId][container].controls\r\n    for (const index in containerControls) {\r\n      const cntrlData = this.userformData[this.userFormId][containerControls[index]]\r\n      if (cntrlData.type === 'MultiPage' || cntrlData.type === 'Frame' || cntrlData.type === 'ListBox') {\r\n        highProrControl.push(containerControls[index])\r\n      } else {\r\n        lowProrControl.push(containerControls[index])\r\n      }\r\n    }\r\n    let nextSelctedSeries: string[] = []\r\n    let nextHighControlSeries: string[] = []\r\n    const getSelControl = [...this.getSelectedControlsDatas!]\r\n    getSelControl.sort((a, b) => {\r\n      return userData[a].extraDatas!.zIndex! - userData[b].extraDatas!.zIndex!\r\n    })\r\n    for (const selControl of getSelControl) {\r\n      const type = userData[selControl].type\r\n      const tempZIndex = userData[selControl].extraDatas!.zIndex!\r\n      const controlIndex = Object.keys(userData).findIndex((val: string, index: number) => {\r\n        return 'zIndex' in userData[val].extraDatas! && (userData[val].extraDatas!.zIndex === tempZIndex - 1)\r\n      })\r\n      const nextSelectedControl = controlIndex !== -1 ? Object.keys(userData)[controlIndex] : ''\r\n      const nextControlType = userData[nextSelectedControl].type\r\n      if (nextSelectedControl !== '' && !highProrControl.includes(selControl)) {\r\n        if (getSelControl!.includes(nextSelectedControl)) {\r\n          if (!nextSelctedSeries.includes(selControl)) {\r\n            nextSelctedSeries.push(selControl)\r\n          }\r\n          if (!nextSelctedSeries.includes(nextSelectedControl)) {\r\n            nextSelctedSeries.push(nextSelectedControl)\r\n          }\r\n        } else {\r\n          if (Object.keys(nextSelctedSeries).length !== 0) {\r\n            const tempExchageIndex = userData[nextSelctedSeries[0]].extraDatas!.zIndex!\r\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\r\n            if (swapTabIndex <= userData[container].controls.length && swapTabIndex > 0) {\r\n              const index = userData[container].controls.findIndex(\r\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\r\n              )\r\n              this.updateExtraDatas(userData[container].controls[index], 'zIndex', tempExchageIndex)\r\n              this.updateExtraDatas(nextSelctedSeries[0], 'zIndex', (nextSelctedSeries!.length + 1) - swapTabIndex)\r\n            }\r\n            for (let j = 1; j < nextSelctedSeries.length; j++) {\r\n              const updateIndex = userData[nextSelctedSeries[j]].extraDatas!.zIndex! - 1\r\n              this.updateExtraDatas(nextSelctedSeries[j], 'zIndex', updateIndex)\r\n            }\r\n            nextSelctedSeries = []\r\n          } else {\r\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\r\n            if (swapTabIndex <= userData[container].controls.length && swapTabIndex > 0) {\r\n              const index = userData[container].controls.findIndex(\r\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\r\n              )\r\n              this.updateExtraDatas(selControl, 'zIndex', swapTabIndex)\r\n              this.updateExtraDatas(nextSelectedControl, 'zIndex', tempZIndex)\r\n            }\r\n          }\r\n        }\r\n      } else if (!lowProrControl.includes(nextSelectedControl) && (type === 'Frame' || type === 'MultiPage' || type === 'ListBox')) {\r\n        if (getSelControl!.includes(nextSelectedControl)) {\r\n          if (!nextHighControlSeries.includes(selControl)) {\r\n            nextHighControlSeries.push(selControl)\r\n          }\r\n          if (!nextHighControlSeries.includes(nextSelectedControl)) {\r\n            nextHighControlSeries.push(nextSelectedControl)\r\n          }\r\n        } else {\r\n          if (Object.keys(nextHighControlSeries).length !== 0) {\r\n            const tempExchageIndex = userData[nextHighControlSeries[0]].extraDatas!.zIndex!\r\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\r\n            if (swapTabIndex <= userData[container].controls.length) {\r\n              const index = userData[container].controls.findIndex(\r\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\r\n              )\r\n              this.updateExtraDatas(userData[container].controls[index], 'zIndex', tempExchageIndex)\r\n              this.updateExtraDatas(nextHighControlSeries[0], 'zIndex', (nextHighControlSeries!.length + 1) - swapTabIndex)\r\n            }\r\n            for (let j = 1; j < nextHighControlSeries.length; j++) {\r\n              const updateIndex = userData[nextHighControlSeries[j]].extraDatas!.zIndex! - 1\r\n              this.updateExtraDatas(nextHighControlSeries[j], 'zIndex', updateIndex)\r\n            }\r\n            nextHighControlSeries = []\r\n          } else {\r\n            const swapTabIndex = userData[nextSelectedControl].extraDatas!.zIndex!\r\n            if (swapTabIndex <= userData[container].controls.length && swapTabIndex > 0) {\r\n              const index = userData[container].controls.findIndex(\r\n                (val) => userData[val].extraDatas!.zIndex === swapTabIndex\r\n              )\r\n              this.updateExtraDatas(selControl, 'zIndex', swapTabIndex)\r\n              this.updateExtraDatas(nextSelectedControl, 'zIndex', tempZIndex)\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.body {\r\n  width: 100%;\r\n  box-shadow: box-sizing;\r\n}\r\n.tablink {\r\n  background-color: rgba(240, 234, 234, 0.877);\r\n  color: rgb(17, 17, 17);\r\n  padding: 5px;\r\n  cursor: pointer;\r\n  font-size: 12px;\r\n  border: none;\r\n  float: left;\r\n}\r\n.sub-menu-li {\r\n  display: grid;\r\n  grid-template-columns: 25px 1fr;\r\n}\r\n.thirdrow {\r\n  margin-top: 5px;\r\n}\r\n.tablink:hover {\r\n  background-color: #4dbce0;\r\n}\r\n\r\n.firstrow {\r\n  font-size: 15px;\r\n}\r\n.secondrow {\r\n  border: 1px transparent;\r\n  padding: 5px;\r\n  background-color: rgba(240, 234, 234, 0.877);\r\n  height: 20px;\r\n  display: flex;\r\n}\r\n.buttons {\r\n  float: right;\r\n  line-height: normal;\r\n}\r\n.min .max .close1 {\r\n  width: 40px;\r\n}\r\n.close1:hover {\r\n  background-color: red;\r\n}\r\n.fa {\r\n  margin-left: 3px;\r\n  margin-right: 3px;\r\n}\r\n.padding {\r\n  padding-top: 3px;\r\n}\r\n.material-icons {\r\n  size: 15px;\r\n}\r\n.material-float {\r\n  float: left;\r\n}\r\ni:hover {\r\n  background-color: #4dbce0;\r\n  cursor: default;\r\n}\r\n\r\n.ui-titlebar {\r\n  display: flex;\r\n  width: 100%;\r\n  height: 32px;\r\n  background: #0072c6;\r\n  user-select: none;\r\n  cursor: default;\r\n}\r\n.ui-titleicon {\r\n  flex-grow: 1;\r\n  max-width: 32px;\r\n  max-height: 32px;\r\n}\r\n.ui-titletext {\r\n  flex-grow: 2;\r\n  max-height: 32px;\r\n  width: auto;\r\n  font: 12px/32px \"Segoe UI\", Arial, sans-serif;\r\n  color: #fff;\r\n  text-indent: 10px;\r\n}\r\n.ui-titlecontrols {\r\n  max-width: 144px;\r\n  max-height: 32px;\r\n  flex-grow: 1;\r\n}\r\n.ui-btn {\r\n  margin: 0;\r\n  width: 48px;\r\n  height: 32px;\r\n  border: 0;\r\n  outline: 0;\r\n  background: transparent;\r\n}\r\n.ui-btn:hover {\r\n  background: rgba(255, 255, 255, 0.1);\r\n}\r\n.ui-btn.close:hover {\r\n  background: #e81123;\r\n}\r\nhr {\r\n  margin: 0px;\r\n}\r\n.ui-btn svg path,\r\n.ui-btn svg rect,\r\n.ui-btn svg polygon {\r\n  fill: #fff;\r\n}\r\n.ui-btn svg {\r\n  width: 10px;\r\n  height: 10px;\r\n}\r\n\r\n.dropdown-content {\r\n  display: none;\r\n  position: absolute;\r\n  background-color: #f1f1f1;\r\n  min-width: 160px;\r\n  box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);\r\n  z-index: 1;\r\n}\r\n\r\n.dropdown-content a {\r\n  color: black;\r\n  padding: 12px 16px;\r\n  text-decoration: none;\r\n  display: block;\r\n}\r\n\r\n.dropdown-content a:hover {\r\n  background-color: #ddd;\r\n}\r\n\r\n.tablink:hover .dropdown-content {\r\n  display: block;\r\n}\r\n.dropdown {\r\n  position: relative;\r\n  display: inline-block;\r\n}\r\n\r\n.commandbutton-element {\r\n  border: 1px solid gray;\r\n  border-radius: 3px;\r\n  background-color: white;\r\n  min-width: 50px;\r\n  max-width: 112px;\r\n  width: fit-content;\r\n  height: fit-content;\r\n  min-height: 20px;\r\n  padding: 0px 5px 0px 5px;\r\n  overflow: hidden;\r\n}\r\n.dialog-action-button {\r\n  background-color: #f2eded;\r\n  width: 79px;\r\n  height: 35px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  border: 1px solid gray;\r\n  border-radius: 3px;\r\n  overflow: hidden;\r\n}\r\n.btn-style {\r\n  border: 1px solid gray;\r\n  border-radius: 5px;\r\n  background-color: white;\r\n  min-width: 50px;\r\n  max-width: 112px;\r\n  width: fit-content;\r\n  height: fit-content;\r\n  min-height: 20px;\r\n  padding: 0px 5px 0px 5px;\r\n  overflow: hidden;\r\n  top: -3px;\r\n  position: relative;\r\n}\r\n:focus {\r\n  outline: none;\r\n}\r\n.menu-bar {\r\n  background: rgba(240, 234, 234);\r\n  line-height: 24px;\r\n  cursor: context-menu;\r\n  margin-left: 3px;\r\n}\r\n\r\n.menu-bar ul {\r\n  display: inline-flex;\r\n  list-style: none;\r\n  margin: 0px;\r\n}\r\n\r\n.menu-bar ul > li {\r\n  list-style: none;\r\n  text-align: center;\r\n  padding: 0px 6px;\r\n  font-size: 12px;\r\n}\r\n\r\n.menu-bar ul li a {\r\n  text-decoration: none;\r\n  margin-left: -15px;\r\n}\r\n.menu-bar ul li a:visited {\r\n  color: black;\r\n}\r\n.menu-bar ul {\r\n  background-color: rgba(240, 234, 234);\r\n  padding: 0px;\r\n}\r\n\r\n.active,\r\n.menu-bar ul li:hover {\r\n  background-color: white;\r\n  z-index: 10;\r\n}\r\n\r\n.sub-menu-1 {\r\n  display: none;\r\n  box-shadow: 2px 2px rgba(0, 0, 0, 0.2);\r\n}\r\n\r\n.menu-bar ul li:hover .sub-menu-1 {\r\n  display: block;\r\n  position: absolute;\r\n}\r\n\r\n.sub-menu-1 ul li {\r\n  text-align: left;\r\n  border: 0.1px solid white;\r\n  display: grid;\r\n  grid-template-columns: 30px 150px;\r\n  word-wrap: none;\r\n}\r\n\r\n.sub-menu-1 ul {\r\n  display: grid;\r\n  grid-template-columns: 1fr;\r\n  background-color: white;\r\n  width: 200px;\r\n  padding: 0px;\r\n  margin-left: -6px;\r\n}\r\n\r\n.sub-menu-1 ul li:hover {\r\n  background-color: rgb(155, 215, 255);\r\n  border-color: rgb(0, 153, 255);\r\n}\r\n</style>\r\n"]}]}