{"remainingRequest":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/mobiotics/Projects/hancom/FormcontrolLatest/src/FormDesigner/components/pages/FDPage/index.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/src/FormDesigner/components/pages/FDPage/index.vue","mtime":1611592672000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKDQppbXBvcnQgeyBDb21wb25lbnQsIFJlZiwgVnVlIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcicNCmltcG9ydCBUb29sQm94IGZyb20gJ0AvRm9ybURlc2lnbmVyL2NvbXBvbmVudHMvb3JnYW5pc21zL0ZEVG9vbEJveC9pbmRleC52dWUnDQppbXBvcnQgUmVzaXplVXNlckZvcm0gZnJvbSAnQC9Gb3JtRGVzaWduZXIvY29tcG9uZW50cy9vcmdhbmlzbXMvRkRSZXNpemVVc2VyRm9ybS9pbmRleC52dWUnDQppbXBvcnQgUHJvcGVydGllc0xpc3QgZnJvbSAnQC9Gb3JtRGVzaWduZXIvY29tcG9uZW50cy9vcmdhbmlzbXMvRkRQcm9wZXJ0eUxpc3QvaW5kZXgudnVlJw0KaW1wb3J0IFRyZWVCcm93c2VyIGZyb20gJ0AvRm9ybURlc2lnbmVyL2NvbXBvbmVudHMvb3JnYW5pc21zL0ZEVHJlZUJyb3dzZXIvaW5kZXgudnVlJw0KaW1wb3J0IEhlYWRlciBmcm9tICdAL0Zvcm1EZXNpZ25lci9jb21wb25lbnRzL29yZ2FuaXNtcy9GREhlYWRlci9pbmRleC52dWUnDQppbXBvcnQgVXNlcmZvcm1UYWJPcmRlciBmcm9tICdAL0Zvcm1EZXNpZ25lci9jb21wb25lbnRzL21vbGVjdWxlcy9GRFVzZXJmb3JtVGFiT3JkZXIvaW5kZXgudnVlJw0KaW1wb3J0IFRhYlN0cmlwVGFiT3JkZXIgZnJvbSAnQC9Gb3JtRGVzaWduZXIvY29tcG9uZW50cy9vcmdhbmlzbXMvRkRUYWJTdHJpcFRhYk9yZGVyTW9kYWwvaW5kZXgudnVlJw0KaW1wb3J0IFJlbmFtZU11bHRpUGFnZURpYWxvZyBmcm9tICdAL0Zvcm1EZXNpZ25lci9jb21wb25lbnRzL29yZ2FuaXNtcy9GRFJlbmFtZU11bHRpUGFnZURpYWxvZy9pbmRleC52dWUnDQppbXBvcnQgRXJyb3JQb3B1cCBmcm9tICdAL0Zvcm1EZXNpZ25lci9jb21wb25lbnRzL2F0b21zL0ZERXJyb3JQb3B1cC9pbmRleC52dWUnDQppbXBvcnQgQ29udGV4dE1lbnUgZnJvbSAnQC9Gb3JtRGVzaWduZXIvY29tcG9uZW50cy9hdG9tcy9GRENvbnRleHRNZW51L2luZGV4LnZ1ZScNCg0KaW1wb3J0IFZpZXdDb2RlTG9nbyBmcm9tICcuLi8uLi8uLi8uLi9hc3NldHMvdmlldy1jb2RlLnN2ZycNCmltcG9ydCBWaWV3T2JqZWN0IGZyb20gJy4uLy4uLy4uLy4uL2Fzc2V0cy92aWV3LW9iamVjdC5zdmcnDQppbXBvcnQgQ2xvc2VGb2xkZXJMb2dvIGZyb20gJy4uLy4uLy4uLy4uL2Fzc2V0cy9jbG9zZS1mb2xkZXIuc3ZnJw0KaW1wb3J0IHsgU3RhdGUsIEFjdGlvbiB9IGZyb20gJ3Z1ZXgtY2xhc3MnDQppbXBvcnQgeyBQYXlsb2FkIH0gZnJvbSAndnVleCcNCmltcG9ydCB7DQogIEl1cGRhdGVDb250cm9sLA0KICBJZGVsZXRlQ29udHJvbCwNCiAgSXVwZGF0ZUNvbnRyb2xFeHRyYURhdGEsDQogIElzZWxlY3RDb250cm9sDQp9IGZyb20gJy4uLy4uLy4uLy4uL3N0b3JlTW9kdWxlcy9mZC9hY3Rpb25zJw0KaW1wb3J0IHsgRXZlbnRCdXMgfSBmcm9tICdAL0Zvcm1EZXNpZ25lci9ldmVudC1idXMnDQppbXBvcnQgRkRDb21tb25NZXRob2QgZnJvbSAnQC9hcGkvYWJzdHJhY3QvRm9ybURlc2lnbmVyL0ZEQ29tbW9uTWV0aG9kJw0KaW1wb3J0IHsgdXNlcmZvcm1Db250ZXh0TWVudSB9IGZyb20gJ0AvRm9ybURlc2lnbmVyL21vZGVscy91c2VyZm9ybUNvbnRleHRNZW51RGF0YScNCmltcG9ydCB7IGNvbnRyb2xDb250ZXh0TWVudSB9IGZyb20gJ0AvRm9ybURlc2lnbmVyL21vZGVscy9jb250cm9sQ29udGV4dE1lbnVEYXRhJw0KaW1wb3J0IHsgdGFic0NvbnRleHRNZW51IH0gZnJvbSAnLi4vLi4vLi4vbW9kZWxzL3RhYnNDb250ZXh0TWVudScNCmludGVyZmFjZSBJRGlhbG9nDQp7DQogIGRpYWxvZ1R5cGU6IHN0cmluZw0KICB2YWw6IGJvb2xlYW4NCn0NCkBDb21wb25lbnQoew0KICBuYW1lOiAnRkRQYWdlJywNCiAgY29tcG9uZW50czogew0KICAgIFRvb2xCb3gsDQogICAgUmVzaXplVXNlckZvcm0sDQogICAgVHJlZUJyb3dzZXIsDQogICAgUHJvcGVydGllc0xpc3QsDQogICAgSGVhZGVyLA0KICAgIFZpZXdDb2RlTG9nbywNCiAgICBWaWV3T2JqZWN0LA0KICAgIENsb3NlRm9sZGVyTG9nbywNCiAgICBVc2VyZm9ybVRhYk9yZGVyLA0KICAgIFRhYlN0cmlwVGFiT3JkZXIsDQogICAgUmVuYW1lTXVsdGlQYWdlRGlhbG9nLA0KICAgIEVycm9yUG9wdXAsDQogICAgQ29udGV4dE1lbnUNCiAgfQ0KfSkNCmV4cG9ydCBkZWZhdWx0IGNsYXNzIEZEUGFnZSBleHRlbmRzIFZ1ZSB7DQogIEBTdGF0ZSgoc3RhdGUpID0+IHN0YXRlLmZkLnVzZXJmb3JtRGF0YSkgdXNlcmZvcm1EYXRhITogdXNlcmZvcm1EYXRhOw0KICBAU3RhdGUoKHN0YXRlKSA9PiBzdGF0ZS5mZC5jb3BpZWRDb250cm9sKSBjb3BpZWRDb250cm9sITogdXNlcmZvcm1EYXRhOw0KICBAUmVmKCdjb250ZXh0bWVudScpIGNvbnRleHRtZW51OiBIVE1MRGl2RWxlbWVudA0KICBAUmVmKCdtYWluQ29uZXh0TWVudScpIG1haW5Db25leHRNZW51OiBDb250ZXh0TWVudQ0KICBAUmVmKCdyZW5hbWVEaWFsb2dSZWYnKSByZW5hbWVEaWFsb2dSZWY6IFJlbmFtZU11bHRpUGFnZURpYWxvZw0KICBAUmVmKCd1c2VyZm9ybVRhYk9yZGVyUmVmJykgdXNlcmZvcm1UYWJPcmRlclJlZjogVXNlcmZvcm1UYWJPcmRlcg0KICBAUmVmKCd0YWJzdHJpcFRhYk9yZGVyUmVmJykgdGFic3RyaXBUYWJPcmRlclJlZjogVGFiU3RyaXBUYWJPcmRlcg0KICBjb250YWluZXJJZDogc3RyaW5nID0gJycNCiAgY29udHJvbElkOiBzdHJpbmcgPSAnJw0KICBjb3BpZWRUZXh0ID0gJycNCiAgbGFiZWxBcmVhOiBhbnkgPSB7fQ0KICB0ZXh0TWVudTogYm9vbGVhbiA9IGZhbHNlDQoNCiAgdmVydGljYWw6IHN0cmluZyA9ICd2ZXJ0aWNhbCc7DQogIHJlbmFtZURpYWxvZzogYm9vbGVhbiA9IGZhbHNlDQogIHRhYnN0cmlwVGFiT3JkZXI6IGJvb2xlYW4gPSBmYWxzZQ0KICBkaXNwbGF5OiBzdHJpbmcgPSAnJzsNCiAgaGlkZVNob3dUcmVlOiBib29sZWFuID0gZmFsc2U7DQogIHZpZXdDb250ZXh0TWVudTogYm9vbGVhbiA9IGZhbHNlDQogIGhpZGVTaG93VHJlZUJyb3dzZXIgKCkgew0KICAgIHRoaXMuaGlkZVNob3dUcmVlID0gdHJ1ZQ0KICB9DQogIHVzZXJGb3JtSWQ6IHN0cmluZyA9ICdJRF9VU0VSRk9STTEnOw0KICBAU3RhdGUoKHN0YXRlOiByb290U3RhdGUpID0+IHN0YXRlLmZkLnNlbGVjdGVkQ29udHJvbHMpDQogIHNlbGVjdGVkQ29udHJvbHMhOiBmZFN0YXRlWydzZWxlY3RlZENvbnRyb2xzJ107DQogIEBBY3Rpb24oJ2ZkL3VwZGF0ZUNvbnRyb2wnKSB1cGRhdGVDb250cm9sITogKHBheWxvYWQ6IEl1cGRhdGVDb250cm9sKSA9PiB2b2lkOw0KICBAQWN0aW9uKCdmZC91cGRhdGVDb250cm9sRXh0cmFEYXRhJykgdXBkYXRlQ29udHJvbEV4dHJhRGF0YSE6IChwYXlsb2FkOiBJdXBkYXRlQ29udHJvbEV4dHJhRGF0YSkgPT4gdm9pZDsNCiAgQEFjdGlvbignZmQvZGVsZXRlQ29udHJvbCcpIGRlbGV0ZUNvbnRyb2whOiAocGF5bG9hZDogSWRlbGV0ZUNvbnRyb2wpID0+IHZvaWQ7DQogIEBBY3Rpb24oJ2ZkL3NlbGVjdENvbnRyb2wnKSBzZWxlY3RDb250cm9sITogKHBheWxvYWQ6IElzZWxlY3RDb250cm9sKSA9PiB2b2lkOw0KICB0ZXN0UHJvcE5hbWU6IGtleW9mIGNvbnRyb2xQcm9wZXJ0aWVzID0gJ1dpZHRoJzsNCiAgdGVzdFByb3BWYWx1ZSA9ICcxMDAnOw0KICB0b3AgPSAwOw0KICBsZWZ0ID0gMDsNCiAgdXNlcmZvcm1UYWJPcmRlcjogYm9vbGVhbiA9IGZhbHNlDQogIGNvbnRleHRNZW51VHlwZTogYm9vbGVhbiA9IGZhbHNlOw0KICB2aWV3TWVudTogYm9vbGVhbiA9IGZhbHNlDQogIGNvbnRyb2xDb250ZXh0TWVudTogQXJyYXk8SWNvbnRleHRNZW51PiA9IGNvbnRyb2xDb250ZXh0TWVudTsNCiAgdXNlcmZvcm1Db250ZXh0TWVudTogQXJyYXk8SWNvbnRleHRNZW51PiA9IHVzZXJmb3JtQ29udGV4dE1lbnU7DQogIGNvbnRleHRNZW51VmFsdWU6IEFycmF5PEljb250ZXh0TWVudT4gPSB0YWJzQ29udGV4dE1lbnU7DQogIGNvbnRleHRNZW51SGVpZ2h0OiBudW1iZXIgPSA4NA0KICBncm91cFN0eWxlQXJyYXk6IEFycmF5PElHcm91cFN0eWxlPiA9IFtdDQogIHVwZGF0ZWRWYWx1ZTogbnVtYmVyID0gMA0KICB0YWJEYXRhOiBjb250cm9sRGF0YQ0KICB0YWJzdHJpcENvbnRleHRNZW51OiBib29sZWFuID0gZmFsc2UNCg0KICBjbG9zZU1lbnUgKGV2ZW50OiBNb3VzZUV2ZW50KSB7DQogICAgdGhpcy50ZXh0TWVudSA9IGZhbHNlDQogICAgdGhpcy52aWV3TWVudSA9IGZhbHNlDQogICAgRXZlbnRCdXMuJGVtaXQoJ2ZvY3VzVXNlckZvcm0nKQ0KICB9DQogIG9uRHJhZyAoKSB7DQogICAgKHRoaXMuJGVsIGFzIEhUTUxEaXZFbGVtZW50KS5mb2N1cygpDQogIH0NCiAgY3JlYXRlZCAoKSB7DQogICAgdGhpcy50YWJEYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVt0aGlzLnVzZXJGb3JtSWRdDQogICAgRXZlbnRCdXMuJG9uKCdjb250ZXh0TWVudURpc3BsYXknLCAoZXZlbnQ6IE1vdXNlRXZlbnQsIGNvbnRhaW5lcklkOiBzdHJpbmcsIGNvbnRyb2xJZDogc3RyaW5nLCB0eXBlOiBzdHJpbmcsIG1vZGU6IGJvb2xlYW4pID0+IHsNCiAgICAgIHRoaXMuY29udGFpbmVySWQgPSBjb250YWluZXJJZA0KICAgICAgdGhpcy5jb250cm9sSWQgPSBjb250cm9sSWQNCiAgICAgIHRoaXMub3Blbk1lbnUoZXZlbnQsIGNvbnRhaW5lcklkLCBjb250cm9sSWQsIHR5cGUsIG1vZGUpDQogICAgfSkNCiAgICBFdmVudEJ1cy4kb24oJ2dyb3VwQXJyYXknLCAoYXJyYXk6IEFycmF5PElHcm91cFN0eWxlPikgPT4gew0KICAgICAgdGhpcy5ncm91cFN0eWxlQXJyYXkgPSBbLi4uYXJyYXldDQogICAgfSkNCiAgICBFdmVudEJ1cy4kb24oJ2VkaXRNb2RlQ29udGV4dE1lbnUnLCAoZTpNb3VzZUV2ZW50LCBjb250cm9sSWQ6IHN0cmluZywgZGF0YTogY29udHJvbERhdGEsIG1vZGU6IGJvb2xlYW4sIHNlbGVjdGVkOiBudW1iZXIpID0+IHsNCiAgICAgIHRoaXMuY29udHJvbElkID0gY29udHJvbElkDQogICAgICB0aGlzLnRhYkRhdGEgPSBkYXRhDQogICAgICB0aGlzLnVwZGF0ZWRWYWx1ZSA9IHNlbGVjdGVkDQogICAgICB0aGlzLnRhYnN0cmlwQ29udGV4dE1lbnUgPSB0cnVlDQogICAgICB0aGlzLmVkaXRNb2RlQ29udGV4dE1lbnUoZSwgbW9kZSwgZGF0YSkNCiAgICB9KQ0KICAgIEV2ZW50QnVzLiRvbignb3BlblRleHRDb250ZXh0TWVudScsIChldmVudDogTW91c2VFdmVudCwgY29udHJvbElkOiBzdHJpbmcpID0+IHsNCiAgICAgIHRoaXMubGFiZWxBcmVhID0gKGV2ZW50LnRhcmdldCBhcyBIVE1MU3BhbkVsZW1lbnQpDQogICAgICB0aGlzLmNvbnRyb2xJZCA9IGNvbnRyb2xJZA0KICAgICAgdGhpcy5vcGVuVGV4dENvbnRleHRNZW51KGV2ZW50KQ0KICAgIH0pDQogICAgRXZlbnRCdXMuJG9uKCdoYW5kbGVLZXlEb3duJywgKGV2ZW50OiBLZXlib2FyZEV2ZW50LCBjb250YWluZXJJZDogc3RyaW5nKSA9PiB7DQogICAgICB0aGlzLmNvbnRhaW5lcklkID0gY29udGFpbmVySWQNCiAgICAgIHRoaXMuaGFuZGxlS2V5RG93bihldmVudCkNCiAgICB9KQ0KICB9DQogIGRlc3Ryb3llZCAoKSB7DQogICAgRXZlbnRCdXMuJG9mZignY29udGV4dE1lbnVEaXNwbGF5JykNCiAgICBFdmVudEJ1cy4kb2ZmKCdncm91cEFycmF5JykNCiAgICBFdmVudEJ1cy4kb2ZmKCdlZGl0TW9kZUNvbnRleHRNZW51JykNCiAgICBFdmVudEJ1cy4kb2ZmKCdvcGVuVGV4dENvbnRleHRNZW51JykNCiAgICBFdmVudEJ1cy4kb2ZmKCdoYW5kbGVLZXlEb3duJykNCiAgfQ0KDQogIGVkaXRNb2RlQ29udGV4dE1lbnUgKGU6IE1vdXNlRXZlbnQsIG1vZGU6IGJvb2xlYW4sIGRhdGE6IGNvbnRyb2xEYXRhKSB7DQogICAgaWYgKG1vZGUpIHsNCiAgICAgIGUucHJldmVudERlZmF1bHQoKQ0KICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKQ0KICAgICAgdGhpcy50b3AgPSBlLnkNCiAgICAgIHRoaXMubGVmdCA9IGUueA0KICAgICAgdGhpcy5jb250ZXh0TWVudVZhbHVlID0gdGFic0NvbnRleHRNZW51DQogICAgICB0aGlzLmNvbnRleHRNZW51SGVpZ2h0ID0gODQNCiAgICAgIGlmIChkYXRhLnR5cGUgPT09ICdUYWJTdHJpcCcpIHsNCiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgdGhpcy5jb250ZXh0TWVudVZhbHVlKSB7DQogICAgICAgICAgaWYgKHZhbC5pZCA9PT0gJ0lEX0RFTEVURVBBR0UnIHx8IHZhbC5pZCA9PT0gJ0lEX1JFTkFNRScpIHsNCiAgICAgICAgICAgIHZhbC5kaXNhYmxlZCA9IGRhdGEuZXh0cmFEYXRhcyEuVGFicyEubGVuZ3RoID09PSAwDQogICAgICAgICAgfSBlbHNlIGlmICh2YWwuaWQgPT09ICdJRF9NT1ZFJykgew0KICAgICAgICAgICAgdmFsLmRpc2FibGVkID0gZGF0YS5leHRyYURhdGFzIS5UYWJzIS5sZW5ndGggPD0gMQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgaWYgKGRhdGEudHlwZSA9PT0gJ011bHRpUGFnZScpIHsNCiAgICAgICAgZm9yIChjb25zdCB2YWwgb2YgdGhpcy5jb250ZXh0TWVudVZhbHVlKSB7DQogICAgICAgICAgaWYgKHZhbC5pZCA9PT0gJ0lEX0RFTEVURVBBR0UnIHx8IHZhbC5pZCA9PT0gJ0lEX1JFTkFNRScpIHsNCiAgICAgICAgICAgIHZhbC5kaXNhYmxlZCA9IGRhdGEuY29udHJvbHMubGVuZ3RoID09PSAwDQogICAgICAgICAgfSBlbHNlIGlmICh2YWwuaWQgPT09ICdJRF9NT1ZFJykgew0KICAgICAgICAgICAgdmFsLmRpc2FibGVkID0gZGF0YS5jb250cm9scy5sZW5ndGggPD0gMQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgICAgdGhpcy52aWV3TWVudSA9IHRydWUNCiAgICAgIFZ1ZS5uZXh0VGljaygoKSA9PiB0aGlzLmNvbnRleHRtZW51LmZvY3VzKCkpDQogICAgfSBlbHNlIHsNCiAgICAgIHJldHVybiB1bmRlZmluZWQNCiAgICB9DQogIH0NCg0KICBjbGlja1VwZGF0ZSAoKSB7DQogICAgY29uc3Qgc2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5zZWxlY3RlZA0KICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2VsZWN0ZWQubGVuZ3RoOyBpKyspIHsNCiAgICAgIHRoaXMudXBkYXRlQ29udHJvbCh7DQogICAgICAgIHVzZXJGb3JtSWQ6IHRoaXMudXNlckZvcm1JZCwNCiAgICAgICAgY29udHJvbElkOiBzZWxlY3RlZFtpXSwNCiAgICAgICAgcHJvcGVydHlOYW1lOiB0aGlzLnRlc3RQcm9wTmFtZSwNCiAgICAgICAgdmFsdWU6IHRoaXMudGVzdFByb3BWYWx1ZQ0KICAgICAgfSkNCiAgICB9DQogIH0NCiAgY2xpY2tEZWxldGUgKCkgew0KICAgIGNvbnN0IHNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uc2VsZWN0ZWQNCiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNlbGVjdGVkLmxlbmd0aDsgaSsrKSB7DQogICAgICB0aGlzLmRlbGV0ZUNvbnRyb2woew0KICAgICAgICB1c2VyRm9ybUlkOiB0aGlzLnVzZXJGb3JtSWQsDQogICAgICAgIHBhcmVudElkOiB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5jb250YWluZXJbMF0sDQogICAgICAgIHRhcmdldElkOiBzZWxlY3RlZFtpXQ0KICAgICAgfSkNCiAgICB9DQogIH0NCiAgc2V0VXNlckZvcm0gKHVzZXJmb3JtSWQ6IHN0cmluZykgew0KICAgIHRoaXMudXNlckZvcm1JZCA9IHVzZXJmb3JtSWQNCiAgICB0aGlzLnNlbGVjdENvbnRyb2woew0KICAgICAgdXNlckZvcm1JZDogdGhpcy51c2VyRm9ybUlkLA0KICAgICAgc2VsZWN0OiB7DQogICAgICAgIGNvbnRhaW5lcjogW3RoaXMudXNlckZvcm1JZF0sDQogICAgICAgIHNlbGVjdGVkOiBbdGhpcy51c2VyRm9ybUlkXQ0KICAgICAgfQ0KICAgIH0pDQogIH0NCiAgbW91bnRlZCAoKSB7DQogICAgdGhpcy5zZXRVc2VyRm9ybSh0aGlzLnVzZXJGb3JtSWQpDQogIH0NCiAgZ2V0IGNvbnRleHRNZW51U3R5bGUgKCkgew0KICAgIGNvbnN0IGNvbnRleHRNZW51VG9wID0gd2luZG93LmlubmVySGVpZ2h0ID4gKHRoaXMudG9wICsgdGhpcy5jb250ZXh0TWVudUhlaWdodCkgPyB0aGlzLnRvcCA6IHRoaXMudG9wIC0gdGhpcy5jb250ZXh0TWVudUhlaWdodA0KICAgIHJldHVybiB7DQogICAgICB0b3A6IGAke2NvbnRleHRNZW51VG9wfXB4YCwNCiAgICAgIGxlZnQ6IGAke3RoaXMubGVmdH1weGAsDQogICAgICBkaXNwbGF5OiB0aGlzLnZpZXdNZW51ID8gJ2Jsb2NrJyA6ICdub25lJw0KICAgIH0NCiAgfQ0KICBvcGVuTWVudSAoZTogTW91c2VFdmVudCwgcGFyZW50SUQ6IHN0cmluZywgY29udHJvbElEOiBzdHJpbmcsIHR5cGU6IHN0cmluZywgbW9kZTogYm9vbGVhbikgew0KICAgIGUucHJldmVudERlZmF1bHQoKQ0KICAgIGNvbnN0IGlkID0gKGUudGFyZ2V0ISBhcyBIVE1MRGl2RWxlbWVudCkuaWQgPyAoZS50YXJnZXQhIGFzIEhUTUxEaXZFbGVtZW50KS5pZCA6ICcnDQogICAgY29uc3Qgc2VsZWN0ZWQgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5zZWxlY3RlZA0KICAgIGNvbnN0IHVzZXJEYXRhID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXQ0KICAgIGxldCBncm91cElkID0gJycNCiAgICBpZiAoIXNlbGVjdGVkLmluY2x1ZGVzKGNvbnRyb2xJRCkpIHsNCiAgICAgIGdyb3VwSWQgPSB1c2VyRGF0YVtjb250cm9sSURdLnR5cGUgPT09ICdNdWx0aVBhZ2UnID8gc2VsZWN0ZWRbMF0gOiBjb250cm9sSUQNCiAgICAgIGlmICgnR3JvdXBJRCcgaW4gdXNlckRhdGFbY29udHJvbElEXS5wcm9wZXJ0aWVzICYmIHVzZXJEYXRhW2NvbnRyb2xJRF0ucHJvcGVydGllcy5Hcm91cElEICE9PSAnJykgew0KICAgICAgICBncm91cElkID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtjb250cm9sSURdLnByb3BlcnRpZXMuR3JvdXBJRCENCiAgICAgIH0NCiAgICAgIGlmIChncm91cElkICYmICFzZWxlY3RlZC5pbmNsdWRlcyhncm91cElkKSkgew0KICAgICAgICB0aGlzLnNlbGVjdENvbnRyb2woew0KICAgICAgICAgIHVzZXJGb3JtSWQ6IHRoaXMudXNlckZvcm1JZCwNCiAgICAgICAgICBzZWxlY3Q6IHsgY29udGFpbmVyOiB0aGlzLmdldENvbnRhaW5lckxpc3QoZ3JvdXBJZCksIHNlbGVjdGVkOiBbZ3JvdXBJZF0gfQ0KICAgICAgICB9KQ0KICAgICAgfQ0KICAgIH0NCiAgICBjb25zdCBjb250cm9sVHlwZSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bY29udHJvbElEXS50eXBlDQogICAgY29uc3QgY29udGFpbmVyVHlwZSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1bdGhpcy5jb250YWluZXJJZF0udHlwZQ0KICAgIGlmICh0eXBlID09PSAnY29udGFpbmVyJyAmJiAhZ3JvdXBJZC5zdGFydHNXaXRoKCdncm91cCcpICYmIHNlbGVjdGVkLmxlbmd0aCA8PSAxKSB7DQogICAgICB0aGlzLmNvbnRleHRNZW51VHlwZSA9IHRydWUNCiAgICB9IGVsc2Ugew0KICAgICAgdGhpcy5jb250ZXh0TWVudVR5cGUgPSBmYWxzZQ0KICAgIH0NCiAgICBjb25zdCB0YXJnZXRFbGVtZW50ID0gKGUudGFyZ2V0ISBhcyBIVE1MRGl2RWxlbWVudCkuc3R5bGUNCiAgICBjb25zdCBjb250cm9sTGVmdDogbnVtYmVyIHwgdW5kZWZpbmVkID0gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtjb250cm9sSURdLnByb3BlcnRpZXMuTGVmdCENCiAgICBjb25zdCBjb250cm9sVG9wOiBudW1iZXIgfCB1bmRlZmluZWQgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2NvbnRyb2xJRF0ucHJvcGVydGllcy5Ub3AhDQogICAgdGhpcy50b3AgPSBlLnkNCiAgICB0aGlzLmxlZnQgPSBlLngNCiAgICB0aGlzLmNvbnRleHRNZW51VmFsdWUgPSB0aGlzLmNvbnRleHRNZW51VHlwZSA/IHVzZXJmb3JtQ29udGV4dE1lbnUgOiBjb250cm9sQ29udGV4dE1lbnUNCiAgICB0aGlzLmNvbnRleHRNZW51SGVpZ2h0ID0gdGhpcy5jb250ZXh0TWVudVR5cGUgPyAxNDUgOiAyNzYNCiAgICB0aGlzLnZpZXdNZW51ID0gdHJ1ZQ0KICAgIGNvbnN0IGNvbnRyb2xMZW5ndGggPSBzZWxlY3RlZFswXS5zdGFydHNXaXRoKCdncm91cCcpID8gdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVt0aGlzLmNvbnRyb2xJZF0uY29udHJvbHMubGVuZ3RoIDogdGhpcy51c2VyZm9ybURhdGFbdGhpcy51c2VyRm9ybUlkXVtzZWxlY3RlZFswXV0uY29udHJvbHMubGVuZ3RoDQogICAgY29uc3QgY29udGV4dE1lbnVEYXRhID0gKHR5cGUgPT09ICdjb250YWluZXInICYmICFncm91cElkLnN0YXJ0c1dpdGgoJ2dyb3VwJykgJiYgc2VsZWN0ZWQubGVuZ3RoIDw9IDEpDQogICAgICA/IHRoaXMudXNlcmZvcm1Db250ZXh0TWVudQ0KICAgICAgOiB0aGlzLmNvbnRyb2xDb250ZXh0TWVudQ0KICAgIGlmICgoY29udHJvbFR5cGUgPT09ICdTcGluQnV0dG9uJyB8fCBjb250cm9sVHlwZSA9PT0gJ1Njcm9sbEJhcicgfHwgY29udHJvbFR5cGUgPT09ICdMaXN0Qm94JykgJiYgbW9kZSkgew0KICAgICAgZm9yIChjb25zdCB2YWwgb2YgY29udGV4dE1lbnVEYXRhKSB7DQogICAgICAgIGlmICh2YWwuaWQgPT09ICdJRF9PQkpFQ1RQUk9QJykgew0KICAgICAgICAgIHZhbC5kaXNhYmxlZCA9IGZhbHNlDQogICAgICAgIH0gZWxzZSBpZiAodmFsLmlkID09PSAnSURfQUxJR04nIHx8IHZhbC5pZCA9PT0gJ0lEX01BS0VTQU1FU0laRScpIHsNCiAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdmFsLnZhbHVlcy5sZW5ndGg7IGluZGV4KyspIHsNCiAgICAgICAgICAgIHZhbC52YWx1ZXNbaW5kZXhdLmRpc2FibGVkID0gdHJ1ZQ0KICAgICAgICAgIH0NCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICB2YWwuZGlzYWJsZWQgPSB0cnVlDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9IGVsc2Ugew0KICAgICAgZm9yIChjb25zdCB2YWwgb2YgY29udGV4dE1lbnVEYXRhKSB7DQogICAgICAgIGlmICh2YWwuaWQgPT09ICdJRF9TRUxFQ1RBTEwnKSB7DQogICAgICAgICAgdmFsLmRpc2FibGVkID0gY29udHJvbExlbmd0aCA9PT0gMA0KICAgICAgICB9DQogICAgICAgIGlmICh2YWwuaWQgPT09ICdJRF9ERUxFVEUnKSB7DQogICAgICAgICAgaWYgKHRoaXMuY29udGV4dE1lbnVUeXBlKSB7DQogICAgICAgICAgICB2YWwuZGlzYWJsZWQgPSAhKHNlbGVjdGVkLmxlbmd0aCA9PT0gMSAmJiAhc2VsZWN0ZWRbMF0uc3RhcnRzV2l0aCgnZ3JvdXAnKSAmJg0KICAgICAgICAgICAgKHVzZXJEYXRhW2NvbnRyb2xJRF0udHlwZSA9PT0gJ0ZyYW1lJyB8fCB1c2VyRGF0YVtzZWxlY3RlZFswXV0udHlwZSA9PT0gJ1BhZ2UnKSkNCiAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgdmFsLmRpc2FibGVkID0gIShzZWxlY3RlZC5sZW5ndGggPj0gMSkNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgaWYgKHZhbC5pZCA9PT0gJ0lEX1BBU1RFJykgew0KICAgICAgICAgIHZhbC5kaXNhYmxlZCA9IE9iamVjdC5rZXlzKHRoaXMuY29waWVkQ29udHJvbFt0aGlzLnVzZXJGb3JtSWRdKS5sZW5ndGggPT09IDENCiAgICAgICAgfQ0KICAgICAgICBpZiAodmFsLmlkID09PSAnSURfQ1VUJyB8fCB2YWwuaWQgPT09ICdJRF9DT1BZJyB8fCB2YWwuaWQgPT09ICdJRF9PQkpFQ1RQUk9QJyB8fCB2YWwuaWQgPT09ICdJRF9WSUVXQ09ERScpIHsNCiAgICAgICAgICB2YWwuZGlzYWJsZWQgPSBmYWxzZQ0KICAgICAgICB9DQogICAgICAgIGlmICh2YWwuaWQgPT09ICdJRF9HUk9VUCcgfHwgdmFsLmlkID09PSAnSURfVU5HUk9VUCcpIHsNCiAgICAgICAgICBjb25zdCBzZWxlY3RlZCA9IHRoaXMuc2VsZWN0ZWRDb250cm9sc1t0aGlzLnVzZXJGb3JtSWRdLnNlbGVjdGVkDQogICAgICAgICAgbGV0IGdyb3VwSWQ6IGJvb2xlYW4gPSBmYWxzZQ0KICAgICAgICAgIGZvciAoY29uc3Qga2V5IG9mIHNlbGVjdGVkKSB7DQogICAgICAgICAgICBpZiAoIWtleS5zdGFydHNXaXRoKCdncm91cCcpICYmICFrZXkuc3RhcnRzV2l0aCgnSURfVVNFUkZPUk0nKSkgew0KICAgICAgICAgICAgICBncm91cElkID0NCiAgICAgICAgICAgICAgICAgIHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1ba2V5XS5wcm9wZXJ0aWVzLkdyb3VwSUQgPT09ICcnDQogICAgICAgICAgICB9DQogICAgICAgICAgfQ0KICAgICAgICAgIGNvbnN0IHNlbGVjdGVkR3JvdXBBcnJheSA9IHNlbGVjdGVkLmZpbHRlcigNCiAgICAgICAgICAgICh2YWw6IHN0cmluZykgPT4gdmFsLnN0YXJ0c1dpdGgoJ2dyb3VwJykgJiYgdmFsDQogICAgICAgICAgKQ0KICAgICAgICAgIGlmICghZ3JvdXBJZCAmJiBzZWxlY3RlZEdyb3VwQXJyYXkubGVuZ3RoIDw9IDEpIHsNCiAgICAgICAgICAgIHZhbC50ZXh0ID0gJzx1PlU8L3U+bmdyb3VwJw0KICAgICAgICAgICAgdmFsLmlkID0gJ0lEX1VOR1JPVVAnDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHZhbC50ZXh0ID0gJzx1Pkc8L3U+cm91cCcNCiAgICAgICAgICAgIHZhbC5pZCA9ICdJRF9HUk9VUCcNCiAgICAgICAgICAgIHZhbC5kaXNhYmxlZCA9DQogICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZENvbnRyb2xzW3RoaXMudXNlckZvcm1JZF0uc2VsZWN0ZWQubGVuZ3RoIDw9IDENCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgaWYgKHZhbC5pZCA9PT0gJ0lEX0NPTlRST0xGT1JXQVJEJyB8fCB2YWwuaWQgPT09ICdJRF9DT05UUk9MQkFDS1dBUkQnKSB7DQogICAgICAgICAgY29uc3Qgc2VsZWN0ZWRDb25hdGluZXIgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5jb250YWluZXJbMF0NCiAgICAgICAgICB2YWwuZGlzYWJsZWQgPSB1c2VyRGF0YVtzZWxlY3RlZENvbmF0aW5lcl0uY29udHJvbHMubGVuZ3RoIDw9IDENCiAgICAgICAgfQ0KICAgICAgICBpZiAodmFsLmlkID09PSAnSURfQUxJR04nIHx8IHZhbC5pZCA9PT0gJ0lEX01BS0VTQU1FU0laRScpIHsNCiAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdmFsLnZhbHVlcy5sZW5ndGg7IGluZGV4KyspIHsNCiAgICAgICAgICAgIGlmICh2YWwudmFsdWVzW2luZGV4XS5pZCA9PT0gJ0lEX0dSSUQnKSB7DQogICAgICAgICAgICAgIHZhbC52YWx1ZXNbaW5kZXhdLmRpc2FibGVkID0gISh0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5zZWxlY3RlZC5sZW5ndGggPiAwKQ0KICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgdmFsLnZhbHVlc1tpbmRleF0uZGlzYWJsZWQgPSB0aGlzLnNlbGVjdGVkQ29udHJvbHNbdGhpcy51c2VyRm9ybUlkXS5zZWxlY3RlZC5sZW5ndGggPD0gMQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0NCiAgICBWdWUubmV4dFRpY2soKCkgPT4gdGhpcy5jb250ZXh0bWVudS5mb2N1cygpKQ0KICB9DQogIGdldENvbnRhaW5lckxpc3QgKHNlbGVjdFRhcmdldDogc3RyaW5nKSB7DQogICAgY29uc3QgY29udGFpbmVyTGlzdDogc3RyaW5nW10gPSBbXQ0KICAgIGNvbnN0IGNvbnRyb2xDb250YWluZXIgPSAoc2VsZWN0VGFyZ2V0OiBzdHJpbmcpID0+IHsNCiAgICAgIGlmICh0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW3NlbGVjdFRhcmdldF0udHlwZSAhPT0gJ1VzZXJmb3JtJykgew0KICAgICAgICBmb3IgKGxldCBpIGluIHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF0pIHsNCiAgICAgICAgICBjb25zdCBjb250cm9sRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF1baV0NCiAgICAgICAgICBpZiAoY29udHJvbERhdGEuY29udHJvbHMubGVuZ3RoID4gMCAmJiBjb250cm9sRGF0YS5jb250cm9scy5pbmNsdWRlcyhzZWxlY3RUYXJnZXQpKSB7DQogICAgICAgICAgICBjb250YWluZXJMaXN0LnB1c2goaSkNCiAgICAgICAgICAgIGNvbnRyb2xDb250YWluZXIoaSkNCiAgICAgICAgICAgIGlmICh0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW2ldLnR5cGUgIT09ICdVc2VyZm9ybScpIHsNCiAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9DQogICAgY29uc3QgZ2V0Q29udHJvbElkID0gKHNlbGVjdFRhcmdldDogc3RyaW5nKSA9PiB7DQogICAgICBjb25zdCB1c2VyRGF0YSA9IHRoaXMudXNlcmZvcm1EYXRhW3RoaXMudXNlckZvcm1JZF0NCiAgICAgIGZvciAobGV0IGkgaW4gdXNlckRhdGEpIHsNCiAgICAgICAgY29uc3QgY29udHJvbERhdGEgPSB1c2VyRGF0YVtpXQ0KICAgICAgICBpZiAoY29udHJvbERhdGEucHJvcGVydGllcy5Hcm91cElEID09PSBzZWxlY3RUYXJnZXQpIHsNCiAgICAgICAgICByZXR1cm4gaQ0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICAgIGlmIChzZWxlY3RUYXJnZXQpIHsNCiAgICAgIGNvbnN0IGNvbnRyb2xJZCA9IHNlbGVjdFRhcmdldC5zdGFydHNXaXRoKCdncm91cCcpID8gZ2V0Q29udHJvbElkKHNlbGVjdFRhcmdldCkgOiBzZWxlY3RUYXJnZXQNCiAgICAgIGlmIChjb250cm9sSWQpIHsNCiAgICAgICAgY29udHJvbENvbnRhaW5lcihjb250cm9sSWQpDQogICAgICB9DQogICAgfQ0KICAgIHJldHVybiBjb250YWluZXJMaXN0Lmxlbmd0aCA+IDAgPyBjb250YWluZXJMaXN0IDogW3RoaXMudXNlckZvcm1JZF0NCiAgfQ0KICBjcmVhdGVHcm91cCAoZ3JvdXBJZDogc3RyaW5nKSB7DQogICAgRXZlbnRCdXMuJGVtaXQoJ2NyZWF0ZUdyb3VwJywgZ3JvdXBJZCkNCiAgfQ0KICBvcGVuVGV4dENvbnRleHRNZW51IChldmVudDogTW91c2VFdmVudCkgew0KICAgIHRoaXMudGV4dE1lbnUgPSB0cnVlDQogICAgZXZlbnQucHJldmVudERlZmF1bHQoKQ0KICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpDQogICAgbmF2aWdhdG9yLmNsaXBib2FyZC5yZWFkVGV4dCgpDQogICAgICAudGhlbih0ZXh0ID0+IHsNCiAgICAgICAgdGhpcy5jb3BpZWRUZXh0ID0gdGV4dA0KICAgICAgICB0aGlzLmNvbnRleHRNZW51VmFsdWUgPSBjb250cm9sQ29udGV4dE1lbnUNCiAgICAgICAgdGhpcy5jb250ZXh0TWVudUhlaWdodCA9IDI3Ng0KICAgICAgICBmb3IgKGNvbnN0IHZhbCBvZiBjb250cm9sQ29udGV4dE1lbnUpIHsNCiAgICAgICAgICBpZiAodmFsLmlkID09PSAnSURfREVMRVRFJykgew0KICAgICAgICAgICAgdmFsLmRpc2FibGVkID0gdGhpcy5nZXRDdXJzb3JQb3MoZXZlbnQpDQogICAgICAgICAgfSBlbHNlIGlmICh2YWwuaWQgPT09ICdJRF9QQVNURScpIHsNCiAgICAgICAgICAgIHZhbC5kaXNhYmxlZCA9IHRoaXMuY29waWVkVGV4dCA9PT0gJycNCiAgICAgICAgICB9IGVsc2UgaWYgKHZhbC5pZCA9PT0gJ0lEX0NVVCcpIHsNCiAgICAgICAgICAgIHZhbC5kaXNhYmxlZCA9IHRoaXMuZ2V0Q3Vyc29yUG9zKGV2ZW50KQ0KICAgICAgICAgIH0gZWxzZSBpZiAodmFsLmlkID09PSAnSURfQ09QWScpIHsNCiAgICAgICAgICAgIHZhbC5kaXNhYmxlZCA9IHRoaXMuZ2V0Q3Vyc29yUG9zKGV2ZW50KQ0KICAgICAgICAgIH0gZWxzZSBpZiAodmFsLmlkID09PSAnSURfQUxJR04nIHx8IHZhbC5pZCA9PT0gJ0lEX01BS0VTQU1FU0laRScpIHsNCiAgICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB2YWwudmFsdWVzLmxlbmd0aDsgaW5kZXgrKykgew0KICAgICAgICAgICAgICB2YWwudmFsdWVzW2luZGV4XS5kaXNhYmxlZCA9IHRydWUNCiAgICAgICAgICAgIH0NCiAgICAgICAgICB9IGVsc2UgaWYgKHZhbC5pZCA9PT0gJ0lEX09CSkVDVFBST1AnKSB7DQogICAgICAgICAgICB2YWwuZGlzYWJsZWQgPSBmYWxzZQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICB2YWwuZGlzYWJsZWQgPSB0cnVlDQogICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIFZ1ZS5uZXh0VGljaygoKSA9PiB0aGlzLmNvbnRleHRtZW51LmZvY3VzKCkpDQogICAgICAgIHRoaXMudG9wID0gZXZlbnQueQ0KICAgICAgICB0aGlzLmxlZnQgPSBldmVudC54DQogICAgICAgIHRoaXMudmlld01lbnUgPSB0cnVlDQogICAgICB9KQ0KICAgICAgLmNhdGNoKGVyciA9PiB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byByZWFkIGNsaXBib2FyZCBjb250ZW50czogJywgZXJyKQ0KICAgICAgfSkNCiAgfQ0KICBnZXRDdXJzb3JQb3MgKGV2ZW50OiBNb3VzZUV2ZW50KSB7DQogICAgY29uc3QgY29udHJvbFR5cGUgPSB0aGlzLnVzZXJmb3JtRGF0YVt0aGlzLnVzZXJGb3JtSWRdW3RoaXMuY29udHJvbElkXS50eXBlDQogICAgaWYgKGNvbnRyb2xUeXBlID09PSAnQ29tYm9Cb3gnIHx8IGNvbnRyb2xUeXBlID09PSAnVGV4dEJveCcpIHsNCiAgICAgIGNvbnN0IGV2ZW50VGFyZ2V0ID0gZXZlbnQudGFyZ2V0IGFzIEhUTUxUZXh0QXJlYUVsZW1lbnQNCiAgICAgIGNvbnN0IGRpZmZlcmVuY2UgPSBldmVudFRhcmdldC5zZWxlY3Rpb25FbmQgLSBldmVudFRhcmdldC5zZWxlY3Rpb25TdGFydA0KICAgICAgaWYgKGRpZmZlcmVuY2UgPiAwKSB7DQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgcmV0dXJuIHRydWUNCiAgICAgIH0NCiAgICB9IGVsc2Ugew0KICAgICAgY29uc3QgaXNTdXBwb3J0ZWQgPSB0eXBlb2Ygd2luZG93LmdldFNlbGVjdGlvbiAhPT0gJ3VuZGVmaW5lZCcNCiAgICAgIGlmIChpc1N1cHBvcnRlZCkgew0KICAgICAgICBjb25zdCBzZWxlY3Rpb24gPSB3aW5kb3cuZ2V0U2VsZWN0aW9uKCkhDQogICAgICAgIGlmIChzZWxlY3Rpb24uYW5jaG9yT2Zmc2V0ID09PSBzZWxlY3Rpb24uZm9jdXNPZmZzZXQpIHsNCiAgICAgICAgICByZXR1cm4gdHJ1ZQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgICB9DQogICAgICB9DQogICAgICByZXR1cm4gdHJ1ZQ0KICAgIH0NCiAgfQ0KICBoYW5kbGVLZXlEb3duIChldmVudDogS2V5Ym9hcmRFdmVudCkgew0KICAgIHRoaXMubWFpbkNvbmV4dE1lbnUudXBkYXRlQWN0aW9uKGV2ZW50KQ0KICB9DQogIGdldEZvY3VzRWxlbWVudCAoZGlhbG9nRGF0YTogSURpYWxvZykgew0KICAgIHRoaXMudGFic3RyaXBDb250ZXh0TWVudSA9IGZhbHNlDQogICAgaWYgKGRpYWxvZ0RhdGEuZGlhbG9nVHlwZSA9PT0gJ3VzZXJmb3JtVGFib3JkZXInKSB7DQogICAgICB0aGlzLnVzZXJmb3JtVGFiT3JkZXIgPSBkaWFsb2dEYXRhLnZhbA0KICAgIH0gZWxzZSBpZiAoZGlhbG9nRGF0YS5kaWFsb2dUeXBlID09PSAncmVuYW1lRGlhbG9nJykgew0KICAgICAgdGhpcy5yZW5hbWVEaWFsb2cgPSBkaWFsb2dEYXRhLnZhbA0KICAgIH0gZWxzZSBpZiAoZGlhbG9nRGF0YS5kaWFsb2dUeXBlID09PSAndGFic3RyaXBUYWJPcmRlcicpIHsNCiAgICAgIHRoaXMudGFic3RyaXBUYWJPcmRlciA9IGRpYWxvZ0RhdGEudmFsDQogICAgfQ0KICAgIGlmICghZGlhbG9nRGF0YS52YWwpIHsNCiAgICAgIHRoaXMudXBkYXRlZm9jdXMoKQ0KICAgIH0NCiAgfQ0KICB1cGRhdGVmb2N1cyAoKSB7DQogICAgaWYgKHRoaXMucmVuYW1lRGlhbG9nKSB7DQogICAgICBWdWUubmV4dFRpY2soKCkgPT4geyAodGhpcy5yZW5hbWVEaWFsb2dSZWYuJGVsIGFzIEhUTUxEaXZFbGVtZW50KS5mb2N1cygpIH0pDQogICAgfSBlbHNlIGlmICh0aGlzLnRhYnN0cmlwQ29udGV4dE1lbnUgJiYgIXRoaXMudGFic3RyaXBUYWJPcmRlcikgew0KICAgICAgRXZlbnRCdXMuJGVtaXQoJ2ZvY3VzVGFiU3RyaXAnKQ0KICAgIH0gZWxzZSBpZiAodGhpcy51c2VyZm9ybVRhYk9yZGVyKSB7DQogICAgICBWdWUubmV4dFRpY2soKCkgPT4geyAodGhpcy51c2VyZm9ybVRhYk9yZGVyUmVmLiRlbCBhcyBIVE1MRGl2RWxlbWVudCkuZm9jdXMoKSB9KQ0KICAgIH0gZWxzZSBpZiAodGhpcy50YWJzdHJpcFRhYk9yZGVyKSB7DQogICAgICBWdWUubmV4dFRpY2soKCkgPT4geyAodGhpcy50YWJzdHJpcFRhYk9yZGVyUmVmLiRlbCBhcyBIVE1MRGl2RWxlbWVudCkuZm9jdXMoKSB9KQ0KICAgIH0gZWxzZSB7DQogICAgICBFdmVudEJ1cy4kZW1pdCgnZm9jdXNVc2VyRm9ybScpDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/FormDesigner/components/pages/FDPage","sourcesContent":["<template>\r\n  <div id=\"app\" tabindex=\"0\" @focus=\"updatefocus\">\r\n    <div\r\n      id=\"right-click-menu\"\r\n      :style=\"contextMenuStyle\"\r\n      ref=\"contextmenu\"\r\n      tabindex=\"0\"\r\n      @blur.stop=\"closeMenu\"\r\n    >\r\n      <ContextMenu\r\n        ref=\"mainConextMenu\"\r\n        :userFormId=\"userFormId\"\r\n        :containerId=\"containerId\"\r\n        :controlId=\"controlId\"\r\n        :values=\"contextMenuValue\"\r\n        @closeMenu=\"closeMenu\"\r\n        :selectedTab=\"updatedValue\"\r\n        :data=\"tabData !== undefined ? tabData : '' \"\r\n        :groupStyleArray=\"groupStyleArray\"\r\n         @createGroup=\"createGroup\"\r\n        :editTextRef=\"labelArea\"\r\n        :copiedText=\"copiedText\"\r\n        :textMenu=\"textMenu\"\r\n      />\r\n    </div>\r\n    <div class=\"container\">\r\n      <div class=\"header\">\r\n        <Header :userFormId=\"userFormId\" />\r\n      </div>\r\n      <div class=\"mainbody\">\r\n        <Split class=\"outersplit\" @onDrag=\"onDrag\">\r\n          <SplitArea :size=\"20\" class=\"splitleft\">\r\n            <Split :direction=\"vertical\" @onDrag=\"onDrag\">\r\n              <SplitArea class=\"innersplit\">\r\n                <div v-if=\"hideShowTree === false\">\r\n                  <div class=\"sideheader\">\r\n                    <span class=\"sideheader1\">\r\n                      <span>Project - VBAProject</span>\r\n                      <div id=\"mdiv\" v-on:click=\"hideShowTreeBrowser\">\r\n                        <div class=\"mdiv\">\r\n                          <div class=\"md\"></div>\r\n                        </div>\r\n                      </div>\r\n                    </span>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <ViewCodeLogo class=\"icon-style\" />\r\n                    <ViewObject class=\"icon-style\" />\r\n                    <CloseFolderLogo class=\"icon-style\" />\r\n                  </div>\r\n                  <hr />\r\n                  <div>\r\n                    <div\r\n                      v-for=\"(userform, userformId) in userformData\"\r\n                      :key=\"userformId\"\r\n                      @click=\"setUserForm(userformId)\"\r\n                    >\r\n                      <p>{{ userformId }}</p>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </SplitArea>\r\n              <SplitArea class=\"innersplit\">\r\n                <PropertiesList\r\n                :userFormId=\"userFormId\"/>\r\n                <!-- <label>Prop Name</label>\r\n                <input type=\"text\" v-model=\"testPropName\" />\r\n                <br />\r\n                <label>Prop Value</label>\r\n                <input type=\"text\" v-model=\"testPropValue\" />\r\n                <br />\r\n                <button @click=\"clickUpdate\">Update selected Control</button>\r\n                <br /><br />\r\n                <button @click=\"clickDelete\">Delete selected Control</button> -->\r\n              </SplitArea>\r\n            </Split>\r\n          </SplitArea>\r\n          <SplitArea :size=\"80\" class=\"splitAreaClass\">\r\n            <div class=\"splitAreaDiv\">\r\n              <ResizeUserForm\r\n                :userFormId=\"userFormId\"\r\n                :controlId=\"userFormId\"\r\n                :containerId=\"userFormId\"\r\n              />\r\n            </div>\r\n          </SplitArea>\r\n        </Split>\r\n      </div>\r\n      <div class=\"fixedSide\">\r\n        <ToolBox />\r\n      </div>\r\n      <div>\r\n        <UserformTabOrder @getFocusElement=\"getFocusElement\" ref=\"userformTabOrderRef\"/>\r\n        <TabStripTabOrder @getFocusElement=\"getFocusElement\" ref=\"tabstripTabOrderRef\"/>\r\n        <RenameMultiPageDialog @getFocusElement=\"getFocusElement\" ref=\"renameDialogRef\"/>\r\n        <ErrorPopup />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { Component, Ref, Vue } from 'vue-property-decorator'\r\nimport ToolBox from '@/FormDesigner/components/organisms/FDToolBox/index.vue'\r\nimport ResizeUserForm from '@/FormDesigner/components/organisms/FDResizeUserForm/index.vue'\r\nimport PropertiesList from '@/FormDesigner/components/organisms/FDPropertyList/index.vue'\r\nimport TreeBrowser from '@/FormDesigner/components/organisms/FDTreeBrowser/index.vue'\r\nimport Header from '@/FormDesigner/components/organisms/FDHeader/index.vue'\r\nimport UserformTabOrder from '@/FormDesigner/components/molecules/FDUserformTabOrder/index.vue'\r\nimport TabStripTabOrder from '@/FormDesigner/components/organisms/FDTabStripTabOrderModal/index.vue'\r\nimport RenameMultiPageDialog from '@/FormDesigner/components/organisms/FDRenameMultiPageDialog/index.vue'\r\nimport ErrorPopup from '@/FormDesigner/components/atoms/FDErrorPopup/index.vue'\r\nimport ContextMenu from '@/FormDesigner/components/atoms/FDContextMenu/index.vue'\r\n\r\nimport ViewCodeLogo from '../../../../assets/view-code.svg'\r\nimport ViewObject from '../../../../assets/view-object.svg'\r\nimport CloseFolderLogo from '../../../../assets/close-folder.svg'\r\nimport { State, Action } from 'vuex-class'\r\nimport { Payload } from 'vuex'\r\nimport {\r\n  IupdateControl,\r\n  IdeleteControl,\r\n  IupdateControlExtraData,\r\n  IselectControl\r\n} from '../../../../storeModules/fd/actions'\r\nimport { EventBus } from '@/FormDesigner/event-bus'\r\nimport FDCommonMethod from '@/api/abstract/FormDesigner/FDCommonMethod'\r\nimport { userformContextMenu } from '@/FormDesigner/models/userformContextMenuData'\r\nimport { controlContextMenu } from '@/FormDesigner/models/controlContextMenuData'\r\nimport { tabsContextMenu } from '../../../models/tabsContextMenu'\r\ninterface IDialog\r\n{\r\n  dialogType: string\r\n  val: boolean\r\n}\r\n@Component({\r\n  name: 'FDPage',\r\n  components: {\r\n    ToolBox,\r\n    ResizeUserForm,\r\n    TreeBrowser,\r\n    PropertiesList,\r\n    Header,\r\n    ViewCodeLogo,\r\n    ViewObject,\r\n    CloseFolderLogo,\r\n    UserformTabOrder,\r\n    TabStripTabOrder,\r\n    RenameMultiPageDialog,\r\n    ErrorPopup,\r\n    ContextMenu\r\n  }\r\n})\r\nexport default class FDPage extends Vue {\r\n  @State((state) => state.fd.userformData) userformData!: userformData;\r\n  @State((state) => state.fd.copiedControl) copiedControl!: userformData;\r\n  @Ref('contextmenu') contextmenu: HTMLDivElement\r\n  @Ref('mainConextMenu') mainConextMenu: ContextMenu\r\n  @Ref('renameDialogRef') renameDialogRef: RenameMultiPageDialog\r\n  @Ref('userformTabOrderRef') userformTabOrderRef: UserformTabOrder\r\n  @Ref('tabstripTabOrderRef') tabstripTabOrderRef: TabStripTabOrder\r\n  containerId: string = ''\r\n  controlId: string = ''\r\n  copiedText = ''\r\n  labelArea: any = {}\r\n  textMenu: boolean = false\r\n\r\n  vertical: string = 'vertical';\r\n  renameDialog: boolean = false\r\n  tabstripTabOrder: boolean = false\r\n  display: string = '';\r\n  hideShowTree: boolean = false;\r\n  viewContextMenu: boolean = false\r\n  hideShowTreeBrowser () {\r\n    this.hideShowTree = true\r\n  }\r\n  userFormId: string = 'ID_USERFORM1';\r\n  @State((state: rootState) => state.fd.selectedControls)\r\n  selectedControls!: fdState['selectedControls'];\r\n  @Action('fd/updateControl') updateControl!: (payload: IupdateControl) => void;\r\n  @Action('fd/updateControlExtraData') updateControlExtraData!: (payload: IupdateControlExtraData) => void;\r\n  @Action('fd/deleteControl') deleteControl!: (payload: IdeleteControl) => void;\r\n  @Action('fd/selectControl') selectControl!: (payload: IselectControl) => void;\r\n  testPropName: keyof controlProperties = 'Width';\r\n  testPropValue = '100';\r\n  top = 0;\r\n  left = 0;\r\n  userformTabOrder: boolean = false\r\n  contextMenuType: boolean = false;\r\n  viewMenu: boolean = false\r\n  controlContextMenu: Array<IcontextMenu> = controlContextMenu;\r\n  userformContextMenu: Array<IcontextMenu> = userformContextMenu;\r\n  contextMenuValue: Array<IcontextMenu> = tabsContextMenu;\r\n  contextMenuHeight: number = 84\r\n  groupStyleArray: Array<IGroupStyle> = []\r\n  updatedValue: number = 0\r\n  tabData: controlData\r\n  tabstripContextMenu: boolean = false\r\n\r\n  closeMenu (event: MouseEvent) {\r\n    this.textMenu = false\r\n    this.viewMenu = false\r\n    EventBus.$emit('focusUserForm')\r\n  }\r\n  onDrag () {\r\n    (this.$el as HTMLDivElement).focus()\r\n  }\r\n  created () {\r\n    this.tabData = this.userformData[this.userFormId][this.userFormId]\r\n    EventBus.$on('contextMenuDisplay', (event: MouseEvent, containerId: string, controlId: string, type: string, mode: boolean) => {\r\n      this.containerId = containerId\r\n      this.controlId = controlId\r\n      this.openMenu(event, containerId, controlId, type, mode)\r\n    })\r\n    EventBus.$on('groupArray', (array: Array<IGroupStyle>) => {\r\n      this.groupStyleArray = [...array]\r\n    })\r\n    EventBus.$on('editModeContextMenu', (e:MouseEvent, controlId: string, data: controlData, mode: boolean, selected: number) => {\r\n      this.controlId = controlId\r\n      this.tabData = data\r\n      this.updatedValue = selected\r\n      this.tabstripContextMenu = true\r\n      this.editModeContextMenu(e, mode, data)\r\n    })\r\n    EventBus.$on('openTextContextMenu', (event: MouseEvent, controlId: string) => {\r\n      this.labelArea = (event.target as HTMLSpanElement)\r\n      this.controlId = controlId\r\n      this.openTextContextMenu(event)\r\n    })\r\n    EventBus.$on('handleKeyDown', (event: KeyboardEvent, containerId: string) => {\r\n      this.containerId = containerId\r\n      this.handleKeyDown(event)\r\n    })\r\n  }\r\n  destroyed () {\r\n    EventBus.$off('contextMenuDisplay')\r\n    EventBus.$off('groupArray')\r\n    EventBus.$off('editModeContextMenu')\r\n    EventBus.$off('openTextContextMenu')\r\n    EventBus.$off('handleKeyDown')\r\n  }\r\n\r\n  editModeContextMenu (e: MouseEvent, mode: boolean, data: controlData) {\r\n    if (mode) {\r\n      e.preventDefault()\r\n      e.stopPropagation()\r\n      this.top = e.y\r\n      this.left = e.x\r\n      this.contextMenuValue = tabsContextMenu\r\n      this.contextMenuHeight = 84\r\n      if (data.type === 'TabStrip') {\r\n        for (const val of this.contextMenuValue) {\r\n          if (val.id === 'ID_DELETEPAGE' || val.id === 'ID_RENAME') {\r\n            val.disabled = data.extraDatas!.Tabs!.length === 0\r\n          } else if (val.id === 'ID_MOVE') {\r\n            val.disabled = data.extraDatas!.Tabs!.length <= 1\r\n          }\r\n        }\r\n      }\r\n      if (data.type === 'MultiPage') {\r\n        for (const val of this.contextMenuValue) {\r\n          if (val.id === 'ID_DELETEPAGE' || val.id === 'ID_RENAME') {\r\n            val.disabled = data.controls.length === 0\r\n          } else if (val.id === 'ID_MOVE') {\r\n            val.disabled = data.controls.length <= 1\r\n          }\r\n        }\r\n      }\r\n      this.viewMenu = true\r\n      Vue.nextTick(() => this.contextmenu.focus())\r\n    } else {\r\n      return undefined\r\n    }\r\n  }\r\n\r\n  clickUpdate () {\r\n    const selected = this.selectedControls[this.userFormId].selected\r\n    for (let i = 0; i < selected.length; i++) {\r\n      this.updateControl({\r\n        userFormId: this.userFormId,\r\n        controlId: selected[i],\r\n        propertyName: this.testPropName,\r\n        value: this.testPropValue\r\n      })\r\n    }\r\n  }\r\n  clickDelete () {\r\n    const selected = this.selectedControls[this.userFormId].selected\r\n    for (let i = 0; i < selected.length; i++) {\r\n      this.deleteControl({\r\n        userFormId: this.userFormId,\r\n        parentId: this.selectedControls[this.userFormId].container[0],\r\n        targetId: selected[i]\r\n      })\r\n    }\r\n  }\r\n  setUserForm (userformId: string) {\r\n    this.userFormId = userformId\r\n    this.selectControl({\r\n      userFormId: this.userFormId,\r\n      select: {\r\n        container: [this.userFormId],\r\n        selected: [this.userFormId]\r\n      }\r\n    })\r\n  }\r\n  mounted () {\r\n    this.setUserForm(this.userFormId)\r\n  }\r\n  get contextMenuStyle () {\r\n    const contextMenuTop = window.innerHeight > (this.top + this.contextMenuHeight) ? this.top : this.top - this.contextMenuHeight\r\n    return {\r\n      top: `${contextMenuTop}px`,\r\n      left: `${this.left}px`,\r\n      display: this.viewMenu ? 'block' : 'none'\r\n    }\r\n  }\r\n  openMenu (e: MouseEvent, parentID: string, controlID: string, type: string, mode: boolean) {\r\n    e.preventDefault()\r\n    const id = (e.target! as HTMLDivElement).id ? (e.target! as HTMLDivElement).id : ''\r\n    const selected = this.selectedControls[this.userFormId].selected\r\n    const userData = this.userformData[this.userFormId]\r\n    let groupId = ''\r\n    if (!selected.includes(controlID)) {\r\n      groupId = userData[controlID].type === 'MultiPage' ? selected[0] : controlID\r\n      if ('GroupID' in userData[controlID].properties && userData[controlID].properties.GroupID !== '') {\r\n        groupId = this.userformData[this.userFormId][controlID].properties.GroupID!\r\n      }\r\n      if (groupId && !selected.includes(groupId)) {\r\n        this.selectControl({\r\n          userFormId: this.userFormId,\r\n          select: { container: this.getContainerList(groupId), selected: [groupId] }\r\n        })\r\n      }\r\n    }\r\n    const controlType = this.userformData[this.userFormId][controlID].type\r\n    const containerType = this.userformData[this.userFormId][this.containerId].type\r\n    if (type === 'container' && !groupId.startsWith('group') && selected.length <= 1) {\r\n      this.contextMenuType = true\r\n    } else {\r\n      this.contextMenuType = false\r\n    }\r\n    const targetElement = (e.target! as HTMLDivElement).style\r\n    const controlLeft: number | undefined = this.userformData[this.userFormId][controlID].properties.Left!\r\n    const controlTop: number | undefined = this.userformData[this.userFormId][controlID].properties.Top!\r\n    this.top = e.y\r\n    this.left = e.x\r\n    this.contextMenuValue = this.contextMenuType ? userformContextMenu : controlContextMenu\r\n    this.contextMenuHeight = this.contextMenuType ? 145 : 276\r\n    this.viewMenu = true\r\n    const controlLength = selected[0].startsWith('group') ? this.userformData[this.userFormId][this.controlId].controls.length : this.userformData[this.userFormId][selected[0]].controls.length\r\n    const contextMenuData = (type === 'container' && !groupId.startsWith('group') && selected.length <= 1)\r\n      ? this.userformContextMenu\r\n      : this.controlContextMenu\r\n    if ((controlType === 'SpinButton' || controlType === 'ScrollBar' || controlType === 'ListBox') && mode) {\r\n      for (const val of contextMenuData) {\r\n        if (val.id === 'ID_OBJECTPROP') {\r\n          val.disabled = false\r\n        } else if (val.id === 'ID_ALIGN' || val.id === 'ID_MAKESAMESIZE') {\r\n          for (let index = 0; index < val.values.length; index++) {\r\n            val.values[index].disabled = true\r\n          }\r\n        } else {\r\n          val.disabled = true\r\n        }\r\n      }\r\n    } else {\r\n      for (const val of contextMenuData) {\r\n        if (val.id === 'ID_SELECTALL') {\r\n          val.disabled = controlLength === 0\r\n        }\r\n        if (val.id === 'ID_DELETE') {\r\n          if (this.contextMenuType) {\r\n            val.disabled = !(selected.length === 1 && !selected[0].startsWith('group') &&\r\n            (userData[controlID].type === 'Frame' || userData[selected[0]].type === 'Page'))\r\n          } else {\r\n            val.disabled = !(selected.length >= 1)\r\n          }\r\n        }\r\n        if (val.id === 'ID_PASTE') {\r\n          val.disabled = Object.keys(this.copiedControl[this.userFormId]).length === 1\r\n        }\r\n        if (val.id === 'ID_CUT' || val.id === 'ID_COPY' || val.id === 'ID_OBJECTPROP' || val.id === 'ID_VIEWCODE') {\r\n          val.disabled = false\r\n        }\r\n        if (val.id === 'ID_GROUP' || val.id === 'ID_UNGROUP') {\r\n          const selected = this.selectedControls[this.userFormId].selected\r\n          let groupId: boolean = false\r\n          for (const key of selected) {\r\n            if (!key.startsWith('group') && !key.startsWith('ID_USERFORM')) {\r\n              groupId =\r\n                  this.userformData[this.userFormId][key].properties.GroupID === ''\r\n            }\r\n          }\r\n          const selectedGroupArray = selected.filter(\r\n            (val: string) => val.startsWith('group') && val\r\n          )\r\n          if (!groupId && selectedGroupArray.length <= 1) {\r\n            val.text = '<u>U</u>ngroup'\r\n            val.id = 'ID_UNGROUP'\r\n          } else {\r\n            val.text = '<u>G</u>roup'\r\n            val.id = 'ID_GROUP'\r\n            val.disabled =\r\n                this.selectedControls[this.userFormId].selected.length <= 1\r\n          }\r\n        }\r\n        if (val.id === 'ID_CONTROLFORWARD' || val.id === 'ID_CONTROLBACKWARD') {\r\n          const selectedConatiner = this.selectedControls[this.userFormId].container[0]\r\n          val.disabled = userData[selectedConatiner].controls.length <= 1\r\n        }\r\n        if (val.id === 'ID_ALIGN' || val.id === 'ID_MAKESAMESIZE') {\r\n          for (let index = 0; index < val.values.length; index++) {\r\n            if (val.values[index].id === 'ID_GRID') {\r\n              val.values[index].disabled = !(this.selectedControls[this.userFormId].selected.length > 0)\r\n            } else {\r\n              val.values[index].disabled = this.selectedControls[this.userFormId].selected.length <= 1\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    Vue.nextTick(() => this.contextmenu.focus())\r\n  }\r\n  getContainerList (selectTarget: string) {\r\n    const containerList: string[] = []\r\n    const controlContainer = (selectTarget: string) => {\r\n      if (this.userformData[this.userFormId][selectTarget].type !== 'Userform') {\r\n        for (let i in this.userformData[this.userFormId]) {\r\n          const controlData = this.userformData[this.userFormId][i]\r\n          if (controlData.controls.length > 0 && controlData.controls.includes(selectTarget)) {\r\n            containerList.push(i)\r\n            controlContainer(i)\r\n            if (this.userformData[this.userFormId][i].type !== 'Userform') {\r\n              break\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    const getControlId = (selectTarget: string) => {\r\n      const userData = this.userformData[this.userFormId]\r\n      for (let i in userData) {\r\n        const controlData = userData[i]\r\n        if (controlData.properties.GroupID === selectTarget) {\r\n          return i\r\n        }\r\n      }\r\n    }\r\n    if (selectTarget) {\r\n      const controlId = selectTarget.startsWith('group') ? getControlId(selectTarget) : selectTarget\r\n      if (controlId) {\r\n        controlContainer(controlId)\r\n      }\r\n    }\r\n    return containerList.length > 0 ? containerList : [this.userFormId]\r\n  }\r\n  createGroup (groupId: string) {\r\n    EventBus.$emit('createGroup', groupId)\r\n  }\r\n  openTextContextMenu (event: MouseEvent) {\r\n    this.textMenu = true\r\n    event.preventDefault()\r\n    event.stopPropagation()\r\n    navigator.clipboard.readText()\r\n      .then(text => {\r\n        this.copiedText = text\r\n        this.contextMenuValue = controlContextMenu\r\n        this.contextMenuHeight = 276\r\n        for (const val of controlContextMenu) {\r\n          if (val.id === 'ID_DELETE') {\r\n            val.disabled = this.getCursorPos(event)\r\n          } else if (val.id === 'ID_PASTE') {\r\n            val.disabled = this.copiedText === ''\r\n          } else if (val.id === 'ID_CUT') {\r\n            val.disabled = this.getCursorPos(event)\r\n          } else if (val.id === 'ID_COPY') {\r\n            val.disabled = this.getCursorPos(event)\r\n          } else if (val.id === 'ID_ALIGN' || val.id === 'ID_MAKESAMESIZE') {\r\n            for (let index = 0; index < val.values.length; index++) {\r\n              val.values[index].disabled = true\r\n            }\r\n          } else if (val.id === 'ID_OBJECTPROP') {\r\n            val.disabled = false\r\n          } else {\r\n            val.disabled = true\r\n          }\r\n        }\r\n        Vue.nextTick(() => this.contextmenu.focus())\r\n        this.top = event.y\r\n        this.left = event.x\r\n        this.viewMenu = true\r\n      })\r\n      .catch(err => {\r\n        console.error('Failed to read clipboard contents: ', err)\r\n      })\r\n  }\r\n  getCursorPos (event: MouseEvent) {\r\n    const controlType = this.userformData[this.userFormId][this.controlId].type\r\n    if (controlType === 'ComboBox' || controlType === 'TextBox') {\r\n      const eventTarget = event.target as HTMLTextAreaElement\r\n      const difference = eventTarget.selectionEnd - eventTarget.selectionStart\r\n      if (difference > 0) {\r\n        return false\r\n      } else {\r\n        return true\r\n      }\r\n    } else {\r\n      const isSupported = typeof window.getSelection !== 'undefined'\r\n      if (isSupported) {\r\n        const selection = window.getSelection()!\r\n        if (selection.anchorOffset === selection.focusOffset) {\r\n          return true\r\n        } else {\r\n          return false\r\n        }\r\n      }\r\n      return true\r\n    }\r\n  }\r\n  handleKeyDown (event: KeyboardEvent) {\r\n    this.mainConextMenu.updateAction(event)\r\n  }\r\n  getFocusElement (dialogData: IDialog) {\r\n    this.tabstripContextMenu = false\r\n    if (dialogData.dialogType === 'userformTaborder') {\r\n      this.userformTabOrder = dialogData.val\r\n    } else if (dialogData.dialogType === 'renameDialog') {\r\n      this.renameDialog = dialogData.val\r\n    } else if (dialogData.dialogType === 'tabstripTabOrder') {\r\n      this.tabstripTabOrder = dialogData.val\r\n    }\r\n    if (!dialogData.val) {\r\n      this.updatefocus()\r\n    }\r\n  }\r\n  updatefocus () {\r\n    if (this.renameDialog) {\r\n      Vue.nextTick(() => { (this.renameDialogRef.$el as HTMLDivElement).focus() })\r\n    } else if (this.tabstripContextMenu && !this.tabstripTabOrder) {\r\n      EventBus.$emit('focusTabStrip')\r\n    } else if (this.userformTabOrder) {\r\n      Vue.nextTick(() => { (this.userformTabOrderRef.$el as HTMLDivElement).focus() })\r\n    } else if (this.tabstripTabOrder) {\r\n      Vue.nextTick(() => { (this.tabstripTabOrderRef.$el as HTMLDivElement).focus() })\r\n    } else {\r\n      EventBus.$emit('focusUserForm')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n#app {\r\n  font-family: Tahoma;\r\n  -webkit-font-smoothing: antialiased;\r\n  -moz-osx-font-smoothing: grayscale;\r\n  color: #2c3e50;\r\n  font-size: 14px;\r\n}\r\n\r\n.splitleft {\r\n  width: auto;\r\n  z-index: 1;\r\n  top: 5;\r\n  left: 5;\r\n  background-color: white;\r\n  overflow-x: hidden;\r\n  border: 2px solid grey;\r\n}\r\n.outersplit {\r\n  height: 83%;\r\n  width: 85%;\r\n  position: fixed;\r\n}\r\n.innersplit {\r\n  border: 1px solid grey;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n.sideheader1 {\r\n  display: grid;\r\n  grid-template-columns: 1fr 25px;\r\n  /* width: 250px; */\r\n  background-color: rgb(142, 191, 231);\r\n  margin-bottom: 8px;\r\n  text-overflow: ellipsis;\r\n  overflow: hidden;\r\n  white-space: nowrap;\r\n}\r\n.sideheader {\r\n  height: 22px;\r\n  text-align: left;\r\n  background-color: rgb(142, 191, 231);\r\n}\r\n\r\n.right {\r\n  right: 0;\r\n  background-color: #80888e;\r\n  height: 100%;\r\n  width: 75%;\r\n  position: absolute;\r\n  z-index: 1;\r\n  overflow-x: hidden;\r\n  /* padding-top: 20px; */\r\n}\r\n.container {\r\n  width: 100%;\r\n  height: 600px;\r\n  max-height: 500px;\r\n}\r\n.header {\r\n  /* height: 40px; */\r\n  height: 10%;\r\n  border-bottom: 1px solid #eee;\r\n  background-color: #ffffff;\r\n}\r\n#mdiv {\r\n  float: right;\r\n  margin: auto;\r\n  position: relative;\r\n  top: 0px;\r\n  left: 0px;\r\n  width: 20px;\r\n  height: 16px;\r\n  background-color: lightgray;\r\n  border: outset;\r\n}\r\n\r\n.mdiv {\r\n  height: 17px;\r\n  width: 2px;\r\n  margin-left: 60px;\r\n  background-color: black;\r\n  transform: rotate(45deg);\r\n  z-index: 1;\r\n  position: absolute;\r\n  right: 8px;\r\n}\r\n\r\n.md {\r\n  height: 17px;\r\n  width: 2px;\r\n  background-color: black;\r\n  transform: rotate(90deg);\r\n  z-index: 2;\r\n  position: absolute;\r\n  right: 0px;\r\n}\r\n.commandbutton-element {\r\n  border: 1px solid gray;\r\n  border-radius: 3px;\r\n  background-color: white;\r\n  min-width: 50px;\r\n  max-width: 112px;\r\n  width: fit-content;\r\n  height: fit-content;\r\n  min-height: 20px;\r\n  padding: 0px 5px 0px 5px;\r\n  overflow: hidden;\r\n}\r\n.dialog-action-button {\r\n  background-color: #f2eded;\r\n  width: 79px;\r\n  height: 35px;\r\n  padding-left: 5px;\r\n  padding-right: 5px;\r\n  padding-top: 8px;\r\n  padding-bottom: 8px;\r\n  border: 1px solid gray;\r\n  border-radius: 3px;\r\n  overflow: hidden;\r\n}\r\n:focus {\r\n  outline: none;\r\n}\r\n.mainbody {\r\n  margin-top: 37px;\r\n}\r\n.fixedSide {\r\n  /*  position: relative; */\r\n  width: 13%;\r\n  float: right;\r\n}\r\n.icon-style {\r\n  margin-top: 7px;\r\n  margin-left: 5px;\r\n}\r\n.splitAreaClass {\r\n  background: gray;\r\n  overflow: auto;\r\n}\r\n.splitAreaDiv {\r\n  position: relative;\r\n  padding: 5px;\r\n}\r\n#right-click-menu {\r\n  background: #fafafa;\r\n  border: 1px solid #bdbdbd;\r\n  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 3px 1px -2px rgba(0, 0, 0, 0.2),\r\n    0 1px 5px 0 rgba(0, 0, 0, 0.12);\r\n  list-style: none;\r\n  margin: 0;\r\n  padding: 0;\r\n  /* left:100px;\r\n  top:200px; */\r\n  position: absolute;\r\n  width: 100px;\r\n  z-index: 999999;\r\n}\r\n\r\n#right-click-menu li {\r\n  border-bottom: 1px solid #e0e0e0;\r\n  margin: 0;\r\n  padding: 5px 5px;\r\n}\r\n\r\n#right-click-menu li:last-child {\r\n  border-bottom: none;\r\n}\r\n\r\n#right-click-menu li:hover {\r\n  background: #1e88e5;\r\n  color: #fafafa;\r\n}\r\n</style>\r\n"]}]}