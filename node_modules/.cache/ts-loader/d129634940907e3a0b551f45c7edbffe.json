{"remainingRequest":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/babel-loader/lib/index.js!/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/ts-loader/index.js??ref--14-2!/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/eslint-loader/index.js??ref--13-0!/home/mobiotics/Projects/hancom/FormcontrolLatest/src/api/abstract/FormDesigner/FdControlVue.ts","dependencies":[{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/src/api/abstract/FormDesigner/FdControlVue.ts","mtime":1611741110963},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgX19kZWNvcmF0ZSB9IGZyb20gInRzbGliIjsKLyplc2xpbnQtZGlzYWJsZSovCgppbXBvcnQgeyBjb250cm9sUHJvcGVydGllcyB9IGZyb20gJ0AvRm9ybURlc2lnbmVyL2NvbnRyb2xzLXByb3BlcnRpZXMnOwppbXBvcnQgeyBDb21wb25lbnQsIEVtaXQsIFByb3AsIFByb3BTeW5jLCBWdWUsIFdhdGNoIH0gZnJvbSAndnVlLXByb3BlcnR5LWRlY29yYXRvcic7CmltcG9ydCB7IEV2ZW50QnVzIH0gZnJvbSAnQC9Gb3JtRGVzaWduZXIvZXZlbnQtYnVzJzsKaW1wb3J0IEZERWRpdGFibGVUZXh0IGZyb20gJ0AvRm9ybURlc2lnbmVyL2NvbXBvbmVudHMvYXRvbXMvRkRFZGl0YWJsZVRleHQvaW5kZXgudnVlJzsKbGV0IEZkQ29udHJvbFZ1ZSA9IGNsYXNzIEZkQ29udHJvbFZ1ZSBleHRlbmRzIFZ1ZSB7CiAgY29uc3RydWN0b3IoKSB7CiAgICBzdXBlciguLi5hcmd1bWVudHMpOwogICAgdGhpcy5pc0NvbnRlbnRFZGl0YWJsZSA9IGZhbHNlOwogICAgdGhpcy5zZWxlY3Rpb25EYXRhID0gW107CiAgICB0aGlzLm1hdGNoRW50cnkgPSBbXTsKICAgIHRoaXMubWF0Y2hJbmRleCA9IC0xOwogICAgdGhpcy5pc0Ryb3Bkb3duVmlzaWJsZSA9IHRydWU7CiAgICB0aGlzLmlzSXRhbGljID0gZmFsc2U7CiAgICB0aGlzLnRlbXBXZWlnaHQgPSAnNDAwJzsKICAgIHRoaXMudGVtcFN0cmV0Y2ggPSAnbm9ybWFsJzsKICAgIHRoaXMuaXNWaXNpYmxlID0gZmFsc2U7CiAgICB0aGlzLmxhYmVsU3R5bGUgPSB7fTsKICAgIHRoaXMucmV2ZXJzZVN0eWxlID0gewogICAgICBkaXNwbGF5OiAnJywKICAgICAgZmxleERpcmVjdGlvbjogJycsCiAgICAgIGp1c3RpZnlJdGVtczogJycsCiAgICAgIHBvc2l0aW9uOiAnJywKICAgICAganVzdGlmeUNvbnRlbnQ6ICdjZW50ZXInLAogICAgICBhbGlnbkl0ZW1zOiAnJywKICAgICAgd2lkdGg6ICcnLAogICAgICBhbGlnblNlbGY6ICdjZW50ZXInCiAgICB9OwogICAgdGhpcy5pbWFnZVByb3BlcnR5ID0gewogICAgICBoZWlnaHQ6ICdmaXQtY29udGVudCcKICAgIH07CiAgICB0aGlzLmltYWdlUG9zID0ge307IC8vIGdsb2JhbCB2YXJpYWJsZSB0byBrZWVwIHRyYWNrIG9mIFRyaXBsZVN0YXRlIHdoZW4gZW5hYmxlZAoKICAgIHRoaXMudHJpcGxlU3RhdGUgPSAwOwogICAgdGhpcy5wcmV2ZW50Q2xpY2tPbmNlID0gZmFsc2U7CiAgfQoKICBhZGRFdmVudEN1c3RvbUNhbGxiYWNrKGUpIHsKICAgIHRoaXMuY29udHJvbEVkaXRNb2RlKGUpOwogICAgY29uc3Qgc2VsZiA9IHRoaXM7CgogICAgZS5jdXN0b21DYWxsQmFjayA9ICgpID0+IHsKICAgICAgc2VsZi5wcmV2ZW50Q2xpY2tPbmNlID0gdHJ1ZTsKICAgIH07CiAgfQoKICBzZWxlY3RlZEl0ZW0oZXZlbnQpIHsKICAgIGlmICh0aGlzLnByZXZlbnRDbGlja09uY2UpIHsKICAgICAgdGhpcy5wcmV2ZW50Q2xpY2tPbmNlID0gZmFsc2U7CiAgICB9IGVsc2UgewogICAgICB0aGlzLmVtaXRTZWxlY3RlZEl0ZW0oZXZlbnQpOwogICAgfQogIH0KCiAgZW1pdFNlbGVjdGVkSXRlbShldmVudCkgewogICAgcmV0dXJuIGV2ZW50OwogIH0KCiAgZHJhZ0dyb3VwKGV2ZW50KSB7CiAgICByZXR1cm4gZXZlbnQ7CiAgfQoKICBkZWxldGVJdGVtKGV2ZW50KSB7CiAgICByZXR1cm4gZXZlbnQ7CiAgfQoKICBzZXRFZGl0TW9kZShjb250ZW50RWRpdGFibGUpIHsKICAgIHJldHVybiBjb250ZW50RWRpdGFibGU7CiAgfQoKICBjb250cm9sRWRpdE1vZGUoZXZlbnQpIHsKICAgIHJldHVybiBldmVudDsKICB9CgogIHVwZGF0ZUNhcHRpb24odXBkYXRlVmFsdWUpIHsKICAgIHRoaXMudXBkYXRlRGF0YU1vZGVsKHsKICAgICAgcHJvcGVydHlOYW1lOiAnQ2FwdGlvbicsCiAgICAgIHZhbHVlOiB1cGRhdGVWYWx1ZQogICAgfSk7CiAgfQogIC8qKgogICAqIEBkZXNjcmlwdGlvbiB1c2VyRm9ybUlkIGFuZCBjb250cm9sSWQgd2hpY2ggaXMgdGFrZW4gYXMgcHJvcHMgZnJvbSBwYXJlbnQgQ29tcG9uZW50CiAgICogQGFic3RyYWN0IHByb3BDb250cm9sRGF0YQogICAqLwoKCiAgZ2V0IHByb3BlcnRpZXMoKSB7CiAgICByZXR1cm4gdGhpcy5kYXRhLnByb3BlcnRpZXM7CiAgfQoKICBnZXQgZXh0cmFEYXRhcygpIHsKICAgIHJldHVybiB0aGlzLmRhdGEuZXh0cmFEYXRhczsKICB9CgogIGdldCBjb250cm9scygpIHsKICAgIHJldHVybiB0aGlzLmRhdGEuY29udHJvbHM7CiAgfQoKICBnZXQgcmVuZGVyU2l6ZSgpIHsKICAgIHJldHVybiB7CiAgICAgIHdpZHRoOiBgJHt0aGlzLnByb3BlcnRpZXMuV2lkdGh9cHhgLAogICAgICBoZWlnaHQ6IGAke3RoaXMucHJvcGVydGllcy5IZWlnaHR9cHhgCiAgICB9OwogIH0KCiAgZ2V0IGJhc2VTdHlsZSgpIHsKICAgIHJldHVybiB7CiAgICAgIGJhY2tncm91bmRDb2xvcjogdGhpcy5wcm9wZXJ0aWVzLkJhY2tDb2xvciwKICAgICAgZGlzcGxheTogJ2Jsb2NrJwogICAgfTsKICB9CiAgLyoqCiAgICogQGRlc2NyaXB0aW9uIGdldFNwZWNpYWxFZmZlY3REYXRhIHJldHVybnMgc3RyaW5nIHZhbHVlIGZyb20KICAgKiBjb250cm9sUHJvcGVydGllcy5zcGVjaWFsRWZmZWN0UHJvcAogICAqIEBmdW5jdGlvbiBnZXRTcGVjaWFsRWZmZWN0RGF0YQogICAqIEByZXR1cm5zIHN0cmluZyB2YWx1ZQogICAqLwoKCiAgZ2V0IGdldFNwZWNpYWxFZmZlY3REYXRhKCkgewogICAgcmV0dXJuIGNvbnRyb2xQcm9wZXJ0aWVzLnNwZWNpYWxFZmZlY3RQcm9wKHRoaXMuZGF0YSk7CiAgfQogIC8qKgogICAqIEBkZXNjcmlwdGlvbiBnZXRCb3JkZXJTdHlsZSByZXR1cm5zIHN0cmluZyB2YWx1ZSBmcm9tCiAgICogY29udHJvbFByb3BlcnRpZXMuYm9yZGVyU3R5bGVQcm9wCiAgICogQGZ1bmN0aW9uIGdldEJvcmRlclN0eWxlCiAgICogQHJldHVybnMgc3RyaW5nIHZhbHVlCiAgICovCgoKICBnZXQgZ2V0Qm9yZGVyU3R5bGUoKSB7CiAgICByZXR1cm4gY29udHJvbFByb3BlcnRpZXMuYm9yZGVyU3R5bGVQcm9wKHRoaXMuZGF0YSk7CiAgfQogIC8qKgogICAqIEBkZXNjcmlwdGlvbiBnZXRNb3VzZUN1cnNvckRhdGEgcmV0dXJucyBzdHJpbmcgdmFsdWUgZnJvbQogICAqIGNvbnRyb2xQcm9wZXJ0aWVzLm1vdXNlUG9pbnRlclByb3AKICAgKiBAZnVuY3Rpb24gZ2V0TW91c2VDdXJzb3JEYXRhCiAgICogQHJldHVybnMgc3RyaW5nIHZhbHVlCiAgICovCgoKICBnZXQgZ2V0TW91c2VDdXJzb3JEYXRhKCkgewogICAgcmV0dXJuIGNvbnRyb2xQcm9wZXJ0aWVzLm1vdXNlUG9pbnRlclByb3AodGhpcy5kYXRhKTsKICB9CiAgLyoqCiAgICogQGRlc2NyaXB0aW9uIGdldEVuYWJsZWQgcmV0dXJucyBzdHJpbmcgdmFsdWUgZnJvbQogICAqIGNvbnRyb2xQcm9wZXJ0aWVzLmVuYWJsZWRQcm9wCiAgICogQGZ1bmN0aW9uIGdldEVuYWJsZWQKICAgKiBAcmV0dXJucyBzdHJpbmcgdmFsdWUKICAgKi8KCgogIGdldCBnZXRFbmFibGVkKCkgewogICAgcmV0dXJuIGNvbnRyb2xQcm9wZXJ0aWVzLmVuYWJsZWRQcm9wKHRoaXMuZGF0YSk7CiAgfQogIC8qKgogICAqIEBkZXNjcmlwdGlvbiBnZXRSZXBlYXQgcmV0dXJucyBzdHJpbmcgdmFsdWUgZnJvbQogICAqIGNvbnRyb2xQcm9wZXJ0aWVzLmV4dHJhRGF0YVJlcGVhdFByb3AKICAgKiBAZnVuY3Rpb24gZ2V0UmVwZWF0CiAgICogQHJldHVybnMgc3RyaW5nIHZhbHVlCiAgICovCgoKICBnZXQgZ2V0UmVwZWF0KCkgewogICAgcmV0dXJuIGNvbnRyb2xQcm9wZXJ0aWVzLmV4dHJhRGF0YVJlcGVhdFByb3AodGhpcy5kYXRhKTsKICB9CiAgLyoqCiAgICogQGRlc2NyaXB0aW9uIGdldFBvc2l0aW9uIHJldHVybnMgc3RyaW5nIHZhbHVlIGZyb20KICAgKiBjb250cm9sUHJvcGVydGllcy5waWN0dXJlUG9zaXRpb25Qcm9wCiAgICogQGZ1bmN0aW9uIGdldFBvc2l0aW9uCiAgICogQHJldHVybnMgc3RyaW5nIHZhbHVlCiAgICovCgoKICBnZXQgZ2V0UG9zaXRpb24oKSB7CiAgICByZXR1cm4gY29udHJvbFByb3BlcnRpZXMucGljdHVyZVBvc2l0aW9uUHJvcCh0aGlzLmRhdGEpOwogIH0KICAvKioKICAgKiBAZGVzY3JpcHRpb24gZ2V0UG9zaXRpb25YIHJldHVybnMgc3RyaW5nIHZhbHVlIGZyb20KICAgKiBjb250cm9sUHJvcGVydGllcy5waWN0dXJlWFlQb3NpdGlvblByb3AKICAgKiBAZnVuY3Rpb24gZ2V0UG9zaXRpb25YCiAgICogQHJldHVybnMgc3RyaW5nIHZhbHVlCiAgICovCgoKICBnZXQgZ2V0UG9zaXRpb25YKCkgewogICAgY29uc3QgcG9zWCA9IGNvbnRyb2xQcm9wZXJ0aWVzLnBpY3R1cmVYWVBvc2l0aW9uUHJvcCh0aGlzLmRhdGEpOwogICAgcmV0dXJuIHBvc1guYmFja2dyb3VuZFBvc2l0aW9uWDsKICB9CiAgLyoqCiAgICogQGRlc2NyaXB0aW9uIGdldFBvc2l0aW9uWSByZXR1cm5zIHN0cmluZyB2YWx1ZSBmcm9tCiAgICogY29udHJvbFByb3BlcnRpZXMucGljdHVyZVhZUG9zaXRpb25Qcm9wCiAgICogQGZ1bmN0aW9uIGdldFBvc2l0aW9uWQogICAqIEByZXR1cm5zIHN0cmluZyB2YWx1ZQogICAqLwoKCiAgZ2V0IGdldFBvc2l0aW9uWSgpIHsKICAgIGNvbnN0IHBvc1kgPSBjb250cm9sUHJvcGVydGllcy5waWN0dXJlWFlQb3NpdGlvblByb3AodGhpcy5kYXRhKTsKICAgIHJldHVybiBwb3NZLmJhY2tncm91bmRQb3NpdGlvblk7CiAgfQogIC8qKgogICAqIEBkZXNjcmlwdGlvbiBnZXRTaXplTW9kZSByZXR1cm5zIHN0cmluZyB2YWx1ZSBmcm9tCiAgICogY29udHJvbFByb3BlcnRpZXMucGljdHVyZVNpemVNb2RlUHJvcAogICAqIEBmdW5jdGlvbiBnZXRTaXplTW9kZQogICAqIEByZXR1cm5zIHN0cmluZyB2YWx1ZQogICAqLwoKCiAgZ2V0IGdldFNpemVNb2RlKCkgewogICAgcmV0dXJuIGNvbnRyb2xQcm9wZXJ0aWVzLnBpY3R1cmVTaXplTW9kZVByb3AodGhpcy5kYXRhKTsKICB9CiAgLyoqCiAgICogQGRlc2NyaXB0aW9uIGdldFNjcm9sbEJhclggcmV0dXJucyBzdHJpbmcgdmFsdWUgZnJvbQogICAqIGNvbnRyb2xQcm9wZXJ0aWVzLnNjcm9sbEJhclByb3AgLyBjb250cm9sUHJvcGVydGllcy5zY3JvbGxCYXJUZXh0Qm94UHJvcAogICAqIEBmdW5jdGlvbiBnZXRTY3JvbGxCYXJYCiAgICogQHJldHVybnMgc3RyaW5nIHZhbHVlCiAgICovCgoKICBnZXQgZ2V0U2Nyb2xsQmFyWCgpIHsKICAgIGlmICh0aGlzLmRhdGEudHlwZSA9PT0gJ1RleHRCb3gnKSB7CiAgICAgIGlmICh0aGlzLmlzRWRpdE1vZGUpIHsKICAgICAgICBjb25zdCBzY3JvbGxYRGF0YSA9IGNvbnRyb2xQcm9wZXJ0aWVzLnNjcm9sbEJhclRleHRCb3hQcm9wKHRoaXMuZGF0YSk7CiAgICAgICAgcmV0dXJuIHNjcm9sbFhEYXRhLm92ZXJmbG93WDsKICAgICAgfQogICAgfQoKICAgIGNvbnN0IHNjcm9sbFggPSBjb250cm9sUHJvcGVydGllcy5zY3JvbGxCYXJQcm9wKHRoaXMuZGF0YSk7CiAgICByZXR1cm4gc2Nyb2xsWC5vdmVyZmxvd1g7CiAgfQogIC8qKgogICAqIEBkZXNjcmlwdGlvbiBnZXRTY3JvbGxCYXJZIHJldHVybnMgc3RyaW5nIHZhbHVlIGZyb20KICAgKiBjb250cm9sUHJvcGVydGllcy5zY3JvbGxCYXJQcm9wIC8gY29udHJvbFByb3BlcnRpZXMuc2Nyb2xsQmFyVGV4dEJveFByb3AKICAgKiBAZnVuY3Rpb24gZ2V0U2Nyb2xsQmFyWQogICAqIEByZXR1cm5zIHN0cmluZyB2YWx1ZQogICAqLwoKCiAgZ2V0IGdldFNjcm9sbEJhclkoKSB7CiAgICBpZiAodGhpcy5kYXRhLnR5cGUgPT09ICdUZXh0Qm94JykgewogICAgICBpZiAodGhpcy5pc0VkaXRNb2RlKSB7CiAgICAgICAgY29uc3Qgc2Nyb2xsWURhdGEgPSBjb250cm9sUHJvcGVydGllcy5zY3JvbGxCYXJUZXh0Qm94UHJvcCh0aGlzLmRhdGEpOwogICAgICAgIHJldHVybiBzY3JvbGxZRGF0YS5vdmVyZmxvd1k7CiAgICAgIH0KICAgIH0KCiAgICBjb25zdCBzY3JvbGxZID0gY29udHJvbFByb3BlcnRpZXMuc2Nyb2xsQmFyUHJvcCh0aGlzLmRhdGEpOwogICAgcmV0dXJuIHNjcm9sbFkub3ZlcmZsb3dZOwogIH0KICAvKioKICAgKiBAZGVzY3JpcHRpb24gZ2V0U2Nyb2xsaW5nSGVpZ2h0IHJldHVybnMgc3RyaW5nIHZhbHVlIGZyb20KICAgKiBjb250cm9sUHJvcGVydGllcy5zY3JvbGxCYXJXaWR0aEFuZEhlaWdodFByb3AKICAgKiBAZnVuY3Rpb24gZ2V0U2Nyb2xsaW5nSGVpZ2h0CiAgICogQHJldHVybnMgc3RyaW5nIHZhbHVlCiAgICovCgoKICBnZXQgZ2V0U2Nyb2xsaW5nSGVpZ2h0KCkgewogICAgY29uc3Qgc2Nyb2xsaW5nSGVpZ2h0ID0gY29udHJvbFByb3BlcnRpZXMuc2Nyb2xsQmFyV2lkdGhBbmRIZWlnaHRQcm9wKHRoaXMuZGF0YSk7CiAgICByZXR1cm4gc2Nyb2xsaW5nSGVpZ2h0LnNjcm9sbEhlaWdodDsKICB9CiAgLyoqCiAgICogQGRlc2NyaXB0aW9uIGdldFNjcm9sbGluZ1dpZHRoIHJldHVybnMgc3RyaW5nIHZhbHVlIGZyb20KICAgKiBjb250cm9sUHJvcGVydGllcy5zY3JvbGxCYXJXaWR0aEFuZEhlaWdodFByb3AKICAgKiBAZnVuY3Rpb24gZ2V0U2Nyb2xsaW5nV2lkdGgKICAgKiBAcmV0dXJucyBzdHJpbmcgdmFsdWUKICAgKi8KCgogIGdldCBnZXRTY3JvbGxpbmdXaWR0aCgpIHsKICAgIGNvbnN0IHNjcm9sbGluZ1dpZHRoID0gY29udHJvbFByb3BlcnRpZXMuc2Nyb2xsQmFyV2lkdGhBbmRIZWlnaHRQcm9wKHRoaXMuZGF0YSk7CiAgICByZXR1cm4gc2Nyb2xsaW5nV2lkdGguc2Nyb2xsV2lkdGg7CiAgfQogIC8qKgogICAqIEBkZXNjcmlwdGlvbiBjaGVja090aGVyT3JpZW50YXRpb25zIHJldHVybnMgc3RyaW5nIHZhbHVlIGZyb20KICAgKiBjb250cm9sUHJvcGVydGllcy5jb250cm9sc09yaWVudGF0aW9uUHJvcAogICAqIEBmdW5jdGlvbiBjaGVja090aGVyT3JpZW50YXRpb25zCiAgICogQHJldHVybnMgYm9vbGVhbiB2YWx1ZQogICAqLwoKCiAgY2hlY2tPdGhlck9yaWVudGF0aW9ucygpIHsKICAgIHRocm93IG5ldyBFcnJvcignY2hlY2tPdGhlck9yaWVudGF0aW9ucyBOb3QgSW1wbGVtZW50ZWQnKTsKICB9CiAgLyoqCiAgICogQGRlc2NyaXB0aW9uIGdldEZvcmVDb2xvclZhbHVlIHJldHVybnMgc3RyaW5nIHZhbHVlIGZyb20KICAgKiBjb250cm9sUHJvcGVydGllcy5nZXRGb3JlQ29sb3IKICAgKiBAZnVuY3Rpb24gZ2V0Rm9yZUNvbG9yVmFsdWUKICAgKiBAcmV0dXJucyBzdHJpbmcgdmFsdWUKICAgKi8KCgogIGdldCBnZXRGb3JlQ29sb3JWYWx1ZSgpIHsKICAgIHJldHVybiBjb250cm9sUHJvcGVydGllcy5nZXRGb3JlQ29sb3IodGhpcy5kYXRhKTsKICB9CiAgLyoqCiAgICogQGRlc2NyaXB0aW9uIGluY3JlYXNlVGhlVmFsdWUgY2FsbHMgVnVleCBBY3Rpb25zIHRvIHVwZGF0ZSBvYmplY3QgYW5kIFZhbHVlIFByb3BlcnR5CiAgICogQGZ1bmN0aW9uIGluY3JlYXNlVGhlVmFsdWUKICAgKi8KCgogIGluY3JlYXNlVGhlVmFsdWUoKSB7CiAgICBsZXQgdGVtcFZhbCwgdGVtcE1heDsKCiAgICBpZiAodGhpcy5wcm9wZXJ0aWVzLk1heCA+PSAwICYmIHRoaXMucHJvcGVydGllcy5NaW4gPj0gMCkgewogICAgICBpZiAodGhpcy5wcm9wZXJ0aWVzLk1heCA8IHRoaXMucHJvcGVydGllcy5NaW4pIHsKICAgICAgICB0ZW1wTWF4ID0gdGhpcy5wcm9wZXJ0aWVzLk1heDsKCiAgICAgICAgaWYgKHRoaXMucHJvcGVydGllcy5WYWx1ZSA8IHRoaXMucHJvcGVydGllcy5NYXggJiYgdGhpcy5wcm9wZXJ0aWVzLlZhbHVlID4gdGhpcy5wcm9wZXJ0aWVzLk1pbikgewogICAgICAgICAgdGhpcy51cGRhdGVEYXRhTW9kZWwoewogICAgICAgICAgICBwcm9wZXJ0eU5hbWU6ICdWYWx1ZScsCiAgICAgICAgICAgIHZhbHVlOiB0aGlzLnByb3BlcnRpZXMuTWluCiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIHRlbXBWYWwgPSB0aGlzLnByb3BlcnRpZXMuVmFsdWU7CgogICAgICAgIGlmICh0ZW1wVmFsID49IHRlbXBNYXggJiYgdGVtcFZhbCAtIHRlbXBNYXggPiB0aGlzLnByb3BlcnRpZXMuU21hbGxDaGFuZ2UpIHsKICAgICAgICAgIHRlbXBWYWwgPSB0ZW1wVmFsIC0gdGhpcy5wcm9wZXJ0aWVzLlNtYWxsQ2hhbmdlOwogICAgICAgIH0gZWxzZSBpZiAodGVtcFZhbCA+PSB0ZW1wTWF4KSB7CiAgICAgICAgICB0ZW1wVmFsID0gdGVtcE1heDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGVtcFZhbCA9IHRlbXBNYXg7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRlbXBNYXggPSB0aGlzLnByb3BlcnRpZXMuTWF4OwoKICAgICAgICBpZiAodGhpcy5wcm9wZXJ0aWVzLlZhbHVlID4gdGhpcy5wcm9wZXJ0aWVzLk1heCAmJiB0aGlzLnByb3BlcnRpZXMuVmFsdWUgPCB0aGlzLnByb3BlcnRpZXMuTWluKSB7CiAgICAgICAgICB0aGlzLnVwZGF0ZURhdGFNb2RlbCh7CiAgICAgICAgICAgIHByb3BlcnR5TmFtZTogJ1ZhbHVlJywKICAgICAgICAgICAgdmFsdWU6IHRoaXMucHJvcGVydGllcy5NaW4KICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgdGVtcFZhbCA9IHRoaXMucHJvcGVydGllcy5WYWx1ZTsKCiAgICAgICAgaWYgKHRlbXBWYWwgPD0gdGVtcE1heCAmJiB0ZW1wTWF4IC0gdGVtcFZhbCA+IHRoaXMucHJvcGVydGllcy5TbWFsbENoYW5nZSkgewogICAgICAgICAgdGVtcFZhbCA9IHRlbXBWYWwgKyB0aGlzLnByb3BlcnRpZXMuU21hbGxDaGFuZ2U7CiAgICAgICAgfSBlbHNlIGlmICh0ZW1wVmFsIDw9IHRlbXBNYXgpIHsKICAgICAgICAgIHRlbXBWYWwgPSB0ZW1wTWF4OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0ZW1wVmFsID0gdGVtcE1heDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMudXBkYXRlRGF0YU1vZGVsKHsKICAgICAgICBwcm9wZXJ0eU5hbWU6ICdWYWx1ZScsCiAgICAgICAgdmFsdWU6IHRlbXBWYWwKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKHRoaXMucHJvcGVydGllcy5NYXggPCAwICYmIHRoaXMucHJvcGVydGllcy5NaW4gPCAwKSB7CiAgICAgIGlmICh0aGlzLnByb3BlcnRpZXMuTWF4ID4gdGhpcy5wcm9wZXJ0aWVzLk1pbikgewogICAgICAgIHRlbXBNYXggPSB0aGlzLnByb3BlcnRpZXMuTWF4OwoKICAgICAgICBpZiAodGhpcy5wcm9wZXJ0aWVzLlZhbHVlID4gdGhpcy5wcm9wZXJ0aWVzLk1heCAmJiB0aGlzLnByb3BlcnRpZXMuVmFsdWUgPCB0aGlzLnByb3BlcnRpZXMuTWluKSB7CiAgICAgICAgICB0aGlzLnVwZGF0ZURhdGFNb2RlbCh7CiAgICAgICAgICAgIHByb3BlcnR5TmFtZTogJ1ZhbHVlJywKICAgICAgICAgICAgdmFsdWU6IHRoaXMucHJvcGVydGllcy5NYXgKICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgdGVtcFZhbCA9IHRoaXMucHJvcGVydGllcy5WYWx1ZTsKCiAgICAgICAgaWYgKHRlbXBWYWwgPD0gdGVtcE1heCAmJiBNYXRoLmFicyh0ZW1wVmFsKSAtIE1hdGguYWJzKHRlbXBNYXgpID4gdGhpcy5wcm9wZXJ0aWVzLlNtYWxsQ2hhbmdlKSB7CiAgICAgICAgICB0ZW1wVmFsID0gTWF0aC5hYnModGVtcFZhbCkgLSB0aGlzLnByb3BlcnRpZXMuU21hbGxDaGFuZ2U7CiAgICAgICAgfSBlbHNlIGlmICh0ZW1wVmFsIDw9IHRlbXBNYXgpIHsKICAgICAgICAgIHRlbXBWYWwgPSBNYXRoLmFicyh0ZW1wTWF4KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGVtcFZhbCA9IE1hdGguYWJzKHRlbXBNYXgpOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0ZW1wTWF4ID0gTWF0aC5hYnModGhpcy5wcm9wZXJ0aWVzLk1heCk7CgogICAgICAgIGlmICh0aGlzLnByb3BlcnRpZXMuVmFsdWUgPCB0aGlzLnByb3BlcnRpZXMuTWF4ICYmIHRoaXMucHJvcGVydGllcy5WYWx1ZSA+IHRoaXMucHJvcGVydGllcy5NaW4pIHsKICAgICAgICAgIHRoaXMudXBkYXRlRGF0YU1vZGVsKHsKICAgICAgICAgICAgcHJvcGVydHlOYW1lOiAnVmFsdWUnLAogICAgICAgICAgICB2YWx1ZTogdGhpcy5wcm9wZXJ0aWVzLk1pbgogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICB0ZW1wVmFsID0gTWF0aC5hYnModGhpcy5wcm9wZXJ0aWVzLlZhbHVlKTsKCiAgICAgICAgaWYgKHRlbXBWYWwgPD0gdGVtcE1heCAmJiB0ZW1wTWF4IC0gdGVtcFZhbCA+IHRoaXMucHJvcGVydGllcy5TbWFsbENoYW5nZSkgewogICAgICAgICAgdGVtcFZhbCA9IHRlbXBWYWwgKyB0aGlzLnByb3BlcnRpZXMuU21hbGxDaGFuZ2U7CiAgICAgICAgfSBlbHNlIGlmICh0ZW1wVmFsIDw9IHRlbXBNYXgpIHsKICAgICAgICAgIHRlbXBWYWwgPSB0ZW1wTWF4OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0ZW1wVmFsID0gdGVtcE1heDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMudXBkYXRlRGF0YU1vZGVsKHsKICAgICAgICBwcm9wZXJ0eU5hbWU6ICdWYWx1ZScsCiAgICAgICAgdmFsdWU6ICctJyArIHRlbXBWYWwKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKHRoaXMucHJvcGVydGllcy5NYXggPCB0aGlzLnByb3BlcnRpZXMuTWluKSB7CiAgICAgIHRlbXBNYXggPSB0aGlzLnByb3BlcnRpZXMuTWF4OwoKICAgICAgaWYgKHRoaXMucHJvcGVydGllcy5WYWx1ZSA+IHRoaXMucHJvcGVydGllcy5NaW4gJiYgdGhpcy5wcm9wZXJ0aWVzLlZhbHVlIDwgdGhpcy5wcm9wZXJ0aWVzLk1heCkgewogICAgICAgIHRoaXMudXBkYXRlRGF0YU1vZGVsKHsKICAgICAgICAgIHByb3BlcnR5TmFtZTogJ1ZhbHVlJywKICAgICAgICAgIHZhbHVlOiB0aGlzLnByb3BlcnRpZXMuTWF4CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHRlbXBWYWwgPSB0aGlzLnByb3BlcnRpZXMuVmFsdWU7CgogICAgICBpZiAodGVtcFZhbCA+PSB0ZW1wTWF4ICYmIHRlbXBWYWwgLSB0ZW1wTWF4ID49IHRoaXMucHJvcGVydGllcy5TbWFsbENoYW5nZSkgewogICAgICAgIHRlbXBWYWwgPSB0ZW1wVmFsIC0gdGhpcy5wcm9wZXJ0aWVzLlNtYWxsQ2hhbmdlOwogICAgICB9IGVsc2UgaWYgKHRlbXBWYWwgPD0gdGVtcE1heCkgewogICAgICAgIHRlbXBWYWwgPSB0ZW1wTWF4OwogICAgICB9IGVsc2UgewogICAgICAgIHRlbXBWYWwgPSB0ZW1wTWF4OwogICAgICB9CgogICAgICB0aGlzLnVwZGF0ZURhdGFNb2RlbCh7CiAgICAgICAgcHJvcGVydHlOYW1lOiAnVmFsdWUnLAogICAgICAgIHZhbHVlOiB0ZW1wVmFsCiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgdGVtcE1heCA9IHRoaXMucHJvcGVydGllcy5NYXg7CgogICAgICBpZiAodGhpcy5wcm9wZXJ0aWVzLlZhbHVlID4gdGhpcy5wcm9wZXJ0aWVzLk1heCAmJiB0aGlzLnByb3BlcnRpZXMuVmFsdWUgPCB0aGlzLnByb3BlcnRpZXMuTWluKSB7CiAgICAgICAgdGhpcy51cGRhdGVEYXRhTW9kZWwoewogICAgICAgICAgcHJvcGVydHlOYW1lOiAnVmFsdWUnLAogICAgICAgICAgdmFsdWU6IHRoaXMucHJvcGVydGllcy5NaW4KICAgICAgICB9KTsKICAgICAgfQoKICAgICAgdGVtcFZhbCA9IHRoaXMucHJvcGVydGllcy5WYWx1ZTsKCiAgICAgIGlmICh0ZW1wVmFsIDw9IHRlbXBNYXggJiYgdGVtcE1heCAtIHRlbXBWYWwgPiB0aGlzLnByb3BlcnRpZXMuU21hbGxDaGFuZ2UpIHsKICAgICAgICB0ZW1wVmFsID0gdGVtcFZhbCArIHRoaXMucHJvcGVydGllcy5TbWFsbENoYW5nZTsKICAgICAgfSBlbHNlIGlmICh0ZW1wVmFsIDw9IHRlbXBNYXgpIHsKICAgICAgICB0ZW1wVmFsID0gdGVtcE1heDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0ZW1wVmFsID0gdGVtcE1heDsKICAgICAgfQoKICAgICAgdGhpcy51cGRhdGVEYXRhTW9kZWwoewogICAgICAgIHByb3BlcnR5TmFtZTogJ1ZhbHVlJywKICAgICAgICB2YWx1ZTogdGVtcFZhbAogICAgICB9KTsKICAgIH0KICB9CiAgLyoqCiAgICogQGRlc2NyaXB0aW9uIGRlY3JlYXNlVGhlVmFsdWUgY2FsbHMgVnVleCBBY3Rpb25zIHRvIHVwZGF0ZSBvYmplY3QgYW5kIFZhbHVlIFByb3BlcnR5CiAgICogQGZ1bmN0aW9uIGRlY3JlYXNlVGhlVmFsdWUKICAgKi8KCgogIGRlY3JlYXNlVGhlVmFsdWUoKSB7CiAgICBsZXQgdGVtcFZhbCwgdGVtcE1pbjsKCiAgICBpZiAodGhpcy5wcm9wZXJ0aWVzLk1heCA+PSAwICYmIHRoaXMucHJvcGVydGllcy5NaW4gPj0gMCkgewogICAgICBpZiAodGhpcy5wcm9wZXJ0aWVzLk1heCA8IHRoaXMucHJvcGVydGllcy5NaW4pIHsKICAgICAgICB0ZW1wTWluID0gdGhpcy5wcm9wZXJ0aWVzLk1pbjsKCiAgICAgICAgaWYgKHRoaXMucHJvcGVydGllcy5WYWx1ZSA8IHRoaXMucHJvcGVydGllcy5NYXggJiYgdGhpcy5wcm9wZXJ0aWVzLlZhbHVlID4gdGhpcy5wcm9wZXJ0aWVzLk1pbikgewogICAgICAgICAgdGhpcy51cGRhdGVEYXRhTW9kZWwoewogICAgICAgICAgICBwcm9wZXJ0eU5hbWU6ICdWYWx1ZScsCiAgICAgICAgICAgIHZhbHVlOiB0aGlzLnByb3BlcnRpZXMuTWluCiAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIHRlbXBWYWwgPSB0aGlzLnByb3BlcnRpZXMuVmFsdWU7CgogICAgICAgIGlmICh0ZW1wVmFsIDw9IHRlbXBNaW4gJiYgdGVtcE1pbiAtIHRlbXBWYWwgPiB0aGlzLnByb3BlcnRpZXMuU21hbGxDaGFuZ2UpIHsKICAgICAgICAgIHRlbXBWYWwgPSB0ZW1wVmFsICsgdGhpcy5wcm9wZXJ0aWVzLlNtYWxsQ2hhbmdlOwogICAgICAgIH0gZWxzZSBpZiAodGVtcFZhbCA8PSB0ZW1wTWluKSB7CiAgICAgICAgICB0ZW1wVmFsID0gdGVtcE1pbjsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGVtcFZhbCA9IHRlbXBNaW47CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRlbXBNaW4gPSB0aGlzLnByb3BlcnRpZXMuTWluOwoKICAgICAgICBpZiAodGhpcy5wcm9wZXJ0aWVzLlZhbHVlID4gdGhpcy5wcm9wZXJ0aWVzLk1heCAmJiB0aGlzLnByb3BlcnRpZXMuVmFsdWUgPCB0aGlzLnByb3BlcnRpZXMuTWluKSB7CiAgICAgICAgICB0aGlzLnVwZGF0ZURhdGFNb2RlbCh7CiAgICAgICAgICAgIHByb3BlcnR5TmFtZTogJ1ZhbHVlJywKICAgICAgICAgICAgdmFsdWU6IHRoaXMucHJvcGVydGllcy5NaW4KICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgdGVtcFZhbCA9IHRoaXMucHJvcGVydGllcy5WYWx1ZTsKCiAgICAgICAgaWYgKHRlbXBWYWwgPj0gdGVtcE1pbiAmJiB0ZW1wVmFsIC0gdGVtcE1pbiA+IHRoaXMucHJvcGVydGllcy5TbWFsbENoYW5nZSkgewogICAgICAgICAgdGVtcFZhbCA9IHRlbXBWYWwgLSB0aGlzLnByb3BlcnRpZXMuU21hbGxDaGFuZ2U7CiAgICAgICAgfSBlbHNlIGlmICh0ZW1wVmFsID49IHRlbXBNaW4pIHsKICAgICAgICAgIHRlbXBWYWwgPSB0ZW1wTWluOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0ZW1wVmFsID0gdGVtcE1pbjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMudXBkYXRlRGF0YU1vZGVsKHsKICAgICAgICBwcm9wZXJ0eU5hbWU6ICdWYWx1ZScsCiAgICAgICAgdmFsdWU6IHRlbXBWYWwKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKHRoaXMucHJvcGVydGllcy5NYXggPCAwICYmIHRoaXMucHJvcGVydGllcy5NaW4gPCAwKSB7CiAgICAgIGlmICh0aGlzLnByb3BlcnRpZXMuTWF4ID4gdGhpcy5wcm9wZXJ0aWVzLk1pbikgewogICAgICAgIHRlbXBNaW4gPSB0aGlzLnByb3BlcnRpZXMuTWluOwoKICAgICAgICBpZiAodGhpcy5wcm9wZXJ0aWVzLlZhbHVlID4gdGhpcy5wcm9wZXJ0aWVzLk1heCAmJiB0aGlzLnByb3BlcnRpZXMuVmFsdWUgPCB0aGlzLnByb3BlcnRpZXMuTWluKSB7CiAgICAgICAgICB0aGlzLnVwZGF0ZURhdGFNb2RlbCh7CiAgICAgICAgICAgIHByb3BlcnR5TmFtZTogJ1ZhbHVlJywKICAgICAgICAgICAgdmFsdWU6IHRoaXMucHJvcGVydGllcy5NaW4KICAgICAgICAgIH0pOwogICAgICAgIH0KCiAgICAgICAgdGVtcFZhbCA9IHRoaXMucHJvcGVydGllcy5WYWx1ZTsKCiAgICAgICAgaWYgKHRlbXBWYWwgPj0gdGVtcE1pbiAmJiBNYXRoLmFicyh0ZW1wTWluKSAtIE1hdGguYWJzKHRlbXBWYWwpID4gdGhpcy5wcm9wZXJ0aWVzLlNtYWxsQ2hhbmdlKSB7CiAgICAgICAgICB0ZW1wVmFsID0gTWF0aC5hYnModGVtcFZhbCkgKyB0aGlzLnByb3BlcnRpZXMuU21hbGxDaGFuZ2U7CiAgICAgICAgfSBlbHNlIGlmICh0ZW1wVmFsIDw9IHRlbXBNaW4pIHsKICAgICAgICAgIHRlbXBWYWwgPSBNYXRoLmFicyh0ZW1wTWluKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGVtcFZhbCA9IE1hdGguYWJzKHRlbXBNaW4pOwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0ZW1wTWluID0gTWF0aC5hYnModGhpcy5wcm9wZXJ0aWVzLk1pbik7CgogICAgICAgIGlmICh0aGlzLnByb3BlcnRpZXMuVmFsdWUgPCB0aGlzLnByb3BlcnRpZXMuTWF4ICYmIHRoaXMucHJvcGVydGllcy5WYWx1ZSA+IHRoaXMucHJvcGVydGllcy5NaW4pIHsKICAgICAgICAgIHRoaXMudXBkYXRlRGF0YU1vZGVsKHsKICAgICAgICAgICAgcHJvcGVydHlOYW1lOiAnVmFsdWUnLAogICAgICAgICAgICB2YWx1ZTogdGhpcy5wcm9wZXJ0aWVzLk1pbgogICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICB0ZW1wVmFsID0gTWF0aC5hYnModGhpcy5wcm9wZXJ0aWVzLlZhbHVlKTsKCiAgICAgICAgaWYgKHRlbXBWYWwgPj0gdGVtcE1pbiAmJiB0ZW1wVmFsIC0gdGVtcE1pbiA+IHRoaXMucHJvcGVydGllcy5TbWFsbENoYW5nZSkgewogICAgICAgICAgdGVtcFZhbCA9IHRlbXBWYWwgLSB0aGlzLnByb3BlcnRpZXMuU21hbGxDaGFuZ2U7CiAgICAgICAgfSBlbHNlIGlmICh0ZW1wVmFsID49IHRlbXBNaW4pIHsKICAgICAgICAgIHRlbXBWYWwgPSB0ZW1wTWluOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0ZW1wVmFsID0gdGVtcE1pbjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMudXBkYXRlRGF0YU1vZGVsKHsKICAgICAgICBwcm9wZXJ0eU5hbWU6ICdWYWx1ZScsCiAgICAgICAgdmFsdWU6ICctJyArIHRlbXBWYWwKICAgICAgfSk7CiAgICB9IGVsc2UgaWYgKHRoaXMucHJvcGVydGllcy5NYXggPCB0aGlzLnByb3BlcnRpZXMuTWluKSB7CiAgICAgIHRlbXBNaW4gPSB0aGlzLnByb3BlcnRpZXMuTWluOwoKICAgICAgaWYgKHRoaXMucHJvcGVydGllcy5WYWx1ZSA+IHRoaXMucHJvcGVydGllcy5NaW4gJiYgdGhpcy5wcm9wZXJ0aWVzLlZhbHVlIDwgdGhpcy5wcm9wZXJ0aWVzLk1heCkgewogICAgICAgIHRoaXMudXBkYXRlRGF0YU1vZGVsKHsKICAgICAgICAgIHByb3BlcnR5TmFtZTogJ1ZhbHVlJywKICAgICAgICAgIHZhbHVlOiB0aGlzLnByb3BlcnRpZXMuTWF4CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHRlbXBWYWwgPSB0aGlzLnByb3BlcnRpZXMuVmFsdWU7CgogICAgICBpZiAodGVtcFZhbCA8PSB0ZW1wTWluICYmIHRlbXBNaW4gLSB0ZW1wVmFsID4gdGhpcy5wcm9wZXJ0aWVzLlNtYWxsQ2hhbmdlKSB7CiAgICAgICAgdGVtcFZhbCA9IHRlbXBWYWwgKyB0aGlzLnByb3BlcnRpZXMuU21hbGxDaGFuZ2U7CiAgICAgIH0gZWxzZSBpZiAodGVtcFZhbCA+PSB0ZW1wTWluKSB7CiAgICAgICAgdGVtcFZhbCA9IHRlbXBNaW47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGVtcFZhbCA9IHRlbXBNaW47CiAgICAgIH0KCiAgICAgIHRoaXMudXBkYXRlRGF0YU1vZGVsKHsKICAgICAgICBwcm9wZXJ0eU5hbWU6ICdWYWx1ZScsCiAgICAgICAgdmFsdWU6IHRlbXBWYWwKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICB0ZW1wTWluID0gdGhpcy5wcm9wZXJ0aWVzLk1pbjsKCiAgICAgIGlmICh0aGlzLnByb3BlcnRpZXMuVmFsdWUgPiB0aGlzLnByb3BlcnRpZXMuTWF4ICYmIHRoaXMucHJvcGVydGllcy5WYWx1ZSA8IHRoaXMucHJvcGVydGllcy5NaW4pIHsKICAgICAgICB0aGlzLnVwZGF0ZURhdGFNb2RlbCh7CiAgICAgICAgICBwcm9wZXJ0eU5hbWU6ICdWYWx1ZScsCiAgICAgICAgICB2YWx1ZTogdGhpcy5wcm9wZXJ0aWVzLk1pbgogICAgICAgIH0pOwogICAgICB9CgogICAgICB0ZW1wVmFsID0gdGhpcy5wcm9wZXJ0aWVzLlZhbHVlOwoKICAgICAgaWYgKHRlbXBWYWwgPj0gdGVtcE1pbiAmJiB0ZW1wVmFsIC0gdGVtcE1pbiA+IHRoaXMucHJvcGVydGllcy5TbWFsbENoYW5nZSkgewogICAgICAgIHRlbXBWYWwgPSB0ZW1wVmFsIC0gdGhpcy5wcm9wZXJ0aWVzLlNtYWxsQ2hhbmdlOwogICAgICB9IGVsc2UgaWYgKHRlbXBWYWwgPj0gdGVtcE1pbikgewogICAgICAgIHRlbXBWYWwgPSB0ZW1wTWluOwogICAgICB9IGVsc2UgewogICAgICAgIHRlbXBWYWwgPSB0ZW1wTWluOwogICAgICB9CgogICAgICB0aGlzLnVwZGF0ZURhdGFNb2RlbCh7CiAgICAgICAgcHJvcGVydHlOYW1lOiAnVmFsdWUnLAogICAgICAgIHZhbHVlOiB0ZW1wVmFsCiAgICAgIH0pOwogICAgfQogIH0KICAvKioKICAgKiBAZGVzY3JpcHRpb24gdHJhbnNmb3JtU2Nyb2xsQnV0dG9uU3R5bGUgcmV0dXJucyBzdHJpbmcgdmFsdWUgZnJvbQogICAqIGtub2JQcm9wZXJ0aWVzLnRyYW5zZm9ybVNjcm9sbEJ1dHRvblN0eWxlCiAgICogQGZ1bmN0aW9uIHRyYW5zZm9ybVNjcm9sbEJ1dHRvblN0eWxlCiAgICogQHJldHVybnMgc3RyaW5nIHZhbHVlCiAgICovCgoKICBnZXQgdHJhbnNmb3JtU2Nyb2xsQnV0dG9uU3R5bGUoKSB7CiAgICByZXR1cm4gY29udHJvbFByb3BlcnRpZXMudHJhbnNmb3JtU2Nyb2xsQnV0dG9uU3R5bGUodGhpcy5kYXRhKTsKICB9CiAgLyoqCiAgKiBAZGVzY3JpcHRpb24gdXBkYXRlIHRoZSBpc0NvbnRlbnRFZGl0YWJsZSB0byBtYWtlIHRoZSBCdXR0b24gY29udGVudCBlZGl0YWJsZQogICogb3Igbm9uZWRpdGFibGUgb24gY2xpY2sgb2YgZW50ZXIga2V5CiAgKiBAZnVuY3Rpb24gc2V0Q29udGVudEVkaXRhYmxlCiAgKiBAcGFyYW0gZXZlbnQKICAqIEBwYXJhbSBjb250ZW50RWRpdGFibGUKICAqLwoKCiAgc2V0Q29udGVudEVkaXRhYmxlKGV2ZW50LCBjb250ZW50RWRpdGFibGUpIHsKICAgIHRoaXMuc2V0RWRpdE1vZGUoY29udGVudEVkaXRhYmxlKTsKICB9CiAgLyoqCiAgICogQGRlc2NyaXB0aW9uICBzZXRzIFN0eWxlcyB0byBjaGVja2JveC9vcHRpb25CdXR0b24gYW5kIGxhYmVsIGJhc2VkIG9uIGNvbnRyb2wgVmFsdWUgcHJvcGVydHkKICAgKiBAZnVuY3Rpb24gc2V0U3R5bGUKICAgKkBwYXJhbSByZWYKICAgKkBwYXJhbSBjaGVja2VkCiAgICpAcGFyYW0gZGlzYWJsZWQKICAgKkBwYXJhbSBiZ0NvbG9yCiAgICovCgoKICBzZXRTdHlsZShyZWYsIGNoZWNrZWQsIGRpc2FibGVkLCBiZ0NvbG9yKSB7CiAgICBpZiAocmVmKSB7CiAgICAgIHJlZi5jaGVja2VkID0gY2hlY2tlZDsKICAgICAgcmVmLnBhcmVudE5vZGUuY2hpbGROb2Rlc1sxXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBiZ0NvbG9yOwogICAgICByZWYuZGlzYWJsZWQgPSBkaXNhYmxlZDsKICAgIH0KICB9CiAgLyoqCiAgICogQGRlc2NyaXB0aW9uICBzdHlsZSBvYmplY3QgaXMgcGFzc2VkIHRvIDpzdHlsZSBhdHRyaWJ1dGUgaW4gc3BhbiB0YWcgaW4gY2hlY2tib3gvT3B0aW9uQnV0dG9uCiAgICogZHluYW1pY2FsbHkgY2hhbmdpbmcgdGhlIHN0eWxlcyBvZiB0aGUgY29tcG9uZW50IGJhc2VkIG9uIHByb3BlcnRpZXMKICAgKiBAZnVuY3Rpb24gc3R5bGVGb3JCdG4KICAgKgogICAqLwoKCiAgZ2V0IHN0eWxlRm9yQnRuKCkgewogICAgY29uc3Qgc3R5bGUgPSB7CiAgICAgIGJvcmRlcjogJzFweCBpbnNldCBncmV5JywKICAgICAgYmFja2dyb3VuZENvbG9yOiAnaW5oZXJpdCcsCiAgICAgIHRvcDogJzBweCcsCiAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnCiAgICB9OwoKICAgIGlmICghdGhpcy5wcm9wZXJ0aWVzLkVuYWJsZWQpIHsKICAgICAgc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3JnYmEoMjIwLCAyMjAsIDIyMCwgMSknOwogICAgfQoKICAgIGlmICh0aGlzLnByb3BlcnRpZXMuU3BlY2lhbEVmZmVjdCA9PT0gMCkgewogICAgICByZXR1cm4gc3R5bGU7CiAgICB9IGVsc2UgewogICAgICBzdHlsZS5ib3JkZXIgPSAnMnB4IGdyb292ZSBncmV5JzsKICAgICAgcmV0dXJuIHN0eWxlOwogICAgfQogIH0KICAvKioKICAgKiBAZGVzY3JpcHRpb24gIHNldHMgY29udHJvbFNvdXJjZSBpZiBwcmVzZW50IGFuZCB1cGRhdGVzIFZhbHVlIHByb3BlcnR5CiAgICogQGZ1bmN0aW9uIGNvbnRyb2xTb3VyY2UKICAgKi8KCgogIGNvbnRyb2xTb3VyY2UoKSB7CiAgICBjb25zdCBwcm9wRGF0YSA9IHRoaXMuZGF0YTsKCiAgICBpZiAodGhpcy5kYXRhLnR5cGUgPT09ICdTcGluQnV0dG9uJyB8fCB0aGlzLmRhdGEudHlwZSA9PT0gJ1Njcm9sbEJhcicpIHsKICAgICAgaWYgKHByb3BEYXRhLnByb3BlcnRpZXMuQ29udHJvbFNvdXJjZSAmJiBwcm9wRGF0YS5leHRyYURhdGFzKSB7CiAgICAgICAgaWYgKHByb3BEYXRhLmV4dHJhRGF0YXMuQ29udHJvbFNvdXJjZVZhbHVlICE9PSBudWxsICYmIHByb3BEYXRhLmV4dHJhRGF0YXMuQ29udHJvbFNvdXJjZVZhbHVlICE9PSB1bmRlZmluZWQpIHsKICAgICAgICAgIGNvbnN0IGEgPSBwcm9wRGF0YS5leHRyYURhdGFzLkNvbnRyb2xTb3VyY2VWYWx1ZTsKCiAgICAgICAgICBpZiAocGFyc2VJbnQoYSkgPD0gcHJvcERhdGEucHJvcGVydGllcy5NYXggJiYgcGFyc2VJbnQoYSkgPj0gcHJvcERhdGEucHJvcGVydGllcy5NaW4pIHsKICAgICAgICAgICAgdGhpcy51cGRhdGVEYXRhTW9kZWwoewogICAgICAgICAgICAgIHByb3BlcnR5TmFtZTogJ1ZhbHVlJywKICAgICAgICAgICAgICB2YWx1ZTogcHJvcERhdGEuZXh0cmFEYXRhcy5Db250cm9sU291cmNlVmFsdWUKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICA7CiAgICB9IGVsc2UgaWYgKHByb3BEYXRhLnByb3BlcnRpZXMuQ29udHJvbFNvdXJjZSkgewogICAgICBjb25zdCBjb250cm9sU291cmNlVmFsdWUgPSBwcm9wRGF0YS5leHRyYURhdGFzLkNvbnRyb2xTb3VyY2VWYWx1ZS50b0xvd2VyQ2FzZSgpOwogICAgICBjb25zdCBpc0Jvb2xlYW4gPSBjb250cm9sU291cmNlVmFsdWUgPT09ICd0cnVlJyA/IHRydWUgOiBjb250cm9sU291cmNlVmFsdWUgPT09ICdmYWxzZScgPyBmYWxzZSA6ICcnOwogICAgICB0aGlzLnVwZGF0ZURhdGFNb2RlbCh7CiAgICAgICAgcHJvcGVydHlOYW1lOiAnVmFsdWUnLAogICAgICAgIHZhbHVlOiBpc0Jvb2xlYW4udG9TdHJpbmcoKQogICAgICB9KTsKICAgIH0KICB9CiAgLyoqCiAgICogQGRlc2NyaXB0aW9uICB1cGRhdGUgdGhlIHZhbHVlIG9mIGNvbnRyb2wgcHJvcGVydGllcwogICAqIEBmdW5jdGlvbiB1cGRhdGVEYXRhTW9kZWwKICAgKiBAcGFyYW0gdXBkYXRlRGF0YQogICAqLwoKCiAgdXBkYXRlRGF0YU1vZGVsKHVwZGF0ZURhdGEpIHsKICAgIHJldHVybiB1cGRhdGVEYXRhOwogIH0KICAvKioKICAgKiBAZGVzY3JpcHRpb24gIHVwZGF0ZSB0aGUgdmFsdWUgb2YgY29udHJvbCBleHRyYURhdGFzIHByb3BlcnRpZXMKICAgKiBAZnVuY3Rpb24gdXBkYXRlRGF0YU1vZGVsRXh0cmFEYXRhCiAgICogQHBhcmFtIHVwZGF0ZURhdGEKICAgKi8KCgogIHVwZGF0ZURhdGFNb2RlbEV4dHJhRGF0YSh1cGRhdGVEYXRhKSB7CiAgICByZXR1cm4gdXBkYXRlRGF0YTsKICB9CiAgLyoqCiAgKiBAZGVzY3JpcHRpb24gd2F0Y2hlcyB0ZXh0IHByb3BlcnRpZXMKICAqIEBmdW5jdGlvbiB2YWx1ZVVwZGF0ZVByb3AKICAqIEBwYXJhbSBvbGRWYWwgcHJldmlvdXMgc3RyaW5nIHZhbHVlCiAgKiBAcGFyYW0gbmV3VmFsICBuZXcvY2hhbmdlZCBzdHJpbmcgdmFsdWUKICAqLwoKCiAgdmFsdWVVcGRhdGVQcm9wKG5ld1ZhbCwgb2xkVmFsKSB7CiAgICBpZiAodGhpcy5kYXRhLnR5cGUuaW5jbHVkZXMoJ1RleHRCb3gnKSB8fCB0aGlzLmRhdGEudHlwZSA9PT0gJ0NvbWJvQm94JykgewogICAgICBjb25zdCBwcm9wRGF0YSA9IHRoaXMucHJvcGVydGllczsKICAgICAgdGhpcy51cGRhdGVEYXRhTW9kZWwoewogICAgICAgIHByb3BlcnR5TmFtZTogJ1ZhbHVlJywKICAgICAgICB2YWx1ZTogbmV3VmFsCiAgICAgIH0pOwogICAgfQogIH0KICAvKioKICAgKiBAZGVzY3JpcHRpb24gd2F0Y2hlcyB0ZXh0IGFuZCB2YWx1ZSBwcm9wZXJ0aWVzIGFyZSBzYW1lIHdoZW4gY29tcG9uZW50IGlzIG1vdW50ZWQvY2hhbmdlZAogICAqIEBmdW5jdGlvbiB0ZXh0QW5kVmFsdWVVcGRhdGVQcm9wCiAgICogQHBhcmFtIG9sZFZhbCBwcmV2aW91cyBwcm9wZXJ0aWVzIGRhdGEKICAgKiBAcGFyYW0gbmV3VmFsICBuZXcvY2hhbmdlZCBwcm9wZXJ0aWVzIGRhdGEKICAgKi8KCgogIHRleHRBbmRWYWx1ZVVwZGF0ZVByb3AobmV3VmFsLCBvbGRWYWwpIHsKICAgIGlmICh0aGlzLmRhdGEudHlwZS5pbmNsdWRlcygnVGV4dEJveCcpKSB7CiAgICAgIGNvbnN0IHByb3BEYXRhID0gdGhpcy5wcm9wZXJ0aWVzOwoKICAgICAgaWYgKHByb3BEYXRhLlRleHQgIT09IHByb3BEYXRhLlZhbHVlICYmIHByb3BEYXRhLkNvbnRyb2xTb3VyY2UgPT09ICcnKSB7CiAgICAgICAgY29uc3QgcHJvcFRleHQgPSBwcm9wRGF0YS5UZXh0Lmxlbmd0aDsKICAgICAgICBjb25zdCBwcm9wVmFsdWUgPSBwcm9wRGF0YS5WYWx1ZS5sZW5ndGg7CiAgICAgICAgdGhpcy51cGRhdGVEYXRhTW9kZWwoewogICAgICAgICAgcHJvcGVydHlOYW1lOiAnVGV4dCcsCiAgICAgICAgICB2YWx1ZTogdGhpcy5wcm9wZXJ0aWVzLlZhbHVlCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAodGhpcy5kYXRhLnR5cGUuaW5jbHVkZXMoJ0NoZWNrQm94JykgfHwgdGhpcy5kYXRhLnR5cGUuaW5jbHVkZXMoJ09wdGlvbkJ1dHRvbicpKSB7CiAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy5wcm9wZXJ0aWVzLlZhbHVlOwogICAgICBjb25zdCB2YWx1ZVR5cGUgPSB0eXBlb2YgdmFsdWU7CiAgICAgIGxldCBpc0Jvb2xlYW4gPSAnJzsKCiAgICAgIGlmICh2YWx1ZVR5cGUgPT09ICdib29sZWFuJykgewogICAgICAgIGlzQm9vbGVhbiA9IHZhbHVlOwogICAgICB9IGVsc2UgaWYgKHZhbHVlVHlwZSA9PT0gJ3N0cmluZycpIHsKICAgICAgICBpc0Jvb2xlYW4gPSB2YWx1ZS50b0xvd2VyQ2FzZSgpID09PSAndHJ1ZScgPyB0cnVlIDogdmFsdWUudG9Mb3dlckNhc2UoKSA9PT0gJ2ZhbHNlJyA/IGZhbHNlIDogJyc7CiAgICAgIH0KCiAgICAgIGNvbnN0IHJlZiA9IHRoaXMuZGF0YS50eXBlLmluY2x1ZGVzKCdDaGVja0JveCcpID8gdGhpcy5jaGVja2JveFJlZiA6IHRoaXMub3B0aW9uQnRuUmVmOwoKICAgICAgaWYgKGlzQm9vbGVhbiAhPT0gJycpIHsKICAgICAgICBpZiAoaXNCb29sZWFuKSB7CiAgICAgICAgICB0aGlzLnNldFN0eWxlKHJlZiwgaXNCb29sZWFuLCAhaXNCb29sZWFuLCAnd2hpdGUnKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5zZXRTdHlsZShyZWYsIGZhbHNlLCBmYWxzZSwgJ3doaXRlJyk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2V0U3R5bGUocmVmLCB0cnVlLCB0cnVlLCAncmdiYSgyMjAsIDIyMCwgMjIwLCAxKScpOwogICAgICB9CiAgICB9CiAgfQogIC8qKgogICAqIEBkZXNjcmlwdGlvbiBjaGFuZ2luZyB3aWR0aCBhbmQgaGVpZ2h0IG9mIHRleHRhcmVhIHRhZyBieSByZXBsaWNhdGluZyBzdHlsZSBvZgogICAqIHRleHRhcmVhIHdpdGggbGFiZWwgdGFnIHRvIG1ha2luZyB0aGUgcHJvcGVydHkgd29yayBpbiB0ZXh0YXJlYQogICAqIEBmdW5jdGlvbiB1cGRhdGVBdXRvU2l6ZQogICAqIEBwYXJhbSBvbGRWYWwgcHJldmlvdXMgcHJvcGVydGllcyBkYXRhCiAgICogQHBhcmFtIG5ld1ZhbCAgbmV3L2NoYW5nZWQgcHJvcGVydGllcyBkYXRhCiAgICovCgoKICB1cGRhdGVBdXRvU2l6ZShuZXdWYWwsIG9sZFZhbCkgewogICAgdGhyb3cgbmV3IEVycm9yKCd1cGRhdGVBdXRvc2l6ZSBOb3QgSW1wbGVtZW50ZWQnKTsKICB9CiAgLyoqCiAgICAqIEBkZXNjcmlwdGlvbiAgc2V0cyBjaGVja2VkIG9yIHVuY2hlY2tlZCB3aGVuIGNoZWNrYm94IGlzIGNsaWNrZWQKICAgICogaWYgVHJpcGxlU3RhdGUgaXMgVHJ1ZSwgTnVsbCBzdGF0ZSB3aWxsIGJlIHZpc2libGUKICAgICogQGZ1bmN0aW9uIGhhbmRsZUNoYW5nZQogICAgKiBAcGFyYW0gZXZlbnQgaXQgaXMgb2YgdHlwZSBNb3VzZUV2ZW50CiAgICAqLwoKCiAgaGFuZGxlQ2hhbmdlKGV2ZW50LCB0YXJnZXRSZWYpIHsKICAgIGlmIChldmVudC50YXJnZXQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KSB7CiAgICAgIGNvbnN0IGVsID0gZXZlbnQudGFyZ2V0LmNoZWNrZWQ7CgogICAgICBpZiAodGhpcy5wcm9wZXJ0aWVzLlRyaXBsZVN0YXRlKSB7CiAgICAgICAgdGhpcy50cmlwbGVTdGF0ZSsrOwoKICAgICAgICBpZiAodGhpcy50cmlwbGVTdGF0ZSAlIDMgPT09IDApIHsKICAgICAgICAgIHRoaXMuc2V0U3R5bGUodGFyZ2V0UmVmLCB0cnVlLCBmYWxzZSwgJ3JnYmEoMjIwLCAyMjAsIDIyMCwgMSknKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5zZXRTdHlsZSh0YXJnZXRSZWYsIGVsLCBmYWxzZSwgJ3doaXRlJyk7CiAgICAgICAgICB0aGlzLnVwZGF0ZURhdGFNb2RlbCh7CiAgICAgICAgICAgIHByb3BlcnR5TmFtZTogJ1ZhbHVlJywKICAgICAgICAgICAgdmFsdWU6IGVsCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy50cmlwbGVTdGF0ZSsrOwogICAgICAgIHRoaXMudXBkYXRlRGF0YU1vZGVsKHsKICAgICAgICAgIHByb3BlcnR5TmFtZTogJ1ZhbHVlJywKICAgICAgICAgIHZhbHVlOiBlbAogICAgICAgIH0pOwogICAgICAgIHRoaXMuc2V0U3R5bGUodGFyZ2V0UmVmLCBlbCwgZmFsc2UsICd3aGl0ZScpOwogICAgICB9CiAgICB9CiAgfQogIC8qKgogICAgKiBAZGVzY3JpcHRpb24gZ2V0UmVwZWF0IHJldHVybnMgc3RyaW5nIHZhbHVlIGZyb20KICAgICogY29udHJvbFByb3BlcnRpZXMuZXh0cmFEYXRhUmVwZWF0UHJvcAogICAgKiBAZnVuY3Rpb24gZ2V0UmVwZWF0CiAgICAqLwoKCiAgZ2V0IGdldFJlcGVhdERhdGEoKSB7CiAgICAvLyAgaWYgKHRoaXMucHJvcGVydGllcy5QaWN0dXJlID09PSAnJykgewogICAgcmV0dXJuIGNvbnRyb2xQcm9wZXJ0aWVzLmV4dHJhRGF0YVJlcGVhdFByb3AodGhpcy5kYXRhKTsgLy8gIH0gZWxzZSB7CiAgICAvLyAgICByZXR1cm4gY29udHJvbFByb3BlcnRpZXMucGljdHVyZVRpbGluZ1Byb3AodGhpcy5kYXRhKQogICAgLy8gIH0KICB9CiAgLyoqCiAgICAqIEBkZXNjcmlwdGlvbiBjb21wdXRlZENhcHRpb24gcmV0dXJucyBvYmplY3QgdmFsdWUgZnJvbQogICAgKiB3aXRoIGFjY2VsZXJhdG9yQ2FwdGlvbiwgYWZ0ZXJiZWdpbkNhcHRpb24sIGJlZm9yZWVuZENhcHRpb24gdmFsdWVzCiAgICAqIEBmdW5jdGlvbiBjb21wdXRlZENhcHRpb24KICAgICogQHJldHVybnMgb2JqZWN0IHZhbHVlCiAgICAqLwoKCiAgZ2V0IGNvbXB1dGVkQ2FwdGlvbigpIHsKICAgIGxldCBhY2NlbGVyYXRvciA9ICcnOwoKICAgIGlmICh0aGlzLnByb3BlcnRpZXMuQWNjZWxlcmF0b3IpIHsKICAgICAgYWNjZWxlcmF0b3IgPSB0aGlzLnByb3BlcnRpZXMuQWNjZWxlcmF0b3IuY2hhckF0KDApOwogICAgfQoKICAgIHJldHVybiBjb250cm9sUHJvcGVydGllcy5hY2NlbGVyYXRvclByb3AodGhpcy5wcm9wZXJ0aWVzLkNhcHRpb24sIGFjY2VsZXJhdG9yKTsKICB9CgogIHVwZGF0ZUNvbHVtbldpZHRocyhpbmRleCwgaGVpZ2h0KSB7CiAgICBjb25zdCBjb250cm9sUHJvcCA9IHRoaXMucHJvcGVydGllczsKICAgIGNvbnN0IHVwZGF0ZUNvbFdpZHRoID0gY29udHJvbFByb3AuQ29sdW1uV2lkdGhzLnNwbGl0KCc7Jyk7CiAgICBjb25zdCBjb2xDaGFuZ2VDaGVjayA9IGNvbnRyb2xQcm9wLkNvbHVtbkNvdW50IC0gMSA8IGluZGV4OwogICAgcmV0dXJuIHsKICAgICAgcG9zaXRpb246ICdyZWxhdGl2ZScsCiAgICAgIGRpc3BsYXk6ICdpbmxpbmUtYmxvY2snLAogICAgICB0ZXh0QWxpZ246IGNvbnRyb2xQcm9wLlRleHRBbGlnbiA9PT0gMCA/ICdsZWZ0JyA6IGNvbnRyb2xQcm9wLlRleHRBbGlnbiA9PT0gMiA/ICdyaWdodCcgOiAnY2VudGVyJywKICAgICAgd2lkdGg6IGNvbnRyb2xQcm9wLkNvbHVtbkNvdW50ID09PSAtMSA/IHVwZGF0ZUNvbFdpZHRoW2luZGV4XSA/IHBhcnNlSW50KHVwZGF0ZUNvbFdpZHRoW2luZGV4XSkgKyAncHgnIDogJzEwMHB4JyA6IGNvbENoYW5nZUNoZWNrID8gJzBweCcgOiB1cGRhdGVDb2xXaWR0aFtpbmRleF0gPyBwYXJzZUludCh1cGRhdGVDb2xXaWR0aFtpbmRleF0pICsgJ3B4JyA6IGNvbnRyb2xQcm9wLkNvbHVtbkNvdW50ID4gaW5kZXggPyAnMTAwcHgnIDogJzBweCcsCiAgICAgIG92ZXJmbG93OiAnaGlkZGVuJywKICAgICAgcGFkZGluZ0JvdHRvbTogdGhpcy5kYXRhLnByb3BlcnRpZXMuRm9udC5Gb250U2l6ZSA+IDQ4ID8gJzEwcHgnIDogJzVweCcKICAgIH07CiAgfQoKICB1cGRhdGVDb2xIZWFkcyhpbmRleCkgewogICAgY29uc3QgY29udHJvbFByb3AgPSB0aGlzLnByb3BlcnRpZXM7CiAgICBjb25zdCB1cGRhdGVDb2xXaWR0aCA9IGNvbnRyb2xQcm9wLkNvbHVtbldpZHRocy5zcGxpdCgnOycpOwogICAgcmV0dXJuIHsKICAgICAgdGV4dEFsaWduOiBjb250cm9sUHJvcC5UZXh0QWxpZ24gPT09IDAgPyAnbGVmdCcgOiBjb250cm9sUHJvcC5UZXh0QWxpZ24gPT09IDIgPyAncmlnaHQnIDogJ2NlbnRlcicsCiAgICAgIGJvcmRlclJpZ2h0OiBpbmRleCA8IGNvbnRyb2xQcm9wLkNvbHVtbkNvdW50IC0gMSA/ICcxcHggc29saWQnIDogJycsCiAgICAgIHdpZHRoOiBjb250cm9sUHJvcC5Db2x1bW5Db3VudCA9PT0gLTEgPyBwYXJzZUludCh1cGRhdGVDb2xXaWR0aFtpbmRleF0pICsgJ3B4JyA6IHVwZGF0ZUNvbFdpZHRoW2luZGV4XSA/IHBhcnNlSW50KHVwZGF0ZUNvbFdpZHRoW2luZGV4XSkgKyAncHgnIDogJzEwMHB4JywKICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nCiAgICB9OwogIH0KICAvKioKICAgKiBAZGVzY3JpcHRpb24gd2F0Y2hlcyBjaGFuZ2VzIGluIHByb3BlcnRpZXMgZm9yIEJvdW5kQ29sdW1uCiAgICogQGZ1bmN0aW9uIGJvdW5kQ29sdW1uVmFsdWUKICAgKiBAcGFyYW0gb2xkVmFsIHByZXZpb3VzIHByb3BlcnRpZXMgZGF0YQogICAqIEBwYXJhbSBuZXdWYWwgIG5ldy9jaGFuZ2VkIHByb3BlcnRpZXMgZGF0YQogICAqLwoKCiAgYm91bmRDb2x1bW5WYWx1ZShuZXdWYWwsIG9sZFZhbCkgewogICAgaWYgKHRoaXMucHJvcGVydGllcy5Cb3VuZENvbHVtbiA+IDAgJiYgdGhpcy5wcm9wZXJ0aWVzLkJvdW5kQ29sdW1uIDwgdGhpcy5leHRyYURhdGFzLlJvd1NvdXJjZURhdGEubGVuZ3RoKSB7CiAgICAgIGxldCB0ZW1wRGF0YSA9IFsuLi50aGlzLmV4dHJhRGF0YXMuUm93U291cmNlRGF0YV07CiAgICAgIHRlbXBEYXRhWzBdWzBdID0gdGVtcERhdGFbMF1bbmV3VmFsIC0gMV07CiAgICAgIGxldCB0ZW1wVmFsdWUgPSB0ZW1wRGF0YVswXVtuZXdWYWwgLSAxXTsKICAgICAgdGhpcy51cGRhdGVEYXRhTW9kZWxFeHRyYURhdGEoewogICAgICAgIHByb3BlcnR5TmFtZTogJ1Jvd1NvdXJjZURhdGEnLAogICAgICAgIHZhbHVlOiB0ZW1wRGF0YQogICAgICB9KTsKICAgICAgdGhpcy51cGRhdGVEYXRhTW9kZWwoewogICAgICAgIHByb3BlcnR5TmFtZTogJ1ZhbHVlJywKICAgICAgICB2YWx1ZTogdGVtcFZhbHVlCiAgICAgIH0pOwogICAgfQogIH0KICAvKioKICAgKiBAZGVzY3JpcHRpb24gd2F0Y2hlcyBjaGFuZ2VzIGluIHByb3BlcnRpZXMgZm9yIFRleHRDb2x1bW4KICAgKiBAZnVuY3Rpb24gdGV4dENvbHVtbkNoYW5nZQogICAqIEBwYXJhbSBvbGRWYWwgcHJldmlvdXMgcHJvcGVydGllcyBkYXRhCiAgICogQHBhcmFtIG5ld1ZhbCAgbmV3L2NoYW5nZWQgcHJvcGVydGllcyBkYXRhCiAgICovCgoKICB0ZXh0Q29sdW1uQ2hhbmdlKG5ld1ZhbCwgb2xkVmFsKSB7CiAgICBpZiAobmV3VmFsID4gMCAmJiBuZXdWYWwgPCB0aGlzLmV4dHJhRGF0YXMuUm93U291cmNlRGF0YS5sZW5ndGgpIHsKICAgICAgbGV0IHRlbXBEYXRhID0gWy4uLnRoaXMuZXh0cmFEYXRhcy5Sb3dTb3VyY2VEYXRhXTsKICAgICAgbGV0IHRlbXBWYWx1ZSA9IHRlbXBEYXRhWzBdW25ld1ZhbCAtIDFdOwogICAgICB0aGlzLnVwZGF0ZURhdGFNb2RlbCh7CiAgICAgICAgcHJvcGVydHlOYW1lOiAnVGV4dCcsCiAgICAgICAgdmFsdWU6IHRlbXBWYWx1ZQogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMudXBkYXRlRGF0YU1vZGVsKHsKICAgICAgICBwcm9wZXJ0eU5hbWU6ICdUZXh0JywKICAgICAgICB2YWx1ZTogJycKICAgICAgfSk7CiAgICB9CiAgfQogIC8qKgogICAqIEBkZXNjcmlwdGlvbiB3YXRjaGVzIGNoYW5nZXMgaW4gcHJvcGVydGllcyBmb3IgVG9wSW5kZXgKICAgKiBAZnVuY3Rpb24gdG9wSW5kZXhDaGVjawogICAqIEBwYXJhbSBvbGRWYWwgcHJldmlvdXMgcHJvcGVydGllcyBkYXRhCiAgICogQHBhcmFtIG5ld1ZhbCAgbmV3L2NoYW5nZWQgcHJvcGVydGllcyBkYXRhCiAgICovCgoKICB0b3BJbmRleENoZWNrKG5ld1ZhbCwgb2xkVmFsKSB7CiAgICBpZiAodGhpcy5leHRyYURhdGFzLlJvd1NvdXJjZURhdGEubGVuZ3RoID09PSAwKSB7CiAgICAgIHRoaXMudXBkYXRlRGF0YU1vZGVsKHsKICAgICAgICBwcm9wZXJ0eU5hbWU6ICdUb3BJbmRleCcsCiAgICAgICAgdmFsdWU6IC0xCiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy51cGRhdGVEYXRhTW9kZWwoewogICAgICAgIHByb3BlcnR5TmFtZTogJ1RvcEluZGV4JywKICAgICAgICB2YWx1ZTogMAogICAgICB9KTsKICAgIH0KICB9CiAgLyoqCiAgICogQGRlc2NyaXB0aW9uIHVwZGF0ZXMgdGhlIGRhdGFNb2RlbCBsaXN0Qm94IG9iamVjdCBwcm9wZXJ0aWVzIHdoZW4gdXNlciBjbGlja3MKICAgKiBAZnVuY3Rpb24gaGFuZGxlTXVsdGlTZWxlY3QKICAgKiBAcGFyYW0gZXZlbnQgaXRzIG9mIHR5cGUgTW91c2VFdmVudAogICAqIEBldmVudCBjbGljawogICAqCiAgICovCgoKICBoYW5kbGVNdWx0aVNlbGVjdChlKSB7CiAgICBpZiAoZS50YXJnZXQgaW5zdGFuY2VvZiBIVE1MVGFibGVDZWxsRWxlbWVudCB8fCBlLnRhcmdldCBpbnN0YW5jZW9mIEhUTUxUYWJsZVJvd0VsZW1lbnQgfHwgZS50YXJnZXQgaW5zdGFuY2VvZiBIVE1MRGl2RWxlbWVudCkgewogICAgICB0aGlzLnRlbXBMaXN0Qm94Q29tYm9Cb3hFdmVudCA9IGU7CiAgICAgIGNvbnN0IHRhcmdldEVsZW1lbnQgPSBlLnRhcmdldDsKICAgICAgY29uc3QgdGVtcERhdGEgPSB0YXJnZXRFbGVtZW50LnBhcmVudEVsZW1lbnQuY2hpbGRyZW5bMF07CiAgICAgIGNvbnN0IHRlbXBEYXRhT3B0aW9uID0gdGFyZ2V0RWxlbWVudC5wYXJlbnRFbGVtZW50LmNoaWxkcmVuWzFdOwogICAgICBjb25zdCB0ZW1wUGF0aCA9IGUuY29tcG9zZWRQYXRoKCk7CiAgICAgIHRhcmdldEVsZW1lbnQuZm9jdXMoKTsKICAgICAgbGV0IGRhdGEgPSB0YXJnZXRFbGVtZW50LmlubmVyVGV4dDsKICAgICAgbGV0IHNwbGl0RGF0YSA9IGRhdGEucmVwbGFjZSgvXHQvZywgJyAnKS5zcGxpdCgnICcpOwoKICAgICAgaWYgKHRoaXMuZGF0YS5wcm9wZXJ0aWVzLkxpc3RTdHlsZSA9PT0gMCkgewogICAgICAgIHRoaXMuc2VsZWN0aW9uRGF0YVswXSA9IHRlbXBEYXRhLmlubmVyVGV4dDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnNlbGVjdGlvbkRhdGFbMF0gPSB0ZW1wRGF0YU9wdGlvbi5pbm5lclRleHQ7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLnByb3BlcnRpZXMuRW5hYmxlZCAmJiB0aGlzLnByb3BlcnRpZXMuTG9ja2VkID09PSBmYWxzZSkgewogICAgICAgIGlmICh0aGlzLnByb3BlcnRpZXMuTXVsdGlTZWxlY3QgPT09IDApIHsKICAgICAgICAgIGlmICh0aGlzLnByb3BlcnRpZXMuQ29udHJvbFNvdXJjZSAhPT0gJycpIHsKICAgICAgICAgICAgdGhpcy51cGRhdGVEYXRhTW9kZWwoewogICAgICAgICAgICAgIHByb3BlcnR5TmFtZTogJ1RleHQnLAogICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnNlbGVjdGlvbkRhdGFbMF0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMudXBkYXRlRGF0YU1vZGVsKHsKICAgICAgICAgICAgICBwcm9wZXJ0eU5hbWU6ICdWYWx1ZScsCiAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuc2VsZWN0aW9uRGF0YVswXQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLmNsZWFyT3B0aW9uQkdDb2xvckFuZENoZWNrZWQoZSk7CiAgICAgICAgICB0aGlzLnNldE9wdGlvbkJHQ29sb3JBbmRDaGVja2VkKGUpOwogICAgICAgICAgbGV0IGlzTGlzdFN0eWxlID0gMDsKCiAgICAgICAgICBpZiAodGhpcy5wcm9wZXJ0aWVzLlRleHRDb2x1bW4gPT09IC0xIHx8IHRoaXMucHJvcGVydGllcy5UZXh0Q29sdW1uID09PSAxKSB7CiAgICAgICAgICAgIC8vIDB0aCBpbmRleCBpcyBlbXB0eSBzdHJpbmcKICAgICAgICAgICAgaWYgKHRoaXMucHJvcGVydGllcy5MaXN0U3R5bGUgPT09IDApIHsKICAgICAgICAgICAgICBpc0xpc3RTdHlsZSA9IC0xOwogICAgICAgICAgICB9CgogICAgICAgICAgICB0aGlzLnVwZGF0ZURhdGFNb2RlbCh7CiAgICAgICAgICAgICAgcHJvcGVydHlOYW1lOiAnVGV4dCcsCiAgICAgICAgICAgICAgdmFsdWU6IHNwbGl0RGF0YVsxIC0gaXNMaXN0U3R5bGVdCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLnVwZGF0ZURhdGFNb2RlbCh7CiAgICAgICAgICAgICAgcHJvcGVydHlOYW1lOiAnVmFsdWUnLAogICAgICAgICAgICAgIHZhbHVlOiBzcGxpdERhdGFbMSAtIGlzTGlzdFN0eWxlXQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wZXJ0aWVzLlRleHRDb2x1bW4gPT09IDApIHsKICAgICAgICAgICAgdGhpcy51cGRhdGVEYXRhTW9kZWwoewogICAgICAgICAgICAgIHByb3BlcnR5TmFtZTogJ1RleHQnLAogICAgICAgICAgICAgIHZhbHVlOiBzcGxpdERhdGFbMiAtIGlzTGlzdFN0eWxlXQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy51cGRhdGVEYXRhTW9kZWwoewogICAgICAgICAgICAgIHByb3BlcnR5TmFtZTogJ1ZhbHVlJywKICAgICAgICAgICAgICB2YWx1ZTogc3BsaXREYXRhWzEgLSBpc0xpc3RTdHlsZV0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLnVwZGF0ZURhdGFNb2RlbCh7CiAgICAgICAgICAgICAgcHJvcGVydHlOYW1lOiAnVGV4dCcsCiAgICAgICAgICAgICAgdmFsdWU6IHNwbGl0RGF0YVt0aGlzLnByb3BlcnRpZXMuVGV4dENvbHVtbl0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMudXBkYXRlRGF0YU1vZGVsKHsKICAgICAgICAgICAgICBwcm9wZXJ0eU5hbWU6ICdWYWx1ZScsCiAgICAgICAgICAgICAgdmFsdWU6IHNwbGl0RGF0YVsxIC0gaXNMaXN0U3R5bGVdCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wZXJ0aWVzLk11bHRpU2VsZWN0ID09PSAxKSB7CiAgICAgICAgICBpZiAodGFyZ2V0RWxlbWVudC50YWdOYW1lID09PSAnSU5QVVQnKSB7CiAgICAgICAgICAgIHRoaXMuc2V0T3B0aW9uQkdDb2xvckFuZENoZWNrZWQoZSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLnNldE9wdGlvbkJHQ29sb3JBbmRDaGVja2VkKGUpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wZXJ0aWVzLk11bHRpU2VsZWN0ID09PSAyKSB7CiAgICAgICAgICBpZiAoZS5jdHJsS2V5ID09PSB0cnVlKSB7CiAgICAgICAgICAgIGlmICh0YXJnZXRFbGVtZW50LnRhZ05hbWUgPT09ICdJTlBVVCcpIHsKICAgICAgICAgICAgICB0aGlzLnNldE9wdGlvbkJHQ29sb3JBbmRDaGVja2VkKGUpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuc2V0T3B0aW9uQkdDb2xvckFuZENoZWNrZWQoZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSBpZiAoZS5zaGlmdEtleSA9PT0gdHJ1ZSAmJiB0aGlzLnByb3BlcnRpZXMuVmFsdWUgIT09ICcnKSB7CiAgICAgICAgICAgIGxldCBzdGFydFBvaW50ID0gMDsKICAgICAgICAgICAgbGV0IGVuZFBvaW50ID0gMDsKCiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGVtcFBhdGgubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICBjb25zdCBlbGUgPSB0ZW1wUGF0aFtpXTsKCiAgICAgICAgICAgICAgaWYgKGVsZS5jbGFzc05hbWUgPT09ICd0YWJsZS1ib2R5JykgewogICAgICAgICAgICAgICAgLy8gZXh0ZW5kIHBvaW50cyBzdGFydCBhbmQgZW5kCiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGVsZS5jaGlsZE5vZGVzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IGNkID0gZWxlLmNoaWxkTm9kZXNbal07CgogICAgICAgICAgICAgICAgICBpZiAoY2QuaW5uZXJUZXh0ID09PSB0aGlzLnByb3BlcnRpZXMuVmFsdWUpIHsKICAgICAgICAgICAgICAgICAgICBzdGFydFBvaW50ID0gaiArIDE7CiAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgIGlmIChjZC5pbm5lclRleHQgPT09IHRhcmdldEVsZW1lbnQuaW5uZXJUZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgZW5kUG9pbnQgPSBqOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IC8vIHVwd2FyZCBzZWxlY3Rpb24gc3RhcnQgYW5kIGVuZCBzd2FwCgoKICAgICAgICAgICAgICAgIGlmIChzdGFydFBvaW50ID4gZW5kUG9pbnQpIHsKICAgICAgICAgICAgICAgICAgbGV0IHRlbXAgPSBzdGFydFBvaW50OwogICAgICAgICAgICAgICAgICBzdGFydFBvaW50ID0gZW5kUG9pbnQ7CiAgICAgICAgICAgICAgICAgIGVuZFBvaW50ID0gdGVtcDsKICAgICAgICAgICAgICAgIH0gLy8gc2V0dGluZyBzZWxlY3Rpb24KCgogICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IHN0YXJ0UG9pbnQ7IGsgPD0gZW5kUG9pbnQ7IGsrKykgewogICAgICAgICAgICAgICAgICBjb25zdCBub2RlID0gZWxlLmNoaWxkTm9kZXNba107CiAgICAgICAgICAgICAgICAgIGNvbnN0IHRlbXBOb2RlID0gbm9kZS5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMF07CiAgICAgICAgICAgICAgICAgIG5vZGUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3JnYig1OSwgMTIyLCAyMzEpJzsKCiAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb3BlcnRpZXMuTGlzdFN0eWxlID09PSAxICYmICF0ZW1wTm9kZS5jaGVja2VkKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gdGVtcE5vZGUuY2hlY2tlZCA9ICF0ZW1wTm9kZS5jaGVja2VkCiAgICAgICAgICAgICAgICAgICAgdGVtcE5vZGUuY2hlY2tlZCA9IHRydWU7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuY2xlYXJPcHRpb25CR0NvbG9yQW5kQ2hlY2tlZChlKTsKICAgICAgICAgICAgdGhpcy5zZXRPcHRpb25CR0NvbG9yQW5kQ2hlY2tlZChlKTsKICAgICAgICAgICAgdGhpcy51cGRhdGVEYXRhTW9kZWwoewogICAgICAgICAgICAgIHByb3BlcnR5TmFtZTogJ1ZhbHVlJywKICAgICAgICAgICAgICB2YWx1ZTogdGFyZ2V0RWxlbWVudC5pbm5lclRleHQKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlmICh0aGlzLnByb3BlcnRpZXMuQ29udHJvbFNvdXJjZSAhPT0gJycpIHsKICAgICAgICAgICAgdGhpcy51cGRhdGVEYXRhTW9kZWwoewogICAgICAgICAgICAgIHByb3BlcnR5TmFtZTogJ1RleHQnLAogICAgICAgICAgICAgIHZhbHVlOiB0aGlzLnNlbGVjdGlvbkRhdGFbMF0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMudXBkYXRlRGF0YU1vZGVsKHsKICAgICAgICAgICAgICBwcm9wZXJ0eU5hbWU6ICdWYWx1ZScsCiAgICAgICAgICAgICAgdmFsdWU6IHRoaXMuc2VsZWN0aW9uRGF0YVswXQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLmNsZWFyT3B0aW9uQkdDb2xvckFuZENoZWNrZWQoZSk7CiAgICAgICAgICB0aGlzLnNldE9wdGlvbkJHQ29sb3JBbmRDaGVja2VkKGUpOwogICAgICAgICAgbGV0IGlzTGlzdFN0eWxlID0gMDsKCiAgICAgICAgICBpZiAodGhpcy5wcm9wZXJ0aWVzLlRleHRDb2x1bW4gPT09IC0xIHx8IHRoaXMucHJvcGVydGllcy5UZXh0Q29sdW1uID09PSAxKSB7CiAgICAgICAgICAgIGlmICh0aGlzLnByb3BlcnRpZXMuTGlzdFN0eWxlID09PSAwKSB7CiAgICAgICAgICAgICAgaXNMaXN0U3R5bGUgPSAtMTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdGhpcy51cGRhdGVEYXRhTW9kZWwoewogICAgICAgICAgICAgIHByb3BlcnR5TmFtZTogJ1RleHQnLAogICAgICAgICAgICAgIHZhbHVlOiBzcGxpdERhdGFbMSAtIGlzTGlzdFN0eWxlXQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdGhpcy51cGRhdGVEYXRhTW9kZWwoewogICAgICAgICAgICAgIHByb3BlcnR5TmFtZTogJ1ZhbHVlJywKICAgICAgICAgICAgICB2YWx1ZTogc3BsaXREYXRhWzEgLSBpc0xpc3RTdHlsZV0KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMucHJvcGVydGllcy5UZXh0Q29sdW1uID09PSAwKSB7CiAgICAgICAgICAgIHRoaXMudXBkYXRlRGF0YU1vZGVsKHsKICAgICAgICAgICAgICBwcm9wZXJ0eU5hbWU6ICdUZXh0JywKICAgICAgICAgICAgICB2YWx1ZTogc3BsaXREYXRhWzIgLSBpc0xpc3RTdHlsZV0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHRoaXMudXBkYXRlRGF0YU1vZGVsKHsKICAgICAgICAgICAgICBwcm9wZXJ0eU5hbWU6ICdWYWx1ZScsCiAgICAgICAgICAgICAgdmFsdWU6IHNwbGl0RGF0YVsxIC0gaXNMaXN0U3R5bGVdCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy51cGRhdGVEYXRhTW9kZWwoewogICAgICAgICAgICAgIHByb3BlcnR5TmFtZTogJ1RleHQnLAogICAgICAgICAgICAgIHZhbHVlOiBzcGxpdERhdGFbdGhpcy5wcm9wZXJ0aWVzLlRleHRDb2x1bW5dCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLnVwZGF0ZURhdGFNb2RlbCh7CiAgICAgICAgICAgICAgcHJvcGVydHlOYW1lOiAnVmFsdWUnLAogICAgICAgICAgICAgIHZhbHVlOiBzcGxpdERhdGFbMSAtIGlzTGlzdFN0eWxlXQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGlmICh0aGlzLnByb3BlcnRpZXMuTXVsdGlTZWxlY3QgIT09IDEpIHsKICAgICAgICB0aGlzLmNsZWFyT3B0aW9uQkdDb2xvckFuZENoZWNrZWQoZSk7CiAgICAgIH0KCiAgICAgIHRoaXMuc2V0T3B0aW9uQkdDb2xvckFuZENoZWNrZWQoZSk7CiAgICB9CgogICAgY29uc3QgYSA9IGUuY3VycmVudFRhcmdldDsKICAgIHRoaXMuc2VsZWN0aW9uRGF0YVswXSA9IGEuaW5uZXJUZXh0OwogICAgdGhpcy51cGRhdGVEYXRhTW9kZWwoewogICAgICBwcm9wZXJ0eU5hbWU6ICdWYWx1ZScsCiAgICAgIHZhbHVlOiBhLmlubmVyVGV4dFswXQogICAgfSk7CiAgICB0aGlzLnVwZGF0ZURhdGFNb2RlbCh7CiAgICAgIHByb3BlcnR5TmFtZTogJ1RleHQnLAogICAgICB2YWx1ZTogYS5pbm5lclRleHRbMF0KICAgIH0pOwogIH0KICAvKioKICAgKiBAZGVzY3JpcHRpb24gdXBkYXRlcyB0aGUgZGF0YU1vZGVsIGxpc3RCb3ggb2JqZWN0IHByb3BlcnRpZXMgd2hlbiBrZXlkb3duCiAgICogQGZ1bmN0aW9uIGhhbmRsZUV4dGVuZEFycm93S2V5U2VsZWN0CiAgICogQHBhcmFtIGV2ZW50IGl0cyBvZiB0eXBlIEtleWJvYXJkRXZlbnQKICAgKiBAZXZlbnQga2V5ZG93bgogICAqCiAgICovCgoKICBoYW5kbGVFeHRlbmRBcnJvd0tleVNlbGVjdChlKSB7CiAgICBjb25zdCB4ID0gZS5rZXkudG9VcHBlckNhc2UoKS5jaGFyQ29kZUF0KDApOwogICAgY29uc3QgdGVtcFBhdGggPSBlLmNvbXBvc2VkUGF0aCgpOwogICAgY29uc3QgZXZlbnRUYXJnZXQgPSBlLnRhcmdldDsKICAgIGNvbnN0IG5leHRTaWJsaW5nRXZlbnQgPSBldmVudFRhcmdldC5uZXh0U2libGluZzsKICAgIGNvbnN0IHByZXZTaWJsaW5nRXZlbnQgPSBldmVudFRhcmdldC5wcmV2aW91c1NpYmxpbmc7CgogICAgaWYgKHRoaXMucHJvcGVydGllcy5NYXRjaEVudHJ5ID09PSAwICYmIHggPj0gNDggJiYgeCA8PSA5MCkgewogICAgICB0aGlzLm1hdGNoRW50cnkgPSBbXTsKICAgICAgY29uc3QgcHJldk1hdGNoRGF0YSA9IHRoaXMuZXh0cmFEYXRhcy5NYXRjaERhdGEgPT09ICcnID8gZS5rZXkgOiB0aGlzLmV4dHJhRGF0YXMuTWF0Y2hEYXRhOwogICAgICB0aGlzLnVwZGF0ZURhdGFNb2RlbEV4dHJhRGF0YSh7CiAgICAgICAgcHJvcGVydHlOYW1lOiAnTWF0Y2hEYXRhJywKICAgICAgICB2YWx1ZTogcHJldk1hdGNoRGF0YSAhPT0gZS5rZXkgPyBlLmtleSA6IHByZXZNYXRjaERhdGEKICAgICAgfSk7CgogICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGVtcFBhdGgubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgY29uc3QgZWxlbWVudCA9IHRlbXBQYXRoW2luZGV4XTsKCiAgICAgICAgaWYgKGVsZW1lbnQuY2xhc3NOYW1lID09PSAndGFibGUtYm9keScpIHsKICAgICAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBlbGVtZW50LmNoaWxkTm9kZXMubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgICAgIGNvbnN0IGVpID0gZWxlbWVudC5jaGlsZE5vZGVzW2luZGV4XTsKICAgICAgICAgICAgbGV0IHNwbGl0RGF0YSA9IGVpLmlubmVyVGV4dC5yZXBsYWNlKC9cdC9nLCAnICcpLnNwbGl0KCcgJyk7CiAgICAgICAgICAgIGxldCBzaSA9IDA7CgogICAgICAgICAgICBpZiAodGhpcy5wcm9wZXJ0aWVzLkxpc3RTdHlsZSA9PT0gMCkgewogICAgICAgICAgICAgIHNpID0gLTE7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGlmIChzcGxpdERhdGFbc2kgKyAxXVswXS5pbmNsdWRlcyh0aGlzLmV4dHJhRGF0YXMuTWF0Y2hEYXRhKSkgewogICAgICAgICAgICAgIHRoaXMubWF0Y2hFbnRyeS5wdXNoKGluZGV4KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGlmICh0aGlzLmV4dHJhRGF0YXMuTWF0Y2hEYXRhWzBdICE9PSB1bmRlZmluZWQgJiYgdGhpcy5leHRyYURhdGFzLk1hdGNoRGF0YVswXSA9PT0gZS5rZXkgJiYgdGhpcy5leHRyYURhdGFzLk1hdGNoRGF0YS5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIGNvbnN0IHRlbXBDaGlsZE5vZGUgPSBlbGVtZW50LmNoaWxkTm9kZXNbdGhpcy5tYXRjaEVudHJ5W3RoaXMubWF0Y2hJbmRleF1dOwogICAgICAgICAgICB0aGlzLm1hdGNoSW5kZXgrKzsKCiAgICAgICAgICAgIGlmICh0aGlzLm1hdGNoSW5kZXggPT09IHRoaXMubWF0Y2hFbnRyeS5sZW5ndGggJiYgcHJldk1hdGNoRGF0YSA9PT0gdGhpcy5leHRyYURhdGFzLk1hdGNoRGF0YSkgewogICAgICAgICAgICAgIHRoaXMubWF0Y2hJbmRleCA9IDA7CiAgICAgICAgICAgICAgdGhpcy5jbGVhck9wdGlvbkJHQ29sb3JBbmRDaGVja2VkKGUpOwogICAgICAgICAgICAgIHRoaXMuc2V0QkdhbmRDaGVja2VkRm9yTWF0Y2godGVtcENoaWxkTm9kZSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0gZWxzZSBpZiAocHJldk1hdGNoRGF0YSAhPT0gdGhpcy5leHRyYURhdGFzLk1hdGNoRGF0YSkgewogICAgICAgICAgICAgIHRoaXMubWF0Y2hJbmRleCA9IDA7CiAgICAgICAgICAgICAgdGhpcy5jbGVhck9wdGlvbkJHQ29sb3JBbmRDaGVja2VkKGUpOwogICAgICAgICAgICAgIHRoaXMuc2V0QkdhbmRDaGVja2VkRm9yTWF0Y2godGVtcENoaWxkTm9kZSk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgaWYgKHRoaXMubWF0Y2hFbnRyeS5sZW5ndGggPT09IDApIHsKICAgICAgICAgICAgICAgIHRoaXMubWF0Y2hFbnRyeS5wdXNoKDApOwogICAgICAgICAgICAgICAgdGhpcy5tYXRjaEluZGV4ID0gMDsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIHRoaXMuY2xlYXJPcHRpb25CR0NvbG9yQW5kQ2hlY2tlZChlKTsKICAgICAgICAgICAgICB0aGlzLnNldEJHYW5kQ2hlY2tlZEZvck1hdGNoKHRlbXBDaGlsZE5vZGUpOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgaWYgKHRoaXMucHJvcGVydGllcy5NYXRjaEVudHJ5ID09PSAxICYmIHggPj0gNDggJiYgeCA8PSA5MCkgewogICAgICBsZXQgdGVtcCA9IHRoaXMuZXh0cmFEYXRhcy5NYXRjaERhdGEgKyBlLmtleTsKICAgICAgdGhpcy51cGRhdGVEYXRhTW9kZWxFeHRyYURhdGEoewogICAgICAgIHByb3BlcnR5TmFtZTogJ01hdGNoRGF0YScsCiAgICAgICAgdmFsdWU6IHRlbXAKICAgICAgfSk7CgogICAgICBmb3IgKGxldCBwb2ludCA9IDA7IHBvaW50IDwgdGVtcFBhdGgubGVuZ3RoOyBwb2ludCsrKSB7CiAgICAgICAgY29uc3QgdGJvZHkgPSB0ZW1wUGF0aFtwb2ludF07CgogICAgICAgIGlmICh0Ym9keS5jbGFzc05hbWUgPT09ICd0YWJsZS1ib2R5JykgewogICAgICAgICAgdGhpcy5tYXRjaEVudHJ5ID0gW107CgogICAgICAgICAgZm9yIChsZXQgcCA9IDA7IHAgPCB0Ym9keS5jaGlsZE5vZGVzLmxlbmd0aDsgcCsrKSB7CiAgICAgICAgICAgIGNvbnN0IGVpID0gdGJvZHkuY2hpbGROb2Rlc1twXTsKICAgICAgICAgICAgbGV0IG1hdGNoRW50cnlDb21wbGV0ZSA9IGVpLmlubmVyVGV4dC5yZXBsYWNlKC9cdC9nLCAnICcpLnNwbGl0KCcgJyk7CiAgICAgICAgICAgIGxldCBzaWkgPSAwOwoKICAgICAgICAgICAgaWYgKHRoaXMucHJvcGVydGllcy5MaXN0U3R5bGUgPT09IDApIHsKICAgICAgICAgICAgICBzaWkgPSAtMTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKG1hdGNoRW50cnlDb21wbGV0ZVtzaWkgKyAxXVswXS5pbmNsdWRlcyh0aGlzLmV4dHJhRGF0YXMuTWF0Y2hEYXRhKSAmJiB0aGlzLmV4dHJhRGF0YXMuTWF0Y2hEYXRhLmxlbmd0aCA8IDIpIHsKICAgICAgICAgICAgICB0aGlzLm1hdGNoRW50cnkucHVzaChwKTsKICAgICAgICAgICAgfSBlbHNlIGlmIChtYXRjaEVudHJ5Q29tcGxldGVbc2lpICsgMV0uaW5jbHVkZXModGhpcy5leHRyYURhdGFzLk1hdGNoRGF0YSkgJiYgdGhpcy5leHRyYURhdGFzLk1hdGNoRGF0YS5sZW5ndGggPiAxKSB7CiAgICAgICAgICAgICAgdGhpcy5tYXRjaEVudHJ5LnB1c2gocCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICBpZiAodGhpcy5leHRyYURhdGFzLk1hdGNoRGF0YS5sZW5ndGggPD0gMSkgewogICAgICAgICAgICBsZXQgc2luZ2xlTWF0Y2ggPSB0Ym9keS5jaGlsZE5vZGVzW3RoaXMubWF0Y2hFbnRyeVswXV07CiAgICAgICAgICAgIHRoaXMuY2xlYXJPcHRpb25CR0NvbG9yQW5kQ2hlY2tlZChlKTsKICAgICAgICAgICAgdGhpcy5zZXRCR2FuZENoZWNrZWRGb3JNYXRjaChzaW5nbGVNYXRjaCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmV4dHJhRGF0YXMuTWF0Y2hEYXRhLmxlbmd0aCA+IDEgJiYgdGhpcy5tYXRjaEVudHJ5Lmxlbmd0aCAhPT0gMCkgewogICAgICAgICAgICBsZXQgY29tcGxldGVBdXRvTWF0Y2ggPSB0Ym9keS5jaGlsZE5vZGVzW3RoaXMubWF0Y2hFbnRyeVswXV07CiAgICAgICAgICAgIHRoaXMuY2xlYXJPcHRpb25CR0NvbG9yQW5kQ2hlY2tlZChlKTsKICAgICAgICAgICAgdGhpcy5zZXRCR2FuZENoZWNrZWRGb3JNYXRjaChjb21wbGV0ZUF1dG9NYXRjaCk7CiAgICAgICAgICB9CgogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgaWYgKGUua2V5ID09PSAnQXJyb3dEb3duJyAmJiBlLnNoaWZ0S2V5ID09PSB0cnVlICYmIChuZXh0U2libGluZ0V2ZW50ICE9PSBudWxsIHx8IHByZXZTaWJsaW5nRXZlbnQubmV4dFNpYmxpbmcgIT09IG51bGwpKSB7CiAgICAgIGxldCBjdXJyZW50RWxlbWVudDsKCiAgICAgIGlmIChuZXh0U2libGluZ0V2ZW50ID09PSBudWxsKSB7CiAgICAgICAgY3VycmVudEVsZW1lbnQgPSBwcmV2U2libGluZ0V2ZW50Lm5leHRTaWJsaW5nOwogICAgICB9IGVsc2UgewogICAgICAgIGN1cnJlbnRFbGVtZW50ID0gbmV4dFNpYmxpbmdFdmVudDsKICAgICAgfQoKICAgICAgaWYgKHRoaXMucHJvcGVydGllcy5NdWx0aVNlbGVjdCA9PT0gMikgewogICAgICAgIGlmIChldmVudFRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgIT09ICdyZ2IoNTksIDEyMiwgMjMxKScpIHsKICAgICAgICAgIHRoaXMuc2V0T3B0aW9uQkdDb2xvckFuZENoZWNrZWQoZSk7CiAgICAgICAgfSBlbHNlIGlmIChldmVudFRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPT09ICdyZ2IoNTksIDEyMiwgMjMxKScgJiYgY3VycmVudEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yICE9PSAnJykgewogICAgICAgICAgdGhpcy5zZXRPcHRpb25CR0NvbG9yQW5kQ2hlY2tlZChlKTsKICAgICAgICB9IGVsc2UgaWYgKGV2ZW50VGFyZ2V0Lm5leHRTaWJsaW5nLm5leHRTaWJsaW5nICE9PSBudWxsKSB7CiAgICAgICAgICB0aGlzLnNldEJHQ29sb3JGb3JOZXh0U2libGluZyhlKTsKICAgICAgICB9IGVsc2UgaWYgKGV2ZW50VGFyZ2V0Lm5leHRTaWJsaW5nLm5leHRTaWJsaW5nID09PSBudWxsICYmIGN1cnJlbnRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciAhPT0gJ3JnYig1OSwgMTIyLCAyMzEpJykgewogICAgICAgICAgdGhpcy5zZXRCR0NvbG9yRm9yTmV4dFNpYmxpbmcoZSk7CiAgICAgICAgfQoKICAgICAgICBjdXJyZW50RWxlbWVudC5mb2N1cygpOwogICAgICB9CiAgICB9IGVsc2UgaWYgKGUua2V5ID09PSAnQXJyb3dVcCcgJiYgZS5zaGlmdEtleSA9PT0gdHJ1ZSAmJiAocHJldlNpYmxpbmdFdmVudCAhPT0gbnVsbCB8fCBuZXh0U2libGluZ0V2ZW50LnByZXZpb3VzU2libGluZyAhPT0gbnVsbCkpIHsKICAgICAgbGV0IGN1cnJlbnRFbGVtZW50OwoKICAgICAgaWYgKHByZXZTaWJsaW5nRXZlbnQgPT09IG51bGwpIHsKICAgICAgICBjdXJyZW50RWxlbWVudCA9IG5leHRTaWJsaW5nRXZlbnQucHJldmlvdXNTaWJsaW5nOwogICAgICB9IGVsc2UgewogICAgICAgIGN1cnJlbnRFbGVtZW50ID0gcHJldlNpYmxpbmdFdmVudDsKICAgICAgfQoKICAgICAgaWYgKHRoaXMucHJvcGVydGllcy5NdWx0aVNlbGVjdCA9PT0gMikgewogICAgICAgIGlmIChldmVudFRhcmdldC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPT09ICdyZ2IoNTksIDEyMiwgMjMxKScgJiYgY3VycmVudEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yICE9PSAnJykgewogICAgICAgICAgdGhpcy5zZXRPcHRpb25CR0NvbG9yQW5kQ2hlY2tlZChlKTsKICAgICAgICB9IGVsc2UgaWYgKGV2ZW50VGFyZ2V0LnByZXZpb3VzU2libGluZy5wcmV2aW91c1NpYmxpbmcgIT09IG51bGwpIHsKICAgICAgICAgIHRoaXMuc2V0QkdDb2xvckZvclByZXZpb3VzU2libGluZyhlKTsKICAgICAgICB9IGVsc2UgaWYgKGV2ZW50VGFyZ2V0LnByZXZpb3VzU2libGluZy5wcmV2aW91c1NpYmxpbmcgPT09IG51bGwgJiYgY3VycmVudEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yICE9PSAncmdiKDU5LCAxMjIsIDIzMSknKSB7CiAgICAgICAgICB0aGlzLnNldEJHQ29sb3JGb3JQcmV2aW91c1NpYmxpbmcoZSk7CiAgICAgICAgfQoKICAgICAgICBjdXJyZW50RWxlbWVudC5mb2N1cygpOwogICAgICB9CiAgICB9IC8vIH0KCiAgfQogIC8qKgogICogQGRlc2NyaXB0aW9uIHVwZGF0ZXMgdGhlIGRhdGFNb2RlbCBsaXN0Qm94IG9iamVjdCBwcm9wZXJ0aWVzIHdoZW4gbW91c2VlbnRlcgogICogQGZ1bmN0aW9uIGhhbmRsZURyYWcKICAqIEBwYXJhbSBldmVudCBpdHMgb2YgdHlwZSBNb3VzZUV2ZW50CiAgKiBAZXZlbnQgbW91c2VlbnRlcgogICoKICAqLwoKCiAgaGFuZGxlRHJhZyhlKSB7CiAgICBjb25zdCBldGFyZ2V0ID0gZS50YXJnZXQ7CgogICAgaWYgKHRoaXMucHJvcGVydGllcy5NdWx0aVNlbGVjdCA9PT0gMikgewogICAgICBpZiAoZS53aGljaCA9PT0gMSkgewogICAgICAgIGlmIChldGFyZ2V0LnN0eWxlLmJhY2tncm91bmRDb2xvciA9PT0gJ3JnYig1OSwgMTIyLCAyMzEpJykgewogICAgICAgICAgdGhpcy51bnNlbGVjdEJHQ29sb3JBbmRjaGVja2VkKGUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnNldE9wdGlvbkJHQ29sb3JBbmRDaGVja2VkKGUpOwogICAgICAgIH0KICAgICAgfQoKICAgICAgd2luZG93LmdldFNlbGVjdGlvbigpLnJlbW92ZUFsbFJhbmdlcygpOwogICAgfQogIH0KICAvKioKICAqIEBkZXNjcmlwdGlvbiBzZXQgQmFja2dyb3VuZCBDb2xvciBmb3IgbmV4dCBzaWJsaW5ncwogICogQGZ1bmN0aW9uIHNldEJHQ29sb3JGb3JOZXh0U2libGluZwogICogQHBhcmFtIGV2ZW50IGl0cyBvZiB0eXBlIE1vdXNlRXZlbnQgb3IgS2V5Ym9hcmRFdmVudAogICovCgoKICBzZXRCR0NvbG9yRm9yTmV4dFNpYmxpbmcoZSkgewogICAgaWYgKGUudGFyZ2V0IGluc3RhbmNlb2YgSFRNTFRhYmxlQ2VsbEVsZW1lbnQgfHwgZS50YXJnZXQgaW5zdGFuY2VvZiBIVE1MRGl2RWxlbWVudCkgewogICAgICBjb25zdCB0YXJnZXRFdmVudCA9IGUudGFyZ2V0OwogICAgICBjb25zdCBuZXh0U2libGluZ0V2ZW50ID0gdGFyZ2V0RXZlbnQubmV4dFNpYmxpbmc7CiAgICAgIGNvbnN0IG5leHRTaWJsaW5nQ2hlY2tlZEV2ZW50ID0gbmV4dFNpYmxpbmdFdmVudC5jaGlsZHJlblswXS5jaGlsZE5vZGVzWzBdOwogICAgICBuZXh0U2libGluZ0V2ZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IG5leHRTaWJsaW5nRXZlbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID09PSAncmdiKDU5LCAxMjIsIDIzMSknID8gJycgOiAncmdiKDU5LCAxMjIsIDIzMSknOwoKICAgICAgaWYgKHRoaXMucHJvcGVydGllcy5MaXN0U3R5bGUgPT09IDEgJiYgdGhpcy5wcm9wZXJ0aWVzLk11bHRpU2VsZWN0ID09PSAyKSB7CiAgICAgICAgbmV4dFNpYmxpbmdDaGVja2VkRXZlbnQuY2hlY2tlZCA9ICFuZXh0U2libGluZ0NoZWNrZWRFdmVudC5jaGVja2VkOwogICAgICB9CiAgICB9CiAgfQogIC8qKgogICogQGRlc2NyaXB0aW9uIHNldCBCYWNrZ3JvdW5kIENvbG9yIGZvZSBwcmV2aW91cyBzaWJsaW5ncwogICogQGZ1bmN0aW9uIHNldEJHQ29sb3JGb3JQcmV2aW91c1NpYmxpbmcKICAqIEBwYXJhbSBldmVudCBpdHMgb2YgdHlwZSBNb3VzZUV2ZW50IG9yIEtleWJvYXJkRXZlbnQKICAqLwoKCiAgc2V0QkdDb2xvckZvclByZXZpb3VzU2libGluZyhlKSB7CiAgICBpZiAoZS50YXJnZXQgaW5zdGFuY2VvZiBIVE1MVGFibGVDZWxsRWxlbWVudCB8fCBlLnRhcmdldCBpbnN0YW5jZW9mIEhUTUxUYWJsZVJvd0VsZW1lbnQgfHwgZS50YXJnZXQgaW5zdGFuY2VvZiBIVE1MRGl2RWxlbWVudCkgewogICAgICBjb25zdCB0YXJnZXRFdmVudCA9IGUudGFyZ2V0OwogICAgICBjb25zdCBwcmV2U2libGluZ0V2ZW50ID0gdGFyZ2V0RXZlbnQucHJldmlvdXNTaWJsaW5nOwogICAgICBjb25zdCBwcmV2U2libGluZ0NoZWNrZWRFdmVudCA9IHByZXZTaWJsaW5nRXZlbnQuY2hpbGRyZW5bMF0uY2hpbGROb2Rlc1swXTsKICAgICAgcHJldlNpYmxpbmdFdmVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSBwcmV2U2libGluZ0V2ZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9PT0gJ3JnYig1OSwgMTIyLCAyMzEpJyA/ICcnIDogJ3JnYig1OSwgMTIyLCAyMzEpJzsKCiAgICAgIGlmICh0aGlzLnByb3BlcnRpZXMuTGlzdFN0eWxlID09PSAxICYmIHRoaXMucHJvcGVydGllcy5NdWx0aVNlbGVjdCA9PT0gMikgewogICAgICAgIHByZXZTaWJsaW5nQ2hlY2tlZEV2ZW50LmNoZWNrZWQgPSAhcHJldlNpYmxpbmdDaGVja2VkRXZlbnQuY2hlY2tlZDsKICAgICAgfQogICAgfQogIH0KICAvKioKICAqIEBkZXNjcmlwdGlvbiBjbGVhciBzZWxlY3RlZCBvcHRpb24gZm9yIFNpbmdsZVNlbGVjdGlvbgogICogQGZ1bmN0aW9uIGNsZWFyT3B0aW9uQkdDb2xvckFuZENoZWNrZWQKICAqIEBwYXJhbSBldmVudAogICovCgoKICBjbGVhck9wdGlvbkJHQ29sb3JBbmRDaGVja2VkKGUpIHsKICAgIGlmICh0aGlzLmRhdGEudHlwZSA9PT0gJ0NvbWJvQm94JykgewogICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGUucGF0aC5sZW5ndGg7IGkrKykgewogICAgICAgIGlmIChlLnBhdGhbaV0uY2xhc3NOYW1lID09PSAndEJvZHlTdHlsZScpIHsKICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZS5wYXRoW2ldLmNoaWxkcmVuLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgIGUucGF0aFtpXS5jaGlsZHJlbltqXS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnJzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KCiAgICBjb25zdCB0ZW1wUGF0aCA9IGUucGF0aDsKCiAgICBpZiAodGVtcFBhdGggJiYgdGVtcFBhdGgubGVuZ3RoID4gMCkgewogICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGVtcFBhdGgubGVuZ3RoOyBpbmRleCsrKSB7CiAgICAgICAgY29uc3QgZWxlbWVudCA9IHRlbXBQYXRoW2luZGV4XTsKCiAgICAgICAgaWYgKGVsZW1lbnQuY2xhc3NOYW1lID09PSAndGFibGUtYm9keScpIHsKICAgICAgICAgIGZvciAobGV0IGNoaWxkSW5kZXggPSAwOyBjaGlsZEluZGV4IDwgZWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aDsgY2hpbGRJbmRleCsrKSB7CiAgICAgICAgICAgIGNvbnN0IGNoaWxkTm9kZSA9IGVsZW1lbnQuY2hpbGROb2Rlc1tjaGlsZEluZGV4XTsKICAgICAgICAgICAgY2hpbGROb2RlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcnOwogICAgICAgICAgICBjb25zdCBDaGlsZENoZWNrZWQgPSBjaGlsZE5vZGUuY2hpbGROb2Rlc1swXS5jaGlsZE5vZGVzWzBdOwoKICAgICAgICAgICAgaWYgKENoaWxkQ2hlY2tlZCAmJiB0aGlzLnByb3BlcnRpZXMuTGlzdFN0eWxlID09PSAxKSB7CiAgICAgICAgICAgICAgQ2hpbGRDaGVja2VkLmNoZWNrZWQgPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQoKICAgICAgICAgIGJyZWFrOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KICAvKioKICAqIEBkZXNjcmlwdGlvbiBoYW5kbGUgc2V0dGluZyBiYWNrZ3JvdW5kQ29sb3IgYW5kIG9wdGlvbiBjaGVja2VkL25vdAogICogQGZ1bmN0aW9uIHNldE9wdGlvbkJHQ29sb3JBbmRDaGVja2VkCiAgKiBAcGFyYW0gZXZlbnQgS2V5Ym9hcmRFdmVudCBvciBNb3VzZUV2ZW50CiAgKi8KCgogIHNldE9wdGlvbkJHQ29sb3JBbmRDaGVja2VkKGUpIHsKICAgIGNvbnN0IGN1cnJlbnRUYXJnZXRFbGVtZW50ID0gZS5jdXJyZW50VGFyZ2V0OwogICAgY29uc3QgY2hpbGROb2RlQ2hlY2tlZCA9IGN1cnJlbnRUYXJnZXRFbGVtZW50LmNoaWxkcmVuWzBdLmNoaWxkTm9kZXNbMF07CgogICAgaWYgKHRoaXMuZGF0YS50eXBlID09PSAnQ29tYm9Cb3gnKSB7CiAgICAgIGN1cnJlbnRUYXJnZXRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGN1cnJlbnRUYXJnZXRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9PT0gJ3JnYig1OSwgMTIyLCAyMzEpJyA/ICcnIDogJ3JnYig1OSwgMTIyLCAyMzEpJzsKICAgIH0KCiAgICBpZiAodGhpcy5kYXRhLnR5cGUgPT09ICdDb21ib0JveCcpIHsKICAgICAgY2hpbGROb2RlQ2hlY2tlZC5jaGVja2VkID0gIWNoaWxkTm9kZUNoZWNrZWQuY2hlY2tlZDsKICAgIH0KCiAgICBpZiAoZS50YXJnZXQgaW5zdGFuY2VvZiBIVE1MRGl2RWxlbWVudCB8fCBlLnRhcmdldCBpbnN0YW5jZW9mIEhUTUxUYWJsZUNlbGxFbGVtZW50IHx8IGUudGFyZ2V0IGluc3RhbmNlb2YgSFRNTFRhYmxlUm93RWxlbWVudCB8fCBlLnRhcmdldCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQpIHsKICAgICAgY29uc3QgdGFyZ2V0RXZlbnQgPSBlLnRhcmdldDsKCiAgICAgIGlmICh0aGlzLmRhdGEudHlwZSA9PT0gJ0NvbWJvQm94JykgewogICAgICAgIGN1cnJlbnRUYXJnZXRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcnOwogICAgICB9CgogICAgICBpZiAodGhpcy5wcm9wZXJ0aWVzLkxpc3RTdHlsZSA9PT0gMSAmJiB0aGlzLnByb3BlcnRpZXMuTXVsdGlTZWxlY3QgPT09IDApIHsKICAgICAgICBjaGlsZE5vZGVDaGVja2VkLmNoZWNrZWQgPSAhY2hpbGROb2RlQ2hlY2tlZC5jaGVja2VkOwoKICAgICAgICBpZiAoY2hpbGROb2RlQ2hlY2tlZC5jaGVja2VkID09PSB0cnVlKSB7CiAgICAgICAgICBjdXJyZW50VGFyZ2V0RWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAncmdiKDU5LCAxMjIsIDIzMSknOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjdXJyZW50VGFyZ2V0RWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnJzsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2hpbGROb2RlQ2hlY2tlZC5jaGVja2VkID0gIWNoaWxkTm9kZUNoZWNrZWQuY2hlY2tlZDsKCiAgICAgICAgaWYgKHRoaXMucHJvcGVydGllcy5NdWx0aVNlbGVjdCA9PT0gMCkgewogICAgICAgICAgY3VycmVudFRhcmdldEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3JnYig1OSwgMTIyLCAyMzEpJzsKCiAgICAgICAgICBpZiAodGhpcy5wcm9wZXJ0aWVzLkxpc3RTdHlsZSA9PT0gMSkgewogICAgICAgICAgICBpZiAoY2hpbGROb2RlQ2hlY2tlZC5jaGVja2VkKSB7CiAgICAgICAgICAgICAgY3VycmVudFRhcmdldEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3JnYig1OSwgMTIyLCAyMzEpJzsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodGhpcy5wcm9wZXJ0aWVzLk11bHRpU2VsZWN0ID09PSAxKSB7CiAgICAgICAgICBpZiAoY3VycmVudFRhcmdldEVsZW1lbnQuc3R5bGUuYmFja2dyb3VuZENvbG9yID09PSAncmdiKDU5LCAxMjIsIDIzMSknKSB7CiAgICAgICAgICAgIGN1cnJlbnRUYXJnZXRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcnOwoKICAgICAgICAgICAgaWYgKHRoaXMucHJvcGVydGllcy5MaXN0U3R5bGUgPT09IDEpIHsKICAgICAgICAgICAgICBpZiAoY2hpbGROb2RlQ2hlY2tlZC5jaGVja2VkKSB7CiAgICAgICAgICAgICAgICBjdXJyZW50VGFyZ2V0RWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAncmdiKDU5LCAxMjIsIDIzMSknOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjdXJyZW50VGFyZ2V0RWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAnJzsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGN1cnJlbnRUYXJnZXRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdyZ2IoNTksIDEyMiwgMjMxKSc7CgogICAgICAgICAgICBpZiAodGhpcy5wcm9wZXJ0aWVzLkxpc3RTdHlsZSA9PT0gMSkgewogICAgICAgICAgICAgIGlmIChjaGlsZE5vZGVDaGVja2VkLmNoZWNrZWQpIHsKICAgICAgICAgICAgICAgIGN1cnJlbnRUYXJnZXRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdyZ2IoNTksIDEyMiwgMjMxKSc7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BlcnRpZXMuTXVsdGlTZWxlY3QgPT09IDIpIHsKICAgICAgICAgIGNoaWxkTm9kZUNoZWNrZWQuY2hlY2tlZCA9IHRydWU7CiAgICAgICAgICBjdXJyZW50VGFyZ2V0RWxlbWVudC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAncmdiKDU5LCAxMjIsIDIzMSknOwogICAgICAgIH0KICAgICAgfQogICAgfQogIH0KCiAgdW5zZWxlY3RCR0NvbG9yQW5kY2hlY2tlZChlKSB7CiAgICBjb25zdCBjdXJyZW50VGFyZ2V0RWxlbWVudCA9IGUuY3VycmVudFRhcmdldDsKICAgIGNvbnN0IGNoaWxkTm9kZUNoZWNrZWQgPSBjdXJyZW50VGFyZ2V0RWxlbWVudC5jaGlsZHJlblswXS5jaGlsZE5vZGVzWzBdOwoKICAgIGlmICh0aGlzLnByb3BlcnRpZXMuTXVsdGlTZWxlY3QgPT09IDIpIHsKICAgICAgY2hpbGROb2RlQ2hlY2tlZC5jaGVja2VkID0gZmFsc2U7CiAgICAgIGN1cnJlbnRUYXJnZXRFbGVtZW50LnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICcnOwogICAgfQogIH0KICAvKioKICAqIEBkZXNjcmlwdGlvbiBzZXQgQkdDb2xvciBhbmQgQ2hlY2tlZCBtYXRjaEVudHJ5CiAgKiBAZnVuY3Rpb24gc2V0QkdhbmRDaGVja2VkRm9yTWF0Y2gKICAqIEBwYXJhbSBzaW5nbGVNYXRjaCB3aGljaCBpcyBhbiBIVE1MRGl2RWxlbWVudAogICovCgoKICBzZXRCR2FuZENoZWNrZWRGb3JNYXRjaChzaW5nbGVNYXRjaCkgewogICAgaWYgKHNpbmdsZU1hdGNoICE9PSB1bmRlZmluZWQpIHsKICAgICAgc2luZ2xlTWF0Y2guc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJ3JnYig1OSwgMTIyLCAyMzEpJzsKCiAgICAgIGlmICh0aGlzLnByb3BlcnRpZXMuTGlzdFN0eWxlID09PSAxKSB7CiAgICAgICAgY29uc3QgdGVtcE5vZGUgPSBzaW5nbGVNYXRjaC5jaGlsZE5vZGVzWzBdLmNoaWxkTm9kZXNbMF07CiAgICAgICAgdGVtcE5vZGUuY2hlY2tlZCA9ICF0ZW1wTm9kZS5jaGVja2VkOwogICAgICB9CiAgICB9CiAgfQoKICBnZXQgc2V0Rm9udFN0eWxlKCkgewogICAgY29uc3QgdGVtcEZvbnRTdHlsZSA9IHRoaXMucHJvcGVydGllcy5Gb250LkZvbnRTdHlsZS50b0xvd2VyQ2FzZSgpOwoKICAgIGlmICh0ZW1wRm9udFN0eWxlLmluY2x1ZGVzKHRoaXMucHJvcGVydGllcy5Gb250LkZvbnROYW1lLnRvTG93ZXJDYXNlKCkpKSB7CiAgICAgIGlmICh0ZW1wRm9udFN0eWxlLmluY2x1ZGVzKCdpdGFsaWMnKSkgewogICAgICAgIHRoaXMuaXNJdGFsaWMgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaXNJdGFsaWMgPSBmYWxzZTsKICAgICAgfQoKICAgICAgaWYgKHRlbXBGb250U3R5bGUuc3BsaXQoJyAnKS5pbmRleE9mKCdib2xkJykgPiAtMSkgewogICAgICAgIHRoaXMudGVtcFdlaWdodCA9ICdib2xkJzsKICAgICAgfSBlbHNlIGlmICh0ZW1wRm9udFN0eWxlLmluY2x1ZGVzKCdibGFjaycpKSB7CiAgICAgICAgdGhpcy50ZW1wV2VpZ2h0ID0gJzkwMCc7CiAgICAgIH0gZWxzZSBpZiAodGVtcEZvbnRTdHlsZS5zcGxpdCgnICcpLmluZGV4T2YoJ2xpZ2h0JykgPiAtMSkgewogICAgICAgIHRoaXMudGVtcFdlaWdodCA9ICdsaWdodGVyJzsKICAgICAgfSBlbHNlIGlmICh0ZW1wRm9udFN0eWxlLmluY2x1ZGVzKCdzZW1pYm9sZCcpKSB7CiAgICAgICAgdGhpcy50ZW1wV2VpZ2h0ID0gJzU0MCc7CiAgICAgIH0gZWxzZSBpZiAodGVtcEZvbnRTdHlsZS5pbmNsdWRlcygnc2VtaWxpZ2h0JykpIHsKICAgICAgICB0aGlzLnRlbXBXZWlnaHQgPSAnMzAwJzsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnRlbXBXZWlnaHQgPSAnNDAwJzsKICAgICAgfQoKICAgICAgaWYgKHRlbXBGb250U3R5bGUuc3BsaXQoJyAnKS5pbmRleE9mKCdjb25kZW5zZWQnKSA+IC0xKSB7CiAgICAgICAgdGhpcy50ZW1wU3RyZXRjaCA9ICdjb25kZW5zZWQnOwogICAgICB9IGVsc2UgaWYgKHRlbXBGb250U3R5bGUuaW5jbHVkZXMoJ3NlbWljb25kZW5zZWQnKSkgewogICAgICAgIHRoaXMudGVtcFN0cmV0Y2ggPSAnc2VtaS1jb25kZW5zZWQnOwogICAgICB9IGVsc2UgaWYgKHRlbXBGb250U3R5bGUuaW5jbHVkZXMoJ25hcnJvdycpKSB7CiAgICAgICAgdGhpcy50ZW1wU3RyZXRjaCA9ICd1bHRyYS1jb25kZW5zZWQnOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudGVtcFN0cmV0Y2ggPSAnbm9ybWFsJzsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMucHJvcGVydGllcy5Gb250LkZvbnROYW1lOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5pc0l0YWxpYyA9IGZhbHNlOwogICAgICB0aGlzLnRlbXBXZWlnaHQgPSAnNDAwJzsKICAgICAgdGhpcy50ZW1wU3RyZXRjaCA9ICdub3JtYWwnOwogICAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLkZvbnQuRm9udE5hbWU7CiAgICB9CiAgfQoKICBwYXJlbnRDb25leHRNZW51KGV2ZW50KSB7CiAgICByZXR1cm4gZXZlbnQ7CiAgfQoKICBvcGVuVGV4dENvbnRleHRNZW51KGV2ZW50KSB7CiAgICBFdmVudEJ1cy4kZW1pdCgnb3BlblRleHRDb250ZXh0TWVudScsIGV2ZW50LCB0aGlzLmNvbnRyb2xJZCk7CiAgfQoKICBwb3NpdGlvbkxvZ28odmFsdWUpIHsKICAgIGxldCBzdHlsZSA9IHsKICAgICAgb3JkZXI6IE51bWJlcigpLAogICAgICBhbGlnbkl0ZW1zOiAnJywKICAgICAgdHJhbnNmb3JtOiAnJywKICAgICAgdG9wOiAnJywKICAgICAgbGVmdDogJycsCiAgICAgIHBvc2l0aW9uOiAnJywKICAgICAgZGlzcGxheTogJ2lubGluZS1mbGV4JywKICAgICAgd2lkdGg6ICcnLAogICAgICBqdXN0aWZ5Q29udGVudDogJycKICAgIH07CiAgICB0aGlzLnJldmVyc2VTdHlsZSA9IHsKICAgICAgZGlzcGxheTogJycsCiAgICAgIGZsZXhEaXJlY3Rpb246ICcnLAogICAgICBqdXN0aWZ5SXRlbXM6ICcnLAogICAgICBwb3NpdGlvbjogJycsCiAgICAgIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJywKICAgICAgYWxpZ25JdGVtczogJycsCiAgICAgIHdpZHRoOiAnJywKICAgICAgYWxpZ25TZWxmOiAnY2VudGVyJwogICAgfTsKICAgIHRoaXMuaW1hZ2VQb3MuYWxpZ25TZWxmID0gJyc7CiAgICB0aGlzLnJldmVyc2VTdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnOwoKICAgIHN3aXRjaCAodmFsdWUpIHsKICAgICAgY2FzZSAwOgogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAxOgogICAgICAgIHN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJzsKICAgICAgICB0aGlzLmltYWdlUG9zLmFsaWduU2VsZiA9ICdjZW50ZXInOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAyOgogICAgICAgIHN0eWxlLmFsaWduSXRlbXMgPSAnZmxleC1lbmQnOwogICAgICAgIHRoaXMucmV2ZXJzZVN0eWxlLmFsaWduSXRlbXMgPSAnZmxleC1lbmQnOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAzOgogICAgICAgIHRoaXMucmV2ZXJzZVN0eWxlLmZsZXhEaXJlY3Rpb24gPSAncm93LXJldmVyc2UnOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSA0OgogICAgICAgIHRoaXMucmV2ZXJzZVN0eWxlLmZsZXhEaXJlY3Rpb24gPSAncm93LXJldmVyc2UnOwogICAgICAgIHN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJzsKICAgICAgICB0aGlzLmltYWdlUG9zLmFsaWduU2VsZiA9ICdjZW50ZXInOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSA1OgogICAgICAgIHRoaXMucmV2ZXJzZVN0eWxlLmZsZXhEaXJlY3Rpb24gPSAncm93LXJldmVyc2UnOwogICAgICAgIHN0eWxlLmFsaWduSXRlbXMgPSAnZmxleC1lbmQnOwogICAgICAgIHRoaXMucmV2ZXJzZVN0eWxlLmFsaWduSXRlbXMgPSAnZmxleC1lbmQnOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSA2OgogICAgICAgIHRoaXMucmV2ZXJzZVN0eWxlLmRpc3BsYXkgPSAnZ3JpZCc7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDc6CiAgICAgICAgdGhpcy5yZXZlcnNlU3R5bGUuZGlzcGxheSA9ICdncmlkJzsKICAgICAgICB0aGlzLnJldmVyc2VTdHlsZS5qdXN0aWZ5SXRlbXMgPSAnY2VudGVyJzsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgODoKICAgICAgICB0aGlzLnJldmVyc2VTdHlsZS5kaXNwbGF5ID0gJ2dyaWQnOwogICAgICAgIHRoaXMucmV2ZXJzZVN0eWxlLmp1c3RpZnlJdGVtcyA9ICdlbmQnOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSA5OgogICAgICAgIHRoaXMucmV2ZXJzZVN0eWxlLmRpc3BsYXkgPSAnZ3JpZCc7CiAgICAgICAgc3R5bGUub3JkZXIgPSAtMTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgMTA6CiAgICAgICAgdGhpcy5yZXZlcnNlU3R5bGUuZGlzcGxheSA9ICdncmlkJzsKICAgICAgICB0aGlzLnJldmVyc2VTdHlsZS5qdXN0aWZ5SXRlbXMgPSAnY2VudGVyJzsKICAgICAgICBzdHlsZS5vcmRlciA9IC0xOwogICAgICAgIGJyZWFrOwoKICAgICAgY2FzZSAxMToKICAgICAgICB0aGlzLnJldmVyc2VTdHlsZS5kaXNwbGF5ID0gJ2dyaWQnOwogICAgICAgIHRoaXMucmV2ZXJzZVN0eWxlLmp1c3RpZnlJdGVtcyA9ICdlbmQnOwogICAgICAgIHN0eWxlLm9yZGVyID0gLTE7CiAgICAgICAgYnJlYWs7CgogICAgICBjYXNlIDEyOgogICAgICAgIHRoaXMucmV2ZXJzZVN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJzsKICAgICAgICB0aGlzLnJldmVyc2VTdHlsZS53aWR0aCA9ICcxMDAlJzsKICAgICAgICBzdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7CiAgICAgICAgc3R5bGUudG9wID0gJzUwJSc7CiAgICAgICAgc3R5bGUubGVmdCA9ICc1MCUnOwogICAgICAgIHN0eWxlLnRyYW5zZm9ybSA9ICd0cmFuc2xhdGUoLTUwJSwgLTUwJSknOwogICAgICAgIHN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2NlbnRlcic7CiAgICAgICAgc3R5bGUud2lkdGggPSAnZml0LWNvbnRlbnQnOwogICAgICAgIGJyZWFrOwoKICAgICAgZGVmYXVsdDoKICAgIH0KCiAgICB0aGlzLmxhYmVsU3R5bGUgPSBzdHlsZTsKICB9CgogIHBpY3R1cmVTaXplKCkgewogICAgY29uc3QgaW1nU3R5bGUgPSB7CiAgICAgIHdpZHRoOiAnZml0LWNvbnRlbnQnLAogICAgICBoZWlnaHQ6ICdmaXQtY29udGVudCcsCiAgICAgIGZpbHRlcjogJycsCiAgICAgIG1heFdpZHRoOiAnMTAwJScKICAgIH07CgogICAgaWYgKHRoaXMucHJvcGVydGllcy5QaWN0dXJlKSB7CiAgICAgIFZ1ZS5uZXh0VGljaygoKSA9PiB7CiAgICAgICAgLy8gY29uc3QgaW1nUHJvcCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWcnKQogICAgICAgIGltZ1N0eWxlLndpZHRoID0gdGhpcy5wcm9wZXJ0aWVzLldpZHRoIDw9IHRoaXMuaW1hZ2VSZWYubmF0dXJhbFdpZHRoID8gYCR7dGhpcy5wcm9wZXJ0aWVzLldpZHRofXB4YCA6ICdmaXQtY29udGVudCc7CiAgICAgICAgaW1nU3R5bGUuaGVpZ2h0ID0gdGhpcy5wcm9wZXJ0aWVzLkhlaWdodCA8PSB0aGlzLmltYWdlUmVmLm5hdHVyYWxIZWlnaHQgPyBgJHt0aGlzLnByb3BlcnRpZXMuSGVpZ2h0fXB4YCA6ICdmaXQtY29udGVudCc7CgogICAgICAgIGlmICh0aGlzLnByb3BlcnRpZXMuUGljdHVyZVBvc2l0aW9uID09PSA5IHx8IHRoaXMucHJvcGVydGllcy5QaWN0dXJlUG9zaXRpb24gPT09IDEwIHx8IHRoaXMucHJvcGVydGllcy5QaWN0dXJlUG9zaXRpb24gPT09IDExKSB7CiAgICAgICAgICB0aGlzLmltYWdlUmVmLnNjcm9sbEludG9WaWV3KHRydWUpOwogICAgICAgIH0KCiAgICAgICAgaW1nU3R5bGUuZmlsdGVyID0gIXRoaXMucHJvcGVydGllcy5FbmFibGVkID8gJ3NlcGlhKDApIGdyYXlzY2FsZSgxKSBibHVyKDNweCkgb3BhY2l0eSgwLjIpJyA6ICcnOwogICAgICB9KTsKICAgIH0KCiAgICBjb25zb2xlLmxvZygiaW1nUHJvcHx8IiwgdGhpcy5pbWFnZVByb3BlcnR5KTsKICAgIHRoaXMuaW1hZ2VQcm9wZXJ0eSA9IGltZ1N0eWxlOwogIH0KCiAgb25QaWN0dXJlTG9hZCgpIHsKICAgIGNvbnN0IGltZ1N0eWxlID0gewogICAgICB3aWR0aDogJ2F1dG8nLAogICAgICBoZWlnaHQ6ICdhdXRvJwogICAgfTsKICAgIHRoaXMuaW1hZ2VQcm9wZXJ0eSA9IGltZ1N0eWxlOwogICAgdGhpcy5waWN0dXJlU2l6ZSgpOwogIH0KCiAgZ2V0IHNwYW5TdHlsZU9iaigpIHsKICAgIGNvbnN0IGNvbnRyb2xQcm9wID0gdGhpcy5wcm9wZXJ0aWVzOwogICAgY29uc3QgZm9udCA9IGNvbnRyb2xQcm9wLkZvbnQgPyBjb250cm9sUHJvcC5Gb250IDogewogICAgICBGb250TmFtZTogJ0FyaWFsJywKICAgICAgRm9udFNpemU6IDIwLAogICAgICBGb250SXRhbGljOiB0cnVlLAogICAgICBGb250Qm9sZDogdHJ1ZSwKICAgICAgRm9udFVuZGVybGluZTogdHJ1ZSwKICAgICAgRm9udFN0cmlrZXRocm91Z2g6IHRydWUKICAgIH07CiAgICByZXR1cm4gewogICAgICB0ZXh0RGVjb3JhdGlvbjogZm9udC5Gb250U3RyaWtldGhyb3VnaCA9PT0gdHJ1ZSAmJiBmb250LkZvbnRVbmRlcmxpbmUgPT09IHRydWUgPyAndW5kZXJsaW5lIGxpbmUtdGhyb3VnaCcgOiBmb250LkZvbnRVbmRlcmxpbmUgPyAndW5kZXJsaW5lJyA6IGZvbnQuRm9udFN0cmlrZXRocm91Z2ggPyAnbGluZS10aHJvdWdoJyA6ICcnLAogICAgICBjb2xvcjogIXRoaXMucHJvcGVydGllcy5FbmFibGVkID8gJ2dyYXknIDogJycKICAgIH07CiAgfQoKICBsYWJlbEFsaWdubWVudCgpIHsKICAgIHRoaXMucmV2ZXJzZVN0eWxlLmFsaWduU2VsZiA9ICdpbmhlcml0JzsKCiAgICBpZiAodGhpcy5pbWFnZVJlZiAmJiB0aGlzLmltYWdlUmVmLm5hdHVyYWxIZWlnaHQgPiB0aGlzLnByb3BlcnRpZXMuSGVpZ2h0KSB7CiAgICAgIHRoaXMucmV2ZXJzZVN0eWxlLmFsaWduU2VsZiA9ICdpbmhlcml0JzsKICAgIH0gZWxzZSB7CiAgICAgIGxldCBsb2dvUHJvcCA9IHRoaXMubG9nb1JlZjsKCiAgICAgIGlmICh0aGlzLnByb3BlcnRpZXMuV2lkdGggPj0gbG9nb1Byb3AuY2xpZW50V2lkdGggJiYgdGhpcy5wcm9wZXJ0aWVzLkhlaWdodCA+PSBsb2dvUHJvcC5jbGllbnRIZWlnaHQpIHsKICAgICAgICB0aGlzLnJldmVyc2VTdHlsZS5hbGlnblNlbGYgPSAnY2VudGVyJzsKICAgICAgfQogICAgfQogIH0KCiAgZ2V0V2lkdGhIZWlnaHQoKSB7CiAgICBjb25zdCBwaWNQb3NMZWZ0UmlnaHQgPSBbMCwgMSwgMiwgMywgNCwgNV07CiAgICBjb25zdCBwaWNQb3NUb3BCb3R0b20gPSBbNiwgNywgOCwgOSwgMTAsIDExXTsKICAgIGNvbnN0IGltZ0hlaWdodCA9IHRoaXMuaW1hZ2VSZWYgJiYgdGhpcy5pbWFnZVJlZi5uYXR1cmFsSGVpZ2h0OwogICAgY29uc3QgaW1nV2lkdGggPSB0aGlzLmltYWdlUmVmICYmIHRoaXMuaW1hZ2VSZWYubmF0dXJhbFdpZHRoOwogICAgbGV0IGxhYmVsSGVpZ2h0ID0gMDsKICAgIGxldCBsYWJlbFdpZHRoID0gMDsgLy9jYWxjbHVhdGUgdGV4dCBoZWlnaHQKCiAgICBpZiAodGhpcy50ZXh0U3BhblJlZiAmJiB0aGlzLnRleHRTcGFuUmVmLm9mZnNldEhlaWdodCkgewogICAgICBsYWJlbEhlaWdodCA9IHRoaXMudGV4dFNwYW5SZWYub2Zmc2V0SGVpZ2h0OwogICAgfSBlbHNlIGlmICh0aGlzLmVkaXRhYmxlVGV4dFJlZi4kZWwgJiYgdGhpcy5lZGl0YWJsZVRleHRSZWYuJGVsLm9mZnNldEhlaWdodCkgewogICAgICBsYWJlbEhlaWdodCA9IHRoaXMuZWRpdGFibGVUZXh0UmVmLiRlbC5vZmZzZXRIZWlnaHQ7CiAgICB9IC8vY2FsY3VhdGUgdGV4dCB3aWR0aAoKCiAgICBpZiAodGhpcy50ZXh0U3BhblJlZiAmJiB0aGlzLnRleHRTcGFuUmVmLm9mZnNldFdpZHRoKSB7CiAgICAgIGxhYmVsV2lkdGggPSB0aGlzLnRleHRTcGFuUmVmLm9mZnNldFdpZHRoOwogICAgfSBlbHNlIGlmICh0aGlzLmVkaXRhYmxlVGV4dFJlZi4kZWwgJiYgdGhpcy5lZGl0YWJsZVRleHRSZWYuJGVsLm9mZnNldFdpZHRoKSB7CiAgICAgIGxhYmVsV2lkdGggPSB0aGlzLmVkaXRhYmxlVGV4dFJlZi4kZWwub2Zmc2V0V2lkdGg7CiAgICB9CgogICAgbGV0IGNvbXBvbmVudFJlZiA9IHRoaXMuY29tcG9uZW50UmVmOwogICAgbGV0IHdpZHRoSGVpZ2h0RGF0YSA9IHsKICAgICAgd2lkdGg6IGxhYmVsV2lkdGggKyAxNSwKICAgICAgaGVpZ2h0OiBsYWJlbEhlaWdodCArIDEwCiAgICB9OwoKICAgIGlmICh0aGlzLnByb3BlcnRpZXMuUGljdHVyZSkgewogICAgICBpZiAocGljUG9zTGVmdFJpZ2h0LmluY2x1ZGVzKHRoaXMucHJvcGVydGllcy5QaWN0dXJlUG9zaXRpb24pKSB7CiAgICAgICAgaWYgKGltZ0hlaWdodCA+PSBsYWJlbEhlaWdodCkgewogICAgICAgICAgd2lkdGhIZWlnaHREYXRhLmhlaWdodCA9IGltZ0hlaWdodDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgd2lkdGhIZWlnaHREYXRhLmhlaWdodCA9IGxhYmVsSGVpZ2h0OwogICAgICAgIH0KCiAgICAgICAgd2lkdGhIZWlnaHREYXRhLndpZHRoID0gaW1nV2lkdGggKyBsYWJlbFdpZHRoOwogICAgICB9IGVsc2UgaWYgKHBpY1Bvc1RvcEJvdHRvbS5pbmNsdWRlcyh0aGlzLnByb3BlcnRpZXMuUGljdHVyZVBvc2l0aW9uKSkgewogICAgICAgIGlmIChpbWdXaWR0aCA+PSBsYWJlbFdpZHRoKSB7CiAgICAgICAgICB3aWR0aEhlaWdodERhdGEud2lkdGggPSBpbWdXaWR0aDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgd2lkdGhIZWlnaHREYXRhLndpZHRoID0gbGFiZWxXaWR0aDsKICAgICAgICB9CgogICAgICAgIHdpZHRoSGVpZ2h0RGF0YS5oZWlnaHQgPSBpbWdIZWlnaHQgKyBsYWJlbEhlaWdodDsKICAgICAgfSBlbHNlIGlmICh0aGlzLnByb3BlcnRpZXMuUGljdHVyZVBvc2l0aW9uID09PSAxMikgewogICAgICAgIHdpZHRoSGVpZ2h0RGF0YS53aWR0aCA9IGltZ1dpZHRoID49IGxhYmVsV2lkdGggPyBpbWdXaWR0aCA6IGxhYmVsV2lkdGg7CiAgICAgICAgd2lkdGhIZWlnaHREYXRhLmhlaWdodCA9IGltZ0hlaWdodCA+PSBsYWJlbEhlaWdodCA/IGltZ0hlaWdodCA6IGxhYmVsSGVpZ2h0OwogICAgICB9CiAgICB9CgogICAgd2lkdGhIZWlnaHREYXRhLndpZHRoID0gd2lkdGhIZWlnaHREYXRhLndpZHRoICsgMjAgPCBjb21wb25lbnRSZWYuY2xpZW50V2lkdGggfHwgaW1nV2lkdGggPiBjb21wb25lbnRSZWYuY2xpZW50V2lkdGggPyB3aWR0aEhlaWdodERhdGEud2lkdGggOiBjb21wb25lbnRSZWYuY2xpZW50V2lkdGg7CiAgICByZXR1cm4gd2lkdGhIZWlnaHREYXRhOwogIH0KCn07CgpfX2RlY29yYXRlKFtQcm9wKHsKICByZXF1aXJlZDogdHJ1ZSwKICB0eXBlOiBCb29sZWFuCn0pXSwgRmRDb250cm9sVnVlLnByb3RvdHlwZSwgImlzUnVuTW9kZSIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtQcm9wKHsKICByZXF1aXJlZDogdHJ1ZSwKICB0eXBlOiBCb29sZWFuCn0pXSwgRmRDb250cm9sVnVlLnByb3RvdHlwZSwgImlzRWRpdE1vZGUiLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbUHJvcFN5bmMoJ2lzRWRpdE1vZGUnKV0sIEZkQ29udHJvbFZ1ZS5wcm90b3R5cGUsICJzeW5jSXNFZGl0TW9kZSIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtQcm9wKCldLCBGZENvbnRyb2xWdWUucHJvdG90eXBlLCAidG9vbEJveFNlbGVjdENvbnRyb2wiLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbUHJvcCh7CiAgcmVxdWlyZWQ6IHRydWUsCiAgdHlwZTogT2JqZWN0Cn0pXSwgRmRDb250cm9sVnVlLnByb3RvdHlwZSwgImRhdGEiLCB2b2lkIDApOwoKX19kZWNvcmF0ZShbUHJvcCh7CiAgcmVxdWlyZWQ6IHRydWUsCiAgdHlwZTogU3RyaW5nCn0pXSwgRmRDb250cm9sVnVlLnByb3RvdHlwZSwgImNvbnRyb2xJZCIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtQcm9wKHsKICBkZWZhdWx0OiBmYWxzZQp9KV0sIEZkQ29udHJvbFZ1ZS5wcm90b3R5cGUsICJpc0FjdGl2YXRlZCIsIHZvaWQgMCk7CgpfX2RlY29yYXRlKFtFbWl0KCdzZWxlY3RlZEl0ZW0nKV0sIEZkQ29udHJvbFZ1ZS5wcm90b3R5cGUsICJlbWl0U2VsZWN0ZWRJdGVtIiwgbnVsbCk7CgpfX2RlY29yYXRlKFtFbWl0KCdkcmFnR3JvdXAnKV0sIEZkQ29udHJvbFZ1ZS5wcm90b3R5cGUsICJkcmFnR3JvdXAiLCBudWxsKTsKCl9fZGVjb3JhdGUoW0VtaXQoJ2RlbGV0ZUl0ZW0nKV0sIEZkQ29udHJvbFZ1ZS5wcm90b3R5cGUsICJkZWxldGVJdGVtIiwgbnVsbCk7CgpfX2RlY29yYXRlKFtFbWl0KCdzZXRFZGl0TW9kZScpXSwgRmRDb250cm9sVnVlLnByb3RvdHlwZSwgInNldEVkaXRNb2RlIiwgbnVsbCk7CgpfX2RlY29yYXRlKFtFbWl0KCdjb250cm9sRWRpdE1vZGUnKV0sIEZkQ29udHJvbFZ1ZS5wcm90b3R5cGUsICJjb250cm9sRWRpdE1vZGUiLCBudWxsKTsKCl9fZGVjb3JhdGUoW1dhdGNoKCdwcm9wZXJ0aWVzLkNvbnRyb2xTb3VyY2UnLCB7CiAgZGVlcDogdHJ1ZQp9KV0sIEZkQ29udHJvbFZ1ZS5wcm90b3R5cGUsICJjb250cm9sU291cmNlIiwgbnVsbCk7CgpfX2RlY29yYXRlKFtFbWl0KCd1cGRhdGVNb2RlbCcpXSwgRmRDb250cm9sVnVlLnByb3RvdHlwZSwgInVwZGF0ZURhdGFNb2RlbCIsIG51bGwpOwoKX19kZWNvcmF0ZShbRW1pdCgndXBkYXRlTW9kZWxFeHRyYURhdGEnKV0sIEZkQ29udHJvbFZ1ZS5wcm90b3R5cGUsICJ1cGRhdGVEYXRhTW9kZWxFeHRyYURhdGEiLCBudWxsKTsKCl9fZGVjb3JhdGUoW1dhdGNoKCdwcm9wZXJ0aWVzLlRleHQnLCB7CiAgZGVlcDogdHJ1ZQp9KV0sIEZkQ29udHJvbFZ1ZS5wcm90b3R5cGUsICJ2YWx1ZVVwZGF0ZVByb3AiLCBudWxsKTsKCl9fZGVjb3JhdGUoW1dhdGNoKCdwcm9wZXJ0aWVzLlZhbHVlJywgewogIGRlZXA6IHRydWUKfSldLCBGZENvbnRyb2xWdWUucHJvdG90eXBlLCAidGV4dEFuZFZhbHVlVXBkYXRlUHJvcCIsIG51bGwpOwoKX19kZWNvcmF0ZShbV2F0Y2goJ3Byb3BlcnRpZXMuQm91bmRDb2x1bW4nLCB7CiAgZGVlcDogdHJ1ZQp9KV0sIEZkQ29udHJvbFZ1ZS5wcm90b3R5cGUsICJib3VuZENvbHVtblZhbHVlIiwgbnVsbCk7CgpfX2RlY29yYXRlKFtXYXRjaCgncHJvcGVydGllcy5UZXh0Q29sdW1uJywgewogIGRlZXA6IHRydWUKfSldLCBGZENvbnRyb2xWdWUucHJvdG90eXBlLCAidGV4dENvbHVtbkNoYW5nZSIsIG51bGwpOwoKX19kZWNvcmF0ZShbV2F0Y2goJ3Byb3BlcnRpZXMuVG9wSW5kZXgnLCB7CiAgZGVlcDogdHJ1ZQp9KV0sIEZkQ29udHJvbFZ1ZS5wcm90b3R5cGUsICJ0b3BJbmRleENoZWNrIiwgbnVsbCk7CgpfX2RlY29yYXRlKFtFbWl0KCdwYXJlbnRDb25leHRNZW51JyldLCBGZENvbnRyb2xWdWUucHJvdG90eXBlLCAicGFyZW50Q29uZXh0TWVudSIsIG51bGwpOwoKRmRDb250cm9sVnVlID0gX19kZWNvcmF0ZShbQ29tcG9uZW50KHsKICBuYW1lOiAnRmRDb250cm9sVnVlJywKICBjb21wb25lbnRzOiB7CiAgICBGREVkaXRhYmxlVGV4dAogIH0KfSldLCBGZENvbnRyb2xWdWUpOwpleHBvcnQgZGVmYXVsdCBGZENvbnRyb2xWdWU7"},{"version":3,"sources":["/home/mobiotics/Projects/hancom/FormcontrolLatest/node_modules/eslint-loader/index.js??ref--13-0!/home/mobiotics/Projects/hancom/FormcontrolLatest/src/api/abstract/FormDesigner/FdControlVue.ts"],"names":[],"mappings":"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","sourcesContent":["/*eslint-disable*/\r\nimport { controlProperties } from '@/FormDesigner/controls-properties'\r\nimport {\r\n  PositionXYData,\r\n  ScrollBarData\r\n} from '@/FormDesigner/controls-properties-types'\r\nimport { PropType } from 'vue'\r\nimport { Component, Emit, Prop, PropSync, Vue, Watch, Ref } from 'vue-property-decorator'\r\nimport { EventBus } from '@/FormDesigner/event-bus'\r\nimport FDEditableText from '@/FormDesigner/components/atoms/FDEditableText/index.vue'\r\n\r\n@Component({\r\n  name: 'FdControlVue',\r\n  components: {\r\n    FDEditableText\r\n  }\r\n})\r\nexport default class FdControlVue extends Vue {\r\n  @Prop({ required: true, type: Boolean }) public isRunMode!: boolean\r\n  @Prop({ required: true, type: Boolean }) public isEditMode!: boolean\r\n  @PropSync('isEditMode') public syncIsEditMode!: boolean\r\n  @Prop() toolBoxSelectControl: string\r\n\r\n  @Prop({ required: true, type: Object as PropType<controlData> }) public data! : controlData\r\n  @Prop({ required: true, type: String }) public controlId! : string\r\n  @Prop({ default: false }) isActivated: boolean\r\n\r\n\r\n  isContentEditable: boolean = false\r\n  selectionData :Array<string> = [];\r\n  matchEntry: Array<number> = [];\r\n  matchIndex = -1;\r\n  isDropdownVisible: boolean = true;\r\n  isItalic: boolean = false;\r\n  tempWeight: string = '400';\r\n  tempStretch: string = 'normal';\r\n  isVisible: boolean = false;\r\n  tempListBoxComboBoxEvent: Event;\r\n  labelStyle = {}\r\n  reverseStyle = {\r\n    display: '',\r\n    flexDirection: '',\r\n    justifyItems: '',\r\n    position: '',\r\n    justifyContent: 'center',\r\n    alignItems: '',\r\n    width: '',\r\n    alignSelf: 'center'\r\n  }\r\n  imageProperty={\r\n    height: 'fit-content'\r\n  }\r\n  imagePos:any ={}\r\n   // global variable to keep track of TripleState when enabled\r\n   protected tripleState:number = 0\r\n\r\n  // dynamic ref form textbox component\r\n  protected autoSizeTextarea: HTMLLabelElement\r\n\r\n  // dynamic ref from checkbox component\r\n  protected autoSizecheckbox: HTMLDivElement\r\n\r\n  // dynamic ref from optionButton component\r\n  protected autoSizeOptionButton! : HTMLDivElement\r\n\r\n  // ref of respective components\r\n  protected checkboxRef: HTMLDivElement\r\n  protected optionBtnRef: HTMLDivElement\r\n  protected textareaRef: HTMLTextAreaElement\r\n  \r\n  protected textSpanRef!: HTMLSpanElement\r\n  protected imageRef: HTMLImageElement\r\n  protected logoRef: HTMLSpanElement\r\n  protected componentRef : HTMLSpanElement\r\n  protected editableTextRef: FDEditableText\r\n  preventClickOnce: boolean = false\r\n  addEventCustomCallback (e: CustomMouseEvent) {\r\n    this.controlEditMode(e)\r\n    const self = this\r\n    e.customCallBack = () => {\r\n      self.preventClickOnce = true\r\n    }\r\n  }\r\n\r\n  selectedItem (event: Event) {\r\n    if (this.preventClickOnce) {\r\n      this.preventClickOnce = false\r\n    } else {\r\n      this.emitSelectedItem(event)\r\n    }\r\n  }\r\n\r\n  @Emit('selectedItem')\r\n  emitSelectedItem (event: Event) {\r\n    return event\r\n  }\r\n\r\n  @Emit('dragGroup')\r\n  dragGroup (event: Event) {\r\n    return event\r\n  }\r\n\r\n  @Emit('deleteItem')\r\n  deleteItem (event: Event) {\r\n    return event\r\n  }\r\n\r\n  @Emit('setEditMode')\r\n  setEditMode (contentEditable: boolean) {\r\n    return contentEditable\r\n  }\r\n\r\n  @Emit('controlEditMode')\r\n  controlEditMode (event: MouseEvent) {\r\n    return event\r\n  }\r\n\r\n  updateCaption (updateValue : string) {\r\n    this.updateDataModel({ propertyName: 'Caption', value: updateValue })\r\n  }\r\n\r\n  /**\r\n   * @description userFormId and controlId which is taken as props from parent Component\r\n   * @abstract propControlData\r\n   */\r\n  public get properties () :controlProperties {\r\n    return this.data.properties\r\n  }\r\n\r\n  public get extraDatas () : extraDatas {\r\n    return this.data.extraDatas!\r\n  }\r\n  public get controls () : string[] {\r\n    return this.data.controls\r\n  }\r\n\r\n  protected get renderSize () :Partial<CSSStyleDeclaration> {\r\n    return {\r\n      width: `${this.properties.Width}px`,\r\n      height: `${this.properties.Height}px`\r\n    }\r\n  }\r\n\r\n  protected get baseStyle () :Partial<CSSStyleDeclaration> {\r\n    return {\r\n      backgroundColor: this.properties.BackColor,\r\n      display: 'block'\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @description getSpecialEffectData returns string value from\r\n   * controlProperties.specialEffectProp\r\n   * @function getSpecialEffectData\r\n   * @returns string value\r\n   */\r\n  protected get getSpecialEffectData (): string {\r\n    return controlProperties.specialEffectProp(this.data)\r\n  }\r\n  /**\r\n   * @description getBorderStyle returns string value from\r\n   * controlProperties.borderStyleProp\r\n   * @function getBorderStyle\r\n   * @returns string value\r\n   */\r\n  protected get getBorderStyle (): string {\r\n    return controlProperties.borderStyleProp(this.data)\r\n  }\r\n  /**\r\n   * @description getMouseCursorData returns string value from\r\n   * controlProperties.mousePointerProp\r\n   * @function getMouseCursorData\r\n   * @returns string value\r\n   */\r\n  protected get getMouseCursorData (): string {\r\n    return controlProperties.mousePointerProp(this.data)\r\n  }\r\n  /**\r\n   * @description getEnabled returns string value from\r\n   * controlProperties.enabledProp\r\n   * @function getEnabled\r\n   * @returns string value\r\n   */\r\n  protected get getEnabled (): string {\r\n    return controlProperties.enabledProp(this.data)\r\n  }\r\n  /**\r\n   * @description getRepeat returns string value from\r\n   * controlProperties.extraDataRepeatProp\r\n   * @function getRepeat\r\n   * @returns string value\r\n   */\r\n  protected get getRepeat (): string {\r\n    return controlProperties.extraDataRepeatProp(this.data)\r\n  }\r\n  /**\r\n   * @description getPosition returns string value from\r\n   * controlProperties.picturePositionProp\r\n   * @function getPosition\r\n   * @returns string value\r\n   */\r\n  protected get getPosition (): string {\r\n    return controlProperties.picturePositionProp(this.data)\r\n  }\r\n  /**\r\n   * @description getPositionX returns string value from\r\n   * controlProperties.pictureXYPositionProp\r\n   * @function getPositionX\r\n   * @returns string value\r\n   */\r\n  protected get getPositionX (): string {\r\n    const posX: PositionXYData = controlProperties.pictureXYPositionProp(\r\n      this.data\r\n    )\r\n    return posX.backgroundPositionX\r\n  }\r\n  /**\r\n   * @description getPositionY returns string value from\r\n   * controlProperties.pictureXYPositionProp\r\n   * @function getPositionY\r\n   * @returns string value\r\n   */\r\n  protected get getPositionY (): string {\r\n    const posY: PositionXYData = controlProperties.pictureXYPositionProp(\r\n      this.data\r\n    )\r\n    return posY.backgroundPositionY\r\n  }\r\n  /**\r\n   * @description getSizeMode returns string value from\r\n   * controlProperties.pictureSizeModeProp\r\n   * @function getSizeMode\r\n   * @returns string value\r\n   */\r\n  protected get getSizeMode (): string {\r\n    return controlProperties.pictureSizeModeProp(this.data)\r\n  }\r\n  /**\r\n   * @description getScrollBarX returns string value from\r\n   * controlProperties.scrollBarProp / controlProperties.scrollBarTextBoxProp\r\n   * @function getScrollBarX\r\n   * @returns string value\r\n   */\r\n  protected get getScrollBarX (): string {\r\n    if (this.data.type === 'TextBox') {\r\n      if (this.isEditMode) {\r\n        const scrollXData = controlProperties.scrollBarTextBoxProp(this.data)\r\n        return scrollXData.overflowX\r\n      }\r\n    }\r\n    const scrollX: ScrollBarData = controlProperties.scrollBarProp(\r\n      this.data\r\n    )\r\n    return scrollX.overflowX\r\n  }\r\n\r\n  /**\r\n   * @description getScrollBarY returns string value from\r\n   * controlProperties.scrollBarProp / controlProperties.scrollBarTextBoxProp\r\n   * @function getScrollBarY\r\n   * @returns string value\r\n   */\r\n  protected get getScrollBarY (): string {\r\n    if (this.data.type === 'TextBox') {\r\n      if (this.isEditMode) {\r\n        const scrollYData = controlProperties.scrollBarTextBoxProp(this.data)\r\n        return scrollYData.overflowY\r\n      }\r\n    }\r\n    const scrollY: ScrollBarData = controlProperties.scrollBarProp(\r\n      this.data\r\n    )\r\n    return scrollY.overflowY\r\n  }\r\n  /**\r\n   * @description getScrollingHeight returns string value from\r\n   * controlProperties.scrollBarWidthAndHeightProp\r\n   * @function getScrollingHeight\r\n   * @returns string value\r\n   */\r\n  protected get getScrollingHeight (): string {\r\n    const scrollingHeight = controlProperties.scrollBarWidthAndHeightProp(\r\n      this.data\r\n    )\r\n    return scrollingHeight.scrollHeight\r\n  }\r\n  /**\r\n   * @description getScrollingWidth returns string value from\r\n   * controlProperties.scrollBarWidthAndHeightProp\r\n   * @function getScrollingWidth\r\n   * @returns string value\r\n   */\r\n  protected get getScrollingWidth (): string {\r\n    const scrollingWidth = controlProperties.scrollBarWidthAndHeightProp(\r\n      this.data\r\n    )\r\n    return scrollingWidth.scrollWidth\r\n  }\r\n\r\n  /**\r\n   * @description checkOtherOrientations returns string value from\r\n   * controlProperties.controlsOrientationProp\r\n   * @function checkOtherOrientations\r\n   * @returns boolean value\r\n   */\r\n  protected checkOtherOrientations () : boolean {\r\n    throw new Error('checkOtherOrientations Not Implemented')\r\n  }\r\n\r\n  /**\r\n   * @description getForeColorValue returns string value from\r\n   * controlProperties.getForeColor\r\n   * @function getForeColorValue\r\n   * @returns string value\r\n   */\r\n  protected get getForeColorValue () : string {\r\n    return controlProperties.getForeColor(this.data)\r\n  }\r\n\r\n  /**\r\n   * @description increaseTheValue calls Vuex Actions to update object and Value Property\r\n   * @function increaseTheValue\r\n   */\r\n  protected increaseTheValue () {\r\n    let tempVal, tempMax\r\n    if (this.properties.Max! >= 0 && this.properties.Min! >= 0) {\r\n      if (this.properties.Max! < this.properties.Min!) {\r\n        tempMax = this.properties.Max!\r\n        if (this.properties.Value! < this.properties.Max! && this.properties.Value! > this.properties.Min!) {\r\n          this.updateDataModel({ propertyName: 'Value', value: this.properties.Min })\r\n        }\r\n        tempVal = this.properties.Value! as number\r\n        if (\r\n          tempVal >= tempMax &&\r\n              tempVal - tempMax > this.properties.SmallChange!\r\n        ) {\r\n          tempVal = tempVal - this.properties.SmallChange!\r\n        } else if (tempVal >= tempMax) {\r\n          tempVal = tempMax\r\n        } else {\r\n          tempVal = tempMax\r\n        }\r\n      } else {\r\n        tempMax = this.properties.Max!\r\n        if (this.properties.Value! > this.properties.Max! && this.properties.Value! < this.properties.Min!) {\r\n          this.updateDataModel({ propertyName: 'Value', value: this.properties.Min })\r\n        }\r\n        tempVal = this.properties.Value! as number\r\n        if (\r\n          tempVal <= tempMax &&\r\n        tempMax - tempVal > this.properties.SmallChange!\r\n        ) {\r\n          tempVal = tempVal + this.properties.SmallChange!\r\n        } else if (tempVal <= tempMax) {\r\n          tempVal = tempMax\r\n        } else {\r\n          tempVal = tempMax\r\n        }\r\n      }\r\n      this.updateDataModel({ propertyName: 'Value', value: tempVal })\r\n    } else if (this.properties.Max! < 0 && this.properties.Min! < 0) {\r\n      if (this.properties.Max! > this.properties.Min!) {\r\n        tempMax = this.properties.Max!\r\n        if (this.properties.Value! > this.properties.Max! && this.properties.Value! < this.properties.Min!) {\r\n          this.updateDataModel({ propertyName: 'Value', value: this.properties.Max })\r\n        }\r\n        tempVal = this.properties.Value! as number\r\n        if (\r\n          tempVal <= tempMax &&\r\n          Math.abs(tempVal) - Math.abs(tempMax) > this.properties.SmallChange!\r\n        ) {\r\n          tempVal = Math.abs(tempVal) - this.properties.SmallChange!\r\n        } else if (tempVal <= tempMax) {\r\n          tempVal = Math.abs(tempMax)\r\n        } else {\r\n          tempVal = Math.abs(tempMax)\r\n        }\r\n      } else {\r\n        tempMax = Math.abs(this.properties.Max!)\r\n        if (this.properties.Value! < this.properties.Max! && this.properties.Value! > this.properties.Min!) {\r\n          this.updateDataModel({ propertyName: 'Value', value: this.properties.Min })\r\n        }\r\n        tempVal = Math.abs(this.properties.Value! as number)\r\n        if (\r\n          tempVal <= tempMax &&\r\n        tempMax - tempVal > this.properties.SmallChange!\r\n        ) {\r\n          tempVal = tempVal + this.properties.SmallChange!\r\n        } else if (tempVal <= tempMax) {\r\n          tempVal = tempMax\r\n        } else {\r\n          tempVal = tempMax\r\n        }\r\n      }\r\n      this.updateDataModel({ propertyName: 'Value', value: '-' + tempVal })\r\n    } else if (this.properties.Max! < this.properties.Min!) {\r\n      tempMax = this.properties.Max!\r\n      if (this.properties.Value! > this.properties.Min! && this.properties.Value! < this.properties.Max!) {\r\n        this.updateDataModel({ propertyName: 'Value', value: this.properties.Max })\r\n      }\r\n      tempVal = this.properties.Value as number\r\n      if (\r\n        tempVal >= tempMax &&\r\n        tempVal - tempMax >= this.properties.SmallChange!\r\n      ) {\r\n        tempVal = tempVal - this.properties.SmallChange!\r\n      } else if (tempVal <= tempMax) {\r\n        tempVal = tempMax\r\n      } else {\r\n        tempVal = tempMax\r\n      }\r\n      this.updateDataModel({ propertyName: 'Value', value: tempVal })\r\n    } else {\r\n      tempMax = this.properties.Max!\r\n      if (this.properties.Value! > this.properties.Max! && this.properties.Value! < this.properties.Min!) {\r\n        this.updateDataModel({ propertyName: 'Value', value: this.properties.Min })\r\n      }\r\n      tempVal = this.properties.Value as number\r\n      if (\r\n        tempVal <= tempMax &&\r\n        tempMax - tempVal > this.properties.SmallChange!\r\n      ) {\r\n        tempVal = tempVal + this.properties.SmallChange!\r\n      } else if (tempVal <= tempMax) {\r\n        tempVal = tempMax\r\n      } else {\r\n        tempVal = tempMax\r\n      }\r\n      this.updateDataModel({ propertyName: 'Value', value: tempVal })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @description decreaseTheValue calls Vuex Actions to update object and Value Property\r\n   * @function decreaseTheValue\r\n   */\r\n  protected decreaseTheValue () {\r\n    let tempVal, tempMin\r\n    if (this.properties.Max! >= 0 && this.properties.Min! >= 0) {\r\n      if (this.properties.Max! < this.properties.Min!) {\r\n        tempMin = this.properties.Min!\r\n        if (this.properties.Value! < this.properties.Max! && this.properties.Value! > this.properties.Min!) {\r\n          this.updateDataModel({ propertyName: 'Value', value: this.properties.Min })\r\n        }\r\n        tempVal = this.properties.Value! as number\r\n        if (\r\n          tempVal <= tempMin &&\r\n          tempMin - tempVal > this.properties.SmallChange!\r\n        ) {\r\n          tempVal = tempVal + this.properties.SmallChange!\r\n        } else if (tempVal <= tempMin) {\r\n          tempVal = tempMin\r\n        } else {\r\n          tempVal = tempMin\r\n        }\r\n      } else {\r\n        tempMin = this.properties.Min!\r\n        if (this.properties.Value! > this.properties.Max! && this.properties.Value! < this.properties.Min!) {\r\n          this.updateDataModel({ propertyName: 'Value', value: this.properties.Min })\r\n        }\r\n        tempVal = this.properties.Value! as number\r\n        if (\r\n          tempVal >= tempMin &&\r\n            tempVal - tempMin > this.properties.SmallChange!\r\n        ) {\r\n          tempVal = tempVal - this.properties.SmallChange!\r\n        } else if (tempVal >= tempMin) {\r\n          tempVal = tempMin\r\n        } else {\r\n          tempVal = tempMin\r\n        }\r\n      }\r\n      this.updateDataModel({ propertyName: 'Value', value: tempVal })\r\n    } else if (this.properties.Max! < 0 && this.properties.Min! < 0) {\r\n      if (this.properties.Max! > this.properties.Min!) {\r\n        tempMin = this.properties.Min!\r\n        if (this.properties.Value! > this.properties.Max! && this.properties.Value! < this.properties.Min!) {\r\n          this.updateDataModel({ propertyName: 'Value', value: this.properties.Min })\r\n        }\r\n        tempVal = this.properties.Value! as number\r\n        if (\r\n          tempVal >= tempMin &&\r\n          Math.abs(tempMin) - Math.abs(tempVal) > this.properties.SmallChange!\r\n        ) {\r\n          tempVal = Math.abs(tempVal) + this.properties.SmallChange!\r\n        } else if (tempVal <= tempMin) {\r\n          tempVal = Math.abs(tempMin)\r\n        } else {\r\n          tempVal = Math.abs(tempMin)\r\n        }\r\n      } else {\r\n        tempMin = Math.abs(this.properties.Min!)\r\n        if (this.properties.Value! < this.properties.Max! && this.properties.Value! > this.properties.Min!) {\r\n          this.updateDataModel({ propertyName: 'Value', value: this.properties.Min })\r\n        }\r\n        tempVal = Math.abs(this.properties.Value! as number)\r\n        if (\r\n          tempVal >= tempMin &&\r\n            tempVal - tempMin > this.properties.SmallChange!\r\n        ) {\r\n          tempVal = tempVal - this.properties.SmallChange!\r\n        } else if (tempVal >= tempMin) {\r\n          tempVal = tempMin\r\n        } else {\r\n          tempVal = tempMin\r\n        }\r\n      }\r\n      this.updateDataModel({ propertyName: 'Value', value: '-' + tempVal })\r\n    } else if (this.properties.Max! < this.properties.Min!) {\r\n      tempMin = this.properties.Min!\r\n      if (this.properties.Value! > this.properties.Min! && this.properties.Value! < this.properties.Max!) {\r\n        this.updateDataModel({ propertyName: 'Value', value: this.properties.Max })\r\n      }\r\n      tempVal = this.properties.Value as number\r\n      if (\r\n        tempVal <= tempMin &&\r\n            tempMin - tempVal > this.properties.SmallChange!\r\n      ) {\r\n        tempVal = tempVal + this.properties.SmallChange!\r\n      } else if (tempVal >= tempMin) {\r\n        tempVal = tempMin\r\n      } else {\r\n        tempVal = tempMin\r\n      }\r\n      this.updateDataModel({ propertyName: 'Value', value: tempVal })\r\n    } else {\r\n      tempMin = this.properties.Min!\r\n      if (this.properties.Value! > this.properties.Max! && this.properties.Value! < this.properties.Min!) {\r\n        this.updateDataModel({ propertyName: 'Value', value: this.properties.Min })\r\n      }\r\n      tempVal = this.properties.Value as number\r\n      if (\r\n        tempVal >= tempMin &&\r\n            tempVal - tempMin > this.properties.SmallChange!\r\n      ) {\r\n        tempVal = tempVal - this.properties.SmallChange!\r\n      } else if (tempVal >= tempMin) {\r\n        tempVal = tempMin\r\n      } else {\r\n        tempVal = tempMin\r\n      }\r\n      this.updateDataModel({ propertyName: 'Value', value: tempVal })\r\n    }\r\n  }\r\n  /**\r\n   * @description transformScrollButtonStyle returns string value from\r\n   * knobProperties.transformScrollButtonStyle\r\n   * @function transformScrollButtonStyle\r\n   * @returns string value\r\n   */\r\n  protected get transformScrollButtonStyle () : string {\r\n    return controlProperties.transformScrollButtonStyle(this.data)\r\n  }\r\n\r\n  /**\r\n  * @description update the isContentEditable to make the Button content editable\r\n  * or noneditable on click of enter key\r\n  * @function setContentEditable\r\n  * @param event\r\n  * @param contentEditable\r\n  */\r\n  setContentEditable (event : KeyboardEvent, contentEditable : boolean) {\r\n    this.setEditMode(contentEditable)\r\n  }\r\n\r\n  /**\r\n   * @description  sets Styles to checkbox/optionButton and label based on control Value property\r\n   * @function setStyle\r\n   *@param ref\r\n   *@param checked\r\n   *@param disabled\r\n   *@param bgColor\r\n   */\r\n  setStyle (ref:HTMLInputElement, checked:boolean, disabled:boolean, bgColor:string) {\r\n    if (ref) {\r\n      ref.checked = checked;\r\n      ((ref.parentNode as HTMLLabelElement).childNodes[1] as HTMLSpanElement).style.backgroundColor = bgColor\r\n      ref.disabled = disabled\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @description  style object is passed to :style attribute in span tag in checkbox/OptionButton\r\n   * dynamically changing the styles of the component based on properties\r\n   * @function styleForBtn\r\n   *\r\n   */\r\n  get styleForBtn () {\r\n    const style = { border: '1px inset grey', backgroundColor: 'inherit', top: '0px', position: 'relative' }\r\n    if (!this.properties.Enabled) {\r\n      style.backgroundColor = 'rgba(220, 220, 220, 1)'\r\n    }\r\n    if (this.properties.SpecialEffect === 0) {\r\n      return style\r\n    } else {\r\n      style.border = '2px groove grey'\r\n      return style\r\n    }\r\n  }\r\n\r\n  /**\r\n   * @description  sets controlSource if present and updates Value property\r\n   * @function controlSource\r\n   */\r\n  @Watch('properties.ControlSource', { deep: true })\r\n  controlSource () {\r\n    const propData: controlData = this.data\r\n    if (this.data.type === 'SpinButton' || this.data.type === 'ScrollBar') {\r\n      if (propData.properties.ControlSource && propData.extraDatas) {\r\n        if (propData.extraDatas.ControlSourceValue !== null && propData.extraDatas.ControlSourceValue !== undefined) {\r\n          const a = propData.extraDatas.ControlSourceValue\r\n          if (parseInt(a) <= propData.properties.Max! && parseInt(a) >= propData.properties.Min!) {\r\n            this.updateDataModel({ propertyName: 'Value', value: propData.extraDatas!.ControlSourceValue })\r\n          }\r\n        }\r\n      };\r\n    } else if (propData.properties.ControlSource) {\r\n      const controlSourceValue = propData.extraDatas!.ControlSourceValue!.toLowerCase()\r\n      const isBoolean:boolean | string = (controlSourceValue === 'true') ? true : (controlSourceValue === 'false') ? false : ''\r\n      this.updateDataModel({ propertyName: 'Value', value: isBoolean.toString() })\r\n    }\r\n  }\r\n  /**\r\n   * @description  update the value of control properties\r\n   * @function updateDataModel\r\n   * @param updateData\r\n   */\r\n  @Emit('updateModel')\r\n  updateDataModel (updateData: IupdateDataModel) {\r\n    return updateData\r\n  }\r\n\r\n  /**\r\n   * @description  update the value of control extraDatas properties\r\n   * @function updateDataModelExtraData\r\n   * @param updateData\r\n   */\r\n  @Emit('updateModelExtraData')\r\n  updateDataModelExtraData (updateData: IupdateDataModelExtraData) {\r\n    return updateData\r\n  }\r\n\r\n  /**\r\n  * @description watches text properties\r\n  * @function valueUpdateProp\r\n  * @param oldVal previous string value\r\n  * @param newVal  new/changed string value\r\n  */\r\n @Watch('properties.Text', { deep: true })\r\n  valueUpdateProp (newVal:string, oldVal:string) {\r\n    if (this.data.type!.includes('TextBox') || this.data.type === 'ComboBox') {\r\n      const propData: controlProperties = this.properties\r\n      this.updateDataModel({ propertyName: 'Value', value: newVal })\r\n    }\r\n  }\r\n\r\n /**\r\n  * @description watches text and value properties are same when component is mounted/changed\r\n  * @function textAndValueUpdateProp\r\n  * @param oldVal previous properties data\r\n  * @param newVal  new/changed properties data\r\n  */\r\n @Watch('properties.Value', { deep: true })\r\n textAndValueUpdateProp (newVal:string, oldVal:string) {\r\n   if (this.data.type!.includes('TextBox')) {\r\n     const propData: controlProperties = this.properties\r\n     if (propData.Text !== propData.Value && propData.ControlSource === '') {\r\n       const propText: number = propData.Text!.length\r\n       const propValue: number = (propData.Value as string).length\r\n       this.updateDataModel({ propertyName: 'Text',\r\n         value: this.properties.Value! })\r\n     }\r\n   } else if (this.data.type!.includes('CheckBox') || this.data.type!.includes('OptionButton')) {\r\n     const value = this.properties.Value\r\n     const valueType:boolean | string = typeof value\r\n     let isBoolean:boolean | string = ''\r\n     if (valueType === 'boolean') {\r\n       isBoolean = (value as boolean)\r\n     } else if (valueType === 'string') {\r\n       isBoolean = ((value as string).toLowerCase() === 'true') ? true : ((value as string).toLowerCase() === 'false') ? false : ''\r\n     }\r\n     const ref = this.data.type!.includes('CheckBox') ? this.checkboxRef : this.optionBtnRef\r\n     if (isBoolean !== '') {\r\n       if (isBoolean) {\r\n         this.setStyle((ref as HTMLInputElement), (isBoolean as boolean), !(isBoolean as boolean), 'white')\r\n       } else {\r\n         this.setStyle((ref as HTMLInputElement), false, false, 'white')\r\n       }\r\n     } else {\r\n       this.setStyle((ref as HTMLInputElement), true, true, 'rgba(220, 220, 220, 1)')\r\n     }\r\n   }\r\n }\r\n\r\n /**\r\n  * @description changing width and height of textarea tag by replicating style of\r\n  * textarea with label tag to making the property work in textarea\r\n  * @function updateAutoSize\r\n  * @param oldVal previous properties data\r\n  * @param newVal  new/changed properties data\r\n  */\r\n updateAutoSize (newVal:boolean, oldVal:boolean) {\r\n   throw new Error('updateAutosize Not Implemented')\r\n }\r\n /**\r\n   * @description  sets checked or unchecked when checkbox is clicked\r\n   * if TripleState is True, Null state will be visible\r\n   * @function handleChange\r\n   * @param event it is of type MouseEvent\r\n   */\r\n handleChange (event: MouseEvent, targetRef: HTMLInputElement) {\r\n   if (event.target instanceof HTMLInputElement) {\r\n     const el = event.target.checked\r\n     if (this.properties.TripleState) {\r\n       this.tripleState++\r\n       if (this.tripleState % 3 === 0) {\r\n         this.setStyle(targetRef, true, false, 'rgba(220, 220, 220, 1)')\r\n       } else {\r\n         this.setStyle(targetRef, el, false, 'white')\r\n         this.updateDataModel({ propertyName: 'Value', value: el })\r\n       }\r\n     } else {\r\n       this.tripleState++\r\n       this.updateDataModel({ propertyName: 'Value', value: el })\r\n       this.setStyle(targetRef, el, false, 'white')\r\n     }\r\n   }\r\n }\r\n /**\r\n   * @description getRepeat returns string value from\r\n   * controlProperties.extraDataRepeatProp\r\n   * @function getRepeat\r\n   */\r\n protected get getRepeatData (): string {\r\n   //  if (this.properties.Picture === '') {\r\n   return controlProperties.extraDataRepeatProp(this.data)\r\n   //  } else {\r\n   //    return controlProperties.pictureTilingProp(this.data)\r\n   //  }\r\n }\r\n /**\r\n   * @description computedCaption returns object value from\r\n   * with acceleratorCaption, afterbeginCaption, beforeendCaption values\r\n   * @function computedCaption\r\n   * @returns object value\r\n   */\r\n protected get computedCaption () {\r\n   let accelerator = ''\r\n   if (this.properties.Accelerator) {\r\n     accelerator = this.properties.Accelerator!.charAt(0)\r\n   }\r\n   return controlProperties.acceleratorProp(this.properties.Caption!, accelerator)\r\n }\r\n updateColumnWidths (index: number, height: number) {\r\n   const controlProp = this.properties\r\n   const updateColWidth = controlProp.ColumnWidths!.split(';')\r\n   const colChangeCheck: boolean = controlProp.ColumnCount! - 1 < index\r\n   return {\r\n     position: 'relative',\r\n     display: 'inline-block',\r\n     textAlign: controlProp.TextAlign === 0 ? 'left' : controlProp.TextAlign === 2 ? 'right' : 'center',\r\n     width: controlProp.ColumnCount! === -1 ? (updateColWidth[index] ? parseInt(updateColWidth[index]) + 'px' : '100px') : colChangeCheck ? '0px' : ((updateColWidth[index]) ? parseInt(updateColWidth[index]) + 'px' : controlProp.ColumnCount! > index ? '100px' : '0px'),\r\n     overflow: 'hidden',\r\n     paddingBottom: this.data.properties.Font!.FontSize! > 48 ? '10px' : '5px'\r\n   }\r\n }\r\n updateColHeads (index: number) {\r\n   const controlProp = this.properties\r\n   const updateColWidth = controlProp.ColumnWidths!.split(';')\r\n   return {\r\n     textAlign: controlProp.TextAlign === 0 ? 'left' : controlProp.TextAlign === 2 ? 'right' : 'center',\r\n     borderRight: (index < controlProp.ColumnCount! - 1) ? '1px solid' : '',\r\n     width: controlProp.ColumnCount! === -1 ? parseInt(updateColWidth[index]) + 'px' : (updateColWidth[index]) ? parseInt(updateColWidth[index]) + 'px' : '100px',\r\n     overflow: 'hidden'\r\n   }\r\n }\r\n\r\n/**\r\n * @description watches changes in properties for BoundColumn\r\n * @function boundColumnValue\r\n * @param oldVal previous properties data\r\n * @param newVal  new/changed properties data\r\n */\r\n@Watch('properties.BoundColumn', { deep: true })\r\n boundColumnValue (newVal:number, oldVal:number) {\r\n   if (this.properties.BoundColumn! > 0 && this.properties.BoundColumn! < this.extraDatas.RowSourceData!.length) {\r\n     let tempData = [...this.extraDatas.RowSourceData!]\r\n    tempData![0][0] = tempData![0][newVal - 1]\r\n    let tempValue = tempData![0][newVal - 1]\r\n    this.updateDataModelExtraData({ propertyName: 'RowSourceData', value: tempData })\r\n    this.updateDataModel({ propertyName: 'Value', value: tempValue })\r\n   }\r\n }\r\n\r\n/**\r\n * @description watches changes in properties for TextColumn\r\n * @function textColumnChange\r\n * @param oldVal previous properties data\r\n * @param newVal  new/changed properties data\r\n */\r\n@Watch('properties.TextColumn', { deep: true })\r\ntextColumnChange (newVal:number, oldVal:number) {\r\n  if (newVal > 0 && newVal < this.extraDatas.RowSourceData!.length) {\r\n    let tempData = [...this.extraDatas.RowSourceData!]\r\n    let tempValue = tempData![0][newVal - 1]\r\n    this.updateDataModel({ propertyName: 'Text', value: tempValue })\r\n  } else {\r\n    this.updateDataModel({ propertyName: 'Text', value: '' })\r\n  }\r\n}\r\n\r\n/**\r\n * @description watches changes in properties for TopIndex\r\n * @function topIndexCheck\r\n * @param oldVal previous properties data\r\n * @param newVal  new/changed properties data\r\n */\r\n@Watch('properties.TopIndex', { deep: true })\r\ntopIndexCheck (newVal:number, oldVal:number) {\r\n  if (this.extraDatas.RowSourceData!.length === 0) {\r\n    this.updateDataModel({ propertyName: 'TopIndex', value: -1 })\r\n  } else {\r\n    this.updateDataModel({ propertyName: 'TopIndex', value: 0 })\r\n  }\r\n}\r\n\r\n/**\r\n * @description updates the dataModel listBox object properties when user clicks\r\n * @function handleMultiSelect\r\n * @param event its of type MouseEvent\r\n * @event click\r\n *\r\n */\r\nhandleMultiSelect (e: MouseEvent) {\r\n  if (e.target instanceof HTMLTableCellElement || e.target instanceof HTMLTableRowElement || e.target instanceof HTMLDivElement) {\r\n    this.tempListBoxComboBoxEvent = e\r\n    const targetElement = e.target\r\n    const tempData = targetElement.parentElement!.children[0] as HTMLDivElement\r\n    const tempDataOption = targetElement.parentElement!.children[1] as HTMLDivElement\r\n    const tempPath = e.composedPath()\r\n    targetElement.focus()\r\n    let data = targetElement.innerText\r\n    let splitData = data.replace(/\\t/g, ' ').split(' ')\r\n    if (this.data.properties.ListStyle === 0) {\r\n      this.selectionData[0] = tempData.innerText\r\n    } else {\r\n      this.selectionData[0] = tempDataOption.innerText\r\n    }\r\n    if (this.properties.Enabled && this.properties.Locked === false) {\r\n      if (this.properties.MultiSelect === 0) {\r\n        if (this.properties.ControlSource !== '') {\r\n          this.updateDataModel({ propertyName: 'Text', value: this.selectionData[0] })\r\n          this.updateDataModel({ propertyName: 'Value', value: this.selectionData[0] })\r\n        }\r\n        this.clearOptionBGColorAndChecked(e)\r\n        this.setOptionBGColorAndChecked(e)\r\n        let isListStyle = 0\r\n        if (this.properties.TextColumn === -1 || this.properties.TextColumn === 1) {\r\n        // 0th index is empty string\r\n          if (this.properties.ListStyle === 0) {\r\n            isListStyle = -1\r\n          }\r\n          this.updateDataModel({ propertyName: 'Text', value: splitData[1 - isListStyle] })\r\n          this.updateDataModel({ propertyName: 'Value', value: splitData[1 - isListStyle] })\r\n        } else if (this.properties.TextColumn === 0) {\r\n          this.updateDataModel({ propertyName: 'Text', value: splitData[2 - isListStyle] })\r\n          this.updateDataModel({ propertyName: 'Value', value: splitData[1 - isListStyle] })\r\n        } else {\r\n          this.updateDataModel({ propertyName: 'Text', value: splitData[this.properties.TextColumn!] })\r\n          this.updateDataModel({ propertyName: 'Value', value: splitData[1 - isListStyle] })\r\n        }\r\n      } else if (this.properties.MultiSelect === 1) {\r\n        if (targetElement.tagName === 'INPUT') {\r\n          this.setOptionBGColorAndChecked(e)\r\n        } else {\r\n          this.setOptionBGColorAndChecked(e)\r\n        }\r\n      } else if (this.properties.MultiSelect === 2) {\r\n        if (e.ctrlKey === true) {\r\n          if (targetElement.tagName === 'INPUT') {\r\n            this.setOptionBGColorAndChecked(e)\r\n          } else {\r\n            this.setOptionBGColorAndChecked(e)\r\n          }\r\n        } else if (e.shiftKey === true && this.properties.Value !== '') {\r\n          let startPoint = 0\r\n          let endPoint = 0\r\n          for (let i = 0; i < tempPath.length; i++) {\r\n            const ele = tempPath[i] as HTMLDivElement\r\n            if (ele.className === 'table-body') {\r\n            // extend points start and end\r\n              for (let j = 0; j < ele.childNodes.length; j++) {\r\n                const cd = ele.childNodes[j] as HTMLDivElement\r\n                if (cd.innerText === this.properties.Value) {\r\n                  startPoint = j + 1\r\n                }\r\n                if (cd.innerText === targetElement.innerText) {\r\n                  endPoint = j\r\n                }\r\n              }\r\n              // upward selection start and end swap\r\n              if (startPoint > endPoint) {\r\n                let temp = startPoint\r\n                startPoint = endPoint\r\n                endPoint = temp\r\n              }\r\n              // setting selection\r\n              for (let k = startPoint; k <= endPoint; k++) {\r\n                const node = ele.childNodes[k] as HTMLDivElement\r\n                const tempNode = node.childNodes[0].childNodes[0] as HTMLInputElement\r\n                node.style.backgroundColor = 'rgb(59, 122, 231)'\r\n                if (\r\n                  this.properties.ListStyle === 1 &&\r\n             !tempNode.checked\r\n                ) {\r\n                // tempNode.checked = !tempNode.checked\r\n                  tempNode.checked = true\r\n                }\r\n              }\r\n              break\r\n            }\r\n          }\r\n        } else {\r\n          this.clearOptionBGColorAndChecked(e)\r\n          this.setOptionBGColorAndChecked(e)\r\n          this.updateDataModel({ propertyName: 'Value', value: targetElement.innerText })\r\n        }\r\n      } else {\r\n        if (this.properties.ControlSource !== '') {\r\n          this.updateDataModel({ propertyName: 'Text', value: this.selectionData[0] })\r\n          this.updateDataModel({ propertyName: 'Value', value: this.selectionData[0] })\r\n        }\r\n        this.clearOptionBGColorAndChecked(e)\r\n        this.setOptionBGColorAndChecked(e)\r\n        let isListStyle = 0\r\n        if (this.properties.TextColumn === -1 || this.properties.TextColumn === 1) {\r\n          if (this.properties.ListStyle === 0) {\r\n            isListStyle = -1\r\n          }\r\n          this.updateDataModel({ propertyName: 'Text', value: splitData[1 - isListStyle] })\r\n          this.updateDataModel({ propertyName: 'Value', value: splitData[1 - isListStyle] })\r\n        } else if (this.properties.TextColumn === 0) {\r\n          this.updateDataModel({ propertyName: 'Text', value: splitData[2 - isListStyle] })\r\n          this.updateDataModel({ propertyName: 'Value', value: splitData[1 - isListStyle] })\r\n        } else {\r\n          this.updateDataModel({ propertyName: 'Text', value: splitData[this.properties.TextColumn!] })\r\n          this.updateDataModel({ propertyName: 'Value', value: splitData[1 - isListStyle] })\r\n        }\r\n      }\r\n    }\r\n  } else {\r\n    if (this.properties.MultiSelect !== 1) {\r\n      this.clearOptionBGColorAndChecked(e)\r\n    }\r\n    this.setOptionBGColorAndChecked(e)\r\n  }\r\n  const a = e.currentTarget! as HTMLDivElement\r\n  this.selectionData[0] = a.innerText\r\n  this.updateDataModel({ propertyName: 'Value', value: a.innerText[0] })\r\n  this.updateDataModel({ propertyName: 'Text', value: a.innerText[0] })\r\n}\r\n/**\r\n * @description updates the dataModel listBox object properties when keydown\r\n * @function handleExtendArrowKeySelect\r\n * @param event its of type KeyboardEvent\r\n * @event keydown\r\n *\r\n */\r\nhandleExtendArrowKeySelect (e: KeyboardEvent) {\r\n  const x = e.key.toUpperCase().charCodeAt(0)\r\n  const tempPath = e.composedPath()\r\n  const eventTarget = e.target as HTMLTableRowElement\r\n  const nextSiblingEvent = eventTarget.nextSibling as HTMLDivElement\r\n  const prevSiblingEvent = eventTarget.previousSibling as HTMLDivElement\r\n  if (\r\n   this.properties.MatchEntry! === 0 &&\r\n   x >= 48 && x <= 90\r\n  ) {\r\n    this.matchEntry = []\r\n    const prevMatchData =\r\n   this.extraDatas.MatchData === '' ? e.key : this.extraDatas.MatchData\r\n    this.updateDataModelExtraData({ propertyName: 'MatchData', value: prevMatchData !== e.key ? e.key : prevMatchData })\r\n\r\n    for (let index = 0; index < tempPath.length; index++) {\r\n      const element = tempPath[index] as HTMLDivElement\r\n      if (element.className === 'table-body') {\r\n        for (let index = 0; index < element.childNodes.length; index++) {\r\n          const ei = element.childNodes[index] as HTMLDivElement\r\n          let splitData = ei.innerText.replace(/\\t/g, ' ').split(' ')\r\n          let si = 0\r\n          if (this.properties.ListStyle === 0) {\r\n            si = -1\r\n          }\r\n          if (splitData[si + 1][0].includes(this.extraDatas.MatchData!)) {\r\n            this.matchEntry.push(index)\r\n          }\r\n        }\r\n\r\n        if (\r\n         this.extraDatas.MatchData![0] !== undefined &&\r\n         this.extraDatas.MatchData![0] === e.key &&\r\n         this.extraDatas.MatchData!.length > 0\r\n        ) {\r\n          const tempChildNode = element.childNodes[this.matchEntry[this.matchIndex]] as HTMLDivElement\r\n          this.matchIndex++\r\n          if (\r\n            this.matchIndex === this.matchEntry.length &&\r\n           prevMatchData === this.extraDatas.MatchData\r\n          ) {\r\n            this.matchIndex = 0\r\n            this.clearOptionBGColorAndChecked(e)\r\n            this.setBGandCheckedForMatch(\r\n              tempChildNode\r\n            )\r\n            break\r\n          } else if (prevMatchData !== this.extraDatas.MatchData) {\r\n            this.matchIndex = 0\r\n            this.clearOptionBGColorAndChecked(e)\r\n            this.setBGandCheckedForMatch(\r\n              tempChildNode\r\n            )\r\n            break\r\n          } else {\r\n            if (this.matchEntry.length === 0) {\r\n              this.matchEntry.push(0)\r\n              this.matchIndex = 0\r\n            }\r\n            this.clearOptionBGColorAndChecked(e)\r\n            this.setBGandCheckedForMatch(\r\n              tempChildNode\r\n            )\r\n            break\r\n          }\r\n        }\r\n        break\r\n      }\r\n    }\r\n  } else if (\r\n    this.properties.MatchEntry === 1 &&\r\n    x >= 48 && x <= 90\r\n  ) {\r\n    let temp = this.extraDatas.MatchData + e.key\r\n    this.updateDataModelExtraData({ propertyName: 'MatchData', value: temp })\r\n\r\n    for (let point = 0; point < tempPath.length; point++) {\r\n      const tbody = tempPath[point] as HTMLDivElement\r\n      if (tbody.className === 'table-body') {\r\n        this.matchEntry = []\r\n        for (let p = 0; p < tbody.childNodes.length; p++) {\r\n          const ei = tbody.childNodes[p] as HTMLDivElement\r\n          let matchEntryComplete = ei.innerText\r\n            .replace(/\\t/g, ' ')\r\n            .split(' ')\r\n          let sii = 0\r\n          if (this.properties.ListStyle === 0) {\r\n            sii = -1\r\n          }\r\n          if (\r\n            matchEntryComplete[sii + 1][0].includes(this.extraDatas.MatchData!) &&\r\n           this.extraDatas.MatchData!.length < 2\r\n          ) {\r\n            this.matchEntry.push(p)\r\n          } else if (\r\n            matchEntryComplete[sii + 1].includes(this.extraDatas.MatchData!) &&\r\n           this.extraDatas.MatchData!.length > 1\r\n          ) {\r\n            this.matchEntry.push(p)\r\n          }\r\n        }\r\n\r\n        if (this.extraDatas.MatchData!.length <= 1) {\r\n          let singleMatch = tbody.childNodes[this.matchEntry[0]] as HTMLDivElement\r\n          this.clearOptionBGColorAndChecked(e)\r\n          this.setBGandCheckedForMatch(singleMatch)\r\n          break\r\n        } else if (\r\n         this.extraDatas.MatchData!.length > 1 &&\r\n         this.matchEntry.length !== 0\r\n        ) {\r\n          let completeAutoMatch = tbody.childNodes[this.matchEntry[0]] as HTMLDivElement\r\n          this.clearOptionBGColorAndChecked(e)\r\n          this.setBGandCheckedForMatch(completeAutoMatch)\r\n        }\r\n        break\r\n      }\r\n    }\r\n  }\r\n  if (\r\n    e.key === 'ArrowDown' &&\r\n   e.shiftKey === true &&\r\n   (nextSiblingEvent !== null || prevSiblingEvent.nextSibling !== null)\r\n  ) {\r\n    let currentElement: HTMLDivElement\r\n    if (nextSiblingEvent === null) {\r\n      currentElement = prevSiblingEvent.nextSibling! as HTMLDivElement\r\n    } else {\r\n      currentElement = nextSiblingEvent\r\n    }\r\n    if (this.properties.MultiSelect === 2) {\r\n      if (eventTarget.style.backgroundColor !== 'rgb(59, 122, 231)') {\r\n        this.setOptionBGColorAndChecked(e)\r\n      } else if (\r\n        eventTarget.style.backgroundColor === 'rgb(59, 122, 231)' &&\r\n        currentElement!.style.backgroundColor !== ''\r\n      ) {\r\n        this.setOptionBGColorAndChecked(e)\r\n      } else if (eventTarget.nextSibling!.nextSibling !== null) {\r\n        this.setBGColorForNextSibling(e)\r\n      } else if (\r\n      eventTarget.nextSibling!.nextSibling === null &&\r\n      currentElement!.style.backgroundColor !== 'rgb(59, 122, 231)'\r\n      ) {\r\n        this.setBGColorForNextSibling(e)\r\n      }\r\n        currentElement!.focus()\r\n    }\r\n  } else if (\r\n    e.key === 'ArrowUp' &&\r\n   e.shiftKey === true &&\r\n   (prevSiblingEvent !== null || nextSiblingEvent.previousSibling !== null)\r\n  ) {\r\n    let currentElement: HTMLDivElement\r\n    if (prevSiblingEvent === null) {\r\n      currentElement = nextSiblingEvent.previousSibling! as HTMLDivElement\r\n    } else {\r\n      currentElement = prevSiblingEvent\r\n    }\r\n    if (this.properties.MultiSelect === 2) {\r\n      if (\r\n        eventTarget.style.backgroundColor === 'rgb(59, 122, 231)' &&\r\n        currentElement.style.backgroundColor !== ''\r\n      ) {\r\n        this.setOptionBGColorAndChecked(e)\r\n      } else if (eventTarget.previousSibling!.previousSibling !== null) {\r\n        this.setBGColorForPreviousSibling(e)\r\n      } else if (\r\n        eventTarget.previousSibling!.previousSibling === null &&\r\n        currentElement.style.backgroundColor !== 'rgb(59, 122, 231)'\r\n      ) {\r\n        this.setBGColorForPreviousSibling(e)\r\n      }\r\n      currentElement.focus()\r\n    }\r\n  }\r\n  // }\r\n}\r\n\r\n/**\r\n* @description updates the dataModel listBox object properties when mouseenter\r\n* @function handleDrag\r\n* @param event its of type MouseEvent\r\n* @event mouseenter\r\n*\r\n*/\r\nhandleDrag (e: MouseEvent) {\r\n  const etarget = e.target as HTMLDivElement\r\n  if (this.properties.MultiSelect === 2) {\r\n    if (e.which === 1) {\r\n      if (etarget.style.backgroundColor === 'rgb(59, 122, 231)') {\r\n        this.unselectBGColorAndchecked(e)\r\n      } else {\r\n        this.setOptionBGColorAndChecked(e)\r\n      }\r\n    }\r\n   window.getSelection()!.removeAllRanges()\r\n  }\r\n}\r\n\r\n/**\r\n* @description set Background Color for next siblings\r\n* @function setBGColorForNextSibling\r\n* @param event its of type MouseEvent or KeyboardEvent\r\n*/\r\nsetBGColorForNextSibling (e: MouseEvent | KeyboardEvent) {\r\n  if (e.target instanceof HTMLTableCellElement || e.target instanceof HTMLDivElement) {\r\n    const targetEvent = e.target\r\n    const nextSiblingEvent = targetEvent.nextSibling as HTMLDivElement\r\n    const nextSiblingCheckedEvent = nextSiblingEvent.children[0].childNodes[0] as HTMLInputElement\r\n    nextSiblingEvent.style.backgroundColor =\r\n   nextSiblingEvent.style.backgroundColor === 'rgb(59, 122, 231)'\r\n     ? ''\r\n     : 'rgb(59, 122, 231)'\r\n    if (\r\n      this.properties.ListStyle === 1 &&\r\n   this.properties.MultiSelect === 2\r\n    ) {\r\n      nextSiblingCheckedEvent.checked = !nextSiblingCheckedEvent.checked\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n* @description set Background Color foe previous siblings\r\n* @function setBGColorForPreviousSibling\r\n* @param event its of type MouseEvent or KeyboardEvent\r\n*/\r\nsetBGColorForPreviousSibling (e: KeyboardEvent) {\r\n  if (e.target instanceof HTMLTableCellElement || e.target instanceof HTMLTableRowElement || e.target instanceof HTMLDivElement) {\r\n    const targetEvent = e.target\r\n    const prevSiblingEvent = targetEvent.previousSibling as HTMLDivElement\r\n    const prevSiblingCheckedEvent = prevSiblingEvent.children[0].childNodes[0] as HTMLInputElement\r\n    prevSiblingEvent.style.backgroundColor =\r\n   prevSiblingEvent.style.backgroundColor === 'rgb(59, 122, 231)'\r\n     ? ''\r\n     : 'rgb(59, 122, 231)'\r\n    if (\r\n      this.properties.ListStyle === 1 &&\r\n   this.properties.MultiSelect === 2\r\n    ) {\r\n      prevSiblingCheckedEvent.checked = !prevSiblingCheckedEvent.checked\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n* @description clear selected option for SingleSelection\r\n* @function clearOptionBGColorAndChecked\r\n* @param event\r\n*/\r\nclearOptionBGColorAndChecked (e: any) {\r\n  if (this.data.type === 'ComboBox') {\r\n    for (let i = 0; i < e.path.length; i++) {\r\n      if (e.path[i].className === 'tBodyStyle') {\r\n        for (let j = 0; j < e.path[i].children.length; j++) {\r\n          e.path[i].children[j].style.backgroundColor = ''\r\n        }\r\n      }\r\n    }\r\n  }\r\n  const tempPath = e.path\r\n  if (tempPath && tempPath.length > 0) {\r\n    for (let index = 0; index < tempPath.length; index++) {\r\n      const element = tempPath[index] as HTMLDivElement\r\n      if (element.className === 'table-body') {\r\n        for (\r\n          let childIndex = 0;\r\n          childIndex < element.childNodes.length;\r\n          childIndex++\r\n        ) {\r\n          const childNode = element.childNodes[childIndex] as HTMLDivElement\r\n          childNode.style.backgroundColor = ''\r\n          const ChildChecked = childNode.childNodes[0].childNodes[0] as HTMLInputElement\r\n          if (ChildChecked && this.properties.ListStyle === 1) {\r\n            ChildChecked.checked = false\r\n          }\r\n        }\r\n        break\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n* @description handle setting backgroundColor and option checked/not\r\n* @function setOptionBGColorAndChecked\r\n* @param event KeyboardEvent or MouseEvent\r\n*/\r\nsetOptionBGColorAndChecked (e: KeyboardEvent | MouseEvent) {\r\n  const currentTargetElement = e.currentTarget as HTMLDivElement\r\n  const childNodeChecked = currentTargetElement.children[0].childNodes[0] as HTMLInputElement\r\n  if (this.data.type === 'ComboBox') {\r\n    currentTargetElement.style.backgroundColor =\r\n   currentTargetElement.style.backgroundColor === 'rgb(59, 122, 231)'\r\n     ? ''\r\n     : 'rgb(59, 122, 231)'\r\n  }\r\n  if (this.data.type === 'ComboBox') {\r\n    childNodeChecked.checked = !childNodeChecked.checked\r\n  }\r\n  if ((e.target instanceof HTMLDivElement || e.target instanceof HTMLTableCellElement || e.target instanceof HTMLTableRowElement || e.target instanceof HTMLInputElement)) {\r\n    const targetEvent = e.target\r\n    if (this.data.type === 'ComboBox') {\r\n      currentTargetElement.style.backgroundColor = ''\r\n    }\r\n    if (\r\n      this.properties.ListStyle === 1 &&\r\n   this.properties.MultiSelect === 0\r\n    ) {\r\n      childNodeChecked.checked = !childNodeChecked.checked\r\n      if (childNodeChecked.checked === true) {\r\n        currentTargetElement.style.backgroundColor = 'rgb(59, 122, 231)'\r\n      } else {\r\n        currentTargetElement.style.backgroundColor = ''\r\n      }\r\n    } else {\r\n      childNodeChecked.checked = !childNodeChecked.checked\r\n      if (this.properties.MultiSelect === 0) {\r\n        currentTargetElement.style.backgroundColor = 'rgb(59, 122, 231)'\r\n        if (this.properties.ListStyle === 1) {\r\n          if (childNodeChecked.checked) {\r\n            currentTargetElement.style.backgroundColor = 'rgb(59, 122, 231)'\r\n          }\r\n        }\r\n      } else if (this.properties.MultiSelect === 1) {\r\n        if (currentTargetElement.style.backgroundColor === 'rgb(59, 122, 231)') {\r\n          currentTargetElement.style.backgroundColor = ''\r\n          if (this.properties.ListStyle === 1) {\r\n            if (childNodeChecked.checked) {\r\n              currentTargetElement.style.backgroundColor = 'rgb(59, 122, 231)'\r\n            } else {\r\n              currentTargetElement.style.backgroundColor = ''\r\n            }\r\n          }\r\n        } else {\r\n          currentTargetElement.style.backgroundColor = 'rgb(59, 122, 231)'\r\n          if (this.properties.ListStyle === 1) {\r\n            if (childNodeChecked.checked) {\r\n              currentTargetElement.style.backgroundColor = 'rgb(59, 122, 231)'\r\n            }\r\n          }\r\n        }\r\n      } else if (this.properties.MultiSelect === 2) {\r\n        childNodeChecked.checked = true\r\n        currentTargetElement.style.backgroundColor = 'rgb(59, 122, 231)'\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nunselectBGColorAndchecked (e: KeyboardEvent | MouseEvent) {\r\n  const currentTargetElement = e.currentTarget as HTMLDivElement\r\n  const childNodeChecked = currentTargetElement.children[0].childNodes[0] as HTMLInputElement\r\n  if (this.properties.MultiSelect === 2) {\r\n    childNodeChecked.checked = false\r\n    currentTargetElement.style.backgroundColor = ''\r\n  }\r\n}\r\n\r\n/**\r\n* @description set BGColor and Checked matchEntry\r\n* @function setBGandCheckedForMatch\r\n* @param singleMatch which is an HTMLDivElement\r\n*/\r\nsetBGandCheckedForMatch (singleMatch: HTMLDivElement) {\r\n  if (singleMatch !== undefined) {\r\n    singleMatch.style.backgroundColor = 'rgb(59, 122, 231)'\r\n    if ((this.properties.ListStyle === 1)) {\r\n      const tempNode = singleMatch.childNodes[0].childNodes[0] as HTMLInputElement\r\n      tempNode.checked = !tempNode.checked\r\n    }\r\n  }\r\n}\r\n\r\nget setFontStyle () {\r\n  const tempFontStyle = this.properties.Font!.FontStyle!.toLowerCase()\r\n  if (tempFontStyle.includes(this.properties.Font!.FontName!.toLowerCase())) {\r\n    if (tempFontStyle.includes('italic')) {\r\n      this.isItalic = true\r\n    } else {\r\n      this.isItalic = false\r\n    }\r\n    if (tempFontStyle.split(' ').indexOf('bold') > -1) {\r\n      this.tempWeight = 'bold'\r\n    } else if (tempFontStyle.includes('black')) {\r\n      this.tempWeight = '900'\r\n    } else if (tempFontStyle.split(' ').indexOf('light') > -1) {\r\n      this.tempWeight = 'lighter'\r\n    } else if (tempFontStyle.includes('semibold')) {\r\n      this.tempWeight = '540'\r\n    } else if (tempFontStyle.includes('semilight')) {\r\n      this.tempWeight = '300'\r\n    } else {\r\n      this.tempWeight = '400'\r\n    }\r\n    if (tempFontStyle.split(' ').indexOf('condensed') > -1) {\r\n      this.tempStretch = 'condensed'\r\n    } else if (tempFontStyle.includes('semicondensed')) {\r\n      this.tempStretch = 'semi-condensed'\r\n    } else if (tempFontStyle.includes('narrow')) {\r\n      this.tempStretch = 'ultra-condensed'\r\n    } else {\r\n      this.tempStretch = 'normal'\r\n    }\r\n    return this.properties.Font!.FontName!\r\n  } else {\r\n    this.isItalic = false\r\n    this.tempWeight = '400'\r\n    this.tempStretch = 'normal'\r\n    return this.properties.Font!.FontName!\r\n  }\r\n}\r\n@Emit('parentConextMenu')\r\nparentConextMenu (event: MouseEvent) {\r\n  return event\r\n}\r\nopenTextContextMenu (event: MouseEvent) {\r\n  EventBus.$emit('openTextContextMenu', event, this.controlId)\r\n}\r\npositionLogo (value:any) {\r\n  let style = {\r\n    order: Number(),\r\n    alignItems: '',\r\n    transform: '',\r\n    top: '',\r\n    left: '',\r\n    position: '',\r\n    display: 'inline-flex',\r\n    width: '',\r\n    justifyContent: ''\r\n  }\r\n  this.reverseStyle = {\r\n    display: '',\r\n    flexDirection: '',\r\n    justifyItems: '',\r\n    position: '',\r\n    justifyContent: 'center',\r\n    alignItems: '',\r\n    width: '',\r\n    alignSelf: 'center'\r\n  }\r\n  this.imagePos.alignSelf = ''\r\n  this.reverseStyle.display = 'flex'\r\n  switch (value) {\r\n    case 0: break\r\n    case 1: style.alignItems = 'center'\r\n      this.imagePos.alignSelf = 'center'\r\n      break\r\n    case 2: style.alignItems = 'flex-end'\r\n      this.reverseStyle.alignItems = 'flex-end'\r\n      break\r\n    case 3: this.reverseStyle.flexDirection = 'row-reverse'\r\n      break\r\n    case 4: this.reverseStyle.flexDirection = 'row-reverse'\r\n      style.alignItems = 'center'\r\n      this.imagePos.alignSelf = 'center'\r\n      break\r\n    case 5: this.reverseStyle.flexDirection = 'row-reverse'\r\n      style.alignItems = 'flex-end'\r\n      this.reverseStyle.alignItems = 'flex-end'\r\n      break\r\n    case 6: this.reverseStyle.display = 'grid'\r\n      break\r\n    case 7: this.reverseStyle.display = 'grid'\r\n      this.reverseStyle.justifyItems = 'center'\r\n      break\r\n    case 8: this.reverseStyle.display = 'grid'\r\n      this.reverseStyle.justifyItems = 'end'\r\n      break\r\n    case 9: this.reverseStyle.display = 'grid'\r\n      style.order = -1\r\n      break\r\n    case 10: this.reverseStyle.display = 'grid'\r\n      this.reverseStyle.justifyItems = 'center'\r\n      style.order = -1\r\n      break\r\n    case 11: this.reverseStyle.display = 'grid'\r\n      this.reverseStyle.justifyItems = 'end'\r\n      style.order = -1\r\n      break\r\n    case 12: this.reverseStyle.position = 'relative'\r\n      this.reverseStyle.width = '100%'\r\n      style.position = 'absolute'\r\n      style.top = '50%'\r\n      style.left = '50%'\r\n      style.transform = 'translate(-50%, -50%)'\r\n      style.justifyContent = 'center'\r\n      style.width = 'fit-content'\r\n      break\r\n    default:\r\n  }\r\n  this.labelStyle = style\r\n}\r\npictureSize () {\r\n  const imgStyle = {\r\n    width: 'fit-content',\r\n    height: 'fit-content',\r\n    filter: '',\r\n    maxWidth: '100%'\r\n  }\r\n  if (this.properties.Picture) {\r\n    Vue.nextTick(() => {\r\n      // const imgProp = document.getElementById('img')\r\n        imgStyle.width = this.properties.Width! <= this.imageRef!.naturalWidth ? `${this.properties.Width}px` : 'fit-content'\r\n        imgStyle.height = this.properties.Height! <= this.imageRef!.naturalHeight ? `${this.properties.Height}px` : 'fit-content'    \r\n        if(this.properties.PicturePosition === 9 || this.properties.PicturePosition === 10 || this.properties.PicturePosition === 11 ){\r\n          this.imageRef.scrollIntoView(true)          \r\n        }\r\n        imgStyle.filter = !this.properties.Enabled ? 'sepia(0) grayscale(1) blur(3px) opacity(0.2)' : ''      \r\n    })\r\n  }\r\n  console.log(\"imgProp||\",this.imageProperty)\r\n  this.imageProperty = imgStyle\r\n}\r\nonPictureLoad () {\r\n  const  imgStyle={\r\n    width:'auto',\r\n    height:'auto',\r\n  }\r\n  this.imageProperty = imgStyle\r\n    this.pictureSize()\r\n  }\r\nget spanStyleObj () {\r\n  const controlProp = this.properties\r\n  const font: font = controlProp.Font\r\n    ? controlProp.Font\r\n    : {\r\n      FontName: 'Arial',\r\n      FontSize: 20,\r\n      FontItalic: true,\r\n      FontBold: true,\r\n      FontUnderline: true,\r\n      FontStrikethrough: true\r\n    }\r\n  return {\r\n    textDecoration:\r\n      font.FontStrikethrough === true && font.FontUnderline === true\r\n        ? 'underline line-through'\r\n        : font.FontUnderline\r\n          ? 'underline'\r\n          : font.FontStrikethrough\r\n            ? 'line-through'\r\n            : '',\r\n    color: !this.properties.Enabled ? 'gray' : ''\r\n  }\r\n}\r\nlabelAlignment(){\r\n  this.reverseStyle.alignSelf = 'inherit'\r\n  if (this.imageRef && this.imageRef.naturalHeight > this.properties.Height! ){\r\n        this.reverseStyle.alignSelf = 'inherit'\r\n      }\r\n  else {\r\n    let logoProp = this.logoRef \r\n      if (this.properties.Width! >= logoProp!.clientWidth && this.properties.Height! >= logoProp!.clientHeight) {\r\n        this.reverseStyle.alignSelf = 'center'\r\n      }\r\n    }\r\n}\r\ngetWidthHeight(){\r\n  const picPosLeftRight=[0,1,2,3,4,5]\r\n  const picPosTopBottom = [6,7,8,9,10,11]\r\n  const imgHeight = this.imageRef && this.imageRef.naturalHeight\r\n  const imgWidth = this.imageRef && this.imageRef.naturalWidth\r\n  let labelHeight = 0\r\n  let labelWidth = 0\r\n  //calcluate text height\r\n  if(this.textSpanRef && this.textSpanRef.offsetHeight){\r\n    labelHeight = this.textSpanRef.offsetHeight\r\n  }\r\n  else if((this.editableTextRef.$el as HTMLSpanElement ) && (this.editableTextRef.$el as HTMLSpanElement ).offsetHeight){\r\n    labelHeight = (this.editableTextRef.$el as HTMLSpanElement ).offsetHeight\r\n  }\r\n  //calcuate text width\r\n  if(this.textSpanRef && this.textSpanRef.offsetWidth){\r\n    labelWidth = this.textSpanRef.offsetWidth\r\n  }\r\n  else if((this.editableTextRef.$el as HTMLSpanElement ) && (this.editableTextRef.$el as HTMLSpanElement ).offsetWidth) {\r\n    labelWidth = (this.editableTextRef.$el as HTMLSpanElement ).offsetWidth \r\n  }\r\n\r\n  let componentRef = this.componentRef\r\n  let widthHeightData = {\r\n    width: labelWidth + 15,\r\n    height: labelHeight + 10\r\n  }\r\n  if(this.properties.Picture){\r\n  if( picPosLeftRight.includes(this.properties.PicturePosition!)){\r\n    if(imgHeight >= labelHeight) {\r\n      widthHeightData.height = imgHeight\r\n    } else {\r\n      widthHeightData.height = labelHeight\r\n    }\r\n    widthHeightData.width = (imgWidth + labelWidth) \r\n  } \r\n   else if(picPosTopBottom.includes(this.properties.PicturePosition!)){   \r\n     if(imgWidth >= labelWidth){\r\n       widthHeightData.width = imgWidth \r\n     }else {\r\n       widthHeightData.width = labelWidth  \r\n     }\r\n      widthHeightData.height = imgHeight + labelHeight\r\n   }\r\n   else if (this.properties.PicturePosition! === 12) {\r\n       widthHeightData.width = imgWidth >= labelWidth ? imgWidth : labelWidth\r\n       widthHeightData.height = imgHeight >= labelHeight ? imgHeight : labelHeight\r\n     }\r\n   }\r\n  widthHeightData.width = (((widthHeightData.width + 20) <  componentRef!.clientWidth) || (imgWidth > componentRef!.clientWidth )) ? widthHeightData.width : componentRef!.clientWidth\r\n  return widthHeightData\r\n}\r\n}\r\n"],"sourceRoot":""}]}